<!DOCTYPE html><html lang="zh-CN" class="bg-[var(--page-bg)] text-[14px] md:text-[16px]" data-overlayscrollbars-initialize data-astro-cid-sckkx6r4 style="--bannerOffset: 15vh;--banner-height-home: 65vh;--banner-height: 35vh;--configHue: 240;--page-width: 90rem;"> <head><!-- 第三方分析脚本 - 延迟加载优化 --><script>
			// 使用 requestIdleCallback 延迟加载第三方脚本
			function loadAnalytics() {
				// Google Tag Manager
				(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KRX3XGVH');
				
				// Clarity
				(function(c,l,a,r,i,t,y){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);})(window, document, "clarity", "script", "tjr3vkhj8i");
			}
			
			// 在浏览器空闲时加载，或者在 3 秒后加载
			if ('requestIdleCallback' in window) {
				requestIdleCallback(loadAnalytics, { timeout: 3000 });
			} else {
				setTimeout(loadAnalytics, 3000);
			}
		</script><title>后端高级工程师面试专题14 - 编程学习笔记</title><meta charset="UTF-8"><meta name="description" content="第十四章 Spring-Mybatis 框架系列常见面试题"><meta name="author" content="黄雷"><meta property="og:site_name" content="编程学习笔记"><meta property="og:url" content="https://huanglei.work/posts/%E9%9D%A2%E8%AF%95%E9%A2%98/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%9814/"><meta property="og:title" content="后端高级工程师面试专题14 - 编程学习笔记"><meta property="og:description" content="第十四章 Spring-Mybatis 框架系列常见面试题"><meta property="og:type" content="article"><meta name="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://huanglei.work/posts/%E9%9D%A2%E8%AF%95%E9%A2%98/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%9814/"><meta name="twitter:title" content="后端高级工程师面试专题14 - 编程学习笔记"><meta name="twitter:description" content="第十四章 Spring-Mybatis 框架系列常见面试题"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v5.16.0"><link rel="icon" href="/favicon/favicon.ico" sizes="64x64" media="(prefers-color-scheme: light)"><link rel="icon" href="/favicon/favicon.ico" sizes="64x64" media="(prefers-color-scheme: dark)"><!-- Set the theme before the page is rendered to avoid a flash --><script>(function(){const DEFAULT_THEME = "light";
const LIGHT_MODE = "light";
const DARK_MODE = "dark";
const BANNER_HEIGHT_EXTEND = 30;
const PAGE_WIDTH = 90;
const configHue = 240;

			// Load the theme from local storage
			const theme = localStorage.getItem('theme') || DEFAULT_THEME;
			let isDark = false;
			switch (theme) {
				case LIGHT_MODE:
					document.documentElement.classList.remove('dark');
					isDark = false;
					break
				case DARK_MODE:
					document.documentElement.classList.add('dark');
					isDark = true;
					break
			}
			
			// Set the theme for Expressive Code based on current mode
			const expressiveTheme = isDark ? "github-dark" : "github-light";
			const currentTheme = document.documentElement.getAttribute("data-theme");
			
			// 只在主题不同时才更新，避免触发不必要的重绘
			if (currentTheme !== expressiveTheme) {
				document.documentElement.setAttribute("data-theme", expressiveTheme);
			}

			// Load the hue from local storage
			const hue = localStorage.getItem('hue') || configHue;
			document.documentElement.style.setProperty('--hue', hue);

			// calculate the --banner-height-extend, which needs to be a multiple of 4 to avoid blurry text
			let offset = Math.floor(window.innerHeight * (BANNER_HEIGHT_EXTEND / 100));
			offset = offset - offset % 4;
			document.documentElement.style.setProperty('--banner-height-extend', `${offset}px`);
		})();</script><!-- defines global css variables. This will be applied to <html> <body> and some other elements idk why --><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"后端高级工程师面试专题14","description":"第十四章 Spring-Mybatis 框架系列常见面试题","keywords":["后端高级工程师面试专题"],"author":{"@type":"Person","name":"黄雷","url":"https://huanglei.work/"},"datePublished":"2025-11-14","inLanguage":"zh-CN"}</script><!-- Pio 看板娘样式 - 仅在启用时加载 --><link rel="alternate" type="application/rss+xml" title="黄雷" href="https://huanglei.work/rss.xml"><!-- Umami Analytics --><link rel="stylesheet" href="/_astro/Layout.y4KPJ9hc.css">
<link rel="stylesheet" href="/_astro/Layout.DRe9SoLl.css">
<style>.password-protection[data-astro-cid-732embm3]{display:flex;justify-content:center;align-items:center;min-height:60vh;padding:2rem}.password-container[data-astro-cid-732embm3]{text-align:center;max-width:400px;width:100%;padding:2rem;border-radius:12px;background:transparent;border:1px solid var(--line-divider);box-shadow:none}.lock-icon[data-astro-cid-732embm3]{margin-bottom:1rem;color:var(--primary)}.password-container[data-astro-cid-732embm3] h2[data-astro-cid-732embm3]{margin-bottom:.5rem;color:#000000d9;font-size:1.5rem}.dark .password-container[data-astro-cid-732embm3] h2[data-astro-cid-732embm3]{color:#ffffffd9}.password-container[data-astro-cid-732embm3] p[data-astro-cid-732embm3]{margin-bottom:1.5rem;color:#000000bf;opacity:.8}.dark .password-container[data-astro-cid-732embm3] p[data-astro-cid-732embm3]{color:#ffffffbf}.password-input-group[data-astro-cid-732embm3]{display:flex;gap:.5rem;margin-bottom:1rem;align-items:stretch}.password-input[data-astro-cid-732embm3]{flex:1;min-width:0;padding:.75rem 1rem;border:1px solid var(--line-divider);border-radius:8px;background:transparent;color:#000000d9;font-size:1rem;transition:border-color .2s ease}.dark .password-input[data-astro-cid-732embm3]{color:#ffffffd9}.password-input[data-astro-cid-732embm3]::-moz-placeholder{color:#00000080}.password-input[data-astro-cid-732embm3]::placeholder{color:#00000080}.dark .password-input[data-astro-cid-732embm3]::-moz-placeholder{color:#ffffff80}.dark .password-input[data-astro-cid-732embm3]::placeholder{color:#ffffff80}.password-input[data-astro-cid-732embm3]:focus{outline:none;border-color:var(--primary)}.unlock-button[data-astro-cid-732embm3]{padding:.75rem 1.5rem;background:transparent;color:var(--primary);border:1px solid var(--primary);border-radius:8px;font-size:1rem;cursor:pointer;transition:border-color .2s,color .2s,background .2s;white-space:nowrap;flex-shrink:0;min-width:-moz-fit-content;min-width:fit-content;max-width:-moz-max-content;max-width:max-content}.unlock-button[data-astro-cid-732embm3]:hover{background:var(--primary);color:#fff;border-color:var(--primary)}.unlock-button[data-astro-cid-732embm3]:disabled{opacity:.6;cursor:not-allowed}.error-message[data-astro-cid-732embm3]{color:#ef4444;font-size:.875rem;margin-top:.5rem}.decrypted-content[data-astro-cid-732embm3]{animation:fadeIn .3s ease-in-out}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media(min-width:769px){.password-input-group[data-astro-cid-732embm3]{flex-wrap:nowrap}.unlock-button[data-astro-cid-732embm3]{max-width:40%}}@media(max-width:768px){.password-protection[data-astro-cid-732embm3]{padding:1rem;min-height:50vh}.password-container[data-astro-cid-732embm3]{max-width:none;width:100%;padding:1.5rem;margin:0 .5rem}.password-container[data-astro-cid-732embm3] h2[data-astro-cid-732embm3]{font-size:1.25rem;margin-bottom:.75rem}.password-container[data-astro-cid-732embm3] p[data-astro-cid-732embm3]{font-size:.9rem;margin-bottom:1.25rem}.password-input-group[data-astro-cid-732embm3]{flex-direction:column;gap:.75rem}.password-input[data-astro-cid-732embm3]{padding:.875rem 1rem;font-size:1rem;width:100%}.unlock-button[data-astro-cid-732embm3]{padding:.875rem 1rem;font-size:1rem;max-width:100%;width:100%;white-space:nowrap}.error-message[data-astro-cid-732embm3]{font-size:.8rem;text-align:center}}@media(max-width:480px){.password-protection[data-astro-cid-732embm3]{padding:.75rem}.password-container[data-astro-cid-732embm3]{padding:1.25rem;margin:0 .25rem}.password-container[data-astro-cid-732embm3] h2[data-astro-cid-732embm3]{font-size:1.125rem}.password-container[data-astro-cid-732embm3] p[data-astro-cid-732embm3]{font-size:.85rem}.password-input[data-astro-cid-732embm3],.unlock-button[data-astro-cid-732embm3]{padding:.75rem .875rem;font-size:.95rem}}
</style>
<link rel="stylesheet" href="/_astro/_page_.U-o3cxZ4.css">
<link rel="stylesheet" href="/_astro/_page_.CqcPXQ4e.css">
<link rel="stylesheet" href="/_astro/about.CLMvY_Mt.css">
<link rel="stylesheet" href="/_astro/_page_.Djju_2fB.css">
<style>.line-clamp-2[data-astro-cid-b6yaaygw]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.album-card[data-astro-cid-b6yaaygw]:hover{transform:translateY(-2px)}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.album-card[data-astro-cid-b6yaaygw]{animation:fadeInUp .3s ease-out}
.grid-layout[data-astro-cid-rgidg7mq]{display:grid;gap:1rem}.grid-layout[data-astro-cid-rgidg7mq][data-columns="2"]{grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}.grid-layout[data-astro-cid-rgidg7mq][data-columns="3"]{grid-template-columns:repeat(auto-fit,minmax(250px,1fr))}.grid-layout[data-astro-cid-rgidg7mq][data-columns="4"]{grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.masonry-layout[data-astro-cid-rgidg7mq]{-moz-columns:2;columns:2;-moz-column-gap:1rem;column-gap:1rem}@media(min-width:768px){.masonry-layout[data-astro-cid-rgidg7mq]{-moz-columns:3;columns:3}}@media(min-width:1024px){.masonry-layout[data-astro-cid-rgidg7mq][data-columns="4"]{-moz-columns:4;columns:4}}.masonry-layout[data-astro-cid-rgidg7mq] .photo-item[data-astro-cid-rgidg7mq]{-moz-column-break-inside:avoid;break-inside:avoid;margin-bottom:1rem}.grid-layout[data-astro-cid-rgidg7mq] .photo-container[data-astro-cid-rgidg7mq]{aspect-ratio:1}
.card-base[data-astro-cid-fepk5tcl]{container-type:inline-size}.anime-grid-container[data-astro-cid-fepk5tcl]{display:grid;grid-template-columns:repeat(2,1fr);transition:all .5s cubic-bezier(.4,0,.2,1)}@container (min-width: 900px){.anime-grid-container[data-astro-cid-fepk5tcl].single-sidebar{grid-template-columns:repeat(5,1fr)}}@container (min-width: 600px) and (max-width: 899px){.anime-grid-container[data-astro-cid-fepk5tcl].single-sidebar{grid-template-columns:repeat(3,1fr)}}@container (max-width: 599px){.anime-grid-container[data-astro-cid-fepk5tcl].single-sidebar{grid-template-columns:repeat(2,1fr)}}@container (min-width: 950px){.anime-grid-container[data-astro-cid-fepk5tcl].both-sidebar{grid-template-columns:repeat(5,1fr)}}@container (min-width: 650px) and (max-width: 949px){.anime-grid-container[data-astro-cid-fepk5tcl].both-sidebar{grid-template-columns:repeat(4,1fr)}}@container (min-width: 480px) and (max-width: 649px){.anime-grid-container[data-astro-cid-fepk5tcl].both-sidebar{grid-template-columns:repeat(3,1fr)}}@container (max-width: 479px){.anime-grid-container[data-astro-cid-fepk5tcl].both-sidebar{grid-template-columns:repeat(2,1fr)}}.filter-container[data-astro-cid-fepk5tcl]{display:flex;flex-wrap:wrap;gap:.5rem}.filter-tag[data-astro-cid-fepk5tcl]{padding:.5rem 1rem;border:1px solid var(--line-divider);border-radius:var(--radius-large);background:var(--btn-regular-bg);color:var(--btn-content);font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;white-space:nowrap}.filter-tag[data-astro-cid-fepk5tcl]:hover:not(.active){background:var(--btn-hover-bg);border-color:var(--primary);transform:translateY(-1px)}.filter-tag[data-astro-cid-fepk5tcl].active{background:var(--primary);color:#fff;border-color:var(--primary)}.filter-tag[data-astro-cid-fepk5tcl].active:hover{background:var(--primary)!important;color:#fff!important;border-color:var(--primary)!important;transform:translateY(-1px)}[data-astro-cid-fepk5tcl][data-anime-status]{transition:all .5s cubic-bezier(.4,0,.2,1)}#anime-list-container[data-astro-cid-fepk5tcl].grid-mode [data-astro-cid-fepk5tcl][data-anime-status]:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 12px 24px #00000026;z-index:10;transition:all .3s cubic-bezier(.4,0,.2,1)}#anime-list-container[data-astro-cid-fepk5tcl].list-mode [data-astro-cid-fepk5tcl][data-anime-status]:hover{transform:translate(8px) scale(1.01);box-shadow:0 8px 16px #0000001a;z-index:10;transition:all .3s cubic-bezier(.4,0,.2,1)}[data-astro-cid-fepk5tcl][data-anime-status].anime-hidden{display:none}[data-astro-cid-fepk5tcl][data-anime-status].anime-animating{transition:transform .5s cubic-bezier(.4,0,.2,1),opacity .5s cubic-bezier(.4,0,.2,1)}[data-astro-cid-fepk5tcl][data-anime-status].anime-fade-out{opacity:0;transform:scale(.8);pointer-events:none;transition:opacity .3s cubic-bezier(.4,0,.2,1),transform .3s cubic-bezier(.4,0,.2,1)}[data-astro-cid-fepk5tcl][data-anime-status].anime-fade-in{opacity:0;transform:scale(.8)}[data-astro-cid-fepk5tcl][data-anime-status].anime-fade-in-active{opacity:1;transform:scale(1)}
.filter-container[data-astro-cid-komnyuwm]{display:flex;flex-wrap:wrap;gap:.75rem;margin-bottom:1rem}.filter-tag[data-astro-cid-komnyuwm]{padding:.625rem 1.25rem;border:1px solid var(--line-divider);border-radius:var(--radius-large);background:var(--btn-regular-bg);color:var(--btn-content);font-size:.875rem;font-weight:500;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);white-space:nowrap;position:relative;overflow:hidden}.filter-tag[data-astro-cid-komnyuwm]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:var(--primary);opacity:0;transition:opacity .3s ease;z-index:-1}.filter-tag[data-astro-cid-komnyuwm]:hover:not(.active){background:var(--btn-hover-bg);border-color:var(--primary);transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.filter-tag[data-astro-cid-komnyuwm].active{background:var(--primary);color:#fff;border-color:var(--primary);transform:translateY(-1px);box-shadow:0 4px 12px rgba(var(--color-primary-rgb),.3)}.filter-tag[data-astro-cid-komnyuwm].active:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(var(--color-primary-rgb),.4)}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.onload-animation[data-astro-cid-komnyuwm]{animation:fadeInUp .6s cubic-bezier(.25,.1,.25,1) forwards;opacity:0}.line-clamp-2[data-astro-cid-komnyuwm]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.device-card[data-astro-cid-komnyuwm]:after{content:"";position:absolute;inset:0;border-radius:.75rem;background:linear-gradient(135deg,rgba(var(--color-primary-rgb),.05),transparent);opacity:0;transition:opacity .4s ease;pointer-events:none}.device-card[data-astro-cid-komnyuwm]:hover:after{opacity:1}.device-card[data-astro-cid-komnyuwm] h3[data-astro-cid-komnyuwm]{text-shadow:0 1px 2px rgba(0,0,0,.05)}@media(max-width:640px){.filter-container[data-astro-cid-komnyuwm]{gap:.5rem}.filter-tag[data-astro-cid-komnyuwm]{padding:.5rem 1rem;font-size:.8rem}.device-card[data-astro-cid-komnyuwm] .relative[data-astro-cid-komnyuwm].p-6.pb-0{padding:1rem 1rem 0}.device-card[data-astro-cid-komnyuwm] .p-6[data-astro-cid-komnyuwm].pt-4{padding:1rem}}@media(prefers-color-scheme:dark){.device-card[data-astro-cid-komnyuwm]:hover{box-shadow:0 4px 12px #00000026}}
.card-base[data-astro-cid-pyfuvgrx]{background:var(--card-bg);border:1px solid var(--line-divider);transition:all .3s ease}.moments-header[data-astro-cid-pyfuvgrx]{padding:1rem;border-radius:8px;background:linear-gradient(135deg,var(--primary) 0%,var(--primary-dark, var(--primary)) 100%);color:#fff;position:relative;overflow:hidden}.header-content[data-astro-cid-pyfuvgrx]{display:flex;justify-content:space-between;align-items:center;position:relative;z-index:1}.moments-title[data-astro-cid-pyfuvgrx]{color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.1)}.moments-subtitle[data-astro-cid-pyfuvgrx]{color:#ffffffe6}.stat-number[data-astro-cid-pyfuvgrx]{color:#fff}.stat-label[data-astro-cid-pyfuvgrx]{color:#fffc}.image-item[data-astro-cid-pyfuvgrx] img[data-astro-cid-pyfuvgrx]{transition:transform .3s ease}.image-item[data-astro-cid-pyfuvgrx]:hover img[data-astro-cid-pyfuvgrx]{transform:scale(1.05)}.action-btn[data-astro-cid-pyfuvgrx]{background:none;border:none;cursor:pointer;color:var(--text-muted)}.action-btn[data-astro-cid-pyfuvgrx]:hover{color:var(--primary)}@media(max-width:640px){.moments-header[data-astro-cid-pyfuvgrx]{padding:.75rem}.header-content[data-astro-cid-pyfuvgrx]{flex-direction:column;text-align:center;gap:.75rem}.moment-images[data-astro-cid-pyfuvgrx]{grid-template-columns:repeat(2,1fr)}.moment-footer[data-astro-cid-pyfuvgrx]{flex-direction:column;align-items:flex-start;gap:.5rem}}@media(min-width:641px)and (max-width:900px){.moments-header[data-astro-cid-pyfuvgrx]{padding:1.25rem}.header-content[data-astro-cid-pyfuvgrx]{display:flex;justify-content:space-between;align-items:center}.moment-item[data-astro-cid-pyfuvgrx]{padding:1.5rem}.moment-images[data-astro-cid-pyfuvgrx]{grid-template-columns:repeat(3,1fr);gap:.75rem;max-width:500px}.moment-text[data-astro-cid-pyfuvgrx]{font-size:1rem;line-height:1.7}.moment-footer[data-astro-cid-pyfuvgrx]{margin-top:1rem}}@media(min-width:901px){.moments-header[data-astro-cid-pyfuvgrx]{padding:1.5rem}.moment-item[data-astro-cid-pyfuvgrx]{padding:2rem}.moment-images[data-astro-cid-pyfuvgrx]{grid-template-columns:repeat(auto-fit,minmax(150px,1fr));max-width:600px;gap:1rem}.moment-text[data-astro-cid-pyfuvgrx]{font-size:1.1rem;line-height:1.8}}@media(max-width:480px){.moment-item[data-astro-cid-pyfuvgrx]{border-radius:8px}.moments-header[data-astro-cid-pyfuvgrx]{border-radius:6px}}
.friend-card[data-astro-cid-spp2p3no]{animation:fadeInUp .5s ease-out forwards;opacity:0}.friend-card[data-astro-cid-spp2p3no]:nth-child(1){animation-delay:.05s}.friend-card[data-astro-cid-spp2p3no]:nth-child(2){animation-delay:.1s}.friend-card[data-astro-cid-spp2p3no]:nth-child(3){animation-delay:.15s}.friend-card[data-astro-cid-spp2p3no]:nth-child(4){animation-delay:.2s}.friend-card[data-astro-cid-spp2p3no]:nth-child(5){animation-delay:.25s}.friend-card[data-astro-cid-spp2p3no]:nth-child(6){animation-delay:.3s}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}#friend-search[data-astro-cid-spp2p3no]:focus{box-shadow:0 0 0 3px var(--primary) / .1}.filter-container[data-astro-cid-spp2p3no]{display:flex;flex-wrap:wrap;gap:.5rem}.filter-tag[data-astro-cid-spp2p3no]{padding:.5rem 1rem;border:1px solid var(--line-divider);border-radius:var(--radius-large);background:var(--btn-regular-bg);color:var(--btn-content);font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;white-space:nowrap}.filter-tag[data-astro-cid-spp2p3no]:hover:not(.active){background:var(--btn-hover-bg);border-color:var(--primary);transform:translateY(-1px)}.filter-tag[data-astro-cid-spp2p3no].active{background:var(--primary);color:#fff;border-color:var(--primary)}.filter-tag[data-astro-cid-spp2p3no].active:hover{background:var(--primary)!important;color:#fff!important;border-color:var(--primary)!important;transform:translateY(-1px)}
.line-clamp-1[data-astro-cid-aid3sr62]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.line-clamp-2[data-astro-cid-aid3sr62]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.line-clamp-2[data-astro-cid-qlh7ngej]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}@keyframes pulse{0%{transform:scale(1);box-shadow:0 0 #6366f166}70%{transform:scale(1.05);box-shadow:0 0 0 10px #6366f100}to{transform:scale(1);box-shadow:0 0 #6366f100}}.timeline-node[data-astro-cid-qlh7ngej]{animation:pulse 2s infinite}.timeline-horizontal-scroll[data-astro-cid-qlh7ngej]::-webkit-scrollbar{height:8px}.timeline-horizontal-scroll[data-astro-cid-qlh7ngej]::-webkit-scrollbar-track{background:#e5e7eb;border-radius:4px}.timeline-horizontal-scroll[data-astro-cid-qlh7ngej]::-webkit-scrollbar-thumb{background:hsl(var(--hue),70%,60%);border-radius:4px}
.skills-container[data-astro-cid-xahix5fp]{position:relative}.skills-grid-container[data-astro-cid-xahix5fp]{grid-template-columns:1fr;transition:grid-template-columns .3s ease}@container (min-width: 640px){.skills-grid-container[data-astro-cid-xahix5fp]{grid-template-columns:repeat(2,1fr)}}@container (min-width: 900px){.skills-grid-container[data-astro-cid-xahix5fp]{grid-template-columns:repeat(3,1fr)}}
</style>
<link rel="stylesheet" href="/_astro/_page_.DodusQ_4.css"><script type="module" src="/_astro/page.BUqocEu6.js"></script></head> <body class=" min-h-screen " style="font-family: ZenMaruGothic-Medium, &#34;萝莉体 第二版&#34;, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;; --bannerOffset: 15vh;--banner-height-home: 65vh;--banner-height: 35vh;--configHue: 240;--page-width: 90rem;" data-overlayscrollbars-initialize data-astro-cid-sckkx6r4> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KRX3XGVH" height="0" width="0" style="display:none;visibility:hidden; --bannerOffset: 15vh;--banner-height-home: 65vh;--banner-height: 35vh;--configHue: 240;--page-width: 90rem;" data-astro-cid-sckkx6r4></iframe></noscript> <!-- 页面顶部渐变高光效果 - 只在full和semifull模式下显示 --> <div class="top-gradient-highlight" data-astro-cid-sckkx6r4 style="--bannerOffset: 15vh;--banner-height-home: 65vh;--banner-height: 35vh;--configHue: 240;--page-width: 90rem;"></div> <!-- 全局配置载体 --><div id="config-carrier" data-hue="240" data-hide-code-blocks-during-transition="true"></div> <script>(function(){const tocEnable = true;
const tocDepth = 2;
const tocUseJapaneseBadge = true;

  // 将TOC配置传递到前端
  window.siteConfig = window.siteConfig || {};
  window.siteConfig.toc = {
    enable: tocEnable,
    depth: tocDepth,
    useJapaneseBadge: tocUseJapaneseBadge
  };
  
  // 添加调试信息
  console.log('TOC Config:', window.siteConfig.toc);
})();</script> <!-- 引入Umami Share工具脚本 --> <script src="/js/umami-share.js"></script>  <script>(function(){const navbarTransparentMode = "semifull";
const defaultWallpaperMode = "banner";
const defaultPostListLayout = "list";

	// 立即执行，在页面渲染前应用壁纸模式和布局模式，避免闪烁
	(function() {
		const wallpaperMode = localStorage.getItem('wallpaperMode') || defaultWallpaperMode;
		const body = document.body;
		
		// 定义 banner 高度常量（与 constants.ts 保持一致）
		const BANNER_HEIGHT = 35;
		const BANNER_HEIGHT_EXTEND = 30;
		const BANNER_HEIGHT_HOME = BANNER_HEIGHT + BANNER_HEIGHT_EXTEND;
		const MAIN_PANEL_OVERLAPS_BANNER_HEIGHT = 3.5;
		
		// 立即应用 body 类，确保首次渲染就是正确的状态
		switch(wallpaperMode) {
			case 'banner':
				body.classList.add('enable-banner');
				body.classList.remove('wallpaper-transparent', 'no-banner-mode');
				break;
			case 'fullscreen':
				body.classList.remove('enable-banner');
				body.classList.add('wallpaper-transparent', 'no-banner-mode');
				break;
			case 'none':
				body.classList.remove('enable-banner', 'wallpaper-transparent');
				body.classList.add('no-banner-mode');
				break;
		}
		
		// 立即调整主内容区域位置和布局模式（避免闪烁和位置错误）
		// 使用 requestAnimationFrame 确保 DOM 准备好
		requestAnimationFrame(function() {
			const mainContent = document.querySelector('.absolute.w-full.z-30.pointer-events-none');
			if (mainContent) {
				if (wallpaperMode === 'banner') {
					// 让主内容区域从banner顶部开始，这样波浪线会自然覆盖内容上部
					mainContent.style.top = `${BANNER_HEIGHT}vh`;
				} else {
					// fullscreen 或 none 模式
					mainContent.style.top = '5.5rem';
				}
			}
			
			// 立即应用布局模式，避免闪烁
			const mainGrid = document.getElementById('main-grid');
			if (mainGrid) {
				const savedLayout = localStorage.getItem('postListLayout');
				const currentLayout = savedLayout || defaultPostListLayout;
				mainGrid.setAttribute('data-layout-mode', currentLayout);
				
				// 根据布局模式显示或隐藏右侧边栏
				const rightSidebar = document.querySelector('.right-sidebar-container');
				if (rightSidebar) {
					if (currentLayout === 'grid') {
						rightSidebar.classList.add('hidden-in-grid-mode');
					} else {
						rightSidebar.classList.remove('hidden-in-grid-mode');
					}
				}
				
				// 同时更新文章列表容器的CSS类
				const postListContainer = document.getElementById('post-list-container');
				if (postListContainer) {
					postListContainer.classList.remove('list-mode', 'grid-mode');
					
					if (currentLayout === 'grid') {
						postListContainer.classList.add('grid-mode');
						postListContainer.classList.add('grid', 'grid-cols-1', 'lg:grid-cols-2', 'gap-6');
						postListContainer.classList.remove('flex', 'flex-col');
					} else {
						postListContainer.classList.add('list-mode');
						postListContainer.classList.add('flex', 'flex-col');
						postListContainer.classList.remove('grid', 'grid-cols-1', 'lg:grid-cols-2', 'gap-6');
					}
				}
			}
		});
	})();
	
	// 根据壁纸模式动态设置 banner 和全屏壁纸的显示
	const wallpaperMode = localStorage.getItem('wallpaperMode') || defaultWallpaperMode;
	
	// 在 DOM 加载后执行
	if (document.readyState === 'loading') {
		document.addEventListener('DOMContentLoaded', applyWallpaperMode);
	} else {
		applyWallpaperMode();
	}
	
	function applyWallpaperMode() {
		var wallpaperMode = localStorage.getItem('wallpaperMode') || defaultWallpaperMode;
		var bannerWrapper = document.getElementById('banner-wrapper');
		var fullscreenWallpaper = document.querySelector('[data-fullscreen-wallpaper]');
		var navbar = document.getElementById('navbar');
		var body = document.body;
		var mainContent = document.querySelector('.absolute.w-full.z-30.pointer-events-none');
		
		// 强制重排以确保样式正确应用
		var forceReflow = function() {
			void document.body.offsetHeight;
		};
		
		switch(wallpaperMode) {
			case 'banner':
				// 显示 banner，隐藏全屏壁纸
				if (bannerWrapper) {
					bannerWrapper.style.display = 'block';
				}
				if (fullscreenWallpaper) {
					fullscreenWallpaper.style.display = 'none';
				}
				// 先移除body类，避免CSS冲突
				body.classList.remove('wallpaper-transparent');
				body.classList.remove('no-banner-mode');
				// 强制重排
				forceReflow();
				// 移除内联样式，让CSS完全接管
				if (mainContent) {
					mainContent.style.removeProperty('top');
				}
				// 再添加enable-banner类
				body.classList.add('enable-banner');
				// navbar 恢复原始透明模式（从 config 读取）
				if (navbar) {
					navbar.removeAttribute('data-dynamic-transparent');
					// 恢复 config 中设置的 data-transparent-mode
					navbar.setAttribute('data-transparent-mode', navbarTransparentMode);
					// 如果是 semifull 模式，重新初始化滚动检测
					if (navbarTransparentMode === 'semifull' && window.initSemifullScrollDetection) {
						window.initSemifullScrollDetection();
					}
				}
				// 强制重排以确保CSS变量正确更新
				forceReflow();
				break;
				
			case 'fullscreen':
				// 隐藏 banner，显示全屏壁纸
				if (bannerWrapper) {
					bannerWrapper.style.display = 'none';
				}
				if (fullscreenWallpaper) {
					fullscreenWallpaper.style.display = 'block';
				}
				// 先移除body类，避免CSS冲突
				body.classList.remove('enable-banner');
				// 强制重排
				forceReflow();
				// 移除内联样式，让CSS完全接管
				if (mainContent) {
					mainContent.style.removeProperty('top');
				}
				// 再添加wallpaper-transparent和no-banner-mode类
				body.classList.add('wallpaper-transparent');
				body.classList.add('no-banner-mode');
				// navbar 强制设置为 semi 透明模式（忽略 config 配置）
				if (navbar) {
					navbar.setAttribute('data-dynamic-transparent', 'semi');
					// 强制移除 config 中的 data-transparent-mode 影响
					navbar.removeAttribute('data-transparent-mode');
				}
				// 强制重排以确保CSS变量正确更新
				forceReflow();
				break;
				
			case 'none':
				// 隐藏所有壁纸
				if (bannerWrapper) {
					bannerWrapper.style.display = 'none';
				}
				if (fullscreenWallpaper) {
					fullscreenWallpaper.style.display = 'none';
				}
				// 先移除body类，避免CSS冲突
				body.classList.remove('enable-banner');
				body.classList.remove('wallpaper-transparent');
				// 强制重排
				forceReflow();
				// 移除内联样式，让CSS完全接管
				if (mainContent) {
					mainContent.style.removeProperty('top');
				}
				// 再添加no-banner-mode类
				body.classList.add('no-banner-mode');
				// navbar 强制设置为不透明（忽略 config 配置）
				if (navbar) {
					navbar.setAttribute('data-dynamic-transparent', 'none');
					// 强制移除 config 中的 data-transparent-mode 影响
					navbar.removeAttribute('data-transparent-mode');
				}
				// 强制重排以确保CSS变量正确更新
				forceReflow();
				break;
		}
	}
	
	// 监听壁纸模式变化，立即应用（不重载页面）
	window.addEventListener('wallpaper-mode-change', function(event) {
		applyWallpaperMode();
	});
	
	// 支持 Swup 页面过渡 - 在内容替换之前就应用布局，避免闪烁
	function setupSwupLayoutSync() {
		if (typeof window !== 'undefined' && window.swup) {
			// 关键：在 content:replace 之前（animation:out:start）就准备好布局状态
			window.swup.hooks.on('animation:out:start', function() {
				// 保存当前布局状态，以便在新页面中立即应用
				const savedLayout = localStorage.getItem('postListLayout');
				if (savedLayout) {
					window.__pendingLayoutMode = savedLayout;
				}
			});
			
			// 在内容替换后立即应用布局，不等待其他脚本
			window.swup.hooks.on('content:replace', function() {
				const mainGrid = document.getElementById('main-grid');
				if (mainGrid) {
					const currentLayout = window.__pendingLayoutMode || localStorage.getItem('postListLayout') || defaultPostListLayout;
					mainGrid.setAttribute('data-layout-mode', currentLayout);
					
					const rightSidebar = document.querySelector('.right-sidebar-container');
					if (rightSidebar) {
						if (currentLayout === 'grid') {
							rightSidebar.classList.add('hidden-in-grid-mode');
						} else {
							rightSidebar.classList.remove('hidden-in-grid-mode');
						}
					}
					
					// 关键：同时更新文章列表容器的CSS类
					const postListContainer = document.getElementById('post-list-container');
					if (postListContainer) {
						// 移除现有布局类
						postListContainer.classList.remove('list-mode', 'grid-mode');
						
						if (currentLayout === 'grid') {
							postListContainer.classList.add('grid-mode');
							postListContainer.classList.add('grid', 'grid-cols-1', 'lg:grid-cols-2', 'gap-6');
							postListContainer.classList.remove('flex', 'flex-col');
						} else {
							postListContainer.classList.add('list-mode');
							postListContainer.classList.add('flex', 'flex-col');
							postListContainer.classList.remove('grid', 'grid-cols-1', 'lg:grid-cols-2', 'gap-6');
						}
					}
					
					// 清除临时状态
					delete window.__pendingLayoutMode;
				}
			});
			
			return true;
		}
		return false;
	}
	
	// 尝试立即设置，如果失败则延迟重试
	if (!setupSwupLayoutSync()) {
		const checkSwup = setInterval(function() {
			if (setupSwupLayoutSync()) {
				clearInterval(checkSwup);
			}
		}, 50);
		
		setTimeout(function() {
			clearInterval(checkSwup);
		}, 2000);
	}
	
	// 支持 Swup 页面过渡
	document.addEventListener('swup:page:view', function() {
		applyWallpaperMode();
		
		// 在Swup页面切换时也要重新应用布局模式
		requestAnimationFrame(function() {
			const mainGrid = document.getElementById('main-grid');
			if (mainGrid) {
				const savedLayout = localStorage.getItem('postListLayout');
				const currentLayout = savedLayout || defaultPostListLayout;
				mainGrid.setAttribute('data-layout-mode', currentLayout);
				
				if (currentLayout === 'grid') {
					const rightSidebar = document.querySelector('.right-sidebar-container');
					if (rightSidebar) {
						rightSidebar.classList.add('hidden-in-grid-mode');
					}
				} else {
					const rightSidebar = document.querySelector('.right-sidebar-container');
					if (rightSidebar) {
						rightSidebar.classList.remove('hidden-in-grid-mode');
					}
				}
			}
		});
	});
	// 在页面完全加载后，再次确认布局模式是否正确
	if (document.readyState === 'loading') {
		document.addEventListener('DOMContentLoaded', function() {
			const mainGrid = document.getElementById('main-grid');
			if (mainGrid) {
				const savedLayout = localStorage.getItem('postListLayout');
				const currentLayout = savedLayout || defaultPostListLayout;
				mainGrid.setAttribute('data-layout-mode', currentLayout);
				
				if (currentLayout === 'grid') {
					const rightSidebar = document.querySelector('.right-sidebar-container');
					if (rightSidebar) {
						rightSidebar.classList.add('hidden-in-grid-mode');
					}
				}
			}
		});
	}
})();</script>  <div class="fixed inset-0 w-full h-full overflow-hidden pointer-events-none" style="z-index: -1; opacity: 0.8;" data-fullscreen-wallpaper> <script>
// 根据 localStorage 立即设置全屏壁纸初始显示状态，避免闪烁
(function() {
	const wallpaperMode = localStorage.getItem('wallpaperMode') || 'banner';
	const fullscreenWallpaper = document.currentScript.parentElement;
	if (wallpaperMode !== 'fullscreen') {
		fullscreenWallpaper.style.display = 'none';
	}
})();
</script> <!-- 桌面端壁纸 --> <div class="hidden lg:block w-full h-full relative"> <img src="/assets/desktop-banner/1.webp" alt="Desktop wallpaper 1" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="0" style="filter: blur(1px);"><img src="/assets/desktop-banner/2.webp" alt="Desktop wallpaper 2" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="1" style="filter: blur(1px);"><img src="/assets/desktop-banner/3.webp" alt="Desktop wallpaper 3" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="2" style="filter: blur(1px);"><img src="/assets/desktop-banner/4.webp" alt="Desktop wallpaper 4" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="3" style="filter: blur(1px);"><img src="/assets/desktop-banner/5.webp" alt="Desktop wallpaper 5" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="4" style="filter: blur(1px);"><img src="/assets/desktop-banner/6.webp" alt="Desktop wallpaper 6" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="5" style="filter: blur(1px);"> </div> <!-- 移动端壁纸 --> <div class="block lg:hidden w-full h-full relative"> <img src="/assets/mobile-banner/1.webp" alt="Mobile wallpaper 1" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="0" style="filter: blur(1px);"><img src="/assets/mobile-banner/2.webp" alt="Mobile wallpaper 2" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="1" style="filter: blur(1px);"><img src="/assets/mobile-banner/3.webp" alt="Mobile wallpaper 3" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="2" style="filter: blur(1px);"><img src="/assets/mobile-banner/4.webp" alt="Mobile wallpaper 4" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="3" style="filter: blur(1px);"><img src="/assets/mobile-banner/5.webp" alt="Mobile wallpaper 5" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="4" style="filter: blur(1px);"><img src="/assets/mobile-banner/6.webp" alt="Mobile wallpaper 6" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="5" style="filter: blur(1px);"> </div> </div> <script>(function(){const carouselInterval = 5;

		// 全屏壁纸轮播逻辑
		function initFullscreenWallpaperCarousel() {
			const wallpaperContainer = document.querySelector('[data-fullscreen-wallpaper]');
			if (!wallpaperContainer) return;

			const desktopItems = wallpaperContainer.querySelectorAll('.hidden.lg\\:block [data-carousel-item]');
			const mobileItems = wallpaperContainer.querySelectorAll('.block.lg\\:hidden [data-carousel-item]');

			function startCarousel(items) {
				if (items.length <= 1) return;

				let currentIndex = 0;
				
				// 初始化：显示第一张，隐藏其他
				items.forEach((item, index) => {
					item.style.opacity = index === 0 ? '1' : '0';
				});

				// 开始轮播
				setInterval(() => {
					// 隐藏当前图片
					items[currentIndex].style.opacity = '0';
					
					// 切换到下一张
					currentIndex = (currentIndex + 1) % items.length;
					
					// 显示下一张图片
					items[currentIndex].style.opacity = '1';
				}, carouselInterval * 1000);
			}

			// 分别为桌面端和移动端启动轮播
			if (desktopItems.length > 0) {
				startCarousel(desktopItems);
			}
			if (mobileItems.length > 0) {
				startCarousel(mobileItems);
			}
		}

		// 页面加载完成后初始化轮播
		if (document.readyState === 'loading') {
			document.addEventListener('DOMContentLoaded', initFullscreenWallpaperCarousel);
		} else {
			initFullscreenWallpaperCarousel();
		}
	})();</script>  <!-- Iconify图标库加载器 --><script>(function(){const preloadIcons = [];
const timeout = 10000;
const retryCount = 3;

  // 全局图标加载逻辑
  (function() {
    'use strict';
    
    // 避免重复加载
    if (window.__iconifyLoaderInitialized) {
      return;
    }
    window.__iconifyLoaderInitialized = true;

    // 图标加载器类
    class IconifyLoader {
      constructor() {
        this.isLoaded = false;
        this.isLoading = false;
        this.loadPromise = null;
        this.observers = new Set();
        this.preloadQueue = new Set();
      }

      async load(options = {}) {
        const { timeout: loadTimeout = timeout, retryCount: maxRetries = retryCount } = options;
        
        if (this.isLoaded) {
          return Promise.resolve();
        }

        if (this.isLoading && this.loadPromise) {
          return this.loadPromise;
        }

        this.isLoading = true;
        this.loadPromise = this.loadWithRetry(loadTimeout, maxRetries);

        try {
          await this.loadPromise;
          this.isLoaded = true;
          this.notifyObservers();
          await this.processPreloadQueue();
        } catch (error) {
          console.error('Failed to load Iconify:', error);
          throw error;
        } finally {
          this.isLoading = false;
        }
      }

      async loadWithRetry(timeout, retryCount) {
        for (let attempt = 1; attempt <= retryCount; attempt++) {
          try {
            await this.loadScript(timeout);
            return;
          } catch (error) {
            console.warn(`Iconify load attempt ${attempt} failed:`, error);
            
            if (attempt === retryCount) {
              throw new Error(`Failed to load Iconify after ${retryCount} attempts`);
            }
            
            await new Promise(resolve => setTimeout(resolve, 1000));
          }
        }
      }

      loadScript(timeout) {
        return new Promise((resolve, reject) => {
          // 检查是否已经存在
          if (this.isIconifyReady()) {
            resolve();
            return;
          }

          const existingScript = document.querySelector('script[src*="iconify-icon"]');
          if (existingScript) {
            this.waitForIconifyReady().then(resolve).catch(reject);
            return;
          }

          const script = document.createElement('script');
          script.src = 'https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js';
          script.async = true;
          script.crossOrigin = 'anonymous';

          const timeoutId = setTimeout(() => {
            script.remove();
            reject(new Error('Script load timeout'));
          }, timeout);

          script.onload = () => {
            clearTimeout(timeoutId);
            this.waitForIconifyReady().then(resolve).catch(reject);
          };

          script.onerror = () => {
            clearTimeout(timeoutId);
            script.remove();
            reject(new Error('Script load error'));
          };

          document.head.appendChild(script);
        });
      }

      waitForIconifyReady(maxWait = 5000) {
        return new Promise((resolve, reject) => {
          const startTime = Date.now();
          
          const checkReady = () => {
            if (this.isIconifyReady()) {
              resolve();
              return;
            }
            
            if (Date.now() - startTime > maxWait) {
              reject(new Error('Iconify initialization timeout'));
              return;
            }
            
            setTimeout(checkReady, 50);
          };
          
          checkReady();
        });
      }

      isIconifyReady() {
        return typeof window !== 'undefined' && 
               'customElements' in window && 
               customElements.get('iconify-icon') !== undefined;
      }

      onLoad(callback) {
        if (this.isLoaded) {
          callback();
        } else {
          this.observers.add(callback);
        }
      }

      notifyObservers() {
        this.observers.forEach(callback => {
          try {
            callback();
          } catch (error) {
            console.error('Error in icon load observer:', error);
          }
        });
        this.observers.clear();
      }

      addToPreloadQueue(icons) {
        if (Array.isArray(icons)) {
          icons.forEach(icon => this.preloadQueue.add(icon));
        } else {
          this.preloadQueue.add(icons);
        }
        
        if (this.isLoaded) {
          this.processPreloadQueue();
        }
      }

      async processPreloadQueue() {
        if (this.preloadQueue.size === 0) return;
        
        const iconsToLoad = Array.from(this.preloadQueue);
        this.preloadQueue.clear();
        
        await this.preloadIcons(iconsToLoad);
      }

      async preloadIcons(icons) {
        if (!this.isLoaded || icons.length === 0) return;

        return new Promise((resolve) => {
          let loadedCount = 0;
          const totalIcons = icons.length;
          const tempElements = [];

          const cleanup = () => {
            tempElements.forEach(el => {
              if (el.parentNode) {
                el.parentNode.removeChild(el);
              }
            });
          };

          const checkComplete = () => {
            loadedCount++;
            if (loadedCount >= totalIcons) {
              cleanup();
              resolve();
            }
          };

          icons.forEach(icon => {
            const tempIcon = document.createElement('iconify-icon');
            tempIcon.setAttribute('icon', icon);
            tempIcon.style.cssText = 'position:absolute;top:-9999px;left:-9999px;width:1px;height:1px;opacity:0;pointer-events:none;';
            
            tempIcon.addEventListener('load', checkComplete);
            tempIcon.addEventListener('error', checkComplete);
            
            tempElements.push(tempIcon);
            document.body.appendChild(tempIcon);
          });

          // 设置超时清理
          setTimeout(() => {
            cleanup();
            resolve();
          }, 3000);
        });
      }
    }

    // 创建全局实例
    window.__iconifyLoader = new IconifyLoader();

    // 立即开始加载
    window.__iconifyLoader.load().catch(error => {
      console.error('Failed to initialize Iconify:', error);
    });

    // 如果有预加载图标，添加到队列
    if (preloadIcons && preloadIcons.length > 0) {
      window.__iconifyLoader.addToPreloadQueue(preloadIcons);
    }

    // 导出便捷函数到全局
    window.loadIconify = () => window.__iconifyLoader.load();
    window.preloadIcons = (icons) => window.__iconifyLoader.addToPreloadQueue(icons);
    window.onIconifyReady = (callback) => window.__iconifyLoader.onLoad(callback);

    // 页面可见性变化时重新检查
    document.addEventListener('visibilitychange', () => {
      if (!document.hidden && !window.__iconifyLoader.isLoaded) {
        window.__iconifyLoader.load().catch(console.error);
      }
    });

  })();
})();</script> <!-- 为不支持JavaScript的情况提供备用方案 --><noscript><style>
    iconify-icon {
      display: none;
    }
    .icon-fallback {
      display: inline-block;
    }
  </style></noscript>   <div id="top-row" class="z-50 pointer-events-none relative transition-all duration-700 max-w-[var(--page-width)] px-0 md:px-4 mx-auto" data-astro-cid-haiuh7kc> <div id="navbar-wrapper" class="pointer-events-auto sticky top-0 transition-all" data-astro-cid-haiuh7kc> <div id="navbar" class="z-50 onload-animation" data-transparent-mode="semifull" data-is-home="false"> <div class="absolute h-8 left-0 right-0 -top-8 bg-[var(--card-bg)] transition"></div> <!-- used for onload animation --> <div class="!overflow-visible max-w-[var(--page-width)] h-[4.5rem] mx-auto flex items-center justify-between px-4"> <a href="/" class="btn-plain scale-animation rounded-lg h-[3.25rem] px-5 font-bold active:scale-95"> <div class="flex flex-row items-center text-md">   <img src="/assets/home/1731498949746.png" alt="个人学习笔记（仅自用）" class="h-[1.75rem] w-[1.75rem] mb-1 mr-2 object-contain" loading="lazy"> <span class="dark:text-white text-black">个人学习笔记（仅自用）</span>  </div> </a> <div class="hidden md:flex items-center space-x-1"> <div class="dropdown-container" data-dropdown data-astro-cid-qou34bit> <a aria-label="主页" href="/" class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1.1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:home">   <symbol id="ai:material-symbols:home" viewBox="0 0 24 24"><path fill="currentColor" d="M4 21V9l8-6l8 6v12h-6v-7h-4v7z"/></symbol><use href="#ai:material-symbols:home"></use>  </svg> 主页  </div> </a> </div>  <script type="module">document.addEventListener("DOMContentLoaded",function(){const i=document.querySelectorAll("[data-dropdown]");i.forEach(t=>{const e=t.querySelector("[data-dropdown-trigger]"),o=t.querySelector("[data-dropdown-menu]"),n=t.querySelectorAll(".dropdown-item");!e||!o||(e.addEventListener("keydown",function(r){r.key==="Enter"||r.key===" "?(r.preventDefault(),d(t,e,o)):r.key==="ArrowDown"?(r.preventDefault(),u(t,e,o),n.length>0&&n[0].focus()):r.key==="Escape"&&a(t,e,o)}),n.forEach((r,l)=>{r.addEventListener("keydown",function(s){if(s.key==="ArrowDown"){s.preventDefault();const c=(l+1)%n.length;n[c].focus()}else if(s.key==="ArrowUp"){s.preventDefault();const c=(l-1+n.length)%n.length;n[c].focus()}else s.key==="Escape"&&(a(t,e,o),e.focus())})}))}),document.addEventListener("click",function(t){i.forEach(e=>{if(!e.contains(t.target)){const o=e.querySelector("[data-dropdown-trigger]"),n=e.querySelector("[data-dropdown-menu]");o&&n&&a(e,o,n)}})})});function d(i,t,e){t.getAttribute("aria-expanded")==="true"?a(i,t,e):u(i,t,e)}function u(i,t,e){t.setAttribute("aria-expanded","true"),e.classList.remove("opacity-0","invisible","pointer-events-none","translate-y-[-8px]"),e.classList.add("opacity-100","visible","pointer-events-auto","translate-y-0")}function a(i,t,e){t.setAttribute("aria-expanded","false"),e.classList.add("opacity-0","invisible","pointer-events-none","translate-y-[-8px]"),e.classList.remove("opacity-100","visible","pointer-events-auto","translate-y-0")}</script><div class="dropdown-container" data-dropdown data-astro-cid-qou34bit> <a aria-label="归档" href="/archive/" class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1.1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:archive">   <symbol id="ai:material-symbols:archive" viewBox="0 0 24 24"><path fill="currentColor" d="m12 18l4-4l-1.4-1.4l-1.6 1.6V10h-2v4.2l-1.6-1.6L8 14zm-7 3q-.825 0-1.412-.587T3 19V6.525q0-.35.113-.675t.337-.6L4.7 3.725q.275-.35.687-.538T6.25 3h11.5q.45 0 .863.188t.687.537l1.25 1.525q.225.275.338.6t.112.675V19q0 .825-.587 1.413T19 21zm.4-15h13.2l-.85-1H6.25z"/></symbol><use href="#ai:material-symbols:archive"></use>  </svg> 归档  </div> </a> </div>  <div class="dropdown-container" data-dropdown data-astro-cid-qou34bit> <button class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95 dropdown-trigger" aria-expanded="false" aria-haspopup="true" data-dropdown-trigger data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1.1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:link">   <symbol id="ai:material-symbols:link" viewBox="0 0 24 24"><path fill="currentColor" d="M11 17H7q-2.075 0-3.537-1.463T2 12t1.463-3.537T7 7h4v2H7q-1.25 0-2.125.875T4 12t.875 2.125T7 15h4zm-3-4v-2h8v2zm5 4v-2h4q1.25 0 2.125-.875T20 12t-.875-2.125T17 9h-4V7h4q2.075 0 3.538 1.463T22 12t-1.463 3.538T17 17z"/></symbol><use href="#ai:material-symbols:link"></use>  </svg> 链接 <svg width="1em" height="1em" class="text-[1.25rem] transition-transform duration-200 dropdown-arrow ml-1" data-astro-cid-qou34bit="true" data-icon="material-symbols:keyboard-arrow-down-rounded">   <symbol id="ai:material-symbols:keyboard-arrow-down-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M12 14.975q-.2 0-.375-.062T11.3 14.7l-4.6-4.6q-.275-.275-.275-.7t.275-.7t.7-.275t.7.275l3.9 3.9l3.9-3.9q.275-.275.7-.275t.7.275t.275.7t-.275.7l-4.6 4.6q-.15.15-.325.213t-.375.062"/></symbol><use href="#ai:material-symbols:keyboard-arrow-down-rounded"></use>  </svg> </div> </button>
		<div class="dropdown-menu" data-dropdown-menu data-astro-cid-qou34bit> <div class="dropdown-content" data-astro-cid-qou34bit> <a href="https://javaguide.cn/home.html" target="_blank" class="dropdown-item" aria-label="JavaGuide" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="0.75em" height="1em" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="fa6-brands:java">   <symbol id="ai:fa6-brands:java" viewBox="0 0 384 512"><path fill="currentColor" d="M277.74 312.9c9.8-6.7 23.4-12.5 23.4-12.5s-38.7 7-77.2 10.2c-47.1 3.9-97.7 4.7-123.1 1.3c-60.1-8 33-30.1 33-30.1s-36.1-2.4-80.6 19c-52.5 25.4 130 37 224.5 12.1m-85.4-32.1c-19-42.7-83.1-80.2 0-145.8C296 53.2 242.84 0 242.84 0c21.5 84.5-75.6 110.1-110.7 162.6c-23.9 35.9 11.7 74.4 60.2 118.2m114.6-176.2c.1 0-175.2 43.8-91.5 140.2c24.7 28.4-6.5 54-6.5 54s62.7-32.4 33.9-72.9c-26.9-37.8-47.5-56.6 64.1-121.3m-6.1 270.5a12.2 12.2 0 0 1-2 2.6c128.3-33.7 81.1-118.9 19.8-97.3a17.33 17.33 0 0 0-8.2 6.3a70.5 70.5 0 0 1 11-3c31-6.5 75.5 41.5-20.6 91.4M348 437.4s14.5 11.9-15.9 21.2c-57.9 17.5-240.8 22.8-291.6.7c-18.3-7.9 16-19 26.8-21.3c11.2-2.4 17.7-2 17.7-2c-20.3-14.3-131.3 28.1-56.4 40.2C232.84 509.4 401 461.3 348 437.4M124.44 396c-78.7 22 47.9 67.4 148.1 24.5a186 186 0 0 1-28.2-13.8c-44.7 8.5-65.4 9.1-106 4.5c-33.5-3.8-13.9-15.2-13.9-15.2m179.8 97.2c-78.7 14.8-175.8 13.1-233.3 3.6c0-.1 11.8 9.7 72.4 13.6c92.2 5.9 233.8-3.3 237.1-46.9c0 0-6.4 16.5-76.2 29.7M260.64 353c-59.2 11.4-93.5 11.1-136.8 6.6c-33.5-3.5-11.6-19.7-11.6-19.7c-86.8 28.8 48.2 61.4 169.5 25.9a60.4 60.4 0 0 1-21.1-12.8"/></symbol><use href="#ai:fa6-brands:java"></use>  </svg> <span data-astro-cid-qou34bit>JavaGuide</span> </div> <svg width="1em" height="1em" class="text-[0.75rem] text-black/25 dark:text-white/25" data-astro-cid-qou34bit="true" data-icon="fa6-solid:arrow-up-right-from-square">   <symbol id="ai:fa6-solid:arrow-up-right-from-square" viewBox="0 0 512 512"><path fill="currentColor" d="M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32h82.7L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3V192c0 17.7 14.3 32 32 32s32-14.3 32-32V32c0-17.7-14.3-32-32-32zM80 32C35.8 32 0 67.8 0 112v320c0 44.2 35.8 80 80 80h320c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v112c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16h112c17.7 0 32-14.3 32-32s-14.3-32-32-32z"/></symbol><use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a><a href="https://time.geekbang.org" target="_blank" class="dropdown-item" aria-label="极客时间" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="simple-icons:lightning">   <symbol id="ai:simple-icons:lightning" viewBox="0 0 24 24"><path fill="currentColor" d="M12 0L1.75 6v12L12 24l10.25-6V6zm-1.775 18l1.08-4.657l-2.428-2.397L13.79 6l-1.082 4.665l2.414 2.384z"/></symbol><use href="#ai:simple-icons:lightning"></use>  </svg> <span data-astro-cid-qou34bit>极客时间</span> </div> <svg width="1em" height="1em" viewBox="0 0 512 512" class="text-[0.75rem] text-black/25 dark:text-white/25" data-astro-cid-qou34bit="true" data-icon="fa6-solid:arrow-up-right-from-square">   <use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a><a href="https://www.programmercarl.com/" target="_blank" class="dropdown-item" aria-label="代码随想录" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="simple-icons:devpost">   <symbol id="ai:simple-icons:devpost" viewBox="0 0 24 24"><path fill="currentColor" d="M6.002 1.61L0 12.004L6.002 22.39h11.996L24 12.004L17.998 1.61zm1.593 4.084h3.947c3.605 0 6.276 1.695 6.276 6.31c0 4.436-3.21 6.302-6.456 6.302H7.595zm2.517 2.449v7.714h1.241c2.646 0 3.862-1.55 3.862-3.861c.009-2.569-1.096-3.853-3.767-3.853Z"/></symbol><use href="#ai:simple-icons:devpost"></use>  </svg> <span data-astro-cid-qou34bit>代码随想录</span> </div> <svg width="1em" height="1em" viewBox="0 0 512 512" class="text-[0.75rem] text-black/25 dark:text-white/25" data-astro-cid-qou34bit="true" data-icon="fa6-solid:arrow-up-right-from-square">   <use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a><a href="https://bilibili.com" target="_blank" class="dropdown-item" aria-label="Bilibili" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" viewBox="0 0 512 512" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="fa6-brands:bilibili">   <use href="#ai:fa6-brands:bilibili"></use>  </svg> <span data-astro-cid-qou34bit>Bilibili</span> </div> <svg width="1em" height="1em" viewBox="0 0 512 512" class="text-[0.75rem] text-black/25 dark:text-white/25" data-astro-cid-qou34bit="true" data-icon="fa6-solid:arrow-up-right-from-square">   <use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a><a href="https://icon-sets.iconify.design" target="_blank" class="dropdown-item" aria-label="iconify" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="simple-icons:iconify">   <symbol id="ai:simple-icons:iconify" viewBox="0 0 24 24"><path fill="currentColor" d="M2.857 19.429V9.642q.35-.089.67-.295l1.616-1.045v9.984h4.571v2.285H4c-.63 0-1.143-.512-1.143-1.142m7.429-8.572a1.715 1.715 0 1 1 3.43.001a1.715 1.715 0 0 1-3.43 0m-5.143-8V1.143a1.143 1.143 0 0 1 2.286 0v.235zm9.143 15.429h4.571V8.302l1.616 1.045q.32.206.67.295v9.787c0 .63-.512 1.143-1.143 1.143h-5.714Zm-.004-17.028l8.053 5.211a1.144 1.144 0 0 1-1.242 1.919l-8.041-5.203l.19-.123a2.28 2.28 0 0 0 1.04-1.804M11.38.183a1.144 1.144 0 0 1 1.242 1.92L2.907 8.387a1.144 1.144 0 0 1-1.242-1.919Zm2.6 22.103H22c.473 0 .857.384.857.857A.86.86 0 0 1 22 24H2a.86.86 0 0 1-.857-.857c0-.473.384-.857.857-.857h8.02a2.286 2.286 0 0 0 3.96 0m-.836-8.81v7.667a1.143 1.143 0 0 1-2.286 0v-7.667a2.85 2.85 0 0 0 1.143.238c.406 0 .793-.085 1.143-.238"/></symbol><use href="#ai:simple-icons:iconify"></use>  </svg> <span data-astro-cid-qou34bit>iconify</span> </div> <svg width="1em" height="1em" viewBox="0 0 512 512" class="text-[0.75rem] text-black/25 dark:text-white/25" data-astro-cid-qou34bit="true" data-icon="fa6-solid:arrow-up-right-from-square">   <use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a> </div> </div> </div>  <div class="dropdown-container" data-dropdown data-astro-cid-qou34bit> <button class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95 dropdown-trigger" aria-expanded="false" aria-haspopup="true" data-dropdown-trigger data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1.1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:info">   <symbol id="ai:material-symbols:info" viewBox="0 0 24 24"><path fill="currentColor" d="M11 17h2v-6h-2zm1-8q.425 0 .713-.288T13 8t-.288-.712T12 7t-.712.288T11 8t.288.713T12 9m0 13q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22"/></symbol><use href="#ai:material-symbols:info"></use>  </svg> 关于 <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.25rem] transition-transform duration-200 dropdown-arrow ml-1" data-astro-cid-qou34bit="true" data-icon="material-symbols:keyboard-arrow-down-rounded">   <use href="#ai:material-symbols:keyboard-arrow-down-rounded"></use>  </svg> </div> </button>
		<div class="dropdown-menu" data-dropdown-menu data-astro-cid-qou34bit> <div class="dropdown-content" data-astro-cid-qou34bit> <a href="/friends/" class="dropdown-item" aria-label="Friends" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:group">   <symbol id="ai:material-symbols:group" viewBox="0 0 24 24"><path fill="currentColor" d="M1 20v-2.8q0-.85.438-1.562T2.6 14.55q1.55-.775 3.15-1.162T9 13t3.25.388t3.15 1.162q.725.375 1.163 1.088T17 17.2V20zm18 0v-3q0-1.1-.612-2.113T16.65 13.15q1.275.15 2.4.513t2.1.887q.9.5 1.375 1.112T23 17v3zM9 12q-1.65 0-2.825-1.175T5 8t1.175-2.825T9 4t2.825 1.175T13 8t-1.175 2.825T9 12m10-4q0 1.65-1.175 2.825T15 12q-.275 0-.7-.062t-.7-.138q.675-.8 1.038-1.775T15 8t-.362-2.025T13.6 4.2q.35-.125.7-.163T15 4q1.65 0 2.825 1.175T19 8"/></symbol><use href="#ai:material-symbols:group"></use>  </svg> <span data-astro-cid-qou34bit>友链</span> </div>  </a> </div> </div> </div>   </div> <div class="flex"> <!--<SearchPanel client:load>--> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="2sEHt9" component-url="/_astro/Search.uJ2gJGgR.js" component-export="default" renderer-url="/_astro/client.svelte.-v9OL0KP.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;Search&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> <astro-island uid="AB7P6" component-url="/_astro/MobileTOC.DRRwLsLa.js" component-export="default" renderer-url="/_astro/client.svelte.-v9OL0KP.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;MobileTOC&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> <button aria-label="Display Settings" class="btn-plain scale-animation rounded-lg h-11 w-11 active:scale-90" id="display-settings-switch"> <svg width="1em" height="1em" class="text-[1.25rem]" data-icon="material-symbols:palette-outline">   <symbol id="ai:material-symbols:palette-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M12 22q-2.05 0-3.875-.788t-3.187-2.15t-2.15-3.187T2 12q0-2.075.813-3.9t2.2-3.175T8.25 2.788T12.2 2q2 0 3.775.688t3.113 1.9t2.125 2.875T22 11.05q0 2.875-1.75 4.413T16 17h-1.85q-.225 0-.312.125t-.088.275q0 .3.375.863t.375 1.287q0 1.25-.687 1.85T12 22m-5.5-9q.65 0 1.075-.425T8 11.5t-.425-1.075T6.5 10t-1.075.425T5 11.5t.425 1.075T6.5 13m3-4q.65 0 1.075-.425T11 7.5t-.425-1.075T9.5 6t-1.075.425T8 7.5t.425 1.075T9.5 9m5 0q.65 0 1.075-.425T16 7.5t-.425-1.075T14.5 6t-1.075.425T13 7.5t.425 1.075T14.5 9m3 4q.65 0 1.075-.425T19 11.5t-.425-1.075T17.5 10t-1.075.425T16 11.5t.425 1.075T17.5 13M12 20q.225 0 .363-.125t.137-.325q0-.35-.375-.825T11.75 17.3q0-1.05.725-1.675T14.25 15H16q1.65 0 2.825-.962T20 11.05q0-3.025-2.312-5.038T12.2 4Q8.8 4 6.4 6.325T4 12q0 3.325 2.338 5.663T12 20"/></symbol><use href="#ai:material-symbols:palette-outline"></use>  </svg> </button> <astro-island uid="Z1Plv77" component-url="/_astro/LayoutSwitchButton.2suEjd8f.js" component-export="default" renderer-url="/_astro/client.svelte.-v9OL0KP.js" props="{&quot;currentLayout&quot;:[0,&quot;list&quot;]}" ssr client="only" opts="{&quot;name&quot;:&quot;LayoutSwitchButton&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> <!-- 整体布局方案切换按钮：根据配置决定在哪些设备上显示 --> <div class="hidden md:block"> <astro-island uid="1p8jpX" component-url="/_astro/WallpaperSwitch.BQ4WZBe6.js" component-export="default" renderer-url="/_astro/client.svelte.-v9OL0KP.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;WallpaperSwitch&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> </div> <astro-island uid="Z2lAPgf" component-url="/_astro/LightDarkSwitch.-Q_WuRRb.js" component-export="default" renderer-url="/_astro/client.svelte.-v9OL0KP.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;LightDarkSwitch&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> <button aria-label="Menu" name="Nav Menu" class="btn-plain scale-animation rounded-lg w-11 h-11 active:scale-90 md:!hidden" id="nav-menu-switch"> <svg width="1em" height="1em" class="text-[1.25rem]" data-icon="material-symbols:menu-rounded">   <symbol id="ai:material-symbols:menu-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M4 18q-.425 0-.712-.288T3 17t.288-.712T4 16h16q.425 0 .713.288T21 17t-.288.713T20 18zm0-5q-.425 0-.712-.288T3 12t.288-.712T4 11h16q.425 0 .713.288T21 12t-.288.713T20 13zm0-5q-.425 0-.712-.288T3 7t.288-.712T4 6h16q.425 0 .713.288T21 7t-.288.713T20 8z"/></symbol><use href="#ai:material-symbols:menu-rounded"></use>  </svg> </button> </div> <div id="nav-menu-panel" class="float-panel float-panel-closed absolute transition-all fixed right-4 px-2 py-2 max-h-[80vh] overflow-y-auto" data-astro-cid-h5lvqo6o> <div class="mobile-menu-item" data-astro-cid-h5lvqo6o> <!-- 普通链接项目 -->
                <a href="/" class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8
                    hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition
                " data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:home">   <use href="#ai:material-symbols:home"></use>  </svg> 主页 </div> <svg width="1em" height="1em" class="transition text-[1.25rem] text-[var(--primary)]" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:chevron-right-rounded">   <symbol id="ai:material-symbols:chevron-right-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M12.6 12L8.7 8.1q-.275-.275-.275-.7t.275-.7t.7-.275t.7.275l4.6 4.6q.15.15.213.325t.062.375t-.062.375t-.213.325l-4.6 4.6q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7z"/></symbol><use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg>  </a> </div><div class="mobile-menu-item" data-astro-cid-h5lvqo6o> <!-- 普通链接项目 -->
                <a href="/archive/" class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8
                    hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition
                " data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:archive">   <use href="#ai:material-symbols:archive"></use>  </svg> 归档 </div> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition text-[1.25rem] text-[var(--primary)]" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg>  </a> </div><div class="mobile-menu-item" data-astro-cid-h5lvqo6o> <!-- 有子菜单的项目 -->
                <div class="mobile-dropdown" data-mobile-dropdown data-astro-cid-h5lvqo6o> <button class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8 w-full text-left
                            hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" data-mobile-dropdown-trigger aria-expanded="false" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:link">   <use href="#ai:material-symbols:link"></use>  </svg> 链接 </div> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition text-[1.25rem] text-[var(--primary)] mobile-dropdown-arrow duration-200" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:keyboard-arrow-down-rounded">   <use href="#ai:material-symbols:keyboard-arrow-down-rounded"></use>  </svg> </button> <div class="mobile-submenu" data-mobile-submenu data-astro-cid-h5lvqo6o> <a href="https://javaguide.cn/home.html" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" target="_blank" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="0.75em" height="1em" viewBox="0 0 384 512" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="fa6-brands:java">   <use href="#ai:fa6-brands:java"></use>  </svg> JavaGuide </div> <svg width="1em" height="1em" viewBox="0 0 512 512" class="transition text-[0.75rem] text-black/25 dark:text-white/25 -translate-x-1" data-astro-cid-h5lvqo6o="true" data-icon="fa6-solid:arrow-up-right-from-square">   <use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a><a href="https://time.geekbang.org" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" target="_blank" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="simple-icons:lightning">   <use href="#ai:simple-icons:lightning"></use>  </svg> 极客时间 </div> <svg width="1em" height="1em" viewBox="0 0 512 512" class="transition text-[0.75rem] text-black/25 dark:text-white/25 -translate-x-1" data-astro-cid-h5lvqo6o="true" data-icon="fa6-solid:arrow-up-right-from-square">   <use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a><a href="https://www.programmercarl.com/" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" target="_blank" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="simple-icons:devpost">   <use href="#ai:simple-icons:devpost"></use>  </svg> 代码随想录 </div> <svg width="1em" height="1em" viewBox="0 0 512 512" class="transition text-[0.75rem] text-black/25 dark:text-white/25 -translate-x-1" data-astro-cid-h5lvqo6o="true" data-icon="fa6-solid:arrow-up-right-from-square">   <use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a><a href="https://bilibili.com" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" target="_blank" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 512 512" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="fa6-brands:bilibili">   <use href="#ai:fa6-brands:bilibili"></use>  </svg> Bilibili </div> <svg width="1em" height="1em" viewBox="0 0 512 512" class="transition text-[0.75rem] text-black/25 dark:text-white/25 -translate-x-1" data-astro-cid-h5lvqo6o="true" data-icon="fa6-solid:arrow-up-right-from-square">   <use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a><a href="https://icon-sets.iconify.design" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" target="_blank" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="simple-icons:iconify">   <use href="#ai:simple-icons:iconify"></use>  </svg> iconify </div> <svg width="1em" height="1em" viewBox="0 0 512 512" class="transition text-[0.75rem] text-black/25 dark:text-white/25 -translate-x-1" data-astro-cid-h5lvqo6o="true" data-icon="fa6-solid:arrow-up-right-from-square">   <use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a> </div> </div> </div><div class="mobile-menu-item" data-astro-cid-h5lvqo6o> <!-- 有子菜单的项目 -->
                <div class="mobile-dropdown" data-mobile-dropdown data-astro-cid-h5lvqo6o> <button class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8 w-full text-left
                            hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" data-mobile-dropdown-trigger aria-expanded="false" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:info">   <use href="#ai:material-symbols:info"></use>  </svg> 关于 </div> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition text-[1.25rem] text-[var(--primary)] mobile-dropdown-arrow duration-200" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:keyboard-arrow-down-rounded">   <use href="#ai:material-symbols:keyboard-arrow-down-rounded"></use>  </svg> </button> <div class="mobile-submenu" data-mobile-submenu data-astro-cid-h5lvqo6o> <a href="/friends/" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:group">   <use href="#ai:material-symbols:group"></use>  </svg> 友链 </div>  </a> </div> </div> </div> </div>  <script type="module">document.addEventListener("DOMContentLoaded",function(){const r=document.querySelectorAll("[data-mobile-dropdown]");r.forEach(e=>{const t=e.querySelector("[data-mobile-dropdown-trigger]"),d=e.querySelector("[data-mobile-submenu]");!t||!d||t.addEventListener("click",function(o){o.preventDefault();const u=e.getAttribute("data-expanded")==="true";r.forEach(a=>{if(a!==e){a.setAttribute("data-expanded","false");const i=a.querySelector("[data-mobile-dropdown-trigger]");i&&i.setAttribute("aria-expanded","false")}});const n=!u;e.setAttribute("data-expanded",n.toString()),t.setAttribute("aria-expanded",n.toString())})})});</script> <astro-island uid="Z2umX4K" component-url="/_astro/DisplaySettings.DzEv6cTv.js" component-export="default" renderer-url="/_astro/client.svelte.-v9OL0KP.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;DisplaySettings&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> </div> </div> <script type="module" src="/_astro/Navbar.astro_astro_type_script_index_0_lang.CjFOzVWH.js"></script> <script>(function(){const scriptUrl = "/pagefind/pagefind.js";

async function loadPagefind() {
    try {
        const response = await fetch(scriptUrl, { method: 'HEAD' });
        if (!response.ok) {
            throw new Error(`Pagefind script not found: ${response.status}`);
        }

        const pagefind = await import(scriptUrl);

        await pagefind.options({
            excerptLength: 20
        });

        window.pagefind = pagefind;

        document.dispatchEvent(new CustomEvent('pagefindready'));
        console.log('Pagefind loaded and initialized successfully, event dispatched.');
    } catch (error) {
        console.error('Failed to load Pagefind:', error);
        window.pagefind = {
            search: () => Promise.resolve({ results: [] }),
            options: () => Promise.resolve(),
        };
        document.dispatchEvent(new CustomEvent('pagefindloaderror'));
        console.log('Pagefind load error, event dispatched.');
    }
}

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', loadPagefind);
} else {
    loadPagefind();
}
})();</script> </div> </div>  <div id="banner-wrapper" class="absolute z-10 w-full transition duration-700 overflow-hidden mobile-hide-banner" style="top: -30vh" data-astro-cid-haiuh7kc> <!-- Carousel mode for multiple images -->
        <div id="banner-carousel" class="relative h-full w-full" data-astro-cid-haiuh7kc> <ul class="carousel-list h-full w-full" data-astro-cid-haiuh7kc> <li class="carousel-item absolute inset-0 transition-all duration-500 opacity-100 scale-100" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop --> <div class="block lg:hidden object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/mobile-banner/1.webp" alt="Mobile banner image 1" class="w-full h-full object-cover" style="object-position: center"> </div> <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/desktop-banner/1.webp" alt="Desktop banner image 1" class="w-full h-full object-cover" style="object-position: center"> </div> </li><li class="carousel-item absolute inset-0 transition-all duration-500 opacity-0 scale-110" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop --> <div class="block lg:hidden object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/mobile-banner/2.webp" alt="Mobile banner image 2" class="w-full h-full object-cover" style="object-position: center"> </div> <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/desktop-banner/2.webp" alt="Desktop banner image 2" class="w-full h-full object-cover" style="object-position: center"> </div> </li><li class="carousel-item absolute inset-0 transition-all duration-500 opacity-0 scale-110" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop --> <div class="block lg:hidden object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/mobile-banner/3.webp" alt="Mobile banner image 3" class="w-full h-full object-cover" style="object-position: center"> </div> <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/desktop-banner/3.webp" alt="Desktop banner image 3" class="w-full h-full object-cover" style="object-position: center"> </div> </li><li class="carousel-item absolute inset-0 transition-all duration-500 opacity-0 scale-110" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop --> <div class="block lg:hidden object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/mobile-banner/4.webp" alt="Mobile banner image 4" class="w-full h-full object-cover" style="object-position: center"> </div> <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/desktop-banner/4.webp" alt="Desktop banner image 4" class="w-full h-full object-cover" style="object-position: center"> </div> </li><li class="carousel-item absolute inset-0 transition-all duration-500 opacity-0 scale-110" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop --> <div class="block lg:hidden object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/mobile-banner/5.webp" alt="Mobile banner image 5" class="w-full h-full object-cover" style="object-position: center"> </div> <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/desktop-banner/5.webp" alt="Desktop banner image 5" class="w-full h-full object-cover" style="object-position: center"> </div> </li><li class="carousel-item absolute inset-0 transition-all duration-500 opacity-0 scale-110" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop --> <div class="block lg:hidden object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/mobile-banner/6.webp" alt="Mobile banner image 6" class="w-full h-full object-cover" style="object-position: center"> </div> <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/desktop-banner/6.webp" alt="Desktop banner image 6" class="w-full h-full object-cover" style="object-position: center"> </div> </li> </ul> </div> <!-- Home page text overlay --> <div class="banner-text-overlay absolute inset-0 z-20 flex items-center justify-center hidden" data-astro-cid-haiuh7kc> <div class="w-4/5 lg:w-3/4 text-center mb-0" data-astro-cid-haiuh7kc> <div class="flex flex-col" data-astro-cid-haiuh7kc> <h1 class="banner-title text-6xl lg:text-8xl text-white drop-shadow-lg mb-2 lg:mb-4" data-astro-cid-haiuh7kc> 美しいミズキ </h1> <h2 class="banner-subtitle text-xl lg:text-3xl text-white/90 drop-shadow-md" data-astro-cid-haiuh7kc> <span class="inline-block min-h-[1.2em]" data-astro-cid-haiuh7kc> <span class="typewriter " data-text="[&#34;特別なことはないけど、君がいると十分です&#34;,&#34;今でもあなたは私の光&#34;,&#34;君ってさ、知らないうちに私の毎日になってたよ&#34;,&#34;君と話すと、なんか毎日がちょっと楽しくなるんだ&#34;,&#34;今日はなんでもない日。でも、ちょっとだけいい日&#34;]" data-speed="100" data-delete-speed="50" data-pause-time="2000" data-astro-cid-4iv2rnoh></span> <script type="module">class n{element;texts;currentTextIndex=0;speed;deleteSpeed;pauseTime;currentIndex=0;isDeleting=!1;timeoutId=null;constructor(t){this.element=t;const e=t.dataset.text||"";try{const i=JSON.parse(e);this.texts=Array.isArray(i)?i:[e]}catch{this.texts=[e]}this.speed=parseInt(t.dataset.speed||"100"),this.deleteSpeed=parseInt(t.dataset.deleteSpeed||"50"),this.pauseTime=parseInt(t.dataset.pauseTime||"2000"),this.texts.length>1&&!this.isTypewriterEnabled()?this.showRandomText():this.start()}isTypewriterEnabled(){return this.element.dataset.speed!==void 0||this.element.dataset.deleteSpeed!==void 0||this.element.dataset.pauseTime!==void 0}showRandomText(){const t=Math.floor(Math.random()*this.texts.length);this.element.textContent=this.texts[t]}start(){this.texts.length!==0&&this.type()}getCurrentText(){return this.texts[this.currentTextIndex]||""}type(){const t=this.getCurrentText();this.isDeleting?this.currentIndex>0?(this.currentIndex--,this.element.textContent=t.substring(0,this.currentIndex),this.timeoutId=window.setTimeout(()=>this.type(),this.deleteSpeed)):(this.isDeleting=!1,this.currentTextIndex=(this.currentTextIndex+1)%this.texts.length,this.timeoutId=window.setTimeout(()=>this.type(),this.speed)):this.currentIndex<t.length?(this.currentIndex++,this.element.textContent=t.substring(0,this.currentIndex),this.timeoutId=window.setTimeout(()=>this.type(),this.speed)):this.texts.length>1?(this.isDeleting=!0,this.timeoutId=window.setTimeout(()=>this.type(),this.pauseTime)):this.texts.length===1&&this.texts[0]===""&&(this.element.innerHTML="&nbsp;")}destroy(){this.timeoutId&&clearTimeout(this.timeoutId)}}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".typewriter").forEach(t=>{new n(t)})});document.addEventListener("swup:contentReplaced",()=>{document.querySelectorAll(".typewriter").forEach(t=>{new n(t)})});</script>  </span> </h2> </div> </div> </div> <!-- Water waves effect --> <div class="waves absolute -bottom-[1px] h-[10vh] max-h-[9.375rem] min-h-[3.125rem] w-full md:h-[15vh]" id="header-waves" style="transform: translateZ(0); will-change: fill;" data-astro-cid-haiuh7kc> <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 20 150 32" preserveAspectRatio="none" shape-rendering="auto" style="transform: translateZ(0); backface-visibility: hidden;" data-astro-cid-haiuh7kc> <defs data-astro-cid-haiuh7kc> <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v48h-352z" data-astro-cid-haiuh7kc></path> </defs> <g class="parallax" style="transform: translateZ(0);" data-astro-cid-haiuh7kc> <use xlink:href="#gentle-wave" x="48" y="0" class="opacity-25 fill-[var(--page-bg)]" style="animation-delay: -2s; animation-duration: 7s; will-change: transform;" data-astro-cid-haiuh7kc></use> <use xlink:href="#gentle-wave" x="48" y="3" class="opacity-50 fill-[var(--page-bg)]" style="animation-delay: -3s; animation-duration: 10s; will-change: transform;" data-astro-cid-haiuh7kc></use> <use xlink:href="#gentle-wave" x="48" y="5" class="opacity-75 fill-[var(--page-bg)]" style="animation-delay: -4s; animation-duration: 13s; will-change: transform;" data-astro-cid-haiuh7kc></use> <use xlink:href="#gentle-wave" x="48" y="7" class="fill-[var(--page-bg)]" style="animation-delay: -5s; animation-duration: 20s; will-change: transform;" data-astro-cid-haiuh7kc></use> </g> </svg> </div> </div>  <div class="absolute w-full z-30 pointer-events-none mobile-main-no-banner  " style="top: 35vh" data-astro-cid-haiuh7kc> <!-- The pointer-events-none here prevent blocking the click event of the TOC --> <div class="relative max-w-[var(--page-width)] mx-auto pointer-events-auto" data-astro-cid-haiuh7kc> <div id="main-grid" class="transition duration-700 w-full left-0 right-0 grid grid-cols-1 grid-cols-1 lg:grid-cols-[17.5rem_1fr] lg:grid-cols-[17.5rem_1fr_17.5rem] grid-rows-[auto_1fr_auto] lg:grid-rows-[auto] mx-auto gap-4 px-2 md:px-4  mobile-both-sidebar" data-layout-mode="list" data-astro-cid-haiuh7kc> <!-- Banner image credit -->  <div id="sidebar" class="mb-4 row-start-2 row-end-3 col-span-1 onload-animation block block row-start-2 row-end-3 col-span-1 lg:block lg:row-start-1 lg:row-end-2 lg:max-w-[17.5rem] lg:col-start-1 lg:col-end-2  w-full" data-astro-cid-gfmxq3pg> <!-- 顶部固定组件区域 --> <div class="flex flex-col w-full gap-4 mb-4" data-astro-cid-gfmxq3pg> <div class="card-base p-3"> <a aria-label="Go to About Page" href="/about/" class="group block relative mx-auto mt-1 lg:mx-0 lg:mt-0 mb-3
       max-w-[12rem] lg:max-w-none overflow-hidden rounded-xl active:scale-95"> <div class="absolute transition pointer-events-none group-hover:bg-black/30 group-active:bg-black/50
        w-full h-full z-50 flex items-center justify-center"> <svg width="1.13em" height="1em" class="transition opacity-0 scale-90 group-hover:scale-100 group-hover:opacity-100 text-white text-5xl" data-icon="fa6-regular:address-card">   <symbol id="ai:fa6-regular:address-card" viewBox="0 0 576 512"><path fill="currentColor" d="M512 80c8.8 0 16 7.2 16 16v320c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V96c0-8.8 7.2-16 16-16zM64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64zm144 224a64 64 0 1 0 0-128a64 64 0 1 0 0 128m-32 32c-44.2 0-80 35.8-80 80c0 8.8 7.2 16 16 16h192c8.8 0 16-7.2 16-16c0-44.2-35.8-80-80-80zm200-144c-13.3 0-24 10.7-24 24s10.7 24 24 24h80c13.3 0 24-10.7 24-24s-10.7-24-24-24zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24h80c13.3 0 24-10.7 24-24s-10.7-24-24-24z"/></symbol><use href="#ai:fa6-regular:address-card"></use>  </svg> </div> <div class="mx-auto lg:w-full h-full lg:mt-0  overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div> <img src="/_astro/avatar.cDMEfbtr_Zm7kId.webp" alt="Profile Image of the Author" style="object-position: center" loading="lazy" decoding="async" fetchpriority="auto" width="1260" height="1260" class="w-full h-full object-cover">  </div> </a> <div class="px-2"> <div class="font-bold text-xl text-center mb-1 dark:text-neutral-50 transition">黄雷</div> <div class="h-1 w-5 bg-[var(--primary)] mx-auto rounded-full mb-2 transition"></div> <div class="text-center text-neutral-400 mb-2.5 transition"> <span class="typewriter inline-block" data-text="Java &#38; AI开发者 | Python达人 | 前端小白 | 热爱创新与学习" data-speed="80" data-delete-speed="50" data-pause-time="2000" data-astro-cid-4iv2rnoh></span>   </div> <div class="flex gap-2 justify-center mb-1"> <a rel="me" aria-label="Bilibli" href="https://www.bilibili.com" target="_blank" class="btn-regular rounded-lg h-10 w-10 active:scale-90"> <svg width="1em" height="1em" class="text-[1.5rem]" data-icon="fa6-brands:bilibili">   <symbol id="ai:fa6-brands:bilibili" viewBox="0 0 512 512"><path fill="currentColor" d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1c-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79c0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0q13.2 0 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0q13.2 0 21.9 8.603c5.7 5.737 8.6 12.997 8.6 21.797c0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1m-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5c-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8c-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8s9.7-14.3 10.1-23.5zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2c-6.2 6.3-14 9.5-23.6 9.5s-17.5-3.2-23.6-9.5s-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2s13.2-9.6 23.3-10c9.2.4 17 3.7 23.3 10m191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2s-14 9.5-23.6 9.5s-17.4-3.2-23.6-9.5c-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2s14.1-9.6 23.3-10c9.2.4 17 3.7 23.3 10"/></symbol><use href="#ai:fa6-brands:bilibili"></use>  </svg> </a><a rel="me" aria-label="GitHub" href="https://github.com" target="_blank" class="btn-regular rounded-lg h-10 w-10 active:scale-90"> <svg width="0.97em" height="1em" class="text-[1.5rem]" data-icon="fa6-brands:github">   <symbol id="ai:fa6-brands:github" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6c-3.3.3-5.6-1.3-5.6-3.6c0-2 2.3-3.6 5.2-3.6c3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9c2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9c.3 2 2.9 3.3 5.9 2.6c2.9-.7 4.9-2.6 4.6-4.6c-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2c12.8 2.3 17.3-5.6 17.3-12.1c0-6.2-.3-40.4-.3-61.4c0 0-70 15-84.7-29.8c0 0-11.4-29.1-27.8-36.6c0 0-22.9-15.7 1.6-15.4c0 0 24.9 2 38.6 25.8c21.9 38.6 58.6 27.5 72.9 20.9c2.3-16 8.8-27.1 16-33.7c-55.9-6.2-112.3-14.3-112.3-110.5c0-27.5 7.6-41.3 23.6-58.9c-2.6-6.5-11.1-33.3 2.6-67.9c20.9-6.5 69 27 69 27c20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27c13.7 34.7 5.2 61.4 2.6 67.9c16 17.7 25.8 31.5 25.8 58.9c0 96.5-58.9 104.2-114.8 110.5c9.2 7.9 17 22.9 17 46.4c0 33.7-.3 75.4-.3 83.6c0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252C496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2c1.6 1.6 3.9 2.3 5.2 1c1.3-1 1-3.3-.7-5.2c-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9c1.6 1 3.6.7 4.3-.7c.7-1.3-.3-2.9-2.3-3.9c-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2c2.3 2.3 5.2 2.6 6.5 1c1.3-1.3.7-4.3-1.3-6.2c-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2c-1.4-2.3-4-3.3-5.6-2"/></symbol><use href="#ai:fa6-brands:github"></use>  </svg> </a>  </div>  </div> </div> <!-- 组件显示现在由sidebarLayoutConfig统一控制，无需检查config.enable --><widget-layout data-id="announcement" data-is-collapsed="undefined" class="pb-4 card-base onload-animation" style="animation-delay: 50ms; " data-astro-cid-ucso7hve="true"> <div class="font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2 flex items-center
        before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:left-[-16px] before:top-[5.5px]" data-astro-cid-ucso7hve style=""> 公告栏  </div> <div id="announcement" class="collapse-wrapper px-4 overflow-hidden" data-astro-cid-ucso7hve style="">  <div> <!-- 公告栏内容 --> <div class="text-neutral-600 dark:text-neutral-300 leading-relaxed mb-3"> 你的到来，让这个安静的角落有了回响 </div> <!-- 可选链接和关闭按钮 --> <div class="flex items-center justify-between gap-3"> <div>  </div> <button class="btn-regular rounded-lg h-8 w-8 text-sm hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors" onclick="closeAnnouncement()" aria-label="关闭"> <svg width="0.75em" height="1em" class="text-sm" data-icon="fa6-solid:xmark">   <symbol id="ai:fa6-solid:xmark" viewBox="0 0 384 512"><path fill="currentColor" d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7L86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256L41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3l105.4 105.3c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256z"/></symbol><use href="#ai:fa6-solid:xmark"></use>  </svg> </button> </div> </div>  </div>  </widget-layout>  <script type="module">class d extends HTMLElement{constructor(){if(super(),this.dataset.isCollapsed!=="true")return;const e=this.dataset.id,t=this.querySelector(".expand-btn"),s=this.querySelector(`#${e}`);t.addEventListener("click",()=>{s.classList.remove("collapsed"),t.classList.add("hidden")})}}customElements.get("widget-layout")||customElements.define("widget-layout",d);</script> <script type="module">function n(){const e=document.querySelector('widget-layout[data-id="announcement"]');e&&(e.style.display="none",localStorage.setItem("announcementClosed","true"))}document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector('widget-layout[data-id="announcement"]');e&&localStorage.getItem("announcementClosed")==="true"&&(e.style.display="none")});window.closeAnnouncement=n;</script><widget-layout data-id="tags" data-is-collapsed="false" class="pb-4 card-base onload-animation" style="animation-delay: 250ms; --collapsedHeight: 7.5rem;" data-astro-cid-ucso7hve="true"> <div class="font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2 flex items-center
        before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:left-[-16px] before:top-[5.5px]" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> 标签  </div> <div id="tags" class="collapse-wrapper px-4 overflow-hidden" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;">  <div class="flex gap-2 flex-wrap"> <a href="/archive/?tag=AI%E6%99%BA%E8%83%BD%E5%8C%96%E4%BA%91%E7%9B%98" aria-label="View all posts with the AI智能化云盘 tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  AI智能化云盘 </a><a href="/archive/?tag=git" aria-label="View all posts with the git tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  git </a><a href="/archive/?tag=gitea" aria-label="View all posts with the gitea tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  gitea </a><a href="/archive/?tag=github" aria-label="View all posts with the github tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  github </a><a href="/archive/?tag=Markdown" aria-label="View all posts with the Markdown tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Markdown </a><a href="/archive/?tag=Mermaid" aria-label="View all posts with the Mermaid tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Mermaid </a><a href="/archive/?tag=mizuki" aria-label="View all posts with the mizuki tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  mizuki </a><a href="/archive/?tag=sso" aria-label="View all posts with the sso tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  sso </a><a href="/archive/?tag=webhook" aria-label="View all posts with the webhook tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  webhook </a><a href="/archive/?tag=%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95" aria-label="View all posts with the 单点登录 tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  单点登录 </a><a href="/archive/?tag=%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98" aria-label="View all posts with the 后端高级工程师面试专题 tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  后端高级工程师面试专题 </a><a href="/archive/?tag=%E5%A4%8D%E7%9B%98" aria-label="View all posts with the 复盘 tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  复盘 </a><a href="/archive/?tag=%E5%A4%A7%E8%84%91" aria-label="View all posts with the 大脑 tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  大脑 </a><a href="/archive/?tag=%E5%B8%B8%E7%94%A8%E7%BD%91%E5%9D%80" aria-label="View all posts with the 常用网址 tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  常用网址 </a><a href="/archive/?tag=%E7%A4%BA%E4%BE%8B" aria-label="View all posts with the 示例 tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  示例 </a><a href="/archive/?tag=%E8%A7%86%E9%A2%91" aria-label="View all posts with the 视频 tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  视频 </a><a href="/archive/?tag=%E7%BD%91%E7%AB%99%E9%83%A8%E7%BD%B2" aria-label="View all posts with the 网站部署 tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  网站部署 </a><a href="/archive/?tag=%E8%BF%90%E5%8A%A8" aria-label="View all posts with the 运动 tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  运动 </a><a href="/archive/?tag=%E9%94%BB%E7%82%BC" aria-label="View all posts with the 锻炼 tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  锻炼 </a> </div>  </div>  </widget-layout>   </div> <!-- 粘性组件区域 --> <div id="sidebar-sticky" class="transition-all duration-700 flex flex-col w-full gap-4 top-4 sticky top-4" data-astro-cid-gfmxq3pg> <widget-layout data-id="categories" data-is-collapsed="true" class="pb-4 card-base onload-animation" style="animation-delay: 150ms; --collapsedHeight: 7.5rem;" data-astro-cid-ucso7hve="true"> <div class="font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2 flex items-center
        before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:left-[-16px] before:top-[5.5px]" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> 分类  </div> <div id="categories" class="collapse-wrapper px-4 overflow-hidden collapsed" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <a href="/archive/?category=%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4" aria-label="View all posts in the 常用命令 category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> 常用命令 </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 1 </div> </div> </button> </a><a href="/archive/?category=%E6%8A%80%E6%9C%AF%E7%82%B9" aria-label="View all posts in the 技术点 category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> 技术点 </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 1 </div> </div> </button> </a><a href="/archive/?category=%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2" aria-label="View all posts in the 环境部署 category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> 环境部署 </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 1 </div> </div> </button> </a><a href="/archive/?category=%E7%94%9F%E6%B4%BB" aria-label="View all posts in the 生活 category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> 生活 </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 2 </div> </div> </button> </a><a href="/archive/?category=%E7%A4%BA%E4%BE%8B" aria-label="View all posts in the 示例 category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> 示例 </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 4 </div> </div> </button> </a><a href="/archive/?category=%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0" aria-label="View all posts in the 读书笔记 category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> 读书笔记 </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 2 </div> </div> </button> </a><a href="/archive/?category=%E9%9D%A2%E8%AF%95%E9%A2%98" aria-label="View all posts in the 面试题 category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> 面试题 </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 17 </div> </div> </button> </a><a href="/archive/?category=%E9%A1%B9%E7%9B%AE%E5%A4%A7%E8%AF%BE" aria-label="View all posts in the 项目大课 category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> 项目大课 </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 2 </div> </div> </button> </a> </div> <div class="expand-btn px-4 -mb-2" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <button class="btn-plain rounded-lg w-full h-9" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <div class="text-[var(--primary)] flex items-center justify-center gap-2 -translate-x-2" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <svg width="1em" height="1em" class="text-[1.75rem]" data-astro-cid-ucso7hve="true" data-icon="material-symbols:more-horiz">   <symbol id="ai:material-symbols:more-horiz" viewBox="0 0 24 24"><path fill="currentColor" d="M6 14q-.825 0-1.412-.587T4 12t.588-1.412T6 10t1.413.588T8 12t-.587 1.413T6 14m6 0q-.825 0-1.412-.587T10 12t.588-1.412T12 10t1.413.588T14 12t-.587 1.413T12 14m6 0q-.825 0-1.412-.587T16 12t.588-1.412T18 10t1.413.588T20 12t-.587 1.413T18 14"/></symbol><use href="#ai:material-symbols:more-horiz"></use>  </svg> 更多 </div> </button> </div> </widget-layout>   </div> </div> <!-- 响应式样式和JavaScript -->  <script>
	import { widgetManager } from "../../utils/widget-manager";
	
	// 响应式布局管理
	class SidebarManager {
		constructor() {
			this.init();
		}
		
		init() {
			this.updateResponsiveDisplay();
			window.addEventListener('resize', () => this.updateResponsiveDisplay());
			
			// 监听SWUP内容替换事件
			if (typeof window !== 'undefined' && window.swup) {
				window.swup.hooks.on('content:replace', () => {
					// 延迟执行以确保DOM已更新
					setTimeout(() => {
						this.updateResponsiveDisplay();
					}, 100);
				});
			}
		}
		
		updateResponsiveDisplay() {
			const breakpoints = widgetManager.getBreakpoints();
			const width = window.innerWidth;
			
			let deviceType: 'mobile' | 'tablet' | 'desktop';
			if (width < breakpoints.mobile) {
				deviceType = 'mobile';
			} else if (width < breakpoints.tablet) {
				deviceType = 'tablet';
			} else {
				deviceType = 'desktop';
			}
			
			const shouldShow = widgetManager.shouldShowSidebar(deviceType);
			const sidebar = document.getElementById('sidebar');
			
			if (sidebar) {
				sidebar.style.setProperty(
					`--sidebar-${deviceType}-display`, 
					shouldShow ? 'block' : 'none'
				);
			}
		}
	}
	
	// 初始化侧边栏管理器
	new SidebarManager();
</script>  <div class="right-sidebar-container mb-4 col-span-1 onload-animation block row-start-3 row-end-4 lg:block lg:row-start-1 lg:row-end-2 lg:max-w-[17.5rem] lg:col-start-3 lg:col-end-4 " data-astro-cid-haiuh7kc><div id="right-sidebar" class="w-full" data-astro-cid-dnkjr6w2> <!-- 顶部固定组件区域 --> <div class="flex flex-col w-full gap-4 mb-4" data-astro-cid-dnkjr6w2> <widget-layout data-id="site-stats" data-is-collapsed="undefined" class="pb-4 card-base onload-animation hidden lg:block" style="animation-delay: 200ms; " data-astro-cid-ucso7hve="true"> <div class="font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2 flex items-center
        before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:left-[-16px] before:top-[5.5px]" data-astro-cid-ucso7hve style=""> 站点统计  </div> <div id="site-stats" class="collapse-wrapper px-4 overflow-hidden" data-astro-cid-ucso7hve style="">  <div class="flex flex-col gap-2"> <div class="flex items-center justify-between px-3 py-1.5"> <div class="flex items-center gap-2.5"> <div class="text-[var(--primary)] text-xl"> <svg width="1em" height="1em" data-icon="material-symbols:article-outline">   <symbol id="ai:material-symbols:article-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M7 17h7v-2H7zm0-4h10v-2H7zm0-4h10V7H7zM5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm0-2h14V5H5zM5 5v14z"/></symbol><use href="#ai:material-symbols:article-outline"></use>  </svg> </div> <span class="text-neutral-700 dark:text-neutral-300 font-medium text-sm"> 文章 </span> </div> <div class="flex items-center"> <span class="text-base font-bold text-neutral-900 dark:text-neutral-100"> 30 </span>  </div> </div><div class="flex items-center justify-between px-3 py-1.5"> <div class="flex items-center gap-2.5"> <div class="text-[var(--primary)] text-xl"> <svg width="1em" height="1em" data-icon="material-symbols:folder-outline">   <symbol id="ai:material-symbols:folder-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h6l2 2h8q.825 0 1.413.588T22 8v10q0 .825-.587 1.413T20 20zm0-2h16V8h-8.825l-2-2H4zm0 0V6z"/></symbol><use href="#ai:material-symbols:folder-outline"></use>  </svg> </div> <span class="text-neutral-700 dark:text-neutral-300 font-medium text-sm"> 分类 </span> </div> <div class="flex items-center"> <span class="text-base font-bold text-neutral-900 dark:text-neutral-100"> 8 </span>  </div> </div><div class="flex items-center justify-between px-3 py-1.5"> <div class="flex items-center gap-2.5"> <div class="text-[var(--primary)] text-xl"> <svg width="1em" height="1em" data-icon="material-symbols:label-outline">   <symbol id="ai:material-symbols:label-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h11q.475 0 .9.213t.7.587L22 12l-5.4 7.2q-.275.375-.7.588T15 20zm0-2h11l4.5-6L15 6H4zm5.5-6"/></symbol><use href="#ai:material-symbols:label-outline"></use>  </svg> </div> <span class="text-neutral-700 dark:text-neutral-300 font-medium text-sm"> 标签 </span> </div> <div class="flex items-center"> <span class="text-base font-bold text-neutral-900 dark:text-neutral-100"> 19 </span>  </div> </div><div class="flex items-center justify-between px-3 py-1.5"> <div class="flex items-center gap-2.5"> <div class="text-[var(--primary)] text-xl"> <svg width="1em" height="1em" data-icon="material-symbols:text-ad-outline-rounded">   <symbol id="ai:material-symbols:text-ad-outline-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h16q.825 0 1.413.588T22 6v12q0 .825-.587 1.413T20 20zm0-2h16V6H4zm0 0V6zm2-1h12q.425 0 .713-.288T19 16t-.288-.712T18 15H6q-.425 0-.712.288T5 16t.288.713T6 17m0-4h12q.425 0 .713-.288T19 12t-.288-.712T18 11H6q-.425 0-.712.288T5 12t.288.713T6 13m0-4h8q.425 0 .713-.288T15 8t-.288-.712T14 7H6q-.425 0-.712.288T5 8t.288.713T6 9"/></symbol><use href="#ai:material-symbols:text-ad-outline-rounded"></use>  </svg> </div> <span class="text-neutral-700 dark:text-neutral-300 font-medium text-sm"> 总字数 </span> </div> <div class="flex items-center"> <span class="text-base font-bold text-neutral-900 dark:text-neutral-100"> 53,306 </span>  </div> </div><div class="flex items-center justify-between px-3 py-1.5"> <div class="flex items-center gap-2.5"> <div class="text-[var(--primary)] text-xl"> <svg width="1em" height="1em" data-icon="material-symbols:calendar-clock-outline">   <symbol id="ai:material-symbols:calendar-clock-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M5 8h14V6H5zm0 0V6zm0 14q-.825 0-1.412-.587T3 20V6q0-.825.588-1.412T5 4h1V2h2v2h8V2h2v2h1q.825 0 1.413.588T21 6v5.675q-.475-.225-.975-.375T19 11.075V10H5v10h6.3q.175.55.413 1.05t.562.95zm13 1q-2.075 0-3.537-1.463T13 18t1.463-3.537T18 13t3.538 1.463T23 18t-1.463 3.538T18 23m1.675-2.625l.7-.7L18.5 17.8V15h-1v3.2z"/></symbol><use href="#ai:material-symbols:calendar-clock-outline"></use>  </svg> </div> <span class="text-neutral-700 dark:text-neutral-300 font-medium text-sm"> 运行时长 </span> </div> <div class="flex items-center"> <span class="text-base font-bold text-neutral-900 dark:text-neutral-100" data-stat-id="running-days"> 0 </span> <span class="text-sm text-neutral-500 dark:text-neutral-400 ml-1">  天 </span> </div> </div><div class="flex items-center justify-between px-3 py-1.5"> <div class="flex items-center gap-2.5"> <div class="text-[var(--primary)] text-xl"> <svg width="1em" height="1em" data-icon="material-symbols:ecg-heart-outline">   <symbol id="ai:material-symbols:ecg-heart-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M12 21q-.45 0-.862-.162t-.738-.488l-6.7-6.725q-.875-.875-1.287-2T2 9.275Q2 6.7 3.675 4.85T7.85 3q1.2 0 2.263.475T12 4.8q.8-.85 1.863-1.325T16.125 3q2.5 0 4.188 1.85T22 9.25q0 1.225-.425 2.35t-1.275 2l-6.725 6.75q-.325.325-.725.488T12 21m1-13q.25 0 .475.125t.35.325l1.7 2.55h4.15q.175-.425.263-.862t.087-.888q-.05-1.725-1.15-2.963t-2.75-1.237q-.775 0-1.487.3t-1.238.875l-.675.725q-.125.15-.325.238t-.4.087t-.4-.087t-.35-.238l-.675-.725q-.525-.575-1.225-.9T7.85 5Q6.2 5 5.1 6.263T4 9.25q0 .45.075.888t.25.862H9q.25 0 .475.125t.35.325l.875 1.3l1.35-4.05q.1-.3.362-.5T13 8m.3 3.25l-1.35 4.05q-.1.3-.375.5t-.6.2q-.25 0-.475-.125t-.35-.325L8.45 13H5.9l5.925 5.925q.05.05.088.063T12 19t.088-.012t.087-.063l5.9-5.925H15q-.25 0-.475-.125t-.375-.325z"/></symbol><use href="#ai:material-symbols:ecg-heart-outline"></use>  </svg> </div> <span class="text-neutral-700 dark:text-neutral-300 font-medium text-sm"> 最后活动 </span> </div> <div class="flex items-center"> <span class="text-base font-bold text-neutral-900 dark:text-neutral-100" data-stat-id="last-update"> 0 </span> <span class="text-sm text-neutral-500 dark:text-neutral-400 ml-1">  天前 </span> </div> </div> </div>  </div>  </widget-layout>   <script>(function(){const siteStartDate = "2025-11-08";
const lastPostDate = "2025-11-20T00:00:00.000Z";

  function updateDynamicStats() {
    const today = new Date();
    
    // 更新运行天数
    const startDate = new Date(siteStartDate);
    const diffTime = Math.abs(today.getTime() - startDate.getTime());
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    
    const runningDaysElement = document.querySelector('[data-stat-id="running-days"]');
    if (runningDaysElement) {
      runningDaysElement.textContent = diffDays.toString();
    }
    
    // 更新最后活动时间
    if (lastPostDate) {
      const lastPost = new Date(lastPostDate);
      const timeSinceLastPost = Math.abs(today.getTime() - lastPost.getTime());
      const daysSinceLastUpdate = Math.floor(timeSinceLastPost / (1000 * 60 * 60 * 24));
      
      const lastUpdateElement = document.querySelector('[data-stat-id="last-update"]');
      if (lastUpdateElement) {
        lastUpdateElement.textContent = daysSinceLastUpdate.toString();
      }
    }
  }
  
  // 页面加载时更新
  updateDynamicStats();
  
  // 每小时更新一次（可选，因为天数变化较慢）
  setInterval(updateDynamicStats, 60 * 60 * 1000);
})();</script><widget-layout data-id="calendar-widget" data-is-collapsed="undefined" class="pb-4 card-base hidden md:block onload-animation hidden lg:block" style="animation-delay: 250ms; " data-astro-cid-ucso7hve="true"> <div class="font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2 flex items-center
        before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:left-[-16px] before:top-[5.5px]" data-astro-cid-ucso7hve style="">  <span id="calendar-widget-title" class="flex-1 text-left" data-astro-cid-o3b4delr></span> </div> <div id="calendar-widget" class="collapse-wrapper px-4 overflow-hidden" data-astro-cid-ucso7hve style="">   <div class="calendar-container" data-astro-cid-o3b4delr> <!-- 星期标题 --> <div class="weekdays grid grid-cols-7 gap-1 mb-2" data-astro-cid-o3b4delr> <div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> 日 </div><div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> 一 </div><div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> 二 </div><div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> 三 </div><div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> 四 </div><div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> 五 </div><div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> 六 </div> </div> <!-- 日历格子（由客户端动态生成） --> <div class="calendar-grid grid grid-cols-7 gap-1" id="calendar-grid" data-astro-cid-o3b4delr> <!-- 将由 JavaScript 填充 --> </div> <!-- 文章列表 --> <div id="calendar-posts" class="mt-3" data-astro-cid-o3b4delr> <div class="border-t border-neutral-200 dark:border-neutral-700 mb-2" id="calendar-posts-divider" style="display: none;" data-astro-cid-o3b4delr></div> <div class="flex flex-col gap-1" id="calendar-posts-list" data-astro-cid-o3b4delr> <!-- 将由 JavaScript 填充 --> </div> </div> </div>  </div>  </widget-layout>   <script>(function(){const postDateMap = {"2025-11-04":[{"id":"生活/常用网址","data":{"title":"常用网址","published":"2025-11-04T00:00:00.000Z","draft":false,"description":"常用网址","image":"","tags":["常用网址"],"category":"生活","lang":"zh_CN","pinned":true,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"复盘","prevSlug":"生活/复盘","nextTitle":"","nextSlug":""},"body":"[clash-verge-rev](https://github.com/clash-verge-rev/clash-verge-rev)\n[狗狗加速](https://www.dg5.biz/#/subscribe)\n[LangChain4j 中文文档](https://docs.langchain4j.info)","filePath":"src/content/posts/生活/常用网址.md","digest":"8256d9cf46e327bc","rendered":{"html":"<p><a href=\"https://github.com/clash-verge-rev/clash-verge-rev\">clash-verge-rev</a>\n<a href=\"https://www.dg5.biz/#/subscribe\">狗狗加速</a>\n<a href=\"https://docs.langchain4j.info\">LangChain4j 中文文档</a></p>","metadata":{"headings":[],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"常用网址","published":"2025-11-04T00:00:00.000Z","pinned":true,"description":"常用网址","image":"","tags":["常用网址"],"category":"生活","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":1,"words":10,"excerpt":"clash-verge-rev\n狗狗加速\nLangChain4j 中文文档"},"imagePaths":[]}},"collection":"posts"},{"id":"生活/复盘","data":{"title":"复盘","published":"2025-11-04T00:00:00.000Z","draft":false,"description":"复盘","image":"./images/fupan.jpg","tags":["复盘"],"category":"生活","lang":"zh_CN","pinned":true,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"AI智能化云盘02","prevSlug":"项目大课/ai智能化云盘/ai智能化云盘02","nextTitle":"常用网址","nextSlug":"生活/常用网址"},"body":"## 置顶\n- 暂时不看电视剧、动漫、电影、bilibili\n- 暂时先不玩游戏\n- 暂时先不看：息流《你的深度阅读陪伴者》、贴吧\n\n## 日程规划\n- 05点50分 起床\n- 6点30分-7点 学习**AI云盘大课** 或 看书\n- 20点30分 **关电脑**\n- 20点30分-21点 休闲（洗碗、数独、看书等） \n- 21点 洗澡\n- 21点-22点 洗完澡后看书\n- 22点 睡觉\n\n\n## 娱乐\n### 游戏\n- [x] **明年**再玩弈仙牌\n- [x] **卸载**英雄无敌3 深渊号角1.72、狙击精英5\n### 动漫\n- 每周六追番《凡人修仙传》\n- 有时间把《火影忍者》看完\n- 其他动漫就不看了\n### 软件\n- [x] **手机**上娱乐 app\n  - 不安装\n    - ~~知乎~~（没什么有效信息）\n    - ~~FGO~~（没什么娱乐性，后续用其他设备每天换苹果或bbc或找人打活动）\n    - ~~bilibili~~（有价值信息偏少，如果使用的话使用网页版）\n  - 只安装\n    - **象棋巫师**\n    - **知识星球**\n- [x] **电脑**上的游戏不要超过5个\n  - 成仙（尽快打通关）\n  - FGO\n  - 英雄无敌3 死亡阴影\n\n\n## 学习\n- **优先学习** AI云盘大课（周末、工作日晚上）\n- **极客时间**-RAG系统实战课（午休或坐地铁）\n- flowus-**你的深度阅读陪伴者**（~~午休或坐地铁~~，暂时先不看）\n- [YouTube学英语](https://flowus.cn/share/9a831e74-ca9f-44e3-a76d-4ed76bf13759?code=ZMKWDY) 访问密码：JKEE（晚上在家有空就学）\n- 雅思（晚上在家有空就学）\n- 准备 AI副业创业","filePath":"src/content/posts/生活/复盘.md","digest":"f750162f7998eea5","rendered":{"html":"<section><h2 id=\"置顶\">置顶<a class=\"anchor\" href=\"#置顶\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>暂时不看电视剧、动漫、电影、bilibili</li>\n<li>暂时先不玩游戏</li>\n<li>暂时先不看：息流《你的深度阅读陪伴者》、贴吧</li>\n</ul></section>\n<section><h2 id=\"日程规划\">日程规划<a class=\"anchor\" href=\"#日程规划\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>05点50分 起床</li>\n<li>6点30分-7点 学习<strong>AI云盘大课</strong> 或 看书</li>\n<li>20点30分 <strong>关电脑</strong></li>\n<li>20点30分-21点 休闲（洗碗、数独、看书等）</li>\n<li>21点 洗澡</li>\n<li>21点-22点 洗完澡后看书</li>\n<li>22点 睡觉</li>\n</ul></section>\n<section><h2 id=\"娱乐\">娱乐<a class=\"anchor\" href=\"#娱乐\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"游戏\">游戏<a class=\"anchor\" href=\"#游戏\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> <strong>明年</strong>再玩弈仙牌</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> <strong>卸载</strong>英雄无敌3 深渊号角1.72、狙击精英5</li>\n</ul></section><section><h3 id=\"动漫\">动漫<a class=\"anchor\" href=\"#动漫\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>每周六追番《凡人修仙传》</li>\n<li>有时间把《火影忍者》看完</li>\n<li>其他动漫就不看了</li>\n</ul></section><section><h3 id=\"软件\">软件<a class=\"anchor\" href=\"#软件\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> <strong>手机</strong>上娱乐 app\n<ul>\n<li>不安装\n<ul>\n<li><del>知乎</del>（没什么有效信息）</li>\n<li><del>FGO</del>（没什么娱乐性，后续用其他设备每天换苹果或bbc或找人打活动）</li>\n<li><del>bilibili</del>（有价值信息偏少，如果使用的话使用网页版）</li>\n</ul>\n</li>\n<li>只安装\n<ul>\n<li><strong>象棋巫师</strong></li>\n<li><strong>知识星球</strong></li>\n</ul>\n</li>\n</ul>\n</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> <strong>电脑</strong>上的游戏不要超过5个\n<ul>\n<li>成仙（尽快打通关）</li>\n<li>FGO</li>\n<li>英雄无敌3 死亡阴影</li>\n</ul>\n</li>\n</ul></section></section>\n<section><h2 id=\"学习\">学习<a class=\"anchor\" href=\"#学习\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li><strong>优先学习</strong> AI云盘大课（周末、工作日晚上）</li>\n<li><strong>极客时间</strong>-RAG系统实战课（午休或坐地铁）</li>\n<li>flowus-<strong>你的深度阅读陪伴者</strong>（<del>午休或坐地铁</del>，暂时先不看）</li>\n<li><a href=\"https://flowus.cn/share/9a831e74-ca9f-44e3-a76d-4ed76bf13759?code=ZMKWDY\">YouTube学英语</a> 访问密码：JKEE（晚上在家有空就学）</li>\n<li>雅思（晚上在家有空就学）</li>\n<li>准备 AI副业创业</li>\n</ul></section>","metadata":{"headings":[{"depth":2,"slug":"置顶","text":"置顶#"},{"depth":2,"slug":"日程规划","text":"日程规划#"},{"depth":2,"slug":"娱乐","text":"娱乐#"},{"depth":3,"slug":"游戏","text":"游戏#"},{"depth":3,"slug":"动漫","text":"动漫#"},{"depth":3,"slug":"软件","text":"软件#"},{"depth":2,"slug":"学习","text":"学习#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"复盘","published":"2025-11-04T00:00:00.000Z","pinned":true,"description":"复盘","image":"./images/fupan.jpg","tags":["复盘"],"category":"生活","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":2,"words":358,"excerpt":""},"imagePaths":[]}},"collection":"posts"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题04","data":{"title":"后端高级工程师面试专题04","published":"2025-11-04T00:00:00.000Z","draft":false,"description":"第四章 阿里 p6 后端工程师/技术经理的 java 集合框架 List 了解多少","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"后端高级工程师面试专题03","prevSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题03","nextTitle":"AI智能化云盘01","nextSlug":"项目大课/ai智能化云盘/ai智能化云盘01"},"body":"## 第四章 阿里 p6 后端工程师/技术经理的 java 集合框架 List 了解多少\n\n### 第 1 集 编程语言面试题之新版 javase 集合框架 List 基础篇\n\n**简介：java 集合框架里面 List 常见基础面试题**\n\n- 考查点：list 的基础知识点掌握情况，对应的实现的区别，线程安全、使用场景\n\n- 难度【 \\*\\*\\* 】\n\n- 说下 Vector 和 ArrayList、LinkedList 联系和区别？分别的使用场景\n\n- 答案：\n\n  - 线程安全\n    - ArrayList：底层是数组实现，线程不安全，查询和修改非常快，但是增加和删除慢\n    - LinkedList: 底层是双向链表，线程不安全，查询和修改速度慢，但是增加和删除速度快\n    - Vector: 底层是数组实现，线程安全的，操作的时候使用 synchronized 进行加锁\n\n  - 使用场景\n    - Vector 已经很少用了\n    - 增加和删除场景多则用 LinkedList\n    - 查询和修改多则用 ArrayList\n\n### 第 2 集 编程语言面试题之新版 javase 集合框架 List 追杀篇《上》\n\n**简介：基于 List 进行继续追问，初试连环炮**\n\n- 考点: List 的掌握情况（追问系列）\n\n- 难度【 \\*\\*\\* 】\n\n- 如果需要保证线程安全，ArrayList 应该怎么做，用有几种方式\n\n    ```text\n    方式一：自己写个包装类，根据业务一般是add/update/remove加锁\n\n    方式二：Collections.synchronizedList(new ArrayList<>()); 使用synchronized加锁\n\n    方式三：CopyOnWriteArrayList<>()  使用ReentrantLock加锁\n    ```\n\n### 第 3 集 编程语言面试题之 CopyOnWriteArrayList 追杀篇《下》\n\n**简介：基于 CopyOnWriteArrayList 进行继续追问**\n\n- 考点: CopyOnWriteArrayList 的掌握情况（追问系列）\n\n- 难度【 \\*\\*\\*\\*\\* 】\n\n- 如果回答到上面的点则继续问，没回到到则问，了解 CopyOnWriteArrayList 吗？和 Collections.synchronizedList 实现线程安全有什么区别, 使用场景是怎样的？\n\n  - CopyOnWriteArrayList：执行修改操作时，会拷贝一份新的数组进行操作（add、set、remove 等)，代价十分昂贵，在执行完修改后将原来集合指向新的集合来完成修改操作，源码里面用 ReentrantLock 可重入锁来保证不会有多个线程同时拷贝一份数组\n\n    - 场景：读高性能，适用读操作远远大于写操作的场景中使用(读的时候是不需要加锁的，直接获取，删除和增加是需要加锁的, 读多写少)\n\n  - Collections.synchronizedList：线程安全的原因是因为它几乎在每个方法中都使用了 synchronized 同步锁\n\n    - 场景：写操作性能比 CopyOnWriteArrayList 好，读操作性能并不如 CopyOnWriteArrayList\n\n- CopyOnWriteArrayList 的设计思想是怎样的,有什么缺点？\n\n  答案：设计思想：读写分离+最终一致\n\n  缺点：内存占用问题,写时复制机制,内存里会同时驻扎两个对象的内存，旧的对象和新写入的对象,如果对象大则容易发生 Yong GC 和 Full GC\n\n### 第 4 集 源码剖析之新版 javase 扩容机制 List 暗器篇\n\n**简介：基于 List 进行继续二次追问，进阶扩容机制+源码剖析**\n\n- 考点：List 集合扩容机制\n\n- 难度【 \\*\\*\\*\\*\\* 】\n\n- 说下 ArrayList 的扩容机制是怎样的\n\n    ```text\n    注意：JDK1.7之前ArrayList默认大小是10，JDk1.7之后是0\n\n    未指定集合容量，默认是0，若已经指定大小则集合大小为指定的；\n    当集合第一次添加元素的时候，集合大小扩容为10\n    ArrayList的元素个数大于其容量，扩容的大小= 原始大小+原始大小/2\n    ```\n\n- 源码解读 JDK ArrayList 扩容核心源码\n\n    ```java\n    // 调试代码\n\n    List<String> list = new ArrayList<>();\n\n    for(int i=0;i<10;i++){\n        list.add(\"\"+i);\n    }\n    System.out.println(list.size());\n\n    list.add(\"xdclass.net\");\n\n    System.out.println(list.size());\n    ```\n\n### 第 5 集 编程语言面试题之新版 JDK 手写 ArrayList 大招篇《上》\n\n**简介：基于 List 进行继续追问，进阶连环炮，代码实战**\n\n- 考点：源码设计思想、代码编写规范\n\n- 难度【 \\*\\*\\*\\*\\* 】\n\n- 设计一个简单的 ArrayList【需要包含 构造函数(有参和无参)、add(obj)、 扩容机制】\n\n    ```java\n    //计算容量+确保容量\n    private void ensureCapacityInternal(int minCapacity){\n\n        //如果是初次扩容，则使用默认的容量\n        if(elementData == EMPTY_ELEMENT_DATA){\n            minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);\n        }\n\n        //是否需要扩容，需要的最少容量大于现在数组的长度则要扩容\n        if(minCapacity - elementData.length > 0){\n            int oldCapacity = elementData.length;\n\n            int newCapacity = oldCapacity + (oldCapacity>>1);\n\n            //如果新容量 < 最小容量， 则讲最新的容量赋值给新的容量\n            if(newCapacity - minCapacity < 0){\n                newCapacity = minCapacity;\n            }\n\n            //创建新数组\n            Object[] objects = new Object[newCapacity];\n\n            //将旧的数组复制到新的数组里面\n            System.arraycopy(elementData,0, objects,0,elementData.length);\n\n            //修改引用\n            elementData = objects;\n\n        }\n\n    }\n    ```\n\n### 第 6 集 编程语言面试题之新版 JDK 手写 ArrayList 大招篇《下》\n\n**简介：基于 List 进行继续追问，进阶连环炮，代码实战**\n\n- 考点：源码设计思想、代码编写规范\n\n- 难度【 \\*\\*\\*\\*\\* 】\n\n- 设计一个简单的 ArrayList【remove(index)、get(index) 、indexOf(o) ,set(int index,Object obj)】\n\n    ```java\n    System.arraycopy(Object src, int srcPos, Object dest, int destPos,int length)参数介绍\n\n    Object src : 原数组\n    int srcPos : 从元数据的起始位置开始\n    Object dest : 目标数组\n    int destPos : 目标数组的开始起始位置\n    int length  : 要copy的数组的长度\n    ```","filePath":"src/content/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题04.md","digest":"f144d126f464c220","rendered":{"html":"<section><h2 id=\"第四章-阿里-p6-后端工程师技术经理的-java-集合框架-list-了解多少\">第四章 阿里 p6 后端工程师/技术经理的 java 集合框架 List 了解多少<a class=\"anchor\" href=\"#第四章-阿里-p6-后端工程师技术经理的-java-集合框架-list-了解多少\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"第-1-集-编程语言面试题之新版-javase-集合框架-list-基础篇\">第 1 集 编程语言面试题之新版 javase 集合框架 List 基础篇<a class=\"anchor\" href=\"#第-1-集-编程语言面试题之新版-javase-集合框架-list-基础篇\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：java 集合框架里面 List 常见基础面试题</strong></p><ul>\n<li>\n<p>考查点：list 的基础知识点掌握情况，对应的实现的区别，线程安全、使用场景</p>\n</li>\n<li>\n<p>难度【 *** 】</p>\n</li>\n<li>\n<p>说下 Vector 和 ArrayList、LinkedList 联系和区别？分别的使用场景</p>\n</li>\n<li>\n<p>答案：</p>\n<ul>\n<li>\n<p>线程安全</p>\n<ul>\n<li>ArrayList：底层是数组实现，线程不安全，查询和修改非常快，但是增加和删除慢</li>\n<li>LinkedList: 底层是双向链表，线程不安全，查询和修改速度慢，但是增加和删除速度快</li>\n<li>Vector: 底层是数组实现，线程安全的，操作的时候使用 synchronized 进行加锁</li>\n</ul>\n</li>\n<li>\n<p>使用场景</p>\n<ul>\n<li>Vector 已经很少用了</li>\n<li>增加和删除场景多则用 LinkedList</li>\n<li>查询和修改多则用 ArrayList</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-2-集-编程语言面试题之新版-javase-集合框架-list-追杀篇上\">第 2 集 编程语言面试题之新版 javase 集合框架 List 追杀篇《上》<a class=\"anchor\" href=\"#第-2-集-编程语言面试题之新版-javase-集合框架-list-追杀篇上\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：基于 List 进行继续追问，初试连环炮</strong></p><ul>\n<li>\n<p>考点: List 的掌握情况（追问系列）</p>\n</li>\n<li>\n<p>难度【 *** 】</p>\n</li>\n<li>\n<p>如果需要保证线程安全，ArrayList 应该怎么做，用有几种方式</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:69ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">方式一：自己写个包装类，根据业务一般是add/update/remove加锁</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">方式二：Collections.synchronizedList(new ArrayList&#x3C;>()); 使用synchronized加锁</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">方式三：CopyOnWriteArrayList&#x3C;>()  使用ReentrantLock加锁</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-3-集-编程语言面试题之-copyonwritearraylist-追杀篇下\">第 3 集 编程语言面试题之 CopyOnWriteArrayList 追杀篇《下》<a class=\"anchor\" href=\"#第-3-集-编程语言面试题之-copyonwritearraylist-追杀篇下\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：基于 CopyOnWriteArrayList 进行继续追问</strong></p><ul>\n<li>\n<p>考点: CopyOnWriteArrayList 的掌握情况（追问系列）</p>\n</li>\n<li>\n<p>难度【 ***** 】</p>\n</li>\n<li>\n<p>如果回答到上面的点则继续问，没回到到则问，了解 CopyOnWriteArrayList 吗？和 Collections.synchronizedList 实现线程安全有什么区别, 使用场景是怎样的？</p>\n<ul>\n<li>\n<p>CopyOnWriteArrayList：执行修改操作时，会拷贝一份新的数组进行操作（add、set、remove 等)，代价十分昂贵，在执行完修改后将原来集合指向新的集合来完成修改操作，源码里面用 ReentrantLock 可重入锁来保证不会有多个线程同时拷贝一份数组</p>\n<ul>\n<li>场景：读高性能，适用读操作远远大于写操作的场景中使用(读的时候是不需要加锁的，直接获取，删除和增加是需要加锁的, 读多写少)</li>\n</ul>\n</li>\n<li>\n<p>Collections.synchronizedList：线程安全的原因是因为它几乎在每个方法中都使用了 synchronized 同步锁</p>\n<ul>\n<li>场景：写操作性能比 CopyOnWriteArrayList 好，读操作性能并不如 CopyOnWriteArrayList</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>CopyOnWriteArrayList 的设计思想是怎样的,有什么缺点？</p>\n<p>答案：设计思想：读写分离+最终一致</p>\n<p>缺点：内存占用问题,写时复制机制,内存里会同时驻扎两个对象的内存，旧的对象和新写入的对象,如果对象大则容易发生 Yong GC 和 Full GC</p>\n</li>\n</ul></section><section><h3 id=\"第-4-集-源码剖析之新版-javase-扩容机制-list-暗器篇\">第 4 集 源码剖析之新版 javase 扩容机制 List 暗器篇<a class=\"anchor\" href=\"#第-4-集-源码剖析之新版-javase-扩容机制-list-暗器篇\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：基于 List 进行继续二次追问，进阶扩容机制+源码剖析</strong></p><ul>\n<li>\n<p>考点：List 集合扩容机制</p>\n</li>\n<li>\n<p>难度【 ***** 】</p>\n</li>\n<li>\n<p>说下 ArrayList 的扩容机制是怎样的</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">注意：JDK1.7之前ArrayList默认大小是10，JDk1.7之后是0</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">未指定集合容量，默认是0，若已经指定大小则集合大小为指定的；</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">当集合第一次添加元素的时候，集合大小扩容为10</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ArrayList的元素个数大于其容量，扩容的大小= 原始大小+原始大小/2</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>源码解读 JDK ArrayList 扩容核心源码</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 调试代码</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">List&#x3C;</span><span style=\"--0:#BF3441;--1:#F97583\">String</span><span style=\"--0:#24292E;--1:#E1E4E8\">> list </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ArrayList&#x3C;>();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> i</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;i</span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\">;i</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">list.</span><span style=\"--0:#6F42C1;--1:#B392F0\">add</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"\"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">i);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(list.</span><span style=\"--0:#6F42C1;--1:#B392F0\">size</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">list.</span><span style=\"--0:#6F42C1;--1:#B392F0\">add</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"xdclass.net\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(list.</span><span style=\"--0:#6F42C1;--1:#B392F0\">size</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-5-集-编程语言面试题之新版-jdk-手写-arraylist-大招篇上\">第 5 集 编程语言面试题之新版 JDK 手写 ArrayList 大招篇《上》<a class=\"anchor\" href=\"#第-5-集-编程语言面试题之新版-jdk-手写-arraylist-大招篇上\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：基于 List 进行继续追问，进阶连环炮，代码实战</strong></p><ul>\n<li>\n<p>考点：源码设计思想、代码编写规范</p>\n</li>\n<li>\n<p>难度【 ***** 】</p>\n</li>\n<li>\n<p>设计一个简单的 ArrayList【需要包含 构造函数(有参和无参)、add(obj)、 扩容机制】</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:70ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">//计算容量+确保容量</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ensureCapacityInternal</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> minCapacity){</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">//如果是初次扩容，则使用默认的容量</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\">(elementData </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EMPTY_ELEMENT_DATA){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">minCapacity </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Math.</span><span style=\"--0:#6F42C1;--1:#B392F0\">max</span><span style=\"--0:#24292E;--1:#E1E4E8\">(DEFAULT_CAPACITY, minCapacity);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">//是否需要扩容，需要的最少容量大于现在数组的长度则要扩容</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\">(minCapacity </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> elementData.length </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> oldCapacity </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> elementData.length;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newCapacity </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> oldCapacity </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (oldCapacity</span><span style=\"--0:#BF3441;--1:#F97583\">>></span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//如果新容量 &#x3C; 最小容量， 则讲最新的容量赋值给新的容量</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\">(newCapacity </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> minCapacity </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newCapacity </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> minCapacity;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//创建新数组</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">Object</span><span style=\"--0:#24292E;--1:#E1E4E8\">[] objects </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">Object</span><span style=\"--0:#24292E;--1:#E1E4E8\">[newCapacity];</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//将旧的数组复制到新的数组里面</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.</span><span style=\"--0:#6F42C1;--1:#B392F0\">arraycopy</span><span style=\"--0:#24292E;--1:#E1E4E8\">(elementData,</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">, objects,</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">,elementData.length);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//修改引用</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">elementData </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> objects;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-6-集-编程语言面试题之新版-jdk-手写-arraylist-大招篇下\">第 6 集 编程语言面试题之新版 JDK 手写 ArrayList 大招篇《下》<a class=\"anchor\" href=\"#第-6-集-编程语言面试题之新版-jdk-手写-arraylist-大招篇下\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：基于 List 进行继续追问，进阶连环炮，代码实战</strong></p><ul>\n<li>\n<p>考点：源码设计思想、代码编写规范</p>\n</li>\n<li>\n<p>难度【 ***** 】</p>\n</li>\n<li>\n<p>设计一个简单的 ArrayList【remove(index)、get(index) 、indexOf(o) ,set(int index,Object obj)】</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:81ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">System.</span><span style=\"--0:#6F42C1;--1:#B392F0\">arraycopy</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Object src, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> srcPos, Object dest, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> destPos,</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> length)参数介绍</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">Object src </span><span style=\"--0:#BF3441;--1:#F97583\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 原数组</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> srcPos </span><span style=\"--0:#BF3441;--1:#F97583\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 从元数据的起始位置开始</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">Object dest </span><span style=\"--0:#BF3441;--1:#F97583\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 目标数组</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> destPos </span><span style=\"--0:#BF3441;--1:#F97583\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 目标数组的开始起始位置</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> length  </span><span style=\"--0:#BF3441;--1:#F97583\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 要copy的数组的长度</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section></section>","metadata":{"headings":[{"depth":2,"slug":"第四章-阿里-p6-后端工程师技术经理的-java-集合框架-list-了解多少","text":"第四章 阿里 p6 后端工程师/技术经理的 java 集合框架 List 了解多少#"},{"depth":3,"slug":"第-1-集-编程语言面试题之新版-javase-集合框架-list-基础篇","text":"第 1 集 编程语言面试题之新版 javase 集合框架 List 基础篇#"},{"depth":3,"slug":"第-2-集-编程语言面试题之新版-javase-集合框架-list-追杀篇上","text":"第 2 集 编程语言面试题之新版 javase 集合框架 List 追杀篇《上》#"},{"depth":3,"slug":"第-3-集-编程语言面试题之-copyonwritearraylist-追杀篇下","text":"第 3 集 编程语言面试题之 CopyOnWriteArrayList 追杀篇《下》#"},{"depth":3,"slug":"第-4-集-源码剖析之新版-javase-扩容机制-list-暗器篇","text":"第 4 集 源码剖析之新版 javase 扩容机制 List 暗器篇#"},{"depth":3,"slug":"第-5-集-编程语言面试题之新版-jdk-手写-arraylist-大招篇上","text":"第 5 集 编程语言面试题之新版 JDK 手写 ArrayList 大招篇《上》#"},{"depth":3,"slug":"第-6-集-编程语言面试题之新版-jdk-手写-arraylist-大招篇下","text":"第 6 集 编程语言面试题之新版 JDK 手写 ArrayList 大招篇《下》#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"后端高级工程师面试专题04","published":"2025-11-04T00:00:00.000Z","pinned":false,"description":"第四章 阿里 p6 后端工程师/技术经理的 java 集合框架 List 了解多少","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":6,"words":1248,"excerpt":"简介：java 集合框架里面 List 常见基础面试题"},"imagePaths":[]}},"collection":"posts"}],"2025-11-20":[{"id":"项目大课/ai智能化云盘/ai智能化云盘02","data":{"title":"AI智能化云盘02","published":"2025-11-20T00:00:00.000Z","draft":false,"description":"第二章 AI智能化云盘大课需求文档和架构图","image":"","tags":["AI智能化云盘"],"category":"项目大课","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"《运动改造大脑》","prevSlug":"读书笔记/运动改造大脑","nextTitle":"复盘","nextSlug":"生活/复盘"},"body":"# 第二章 AI智能化云盘大课需求文档和架构图\n\n## 技术组长的你知道如何编写需求文档不？\n\n### 为什么技术Leader需要掌握产品需求文档？\n\n核心：有些不懂技术的产品经理没法编写特定领域的项目需求文档\n\n- **技术知识缺乏**：\n\n  - 特定领域的项目可能需要特定的技术知识\n\n  - 如果产品经理缺乏相关技术背景，难以理解技术实现的复杂性和可行性，从而难以准确描述技术需求\n\n- **沟通障碍**\n\n  - 产品经理需要与技术团队紧密合作，以确保需求的可实现性\n\n  - 如果产品经理不懂技术，他们可能难以与技术团队有效沟通，导致需求文档中的技术细节不准确或不完整\n\n- **风险评估不足**：\n\n  - 不懂技术的产品经理可能无法准确评估技术实现的风险，这可能导致项目在实施过程中遇到预料之外的问题\n\n- **需求优先级判断失误**：\n\n  - 技术背景可以帮助产品经理判断哪些需求对项目成功最为关键\n\n  - 缺乏技术背景的产品经理可能难以做出正确的优先级排序\n\n### **一份合格的产品需求文档（多数内容有即可，不同团队要求大体类似）**\n\n```markdown\n## 1. 标题页\n\n- **产品名称**：[产品名称]\n\n- **版本/修订号**：[版本号]\n\n- **编制日期**：[编制日期]\n\n- **编制人**：[编制人姓名]\n\n- **审核人**：[审核人姓名]\n\n## 2. 目录\n\n- 根据文档内容创建目录，方便快速跳转到各个部分。\n\n## 3. 引言\n\n### 3.1 目的\n\n- 简要说明编写此文档的目的。\n\n### 3.2 背景\n\n- 描述产品的背景信息，包括市场机会、业务需求等。\n\n### 3.3 定义\n\n- 对文档中使用的专业术语或缩写词进行定义。\n\n## 4. 产品概述\n\n### 4.1 产品愿景\n\n- 描述产品的长远目标和愿景。\n\n### 4.2 产品目标\n\n- 明确产品的短期和长期目标。\n\n### 4.3 用户和市场\n\n- 描述目标用户群体和市场定位。\n\n## 5. 功能需求\n\n### 5.1 功能列表\n\n- 列出产品需要实现的所有功能。\n\n### 5.2 功能描述\n\n- 对每个功能进行详细描述，包括用户故事或用例。\n\n## 6. 非功能需求\n\n### 6.1 性能要求\n\n- 描述产品的性能标准，如响应时间、并发用户数等。\n\n### 6.2 安全要求\n\n- 列出产品必须满足的安全标准。\n\n### 6.3 可用性要求\n\n- 描述产品的易用性和可访问性要求。\n\n### 6.4 法律和标准\n\n- 指出产品需要遵守的法律、法规和行业标准。\n\n## 7. 技术和开发约束\n\n- 列出技术栈、开发平台、第三方服务等技术约束。\n\n## 8. 项目计划\n\n- 提供产品开发的时间线和里程碑。\n\n## 9. 预算和资源\n\n- 概述项目的预算和所需资源。\n\n## 10. 风险评估\n\n- 识别项目可能面临的风险，并提出相应的缓解措施。\n\n## 11. 附件\n\n- 包括市场调研报告、竞品分析、用户访谈记录等支持文档。\n```\n\n## 新一代AI智能化云盘需求文档说明\n\n### 需求文档\n\n[AI智能化云盘-项目需求文档.pdf](/images/AI智能化云盘/AI智能化云盘-项目需求文档.pdf)\n\n### 需求文档格式\n\n![image-20241217151318969](/images/AI智能化云盘/image-20241217151318969.png)\n\n## 老生常谈-架构图的作用和绘制技巧\n\n### 什么是架构图？画架构图是为了什么？\n\n- 架构图 = 架构 + 图\n\n- 用图的形式把系统架构展示出来，配上简单的文案\n\n- 一图胜千言，解决沟通障碍，给不同的【业务方】看懂\n\n- 业务方很多，不同人看到角度不一样，你让【产品经理】看 【物理部署视图】他看得懂？\n\n### 架构图是给人看的，这些人我们习惯称为【业务方、客户】，有哪些人？\n\n- 人员\n\n  - 上级：你的公司 Leader（晋升汇报）、老板、外部投资人\n\n  - 团队内：产品、运营、测试、技术、运维同学\n\n  - 外部：最终系统使用的用户\n\n- 好比阿里这边评定绩效，有一项就是业务方评分\n\n  - 你做的外部用户的活动系统，测试同学会进行测试，太多 bug 肯定就不行\n\n  - 你做的给运营同学使用的系统，不能提升她运营的效率，业务方是否满意？\n\n### 为什么要搞出这么多个架构图？用一个图不行吗？\n\n- 一开始确实是一个图表示系统架构设计\n\n- 但是业务方很多，不同人看到角度不一样，你让软件用户看物理部署视图？他看得懂？\n\n  - 要明确沟通交流面向的客户\n\n  - 开发人员、运维人员、项目经理、软件最终用户、客户\n\n- 避免在一张图中展示所有细节，根据受众的需要简化信息，突出关键组件和关系。\n\n- 不同架构视图承载不同的架构设计决策，支持不同的目标和用途\n\n- 架构图也不能太多（过度文档化）维护更新起来成本大\n\n### 不同架构图应该使用哪种方法来画?\n\n- 可以用的表示法和工具很多，没有太多的限制，把握对应的视图关注点才是关键\n\n  - Xmind、EdrawMax、PPT、PowerDesigner\n\n  - OmniGraffle、Visio、Process On\n\n- 开始阶段不要陷入过度设计中，没那么多需求不一定要那么多图（你是否有那么多客户）\n\n### 常见架构图作用对比\n\n- 产品/应用/产品业务架构\n\n  - 表达业务是如何开展的，服务于业务目标，通过描绘业务上下层关系，简单的业务视图降低业务系统的复杂 \n\n  - 是对整个系统实现的总体架构 ,  应用架构和**系统架构**很大类似\n\n  - 一方面承接业务架构的落地，一方面影响技术选型\n\n  - 注意：一般应用架构图【不加入太多技术框架和实现】\n\n  - 下面这个是什么架构图（产品架构图-方便技术和产品沟通，图片阿里云官方网站 VOD 视频点播）\n\n    ![p411278-4421764.png](/images/AI智能化云盘/p411278-4421764.png)\n\n- 技术架构\n\n  - 应用架构本身只关心需要哪些应用系统，不关心在整个项目中你需要使用哪些技术\n\n  - 技术架构则是实现应用架构的承接方，识别技术需求，进行技术选型，描述技术之间的关系\n\n  - 解决的问题包括\n\n    - 技术层面的分层、开发语言、框架的选择\n\n    - 通信技术、存储技术的选择、非功能性需求的技术选择等\n\n## D哥不是个画家-但可以教你画架构图\n\n### 在画架构图之前，想清楚3个问题，架构图想表达什么？有什么用？给谁看？\n\n- 表达是业务系统之间的关系，梳理业务结构\n\n- 将复杂的业务逻辑简单化，降低理解难度，更方便业务方理解\n\n- 给业务方查看，业务相关干系人\n\n### 业务架构图\n\n- 表达业务是如何开展的，服务于业务目标，通过描绘业务上下层关系，简单的业务视图降低业务系统的复杂度，提高客户理解度\n\n- 图中【尽量不出现技术】的字眼，不同架构图的读者是不同的，确保能看懂。\n\n- 架构图中模块的划分粒度，一定要合适，既不能太宽泛，也不能太细粒度\n\n- 无技术背景人员可参与实现的讨论，向技术人员描述解决方案核心要做什么，必须实现的关键是什么\n\n- 明白一个点\n\n  - 先有业务，再有系统，微服务/系统/中心  是类似概念\n\n  - 系统是来实现业务的，比如电商业务里面A系统、B系统\n\n### 业务架构类型\n\n- 上中下结构：用户展现层-业务平台层-公共能力层-数据存储层-基础资源层\n\n  - 案例一（图片来源-阿里云数字政府）\n\n    ![image-20241217155520041.png](/images/AI智能化云盘/image-20241217155520041.png)\n\n- 左中右结构：上游产业 - 业务平台- 下游产业\n\n  - 相对较少用，就是倒置过去\n\n### 画图三步走（**不同架构图通用法则**）\n\n- 分层 \n\n  - 业务按照层级进行划分，各个层级属于独立的版块 \n\n  - 下层为上层提供服务能力支撑，比如：laaS / PaaS / SaaS \n\n- 分模块\n\n  - 同层级中进行小归类；属于平行关系，可以独立存在\n\n  - 理清架构图类型、业务要全面、专业术语一致、图形清晰美观、颜色类型划分合理\n\n    - 不同颜色可以表示当下要做的，未来要做的\n\n- 分功能\n\n  - 独立功能划分出来，即业务入口\n\n  - 业务方重点关注的功能点，可以认为是微服务划分\n\n![image-20241217155622979.png](/images/AI智能化云盘/image-20241217155622979.png)\n\n### 如何判断架构图的好和坏？\n\n- 业务抽象设计的合理性，是否满足高内聚、低耦合的要求，不能太宽泛，也不能太细粒度\n\n- 层级划分目标系统边界，自下而上 或 由上而下，一般包括 基础设施、数据层、应用层、用户层四个层次\n\n- 使用清晰的布局，确保组件之间的连接线不交叉，易于跟踪\n\n- 使用颜色和样式来区分不同类型的组件，但不要过度使用，以免分散注意力\n\n- 纵向分层 上层依赖于下层越底层，越是基础服务；横向并列关系，级别相同\n\n- 理清架构图类型、业务要全面、专业术语一致、图形清晰美观、颜色类型划分合理\n\n- 最重要是：**你的业务方能 满意+看懂！！！**\n\n## 新一代AI智能化云盘应用架构图讲解\n\n### 什么是应用架构图\n\n- 是对整个系统实现的总体架构，应用架构和**系统架构**很大类似\n\n- 一方面承接业务架构的落地，一方面影响技术选型\n\n  - 注意：一般应用架构图【不加入太多技术框架和实现】\n\n- 作用\n\n  - 根据业务场景 对系统进分层，指出开发的原则、系统各个层次的应用服务\n\n- 业务方\n\n  - **研发人员，各层级架构师，各层级技术管理者**\n\n- 分类\n\n  - 多系统应用架构，用来分层次说明不同系统间的业务逻辑关系、系统边界等，比如 分布式、微服务\n\n  - 单系统应用架构，用来分层次说明系统的组成模块和功能点之间的业务逻辑关系，比如单体应用\n\n- 常规分层\n\n  - 表示-展现层：负责用户体验\n\n  - 业务-服务层：负责业务逻辑\n\n  - 数据-访问层：负责数据库存取\n\n### 画图三步走\n\n- 分层 \n\n  - 业务按照层级进行划分，各个层级属于独立的版块 \n\n  - 下层为上层提供服务能力支撑，比如：laaS / PaaS / SaaS \n\n- 分模块\n\n  - 同层级中进行小归类；属于平行关系，可以独立存在\n\n  - 理清架构图类型、业务要全面、专业术语一致、图形清晰美观、颜色类型划分合理\n\n    - 不同颜色可以表示当下要做的，未来要做的\n\n- 分功能\n\n  - 独立功能划分出来，即业务入口\n\n  - 业务方重点关注的功能点，可以认为是微服务划分\n\n### 新一代AI智能化云盘应用架构图（找bug）\n\n![image-20241217180704525.png](/images/AI智能化云盘/image-20241217180704525.png)\n\n## 新一代AI智能化云盘技术架构图和作业提交\n\n### 什么是技术架构\n\n- 应用架构本身只关心需要哪些应用系统，不关心在整个项目中你需要使用哪些技术\n\n- 技术架构则是实现应用架构的承接方，识别技术需求，进行技术选型，描述技术之间的关系\n\n- 解决的问题包括\n\n  - 技术层面的分层、开发语言、框架的选择\n\n  - 通信技术、存储技术的选择、非功能性需求的技术选择等\n\n- 案例\n\n  ![image-20241217160721765.png](/images/AI智能化云盘/image-20241217160721765.png)\n\n### 新一代AI智能化云盘技术选型（**下面只是部分技术栈**）\n\n- 基础工具环境：AI 大模型编码插件 + JDK21 + IDEA 旗舰版 + VSCode + Python3.1X + Linux 服务器\n\n- 后端高并发技术：新版 SpringBoot3.X + MybatisPlus + Lombok + Hutool + Mysql8.X + 多个开源工具包\n\n- 中间件 + 存储技术：Redis7.X + Kafak3.X-Kraft架构 + 分布式文件存储 MinIO 或 OSS 存储引擎\n\n- 前后端分离架构下的 Vue3 + AntDesign + Nginx 网关 + 多个前端开源组件 (提供完整代码)\n\n- 超多 AI 大模型 + 模型库应用：新版 GPT/ChatGLM/通义千问等 + Huggingface/ModelScope 等\n\n- AI 大模型技术：FastAPI 框架 + 全新 LangChain 框架 + 向量数据库 Milvus + 多个大模型高频类库等\n\n- LLM 框架组件：Model + Prompt + Agent + Chains + Memory + Indexes + RAG+ReAct 等\n\n- DevOps 上线部署：Jenkins CICD + 阿里云 Git 仓库 + 阿里云 ECS 服务器 + Docker 容器编排调度\n\n### 要求\n\n- 画出新一代 AI 智能化云盘的技术架构图\n\n- 工具任选：draw.io、processOn、其他在线工具\n\n- 新一代 AI 智能化云盘的作业要重视，这些都是切身经历，别到用时方恨少\n\n- 看 10 遍不然做 1 遍，需要达到举一反三能力，不同业务场景\n\n### 答案（珍惜机会，点评的作业）\n\n- 方式一：【截图形式】统一提交给我，加我微信\n\n- 方式二：AI 云盘大课学习群里提交，@我\n\n- 方式三：群里分享图片，多交流经验，时间多的可以画多点","filePath":"src/content/posts/项目大课/AI智能化云盘/AI智能化云盘02.md","digest":"02f2ef36e3abd3e5","rendered":{"html":"<section><h1 id=\"第二章-ai智能化云盘大课需求文档和架构图\">第二章 AI智能化云盘大课需求文档和架构图<a class=\"anchor\" href=\"#第二章-ai智能化云盘大课需求文档和架构图\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"技术组长的你知道如何编写需求文档不\">技术组长的你知道如何编写需求文档不？<a class=\"anchor\" href=\"#技术组长的你知道如何编写需求文档不\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"为什么技术leader需要掌握产品需求文档\">为什么技术Leader需要掌握产品需求文档？<a class=\"anchor\" href=\"#为什么技术leader需要掌握产品需求文档\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>核心：有些不懂技术的产品经理没法编写特定领域的项目需求文档</p><ul>\n<li>\n<p><strong>技术知识缺乏</strong>：</p>\n<ul>\n<li>\n<p>特定领域的项目可能需要特定的技术知识</p>\n</li>\n<li>\n<p>如果产品经理缺乏相关技术背景，难以理解技术实现的复杂性和可行性，从而难以准确描述技术需求</p>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>沟通障碍</strong></p>\n<ul>\n<li>\n<p>产品经理需要与技术团队紧密合作，以确保需求的可实现性</p>\n</li>\n<li>\n<p>如果产品经理不懂技术，他们可能难以与技术团队有效沟通，导致需求文档中的技术细节不准确或不完整</p>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>风险评估不足</strong>：</p>\n<ul>\n<li>不懂技术的产品经理可能无法准确评估技术实现的风险，这可能导致项目在实施过程中遇到预料之外的问题</li>\n</ul>\n</li>\n<li>\n<p><strong>需求优先级判断失误</strong>：</p>\n<ul>\n<li>\n<p>技术背景可以帮助产品经理判断哪些需求对项目成功最为关键</p>\n</li>\n<li>\n<p>缺乏技术背景的产品经理可能难以做出正确的优先级排序</p>\n</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"一份合格的产品需求文档多数内容有即可不同团队要求大体类似\"><strong>一份合格的产品需求文档（多数内容有即可，不同团队要求大体类似）</strong><a class=\"anchor\" href=\"#一份合格的产品需求文档多数内容有即可不同团队要求大体类似\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"markdown\" class=\"wrap\" style=\"--ecMaxLine:28ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">## 1. 标题页</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#24292E;--0fw:bold;--1:#E1E4E8;--1fw:bold\">**产品名称**</span><span style=\"--0:#24292E;--1:#E1E4E8\">：[</span><span style=\"--0:#032F62;--0td:underline;--1:#DBEDFF;--1td:underline\">产品名称</span><span style=\"--0:#24292E;--1:#E1E4E8\">]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#24292E;--0fw:bold;--1:#E1E4E8;--1fw:bold\">**版本/修订号**</span><span style=\"--0:#24292E;--1:#E1E4E8\">：[</span><span style=\"--0:#032F62;--0td:underline;--1:#DBEDFF;--1td:underline\">版本号</span><span style=\"--0:#24292E;--1:#E1E4E8\">]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#24292E;--0fw:bold;--1:#E1E4E8;--1fw:bold\">**编制日期**</span><span style=\"--0:#24292E;--1:#E1E4E8\">：[</span><span style=\"--0:#032F62;--0td:underline;--1:#DBEDFF;--1td:underline\">编制日期</span><span style=\"--0:#24292E;--1:#E1E4E8\">]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#24292E;--0fw:bold;--1:#E1E4E8;--1fw:bold\">**编制人**</span><span style=\"--0:#24292E;--1:#E1E4E8\">：[</span><span style=\"--0:#032F62;--0td:underline;--1:#DBEDFF;--1td:underline\">编制人姓名</span><span style=\"--0:#24292E;--1:#E1E4E8\">]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#24292E;--0fw:bold;--1:#E1E4E8;--1fw:bold\">**审核人**</span><span style=\"--0:#24292E;--1:#E1E4E8\">：[</span><span style=\"--0:#032F62;--0td:underline;--1:#DBEDFF;--1td:underline\">审核人姓名</span><span style=\"--0:#24292E;--1:#E1E4E8\">]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">## 2. 目录</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 根据文档内容创建目录，方便快速跳转到各个部分。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">## 3. 引言</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">### 3.1 目的</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 简要说明编写此文档的目的。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">### 3.2 背景</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 描述产品的背景信息，包括市场机会、业务需求等。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">### 3.3 定义</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 对文档中使用的专业术语或缩写词进行定义。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">## 4. 产品概述</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">### 4.1 产品愿景</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 描述产品的长远目标和愿景。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">### 4.2 产品目标</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 明确产品的短期和长期目标。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">### 4.3 用户和市场</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 描述目标用户群体和市场定位。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">## 5. 功能需求</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">### 5.1 功能列表</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 列出产品需要实现的所有功能。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">### 5.2 功能描述</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 对每个功能进行详细描述，包括用户故事或用例。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">54</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">55</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">## 6. 非功能需求</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">56</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">57</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">### 6.1 性能要求</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">58</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">59</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 描述产品的性能标准，如响应时间、并发用户数等。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">60</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">61</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">### 6.2 安全要求</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">62</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">63</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 列出产品必须满足的安全标准。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">64</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">65</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">### 6.3 可用性要求</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">66</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">67</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 描述产品的易用性和可访问性要求。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">68</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">69</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">### 6.4 法律和标准</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">70</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">71</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 指出产品需要遵守的法律、法规和行业标准。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">72</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">73</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">## 7. 技术和开发约束</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">74</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">75</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 列出技术栈、开发平台、第三方服务等技术约束。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">76</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">77</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">## 8. 项目计划</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">78</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">79</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 提供产品开发的时间线和里程碑。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">80</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">81</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">## 9. 预算和资源</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">82</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">83</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 概述项目的预算和所需资源。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">84</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">85</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">## 10. 风险评估</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">86</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">87</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 识别项目可能面临的风险，并提出相应的缓解措施。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">88</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">89</div></div><div class=\"code\"><span style=\"--0:#005CC5;--0fw:bold;--1:#79B8FF;--1fw:bold\">## 11. 附件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">90</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">91</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 包括市场调研报告、竞品分析、用户访谈记录等支持文档。</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"新一代ai智能化云盘需求文档说明\">新一代AI智能化云盘需求文档说明<a class=\"anchor\" href=\"#新一代ai智能化云盘需求文档说明\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"需求文档\">需求文档<a class=\"anchor\" href=\"#需求文档\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><a href=\"/images/AI%E6%99%BA%E8%83%BD%E5%8C%96%E4%BA%91%E7%9B%98/AI%E6%99%BA%E8%83%BD%E5%8C%96%E4%BA%91%E7%9B%98-%E9%A1%B9%E7%9B%AE%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3.pdf\">AI智能化云盘-项目需求文档.pdf</a></p></section><section><h3 id=\"需求文档格式\">需求文档格式<a class=\"anchor\" href=\"#需求文档格式\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><img src=\"/images/AI%E6%99%BA%E8%83%BD%E5%8C%96%E4%BA%91%E7%9B%98/image-20241217151318969.png\" alt=\"image-20241217151318969\"></p></section></section><section><h2 id=\"老生常谈-架构图的作用和绘制技巧\">老生常谈-架构图的作用和绘制技巧<a class=\"anchor\" href=\"#老生常谈-架构图的作用和绘制技巧\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"什么是架构图画架构图是为了什么\">什么是架构图？画架构图是为了什么？<a class=\"anchor\" href=\"#什么是架构图画架构图是为了什么\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>架构图 = 架构 + 图</p>\n</li>\n<li>\n<p>用图的形式把系统架构展示出来，配上简单的文案</p>\n</li>\n<li>\n<p>一图胜千言，解决沟通障碍，给不同的【业务方】看懂</p>\n</li>\n<li>\n<p>业务方很多，不同人看到角度不一样，你让【产品经理】看 【物理部署视图】他看得懂？</p>\n</li>\n</ul></section><section><h3 id=\"架构图是给人看的这些人我们习惯称为业务方客户有哪些人\">架构图是给人看的，这些人我们习惯称为【业务方、客户】，有哪些人？<a class=\"anchor\" href=\"#架构图是给人看的这些人我们习惯称为业务方客户有哪些人\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>人员</p>\n<ul>\n<li>\n<p>上级：你的公司 Leader（晋升汇报）、老板、外部投资人</p>\n</li>\n<li>\n<p>团队内：产品、运营、测试、技术、运维同学</p>\n</li>\n<li>\n<p>外部：最终系统使用的用户</p>\n</li>\n</ul>\n</li>\n<li>\n<p>好比阿里这边评定绩效，有一项就是业务方评分</p>\n<ul>\n<li>\n<p>你做的外部用户的活动系统，测试同学会进行测试，太多 bug 肯定就不行</p>\n</li>\n<li>\n<p>你做的给运营同学使用的系统，不能提升她运营的效率，业务方是否满意？</p>\n</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"为什么要搞出这么多个架构图用一个图不行吗\">为什么要搞出这么多个架构图？用一个图不行吗？<a class=\"anchor\" href=\"#为什么要搞出这么多个架构图用一个图不行吗\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>一开始确实是一个图表示系统架构设计</p>\n</li>\n<li>\n<p>但是业务方很多，不同人看到角度不一样，你让软件用户看物理部署视图？他看得懂？</p>\n<ul>\n<li>\n<p>要明确沟通交流面向的客户</p>\n</li>\n<li>\n<p>开发人员、运维人员、项目经理、软件最终用户、客户</p>\n</li>\n</ul>\n</li>\n<li>\n<p>避免在一张图中展示所有细节，根据受众的需要简化信息，突出关键组件和关系。</p>\n</li>\n<li>\n<p>不同架构视图承载不同的架构设计决策，支持不同的目标和用途</p>\n</li>\n<li>\n<p>架构图也不能太多（过度文档化）维护更新起来成本大</p>\n</li>\n</ul></section><section><h3 id=\"不同架构图应该使用哪种方法来画\">不同架构图应该使用哪种方法来画?<a class=\"anchor\" href=\"#不同架构图应该使用哪种方法来画\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>可以用的表示法和工具很多，没有太多的限制，把握对应的视图关注点才是关键</p>\n<ul>\n<li>\n<p>Xmind、EdrawMax、PPT、PowerDesigner</p>\n</li>\n<li>\n<p>OmniGraffle、Visio、Process On</p>\n</li>\n</ul>\n</li>\n<li>\n<p>开始阶段不要陷入过度设计中，没那么多需求不一定要那么多图（你是否有那么多客户）</p>\n</li>\n</ul></section><section><h3 id=\"常见架构图作用对比\">常见架构图作用对比<a class=\"anchor\" href=\"#常见架构图作用对比\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>产品/应用/产品业务架构</p>\n<ul>\n<li>\n<p>表达业务是如何开展的，服务于业务目标，通过描绘业务上下层关系，简单的业务视图降低业务系统的复杂</p>\n</li>\n<li>\n<p>是对整个系统实现的总体架构 ,  应用架构和<strong>系统架构</strong>很大类似</p>\n</li>\n<li>\n<p>一方面承接业务架构的落地，一方面影响技术选型</p>\n</li>\n<li>\n<p>注意：一般应用架构图【不加入太多技术框架和实现】</p>\n</li>\n<li>\n<p>下面这个是什么架构图（产品架构图-方便技术和产品沟通，图片阿里云官方网站 VOD 视频点播）</p>\n<p><img src=\"/images/AI%E6%99%BA%E8%83%BD%E5%8C%96%E4%BA%91%E7%9B%98/p411278-4421764.png\" alt=\"p411278-4421764.png\"></p>\n</li>\n</ul>\n</li>\n<li>\n<p>技术架构</p>\n<ul>\n<li>\n<p>应用架构本身只关心需要哪些应用系统，不关心在整个项目中你需要使用哪些技术</p>\n</li>\n<li>\n<p>技术架构则是实现应用架构的承接方，识别技术需求，进行技术选型，描述技术之间的关系</p>\n</li>\n<li>\n<p>解决的问题包括</p>\n<ul>\n<li>\n<p>技术层面的分层、开发语言、框架的选择</p>\n</li>\n<li>\n<p>通信技术、存储技术的选择、非功能性需求的技术选择等</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul></section></section><section><h2 id=\"d哥不是个画家-但可以教你画架构图\">D哥不是个画家-但可以教你画架构图<a class=\"anchor\" href=\"#d哥不是个画家-但可以教你画架构图\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"在画架构图之前想清楚3个问题架构图想表达什么有什么用给谁看\">在画架构图之前，想清楚3个问题，架构图想表达什么？有什么用？给谁看？<a class=\"anchor\" href=\"#在画架构图之前想清楚3个问题架构图想表达什么有什么用给谁看\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>表达是业务系统之间的关系，梳理业务结构</p>\n</li>\n<li>\n<p>将复杂的业务逻辑简单化，降低理解难度，更方便业务方理解</p>\n</li>\n<li>\n<p>给业务方查看，业务相关干系人</p>\n</li>\n</ul></section><section><h3 id=\"业务架构图\">业务架构图<a class=\"anchor\" href=\"#业务架构图\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>表达业务是如何开展的，服务于业务目标，通过描绘业务上下层关系，简单的业务视图降低业务系统的复杂度，提高客户理解度</p>\n</li>\n<li>\n<p>图中【尽量不出现技术】的字眼，不同架构图的读者是不同的，确保能看懂。</p>\n</li>\n<li>\n<p>架构图中模块的划分粒度，一定要合适，既不能太宽泛，也不能太细粒度</p>\n</li>\n<li>\n<p>无技术背景人员可参与实现的讨论，向技术人员描述解决方案核心要做什么，必须实现的关键是什么</p>\n</li>\n<li>\n<p>明白一个点</p>\n<ul>\n<li>\n<p>先有业务，再有系统，微服务/系统/中心  是类似概念</p>\n</li>\n<li>\n<p>系统是来实现业务的，比如电商业务里面A系统、B系统</p>\n</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"业务架构类型\">业务架构类型<a class=\"anchor\" href=\"#业务架构类型\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>上中下结构：用户展现层-业务平台层-公共能力层-数据存储层-基础资源层</p>\n<ul>\n<li>\n<p>案例一（图片来源-阿里云数字政府）</p>\n<p><img src=\"/images/AI%E6%99%BA%E8%83%BD%E5%8C%96%E4%BA%91%E7%9B%98/image-20241217155520041.png\" alt=\"image-20241217155520041.png\"></p>\n</li>\n</ul>\n</li>\n<li>\n<p>左中右结构：上游产业 - 业务平台- 下游产业</p>\n<ul>\n<li>相对较少用，就是倒置过去</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"画图三步走不同架构图通用法则\">画图三步走（<strong>不同架构图通用法则</strong>）<a class=\"anchor\" href=\"#画图三步走不同架构图通用法则\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>分层</p>\n<ul>\n<li>\n<p>业务按照层级进行划分，各个层级属于独立的版块</p>\n</li>\n<li>\n<p>下层为上层提供服务能力支撑，比如：laaS / PaaS / SaaS</p>\n</li>\n</ul>\n</li>\n<li>\n<p>分模块</p>\n<ul>\n<li>\n<p>同层级中进行小归类；属于平行关系，可以独立存在</p>\n</li>\n<li>\n<p>理清架构图类型、业务要全面、专业术语一致、图形清晰美观、颜色类型划分合理</p>\n<ul>\n<li>不同颜色可以表示当下要做的，未来要做的</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>分功能</p>\n<ul>\n<li>\n<p>独立功能划分出来，即业务入口</p>\n</li>\n<li>\n<p>业务方重点关注的功能点，可以认为是微服务划分</p>\n</li>\n</ul>\n</li>\n</ul><p><img src=\"/images/AI%E6%99%BA%E8%83%BD%E5%8C%96%E4%BA%91%E7%9B%98/image-20241217155622979.png\" alt=\"image-20241217155622979.png\"></p></section><section><h3 id=\"如何判断架构图的好和坏\">如何判断架构图的好和坏？<a class=\"anchor\" href=\"#如何判断架构图的好和坏\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>业务抽象设计的合理性，是否满足高内聚、低耦合的要求，不能太宽泛，也不能太细粒度</p>\n</li>\n<li>\n<p>层级划分目标系统边界，自下而上 或 由上而下，一般包括 基础设施、数据层、应用层、用户层四个层次</p>\n</li>\n<li>\n<p>使用清晰的布局，确保组件之间的连接线不交叉，易于跟踪</p>\n</li>\n<li>\n<p>使用颜色和样式来区分不同类型的组件，但不要过度使用，以免分散注意力</p>\n</li>\n<li>\n<p>纵向分层 上层依赖于下层越底层，越是基础服务；横向并列关系，级别相同</p>\n</li>\n<li>\n<p>理清架构图类型、业务要全面、专业术语一致、图形清晰美观、颜色类型划分合理</p>\n</li>\n<li>\n<p>最重要是：<strong>你的业务方能 满意+看懂！！！</strong></p>\n</li>\n</ul></section></section><section><h2 id=\"新一代ai智能化云盘应用架构图讲解\">新一代AI智能化云盘应用架构图讲解<a class=\"anchor\" href=\"#新一代ai智能化云盘应用架构图讲解\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"什么是应用架构图\">什么是应用架构图<a class=\"anchor\" href=\"#什么是应用架构图\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>是对整个系统实现的总体架构，应用架构和<strong>系统架构</strong>很大类似</p>\n</li>\n<li>\n<p>一方面承接业务架构的落地，一方面影响技术选型</p>\n<ul>\n<li>注意：一般应用架构图【不加入太多技术框架和实现】</li>\n</ul>\n</li>\n<li>\n<p>作用</p>\n<ul>\n<li>根据业务场景 对系统进分层，指出开发的原则、系统各个层次的应用服务</li>\n</ul>\n</li>\n<li>\n<p>业务方</p>\n<ul>\n<li><strong>研发人员，各层级架构师，各层级技术管理者</strong></li>\n</ul>\n</li>\n<li>\n<p>分类</p>\n<ul>\n<li>\n<p>多系统应用架构，用来分层次说明不同系统间的业务逻辑关系、系统边界等，比如 分布式、微服务</p>\n</li>\n<li>\n<p>单系统应用架构，用来分层次说明系统的组成模块和功能点之间的业务逻辑关系，比如单体应用</p>\n</li>\n</ul>\n</li>\n<li>\n<p>常规分层</p>\n<ul>\n<li>\n<p>表示-展现层：负责用户体验</p>\n</li>\n<li>\n<p>业务-服务层：负责业务逻辑</p>\n</li>\n<li>\n<p>数据-访问层：负责数据库存取</p>\n</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"画图三步走\">画图三步走<a class=\"anchor\" href=\"#画图三步走\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>分层</p>\n<ul>\n<li>\n<p>业务按照层级进行划分，各个层级属于独立的版块</p>\n</li>\n<li>\n<p>下层为上层提供服务能力支撑，比如：laaS / PaaS / SaaS</p>\n</li>\n</ul>\n</li>\n<li>\n<p>分模块</p>\n<ul>\n<li>\n<p>同层级中进行小归类；属于平行关系，可以独立存在</p>\n</li>\n<li>\n<p>理清架构图类型、业务要全面、专业术语一致、图形清晰美观、颜色类型划分合理</p>\n<ul>\n<li>不同颜色可以表示当下要做的，未来要做的</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>分功能</p>\n<ul>\n<li>\n<p>独立功能划分出来，即业务入口</p>\n</li>\n<li>\n<p>业务方重点关注的功能点，可以认为是微服务划分</p>\n</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"新一代ai智能化云盘应用架构图找bug\">新一代AI智能化云盘应用架构图（找bug）<a class=\"anchor\" href=\"#新一代ai智能化云盘应用架构图找bug\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><img src=\"/images/AI%E6%99%BA%E8%83%BD%E5%8C%96%E4%BA%91%E7%9B%98/image-20241217180704525.png\" alt=\"image-20241217180704525.png\"></p></section></section><section><h2 id=\"新一代ai智能化云盘技术架构图和作业提交\">新一代AI智能化云盘技术架构图和作业提交<a class=\"anchor\" href=\"#新一代ai智能化云盘技术架构图和作业提交\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"什么是技术架构\">什么是技术架构<a class=\"anchor\" href=\"#什么是技术架构\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>应用架构本身只关心需要哪些应用系统，不关心在整个项目中你需要使用哪些技术</p>\n</li>\n<li>\n<p>技术架构则是实现应用架构的承接方，识别技术需求，进行技术选型，描述技术之间的关系</p>\n</li>\n<li>\n<p>解决的问题包括</p>\n<ul>\n<li>\n<p>技术层面的分层、开发语言、框架的选择</p>\n</li>\n<li>\n<p>通信技术、存储技术的选择、非功能性需求的技术选择等</p>\n</li>\n</ul>\n</li>\n<li>\n<p>案例</p>\n<p><img src=\"/images/AI%E6%99%BA%E8%83%BD%E5%8C%96%E4%BA%91%E7%9B%98/image-20241217160721765.png\" alt=\"image-20241217160721765.png\"></p>\n</li>\n</ul></section><section><h3 id=\"新一代ai智能化云盘技术选型下面只是部分技术栈\">新一代AI智能化云盘技术选型（<strong>下面只是部分技术栈</strong>）<a class=\"anchor\" href=\"#新一代ai智能化云盘技术选型下面只是部分技术栈\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>基础工具环境：AI 大模型编码插件 + JDK21 + IDEA 旗舰版 + VSCode + Python3.1X + Linux 服务器</p>\n</li>\n<li>\n<p>后端高并发技术：新版 SpringBoot3.X + MybatisPlus + Lombok + Hutool + Mysql8.X + 多个开源工具包</p>\n</li>\n<li>\n<p>中间件 + 存储技术：Redis7.X + Kafak3.X-Kraft架构 + 分布式文件存储 MinIO 或 OSS 存储引擎</p>\n</li>\n<li>\n<p>前后端分离架构下的 Vue3 + AntDesign + Nginx 网关 + 多个前端开源组件 (提供完整代码)</p>\n</li>\n<li>\n<p>超多 AI 大模型 + 模型库应用：新版 GPT/ChatGLM/通义千问等 + Huggingface/ModelScope 等</p>\n</li>\n<li>\n<p>AI 大模型技术：FastAPI 框架 + 全新 LangChain 框架 + 向量数据库 Milvus + 多个大模型高频类库等</p>\n</li>\n<li>\n<p>LLM 框架组件：Model + Prompt + Agent + Chains + Memory + Indexes + RAG+ReAct 等</p>\n</li>\n<li>\n<p>DevOps 上线部署：Jenkins CICD + 阿里云 Git 仓库 + 阿里云 ECS 服务器 + Docker 容器编排调度</p>\n</li>\n</ul></section><section><h3 id=\"要求\">要求<a class=\"anchor\" href=\"#要求\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>画出新一代 AI 智能化云盘的技术架构图</p>\n</li>\n<li>\n<p>工具任选：draw.io、processOn、其他在线工具</p>\n</li>\n<li>\n<p>新一代 AI 智能化云盘的作业要重视，这些都是切身经历，别到用时方恨少</p>\n</li>\n<li>\n<p>看 10 遍不然做 1 遍，需要达到举一反三能力，不同业务场景</p>\n</li>\n</ul></section><section><h3 id=\"答案珍惜机会点评的作业\">答案（珍惜机会，点评的作业）<a class=\"anchor\" href=\"#答案珍惜机会点评的作业\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>方式一：【截图形式】统一提交给我，加我微信</p>\n</li>\n<li>\n<p>方式二：AI 云盘大课学习群里提交，@我</p>\n</li>\n<li>\n<p>方式三：群里分享图片，多交流经验，时间多的可以画多点</p>\n</li>\n</ul></section></section></section>","metadata":{"headings":[{"depth":1,"slug":"第二章-ai智能化云盘大课需求文档和架构图","text":"第二章 AI智能化云盘大课需求文档和架构图#"},{"depth":2,"slug":"技术组长的你知道如何编写需求文档不","text":"技术组长的你知道如何编写需求文档不？#"},{"depth":3,"slug":"为什么技术leader需要掌握产品需求文档","text":"为什么技术Leader需要掌握产品需求文档？#"},{"depth":3,"slug":"一份合格的产品需求文档多数内容有即可不同团队要求大体类似","text":"一份合格的产品需求文档（多数内容有即可，不同团队要求大体类似）#"},{"depth":2,"slug":"新一代ai智能化云盘需求文档说明","text":"新一代AI智能化云盘需求文档说明#"},{"depth":3,"slug":"需求文档","text":"需求文档#"},{"depth":3,"slug":"需求文档格式","text":"需求文档格式#"},{"depth":2,"slug":"老生常谈-架构图的作用和绘制技巧","text":"老生常谈-架构图的作用和绘制技巧#"},{"depth":3,"slug":"什么是架构图画架构图是为了什么","text":"什么是架构图？画架构图是为了什么？#"},{"depth":3,"slug":"架构图是给人看的这些人我们习惯称为业务方客户有哪些人","text":"架构图是给人看的，这些人我们习惯称为【业务方、客户】，有哪些人？#"},{"depth":3,"slug":"为什么要搞出这么多个架构图用一个图不行吗","text":"为什么要搞出这么多个架构图？用一个图不行吗？#"},{"depth":3,"slug":"不同架构图应该使用哪种方法来画","text":"不同架构图应该使用哪种方法来画?#"},{"depth":3,"slug":"常见架构图作用对比","text":"常见架构图作用对比#"},{"depth":2,"slug":"d哥不是个画家-但可以教你画架构图","text":"D哥不是个画家-但可以教你画架构图#"},{"depth":3,"slug":"在画架构图之前想清楚3个问题架构图想表达什么有什么用给谁看","text":"在画架构图之前，想清楚3个问题，架构图想表达什么？有什么用？给谁看？#"},{"depth":3,"slug":"业务架构图","text":"业务架构图#"},{"depth":3,"slug":"业务架构类型","text":"业务架构类型#"},{"depth":3,"slug":"画图三步走不同架构图通用法则","text":"画图三步走（不同架构图通用法则）#"},{"depth":3,"slug":"如何判断架构图的好和坏","text":"如何判断架构图的好和坏？#"},{"depth":2,"slug":"新一代ai智能化云盘应用架构图讲解","text":"新一代AI智能化云盘应用架构图讲解#"},{"depth":3,"slug":"什么是应用架构图","text":"什么是应用架构图#"},{"depth":3,"slug":"画图三步走","text":"画图三步走#"},{"depth":3,"slug":"新一代ai智能化云盘应用架构图找bug","text":"新一代AI智能化云盘应用架构图（找bug）#"},{"depth":2,"slug":"新一代ai智能化云盘技术架构图和作业提交","text":"新一代AI智能化云盘技术架构图和作业提交#"},{"depth":3,"slug":"什么是技术架构","text":"什么是技术架构#"},{"depth":3,"slug":"新一代ai智能化云盘技术选型下面只是部分技术栈","text":"新一代AI智能化云盘技术选型（下面只是部分技术栈）#"},{"depth":3,"slug":"要求","text":"要求#"},{"depth":3,"slug":"答案珍惜机会点评的作业","text":"答案（珍惜机会，点评的作业）#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"AI智能化云盘02","published":"2025-11-20T00:00:00.000Z","pinned":false,"description":"第二章 AI智能化云盘大课需求文档和架构图","image":"","tags":["AI智能化云盘"],"category":"项目大课","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":17,"words":3407,"excerpt":"核心：有些不懂技术的产品经理没法编写特定领域的项目需求文档"},"imagePaths":[]}},"collection":"posts"}],"2025-11-19":[{"id":"读书笔记/运动改造大脑","data":{"title":"《运动改造大脑》","published":"2025-11-19T00:00:00.000Z","draft":false,"description":"《运动改造大脑》读书笔记","image":"./images/s34542411.jpg","tags":["运动","大脑"],"category":"读书笔记","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"《锻炼》","prevSlug":"读书笔记/锻炼","nextTitle":"AI智能化云盘02","nextSlug":"项目大课/ai智能化云盘/ai智能化云盘02"},"body":"# 《运动改造大脑》读书笔记","filePath":"src/content/posts/读书笔记/《运动改造大脑》.md","digest":"30eb2e1819524813","rendered":{"html":"<section><h1 id=\"运动改造大脑读书笔记\">《运动改造大脑》读书笔记<a class=\"anchor\" href=\"#运动改造大脑读书笔记\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1></section>","metadata":{"headings":[{"depth":1,"slug":"运动改造大脑读书笔记","text":"《运动改造大脑》读书笔记#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"《运动改造大脑》","published":"2025-11-19T00:00:00.000Z","pinned":false,"description":"《运动改造大脑》读书笔记","image":"./images/s34542411.jpg","tags":["运动","大脑"],"category":"读书笔记","draft":false,"encrypted":false,"password":"","lang":"zh_CN","minutes":1,"words":11,"excerpt":""},"imagePaths":[]}},"collection":"posts"},{"id":"读书笔记/锻炼","data":{"title":"《锻炼》","published":"2025-11-19T00:00:00.000Z","draft":false,"description":"《锻炼》读书笔记","image":"./images/s34261331.jpg","tags":["锻炼"],"category":"读书笔记","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"后端高级工程师面试专题17","prevSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题17","nextTitle":"《运动改造大脑》","nextSlug":"读书笔记/运动改造大脑"},"body":"# 《锻炼》读书笔记","filePath":"src/content/posts/读书笔记/《锻炼》.md","digest":"c1a1a1430c670365","rendered":{"html":"<section><h1 id=\"锻炼读书笔记\">《锻炼》读书笔记<a class=\"anchor\" href=\"#锻炼读书笔记\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1></section>","metadata":{"headings":[{"depth":1,"slug":"锻炼读书笔记","text":"《锻炼》读书笔记#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"《锻炼》","published":"2025-11-19T00:00:00.000Z","pinned":false,"description":"《锻炼》读书笔记","image":"./images/s34261331.jpg","tags":["锻炼"],"category":"读书笔记","draft":false,"encrypted":false,"password":"","lang":"zh_CN","minutes":1,"words":7,"excerpt":""},"imagePaths":[]}},"collection":"posts"}],"2025-11-17":[{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题17","data":{"title":"后端高级工程师面试专题17","published":"2025-11-17T00:00:00.000Z","draft":false,"description":"第十七章 小滴课堂第一季面试专题总结章和后续规划","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"后端高级工程师面试专题16","prevSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题16","nextTitle":"《锻炼》","nextSlug":"读书笔记/锻炼"},"body":"## 第十七章 小滴课堂第一季面试专题总结章和后续规划\n\n### 第 1 集 小滴课堂面试专题第一季课程总结\n\n**简介：小滴课堂面试专题课程总结和学习路线建议**\n\n- 课程总结\n\n  - 对标高级工程师\n  - 一线城市 15~25k 基本没问题\n\n- 第二季计划和架构系列面试题（30~50k）\n\n  - 分布式系列\n\n    - CAP/BASE 理论等\n    - 事务\n    - 锁\n    - 缓存\n\n  - 大型网站进化\n\n  - 高可用系列\n\n    - 熔断、降级、限流\n\n  - 高并发系列\n\n  - 海量数据处理系列\n\n  - 网络和协议\n\n    - TCP\n    - 网络模型\n\n  - 数据结构和算法\n\n  - 前端性能优化系列\n\n  - JVM 和框架源码\n\n  - 高级测试系列\n\n    - 自动化脚本、压测\n    - 流量复制\n    - 安全测试\n\n  - 容器虚拟化系列\n\n  - 架构设计系列\n\n    - 技术选型系列\n    - 项目场景设计系列\n    - 中台\n\n  - 应用数据安全和监控系列\n\n  - 项目管理和产品数据运营\n\n    - 项目管理系列\n    - 沟通能力\n    - 数据思维能力\n    - 产品运营能力\n\n- 理论+实操+多巩固复习\n\n- 针对知识盲点 - 一定要看对应的专题课程和相关资料\n\n**小滴课堂，愿景：让编程不在难学，让技术与生活更加有趣**\n\n**相信我们，这个是可以让你学习更加轻松的平台，里面的课程绝对会让你技术不断提升**\n\n**欢迎加小 D 讲师的微信： xdclass-lw**\n\n我们官方网站：[https://xdclass.net](https://xdclass.net/)\n\n**千人 IT 技术交流 QQ 群： 718617859**\n\n**重点来啦：加讲师微信 免费赠送你干货文档大集合**，包含前端，后端，测试，大数据，运维主流技术文档（持续更新）\n\n<https://mp.weixin.qq.com/s/qYnjcDYGFDQorWmSfE7lpQ>","filePath":"src/content/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题17.md","digest":"dda8545073cb64cf","rendered":{"html":"<section><h2 id=\"第十七章-小滴课堂第一季面试专题总结章和后续规划\">第十七章 小滴课堂第一季面试专题总结章和后续规划<a class=\"anchor\" href=\"#第十七章-小滴课堂第一季面试专题总结章和后续规划\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"第-1-集-小滴课堂面试专题第一季课程总结\">第 1 集 小滴课堂面试专题第一季课程总结<a class=\"anchor\" href=\"#第-1-集-小滴课堂面试专题第一季课程总结\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：小滴课堂面试专题课程总结和学习路线建议</strong></p><ul>\n<li>\n<p>课程总结</p>\n<ul>\n<li>对标高级工程师</li>\n<li>一线城市 15~25k 基本没问题</li>\n</ul>\n</li>\n<li>\n<p>第二季计划和架构系列面试题（30~50k）</p>\n<ul>\n<li>\n<p>分布式系列</p>\n<ul>\n<li>CAP/BASE 理论等</li>\n<li>事务</li>\n<li>锁</li>\n<li>缓存</li>\n</ul>\n</li>\n<li>\n<p>大型网站进化</p>\n</li>\n<li>\n<p>高可用系列</p>\n<ul>\n<li>熔断、降级、限流</li>\n</ul>\n</li>\n<li>\n<p>高并发系列</p>\n</li>\n<li>\n<p>海量数据处理系列</p>\n</li>\n<li>\n<p>网络和协议</p>\n<ul>\n<li>TCP</li>\n<li>网络模型</li>\n</ul>\n</li>\n<li>\n<p>数据结构和算法</p>\n</li>\n<li>\n<p>前端性能优化系列</p>\n</li>\n<li>\n<p>JVM 和框架源码</p>\n</li>\n<li>\n<p>高级测试系列</p>\n<ul>\n<li>自动化脚本、压测</li>\n<li>流量复制</li>\n<li>安全测试</li>\n</ul>\n</li>\n<li>\n<p>容器虚拟化系列</p>\n</li>\n<li>\n<p>架构设计系列</p>\n<ul>\n<li>技术选型系列</li>\n<li>项目场景设计系列</li>\n<li>中台</li>\n</ul>\n</li>\n<li>\n<p>应用数据安全和监控系列</p>\n</li>\n<li>\n<p>项目管理和产品数据运营</p>\n<ul>\n<li>项目管理系列</li>\n<li>沟通能力</li>\n<li>数据思维能力</li>\n<li>产品运营能力</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>理论+实操+多巩固复习</p>\n</li>\n<li>\n<p>针对知识盲点 - 一定要看对应的专题课程和相关资料</p>\n</li>\n</ul><p><strong>小滴课堂，愿景：让编程不在难学，让技术与生活更加有趣</strong></p><p><strong>相信我们，这个是可以让你学习更加轻松的平台，里面的课程绝对会让你技术不断提升</strong></p><p><strong>欢迎加小 D 讲师的微信： xdclass-lw</strong></p><p>我们官方网站：<a href=\"https://xdclass.net/\">https://xdclass.net</a></p><p><strong>千人 IT 技术交流 QQ 群： 718617859</strong></p><p><strong>重点来啦：加讲师微信 免费赠送你干货文档大集合</strong>，包含前端，后端，测试，大数据，运维主流技术文档（持续更新）</p><p><a href=\"https://mp.weixin.qq.com/s/qYnjcDYGFDQorWmSfE7lpQ\">https://mp.weixin.qq.com/s/qYnjcDYGFDQorWmSfE7lpQ</a></p></section></section>","metadata":{"headings":[{"depth":2,"slug":"第十七章-小滴课堂第一季面试专题总结章和后续规划","text":"第十七章 小滴课堂第一季面试专题总结章和后续规划#"},{"depth":3,"slug":"第-1-集-小滴课堂面试专题第一季课程总结","text":"第 1 集 小滴课堂面试专题第一季课程总结#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"后端高级工程师面试专题17","published":"2025-11-17T00:00:00.000Z","pinned":false,"description":"第十七章 小滴课堂第一季面试专题总结章和后续规划","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":2,"words":429,"excerpt":"简介：小滴课堂面试专题课程总结和学习路线建议"},"imagePaths":[]}},"collection":"posts"}],"2025-11-16":[{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题16","data":{"title":"后端高级工程师面试专题16","published":"2025-11-16T00:00:00.000Z","draft":false,"description":"第十六章 带你看小滴课堂微服务架构+编写面试 BAT 高级工程师简历","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"后端高级工程师面试专题15","prevSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题15","nextTitle":"后端高级工程师面试专题17","nextSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题17"},"body":"## 第十六章 带你看小滴课堂微服务架构+编写面试 BAT 高级工程师简历\n\n### 第 1 集 你知道未来的小滴课堂微服务架构图吗？\n\n**简介：概述分析小滴课堂未来架构图，作为简历编写铺垫**\n\n- 小滴课堂未来架构拆分\n\n- 微服务下的系统模块功能概述\n\n![](/images/后端高级工程师面试专题/14b33577-1d85-46cb-b51f-5f74548bdfcc.jpg)\n\n### 第 2 集 你知道怎么编写一份合格的初级+高级工程师简历吗\n\n**简介：简历常见的模块，哪些应该写，哪些不应该写**\n\n- 个人信息\n- 教育经历\n- 技术栈\n- 工作经历\n- 个人评价\n\n### 第 3 集 编写面试大厂月薪 20k+的高级工程师简历【原创】\n\n**简介：讲师小 D 原创，解读一份面试大厂高级工程师的简历**\n\n- 个人信息\n- 教育经历\n- 技术栈\n- 工作经历\n- 个人评价\n\n![](/images/后端高级工程师面试专题/163b263f-dad9-4d94-bab3-c56db69e5283.jpg)\n\n### 第 4 集 简历项目经验讲解之在线教育视频服务\n\n**简介：讲解简历里面的项目经验-视频服务**\n\n![](/images/后端高级工程师面试专题/dbe40f49-02cb-49e7-bcf3-475e24319f0b.jpg)\n\n![](/images/后端高级工程师面试专题/63591f3a-18db-4bbf-b196-60bc51ee9fe8.jpg)\n\n### 第 5 集 简历项目经验之电商核心支付网关\n\n**简介：概述简历里面的支付网关知识**\n\n![](/images/后端高级工程师面试专题/765cd4c5-6a68-46ac-8dde-1609ef02639c.jpg)\n\n![](/images/后端高级工程师面试专题/76af3ed2-20a8-4759-b695-47affd21b856.jpg)\n\n### 第 6 集 简历项目经验之用户中心的作用\n\n**简介：概述简历里面的用户中心的作用**\n\n![](/images/后端高级工程师面试专题/de200400-b75a-453a-be35-4f82ced014c5.jpg)\n\n### 第 7 集 简历项目经验之营销插件服务\n\n**简介：概述简历里面的营销插件服务**\n\n![](/images/后端高级工程师面试专题/d69b489d-6ff5-4a34-bee9-313b7e88d527.jpg)\n\n### 第 8 集 简历编写总结回顾，酒香不怕巷子深\n\n**简介：总结回顾简历编写的实现**","filePath":"src/content/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题16.md","digest":"d3f2e965cade4f77","rendered":{"html":"<section><h2 id=\"第十六章-带你看小滴课堂微服务架构编写面试-bat-高级工程师简历\">第十六章 带你看小滴课堂微服务架构+编写面试 BAT 高级工程师简历<a class=\"anchor\" href=\"#第十六章-带你看小滴课堂微服务架构编写面试-bat-高级工程师简历\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"第-1-集-你知道未来的小滴课堂微服务架构图吗\">第 1 集 你知道未来的小滴课堂微服务架构图吗？<a class=\"anchor\" href=\"#第-1-集-你知道未来的小滴课堂微服务架构图吗\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：概述分析小滴课堂未来架构图，作为简历编写铺垫</strong></p><ul>\n<li>\n<p>小滴课堂未来架构拆分</p>\n</li>\n<li>\n<p>微服务下的系统模块功能概述</p>\n</li>\n</ul><p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/14b33577-1d85-46cb-b51f-5f74548bdfcc.jpg\" alt=\"\"></p></section><section><h3 id=\"第-2-集-你知道怎么编写一份合格的初级高级工程师简历吗\">第 2 集 你知道怎么编写一份合格的初级+高级工程师简历吗<a class=\"anchor\" href=\"#第-2-集-你知道怎么编写一份合格的初级高级工程师简历吗\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：简历常见的模块，哪些应该写，哪些不应该写</strong></p><ul>\n<li>个人信息</li>\n<li>教育经历</li>\n<li>技术栈</li>\n<li>工作经历</li>\n<li>个人评价</li>\n</ul></section><section><h3 id=\"第-3-集-编写面试大厂月薪-20k的高级工程师简历原创\">第 3 集 编写面试大厂月薪 20k+的高级工程师简历【原创】<a class=\"anchor\" href=\"#第-3-集-编写面试大厂月薪-20k的高级工程师简历原创\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：讲师小 D 原创，解读一份面试大厂高级工程师的简历</strong></p><ul>\n<li>个人信息</li>\n<li>教育经历</li>\n<li>技术栈</li>\n<li>工作经历</li>\n<li>个人评价</li>\n</ul><p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/163b263f-dad9-4d94-bab3-c56db69e5283.jpg\" alt=\"\"></p></section><section><h3 id=\"第-4-集-简历项目经验讲解之在线教育视频服务\">第 4 集 简历项目经验讲解之在线教育视频服务<a class=\"anchor\" href=\"#第-4-集-简历项目经验讲解之在线教育视频服务\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：讲解简历里面的项目经验-视频服务</strong></p><p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/dbe40f49-02cb-49e7-bcf3-475e24319f0b.jpg\" alt=\"\"></p><p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/63591f3a-18db-4bbf-b196-60bc51ee9fe8.jpg\" alt=\"\"></p></section><section><h3 id=\"第-5-集-简历项目经验之电商核心支付网关\">第 5 集 简历项目经验之电商核心支付网关<a class=\"anchor\" href=\"#第-5-集-简历项目经验之电商核心支付网关\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：概述简历里面的支付网关知识</strong></p><p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/765cd4c5-6a68-46ac-8dde-1609ef02639c.jpg\" alt=\"\"></p><p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/76af3ed2-20a8-4759-b695-47affd21b856.jpg\" alt=\"\"></p></section><section><h3 id=\"第-6-集-简历项目经验之用户中心的作用\">第 6 集 简历项目经验之用户中心的作用<a class=\"anchor\" href=\"#第-6-集-简历项目经验之用户中心的作用\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：概述简历里面的用户中心的作用</strong></p><p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/de200400-b75a-453a-be35-4f82ced014c5.jpg\" alt=\"\"></p></section><section><h3 id=\"第-7-集-简历项目经验之营销插件服务\">第 7 集 简历项目经验之营销插件服务<a class=\"anchor\" href=\"#第-7-集-简历项目经验之营销插件服务\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：概述简历里面的营销插件服务</strong></p><p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/d69b489d-6ff5-4a34-bee9-313b7e88d527.jpg\" alt=\"\"></p></section><section><h3 id=\"第-8-集-简历编写总结回顾酒香不怕巷子深\">第 8 集 简历编写总结回顾，酒香不怕巷子深<a class=\"anchor\" href=\"#第-8-集-简历编写总结回顾酒香不怕巷子深\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：总结回顾简历编写的实现</strong></p></section></section>","metadata":{"headings":[{"depth":2,"slug":"第十六章-带你看小滴课堂微服务架构编写面试-bat-高级工程师简历","text":"第十六章 带你看小滴课堂微服务架构+编写面试 BAT 高级工程师简历#"},{"depth":3,"slug":"第-1-集-你知道未来的小滴课堂微服务架构图吗","text":"第 1 集 你知道未来的小滴课堂微服务架构图吗？#"},{"depth":3,"slug":"第-2-集-你知道怎么编写一份合格的初级高级工程师简历吗","text":"第 2 集 你知道怎么编写一份合格的初级+高级工程师简历吗#"},{"depth":3,"slug":"第-3-集-编写面试大厂月薪-20k的高级工程师简历原创","text":"第 3 集 编写面试大厂月薪 20k+的高级工程师简历【原创】#"},{"depth":3,"slug":"第-4-集-简历项目经验讲解之在线教育视频服务","text":"第 4 集 简历项目经验讲解之在线教育视频服务#"},{"depth":3,"slug":"第-5-集-简历项目经验之电商核心支付网关","text":"第 5 集 简历项目经验之电商核心支付网关#"},{"depth":3,"slug":"第-6-集-简历项目经验之用户中心的作用","text":"第 6 集 简历项目经验之用户中心的作用#"},{"depth":3,"slug":"第-7-集-简历项目经验之营销插件服务","text":"第 7 集 简历项目经验之营销插件服务#"},{"depth":3,"slug":"第-8-集-简历编写总结回顾酒香不怕巷子深","text":"第 8 集 简历编写总结回顾，酒香不怕巷子深#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"后端高级工程师面试专题16","published":"2025-11-16T00:00:00.000Z","pinned":false,"description":"第十六章 带你看小滴课堂微服务架构+编写面试 BAT 高级工程师简历","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":2,"words":388,"excerpt":"简介：概述分析小滴课堂未来架构图，作为简历编写铺垫"},"imagePaths":[]}},"collection":"posts"}],"2025-11-15":[{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题15","data":{"title":"后端高级工程师面试专题15","published":"2025-11-15T00:00:00.000Z","draft":false,"description":"第十五章 缓存的常见面试题你知道多少","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"后端高级工程师面试专题14","prevSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题14","nextTitle":"后端高级工程师面试专题16","nextSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题16"},"body":"## 第十五章 缓存的常见面试题你知道多少\n\n### 第 1 集 分布式缓存 Redis 基础知识点你知道多少《上》\n\n**简介：分布式缓存 Redis 核心基础《上》**\n\n- 考点：Redis 基础知识点考查\n\n- 难度：【 \\*\\*\\* 】\n\n- 你们业务用了 redis，为啥不用其他缓存，比如 memcached 呢\n\n  - redis 数据结构比 memcached 更丰富，基本可以完全替换\n  - redis 社区比较活跃，性能也强大，也支持持久化等功能\n  - 要和业务结合，比如电商系统的热销商品，需要用到 zset，所以使用 redis\n\n- 你用过 Redis 哪些数据结构？ 说下这些结构的使用场景有哪些\n\n  - String\n\n    - 简单的 kv 存储\n\n  - hash\n\n    - 存储对象，一个 key 有多个值\n\n  - list\n\n    - 列表型数据、消息队列等\n\n  - set\n\n    - 无序集合、去重，交集、并集等，比如查看共同好友，在社交关系方面、数据排重等可以使用\n\n  - sroted set\n\n    - 有序集合，去重，做榜单\n\n### 第 2 集 分布式缓存 Redis 基础知识点你知道多少《下》\n\n**简介：分布式缓存 Redis 核心基础《下》**\n\n- 考点：Redis 基础知识点考查\n\n- 难度：【 \\*\\*\\* 】\n\n- redis 是单线程，为什么这么快?\n\n  - 基于内存，绝大部分请求是纯粹的内存操作，CPU 不是 Redis 的瓶颈\n  - 避免了不必要的 CPU 上下文切换和其他竞争条件，比如锁操作等\n  - 底层是使用多路 I/O 复用模型，非阻塞 IO\n  - Redis6 后支持多线程，但是默认不开启\n\n- redis 有哪些持久化方式，分别说下他们的区别\n\n  - 支持 AOF 和 RDB 持久化\n\n  - AOF\n\n    - 以日志的形式记录服务器所处理的每一个写、删除操作，查询操作不会记录，以文本的方式记录\n\n    - 支持秒级持久化、兼容性好，对于相同数量的数据集而言，AOF 文件通常要大于 RDB 文件，所以恢复比 RDB 慢\n\n  - RDB\n\n    - 在指定的时间间隔内将内存中的数据集快照写入磁盘，可以指定时间归档数据，但不能做到实时持久化\n\n    - 文件紧凑，体积小，对于灾难恢复而言，RDB 是非常不错的选择，相比于 AOF 机制，如果数据集很大，RDB 在恢复大数据集时的速度比 AOF 的恢复速度要快\n\n### 第 3 集 你知道常用的缓存的淘汰策略吗\n\n**简介：缓存的淘汰策略**\n\n- 考点：是否有看过缓存设计的知识点\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 有没看过缓存框架的源码，缓存空间不够怎么办？\n\n  - 一般会使用淘汰策略\n\n  - 常见的淘汰策略有 FIFO、LRU、LFU\n\n- 能分别说下 FIFO、LRU、LFU 这些策略不\n\n  - 先进先出 First In，First Out\n\n    - 新访问的数据插入 FIFO 队列尾部，数据在 FIFO 队列中顺序移动，淘汰 FIFO 队列头部的数据\n\n  - 最近最少使用 Least recently used\n\n    - 根据数据的历史访问记录来进行数据淘汰，如果数据最近被访问过，那么将来被访问的几率也更高\n\n    - 新数据插入到链表头部，每当缓存数据被访问，则将数据移到链表头部，当链表满的时候，将链表尾部的数据丢弃。\n\n  - 最近不经常使用 Least Frequently Used\n\n    - 根据数据的历史访问频率来淘汰数据，如果数据过去被访问多次，那么将来被访问的频率也更高\n\n    - 把数据加入到链表中，按频次排序，一个数据被访问过，把它的频次+1，发生淘汰的时候，把频次低的淘汰掉\n\n### 第 4 集 缓存穿透-击穿和雪崩你能区分不\n\n**简介：缓存穿透、击穿和雪崩你是否可以区分**\n\n- 考点：缓存穿透-击穿-雪崩知识点\n\n- 难度：【 \\*\\*\\* 】\n\n- 能否说下缓存击穿、穿透、雪崩的区别？\n\n- 针对这些问题，说下常见的解决方案\n\n  - 缓存击穿 (某个热点 key 缓存失效了)\n\n    - 缓存中没有但数据库中有的数据，假如是热点数据，那 key 在缓存过期的一刻，同时有大量的请求，这些请求都会击穿到 DB，造成瞬时 DB 请求量大、压力增大。\n    - 和缓存雪崩的区别在于这里针对某一 key 缓存，后者则是很多 key。\n\n    - 预防：设置热点数据不过期，定时任务定时更新缓存，或者设置互斥锁\n\n  - 缓存穿透（查询不存在数据）\n\n    - 查询一个不存在的数据，由于缓存是不命中的，并且出于容错考虑，如发起为 id 为“-1”不存在的数据\n\n    - 如果从存储层查不到数据则不写入缓存这将导致这个不存在的数据每次请求都要到存储层去查询，失去了缓存的意义。存在大量查询不存在的数据，可能 DB 就挂掉了，这也是黑客利用不存在的 key 频繁攻击应用的一种方式。\n\n    - 预防：接口层增加校验，数据合理性校验，缓存取不到的数据，在数据库中也没有取到，这时也可以将 key-value 对写为 key-null，设置短点的过期时间，防止同个 key 被一直攻击\n\n  - 缓存雪崩 (多个热点 key 都过期)\n\n    - 大量的 key 设置了相同的过期时间，导致在缓存在同一时刻全部失效，造成瞬时 DB 请求量大、压力骤增，引起雪崩\n\n    - 预防：存数据的过期时间设置随机，防止同一时间大量数据过期现象发生，设置热点数据永远不过期，定时任务定时更新","filePath":"src/content/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题15.md","digest":"e1ad312a0cde5817","rendered":{"html":"<section><h2 id=\"第十五章-缓存的常见面试题你知道多少\">第十五章 缓存的常见面试题你知道多少<a class=\"anchor\" href=\"#第十五章-缓存的常见面试题你知道多少\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"第-1-集-分布式缓存-redis-基础知识点你知道多少上\">第 1 集 分布式缓存 Redis 基础知识点你知道多少《上》<a class=\"anchor\" href=\"#第-1-集-分布式缓存-redis-基础知识点你知道多少上\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：分布式缓存 Redis 核心基础《上》</strong></p><ul>\n<li>\n<p>考点：Redis 基础知识点考查</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>你们业务用了 redis，为啥不用其他缓存，比如 memcached 呢</p>\n<ul>\n<li>redis 数据结构比 memcached 更丰富，基本可以完全替换</li>\n<li>redis 社区比较活跃，性能也强大，也支持持久化等功能</li>\n<li>要和业务结合，比如电商系统的热销商品，需要用到 zset，所以使用 redis</li>\n</ul>\n</li>\n<li>\n<p>你用过 Redis 哪些数据结构？ 说下这些结构的使用场景有哪些</p>\n<ul>\n<li>\n<p>String</p>\n<ul>\n<li>简单的 kv 存储</li>\n</ul>\n</li>\n<li>\n<p>hash</p>\n<ul>\n<li>存储对象，一个 key 有多个值</li>\n</ul>\n</li>\n<li>\n<p>list</p>\n<ul>\n<li>列表型数据、消息队列等</li>\n</ul>\n</li>\n<li>\n<p>set</p>\n<ul>\n<li>无序集合、去重，交集、并集等，比如查看共同好友，在社交关系方面、数据排重等可以使用</li>\n</ul>\n</li>\n<li>\n<p>sroted set</p>\n<ul>\n<li>有序集合，去重，做榜单</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-2-集-分布式缓存-redis-基础知识点你知道多少下\">第 2 集 分布式缓存 Redis 基础知识点你知道多少《下》<a class=\"anchor\" href=\"#第-2-集-分布式缓存-redis-基础知识点你知道多少下\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：分布式缓存 Redis 核心基础《下》</strong></p><ul>\n<li>\n<p>考点：Redis 基础知识点考查</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>redis 是单线程，为什么这么快?</p>\n<ul>\n<li>基于内存，绝大部分请求是纯粹的内存操作，CPU 不是 Redis 的瓶颈</li>\n<li>避免了不必要的 CPU 上下文切换和其他竞争条件，比如锁操作等</li>\n<li>底层是使用多路 I/O 复用模型，非阻塞 IO</li>\n<li>Redis6 后支持多线程，但是默认不开启</li>\n</ul>\n</li>\n<li>\n<p>redis 有哪些持久化方式，分别说下他们的区别</p>\n<ul>\n<li>\n<p>支持 AOF 和 RDB 持久化</p>\n</li>\n<li>\n<p>AOF</p>\n<ul>\n<li>\n<p>以日志的形式记录服务器所处理的每一个写、删除操作，查询操作不会记录，以文本的方式记录</p>\n</li>\n<li>\n<p>支持秒级持久化、兼容性好，对于相同数量的数据集而言，AOF 文件通常要大于 RDB 文件，所以恢复比 RDB 慢</p>\n</li>\n</ul>\n</li>\n<li>\n<p>RDB</p>\n<ul>\n<li>\n<p>在指定的时间间隔内将内存中的数据集快照写入磁盘，可以指定时间归档数据，但不能做到实时持久化</p>\n</li>\n<li>\n<p>文件紧凑，体积小，对于灾难恢复而言，RDB 是非常不错的选择，相比于 AOF 机制，如果数据集很大，RDB 在恢复大数据集时的速度比 AOF 的恢复速度要快</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-3-集-你知道常用的缓存的淘汰策略吗\">第 3 集 你知道常用的缓存的淘汰策略吗<a class=\"anchor\" href=\"#第-3-集-你知道常用的缓存的淘汰策略吗\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：缓存的淘汰策略</strong></p><ul>\n<li>\n<p>考点：是否有看过缓存设计的知识点</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>有没看过缓存框架的源码，缓存空间不够怎么办？</p>\n<ul>\n<li>\n<p>一般会使用淘汰策略</p>\n</li>\n<li>\n<p>常见的淘汰策略有 FIFO、LRU、LFU</p>\n</li>\n</ul>\n</li>\n<li>\n<p>能分别说下 FIFO、LRU、LFU 这些策略不</p>\n<ul>\n<li>\n<p>先进先出 First In，First Out</p>\n<ul>\n<li>新访问的数据插入 FIFO 队列尾部，数据在 FIFO 队列中顺序移动，淘汰 FIFO 队列头部的数据</li>\n</ul>\n</li>\n<li>\n<p>最近最少使用 Least recently used</p>\n<ul>\n<li>\n<p>根据数据的历史访问记录来进行数据淘汰，如果数据最近被访问过，那么将来被访问的几率也更高</p>\n</li>\n<li>\n<p>新数据插入到链表头部，每当缓存数据被访问，则将数据移到链表头部，当链表满的时候，将链表尾部的数据丢弃。</p>\n</li>\n</ul>\n</li>\n<li>\n<p>最近不经常使用 Least Frequently Used</p>\n<ul>\n<li>\n<p>根据数据的历史访问频率来淘汰数据，如果数据过去被访问多次，那么将来被访问的频率也更高</p>\n</li>\n<li>\n<p>把数据加入到链表中，按频次排序，一个数据被访问过，把它的频次+1，发生淘汰的时候，把频次低的淘汰掉</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-4-集-缓存穿透-击穿和雪崩你能区分不\">第 4 集 缓存穿透-击穿和雪崩你能区分不<a class=\"anchor\" href=\"#第-4-集-缓存穿透-击穿和雪崩你能区分不\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：缓存穿透、击穿和雪崩你是否可以区分</strong></p><ul>\n<li>\n<p>考点：缓存穿透-击穿-雪崩知识点</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>能否说下缓存击穿、穿透、雪崩的区别？</p>\n</li>\n<li>\n<p>针对这些问题，说下常见的解决方案</p>\n<ul>\n<li>\n<p>缓存击穿 (某个热点 key 缓存失效了)</p>\n<ul>\n<li>\n<p>缓存中没有但数据库中有的数据，假如是热点数据，那 key 在缓存过期的一刻，同时有大量的请求，这些请求都会击穿到 DB，造成瞬时 DB 请求量大、压力增大。</p>\n</li>\n<li>\n<p>和缓存雪崩的区别在于这里针对某一 key 缓存，后者则是很多 key。</p>\n</li>\n<li>\n<p>预防：设置热点数据不过期，定时任务定时更新缓存，或者设置互斥锁</p>\n</li>\n</ul>\n</li>\n<li>\n<p>缓存穿透（查询不存在数据）</p>\n<ul>\n<li>\n<p>查询一个不存在的数据，由于缓存是不命中的，并且出于容错考虑，如发起为 id 为“-1”不存在的数据</p>\n</li>\n<li>\n<p>如果从存储层查不到数据则不写入缓存这将导致这个不存在的数据每次请求都要到存储层去查询，失去了缓存的意义。存在大量查询不存在的数据，可能 DB 就挂掉了，这也是黑客利用不存在的 key 频繁攻击应用的一种方式。</p>\n</li>\n<li>\n<p>预防：接口层增加校验，数据合理性校验，缓存取不到的数据，在数据库中也没有取到，这时也可以将 key-value 对写为 key-null，设置短点的过期时间，防止同个 key 被一直攻击</p>\n</li>\n</ul>\n</li>\n<li>\n<p>缓存雪崩 (多个热点 key 都过期)</p>\n<ul>\n<li>\n<p>大量的 key 设置了相同的过期时间，导致在缓存在同一时刻全部失效，造成瞬时 DB 请求量大、压力骤增，引起雪崩</p>\n</li>\n<li>\n<p>预防：存数据的过期时间设置随机，防止同一时间大量数据过期现象发生，设置热点数据永远不过期，定时任务定时更新</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul></section></section>","metadata":{"headings":[{"depth":2,"slug":"第十五章-缓存的常见面试题你知道多少","text":"第十五章 缓存的常见面试题你知道多少#"},{"depth":3,"slug":"第-1-集-分布式缓存-redis-基础知识点你知道多少上","text":"第 1 集 分布式缓存 Redis 基础知识点你知道多少《上》#"},{"depth":3,"slug":"第-2-集-分布式缓存-redis-基础知识点你知道多少下","text":"第 2 集 分布式缓存 Redis 基础知识点你知道多少《下》#"},{"depth":3,"slug":"第-3-集-你知道常用的缓存的淘汰策略吗","text":"第 3 集 你知道常用的缓存的淘汰策略吗#"},{"depth":3,"slug":"第-4-集-缓存穿透-击穿和雪崩你能区分不","text":"第 4 集 缓存穿透-击穿和雪崩你能区分不#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"后端高级工程师面试专题15","published":"2025-11-15T00:00:00.000Z","pinned":false,"description":"第十五章 缓存的常见面试题你知道多少","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":7,"words":1438,"excerpt":"简介：分布式缓存 Redis 核心基础《上》"},"imagePaths":[]}},"collection":"posts"}],"2025-11-14":[{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题14","data":{"title":"后端高级工程师面试专题14","published":"2025-11-14T00:00:00.000Z","draft":false,"description":"第十四章 Spring-Mybatis 框架系列常见面试题","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"后端高级工程师面试专题13","prevSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题13","nextTitle":"后端高级工程师面试专题15","nextSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题15"},"body":"## 第十四章 Spring-Mybatis 框架系列常见面试题\n\n### 第 1 集 Spring 框架核心知识点你是否掌握\n\n**简介：常见的 spring 核心知识点考查**\n\n- 考点：spring 的核心理念\n\n- 难度：【 \\*\\*\\* 】\n\n- 能否介绍下什么是 Spring 框架的 DI 和 IOC\n\n  - IOC 控制反转，指将对象的创建权，反转到 Spring 容器\n\n  - DI 依赖注入，指 Spring 创建对象的过程中，将对象依赖属性通过配置进行注入,不能单独存在，需要在 IOC 的基础上完成操作\n\n  - 依赖注入(DI)和控制反转(IOC)是从不同的角度的描述的同一件事情，通过引入 IOC 容器，利用依赖关系注入的方式，实现对象之间的解耦。\n\n- Spring 里面 bean 的 scope 作用域有哪些，能否解释下\n\n  - singleton：单例, 默认值，调用 getBean 方法返回是同一个对象,实例会被缓存起来，效率比较高 当一个 bean 被标识为 singleton 时候，spring 的 IOC 容器中只会存在一个该 bean\n\n  - prototype: 多例，调用 getBean 方法创建不同的对象，会频繁的创建和销毁对象造成很大的开销\n\n  - 其他少用 （作用域 只在 WebApplicationContext）\n\n    - request ：每个 Http 请求都会创建一个新的 bean\n    - session: 每个 Http Session 请求都会创建一个新的 bean\n    - global session（基本不用）\n\n    ```text\n    <!--<bean id=\"video\" class=\"net.xdclass.sp.domain.Video\" scope=\"singleton\"> -->\n    <bean id=\"video\" class=\"net.xdclass.sp.domain.Video\" scope=\"prototype\">\n            <property name=\"id\" value=\"9\"/>\n            <property name=\"title\" value=\"Spring 5.X课程\" />\n    </bean>\n\n\n    private static  void testScope(ApplicationContext context){\n        Video  video1 = (Video)context.getBean(\"video\");\n\n        Video  video2 = (Video)context.getBean(\"video\");\n  \n        //靠匹配内存地址，== 是匹配内存地址\n        System.out.println( video1 == video2 );\n    }\n    ```\n\n### 第 2 集 AOP 面向切面编程你知道多少\n\n**简介：Spring 常见面试题 AOP**\n\n- 考点：Spring 的 AOP 相关知识点考查\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 能否说下什么是 AOP, 使用场景有哪些？\n\n  - Aspect Oriented Program 面向切面编程， 在不改变原有逻辑上增加额外的功能\n\n  - AOP 思想把功能分两个部分，分离系统中的各种关注点\n\n    - 核心关注点\n\n      - 业务的主要功能\n\n    - 横切关注点\n\n      - 非核心、额外增加的功能\n\n    - 用户下单为例子\n\n      - 核心关注点：创建订单\n\n      - 横切关注点：记录日志、控制事务\n\n  - 好处\n\n    - 减少代码侵入，解耦\n\n    - 可以统一处理横切逻辑\n\n    - 方便添加和删除横切逻辑\n\n- 能否解释下 AOP 里面常见的概念，比如 横切、通知、连接点、切入点、切面 ？\n\n  - 横切关注点\n\n    - 对哪些方法进行拦截，拦截后怎么处理，这些就叫横切关注点\n\n    - 比如 权限认证、日志、事物\n\n  - 通知 Advice\n\n    - 在特定的切入点上执行的增强处理\n\n    - 做啥？ 比如你需要记录日志，控制事务 ，提前编写好通用的模块，需要的地方直接调用\n\n  - 连接点 JointPoint\n\n    - 要用通知的地方，业务流程在运行过程中需要插入切面的具体位置，\n    - 一般是方法的调用前后，全部方法都可以是连接点\n    - 只是概念，没啥特殊\n\n  - 切入点 Pointcut\n\n    - 不能全部方法都是连接点，通过特定的规则来筛选连接点, 就是 Pointcut，选中那几个你想要的方法\n    - 在程序中主要体现为书写切入点表达式（通过通配、正则表达式）过滤出特定的一组 JointPoint 连接点\n    - 过滤出相应的 Advice 将要发生的 joinpoint 地方\n\n  - 切面 Aspect\n\n    - 通常是一个类，里面定义 **切入点+通知** , 定义在什么地方； 什么时间点、做什么事情\n    - **通知 advice 指明了时间和做的事情（前置、后置等）**\n    - **切入点 pointcut 指定在什么地方干这个事情**\n    - web 接口设计中，web 层->网关层->服务层->数据层，每一层之间也是一个切面，对象和对象，方法和方法之间都是一个个切面\n\n  - 目标 target\n\n    - 目标类，真正的业务逻辑，可以在目标类不知情的条件下，增加新的功能到目标类的链路上\n\n  - 织入 Weaving\n\n    - 把切面（某个类）应用到目标函数的过程称为织入\n\n  ![image-20200416191234834](https://image.huanglei.work/mweb/2025/3/22/6858e8d5-2c57-4c02-8e90-d2cea4937f72.png)\n\n### 第 3 集 Spring AOP 代理模式面试题\n\n**简介：Spring 常见面试题静态代理和动态代理**\n\n- 考点：静态代理和动态代理知识点考查\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 能否解释下什么是静态代理\n\n  - 什么是静态代理\n\n    - 由程序创建或特定工具自动生成源代码，在程序运行前，代理类的.class 文件就已经存在\n    - 通过将目标类与代理类实现同一个接口，让代理类持有真实类对象，然后在代理类方法中调用真实类方法，在调用真实类方法的前后添加我们所需要的功能扩展代码来达到增强的目的\n    - A -> B -> C\n\n  - 优点\n\n    - 代理使客户端不需要知道实现类是什么，怎么做的，而客户端只需知道代理即可\n    - 方便增加功能，拓展业务逻辑\n\n  - 缺点\n\n    - 代理类中出现大量冗余的代码，非常不利于扩展和维护\n    - 如果接口增加一个方法，除了所有实现类需要实现这个方法外，所有代理类也需要实现此方法。增加了代码维护的复杂度\n\n- 能否解释下什么是动态代理，spring aop 是用什么代理\n\n  - 在程序运行时，运用反射机制动态创建而成，无需手动编写代码\n  - SpringAOP 里面常用的是 JDK 动态代理、CGLIB 动态代理\n\n### 第 4 集 CGLib 动态代理和 JDK 动态代理的常见面试题\n\n**简介：CGlib 动态代理和 JDK 动态代理的常见面试题**\n\n- 考点：静态代理和动态代理区别考查\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 能否说下 JDK 动态代理和 CGLib 动态代理的区别\n\n  - JDK 动态代理，要求目标对象*实现一个接口*，但是有时候目标对象只是一个单独的对象,并没有实现任何的接口,这个时候就可以用 CGLib 动态代理\n\n  - JDK 动态代理是自带的，CGlib 需要引入第三方包\n\n  - CGLib 动态代理,它是在内存中构建一个子类对象从而实现对目标对象功能的扩展\n\n  - CGLib 动态代理基于继承来实现代理，所以无法对 final 类、private 方法和 static 方法实现代理\n\n- 说下 Spring AOP 中的代理使用的默认策略？\n\n  - 如果目标对象实现了接口，则默认采用 JDK 动态代理\n  - 如果目标对象没有实现接口，则采用 CgLib 进行动态代理\n  - 如果目标对象实现了接口，程序里面依旧可以指定使用 CGlib 动态代理\n\n### 第 5 集 JDBC 和 Mybaits 基础面试题你知道多少\n\n**简介：讲解 JDBC 和 Mybatis 基础面试题**\n\n- 考点：JDBC 和 Mybatis 基础面试题考查\n\n- 难度：【 \\*\\*\\* 】\n\n- 说下 JDBC 连接数据库的开发步骤\n\n  - 加载数据库驱动\n\n  - 获取数据连接对象\n\n  - 获取语句对象\n\n    - 会话对象有两种 Statement 和 PreparedStatement 执行语句，他们区别是？\n\n      - PreparedStatement 在执行之前会进行预编译\n      - 效率高于 Statement,且能够有效防止 SQL 注入\n      - PreparedStatement 支持?占位符而不是直接拼接，提高可读性\n\n  - 处理结果集\n\n  - 关闭资源\n    - rs.close()、st.close()、conn.close() 注意关闭顺序以及处理异常\n\n- 能否简单说下 Mybatis 加载的流程\n\n  - 每个基于 MyBatis 的应用都是以一个 SqlSessionFactory 的实例为核心\n  - SqlSessionFactory 的实例可以通过 SqlSessionFactoryBuilder 获得\n  - SqlSessionFactoryBuilder 可以从 XML 配置文件或一个预先配置的 Configuration 实例来构建出 SqlSessionFactory 实例\n  - 工厂设计模式里面 需要获取 SqlSession ，里面提供了在数据库执行 SQL 命令所需的所有方法\n\n  ![image-20200411134415859](https://image.huanglei.work/mweb/2025/3/22/c03ec47a-fb5d-4256-b1bc-a576dc367ba2.png)\n\n### 第 6 集 Mybatis3.X 防止注入知识点\n\n**简介：mybatis3.x 防止 sql 注入知识点**\n\n- 考点：Mybatis 防注入知识点考查\n\n- 难度：【 \\*\\*\\* 】\n\n- #{}和${}的区别是什么?\n\n  - #{}是预编译处理，${}是字符串替换。\n  - Mybatis 在处理#{}时，会将 sql 中的#{}替换为?号，调用 PreparedStatement 的 set 方法来赋值；\n  - Mybatis 在处理${}时，就是把${}替换成变量的值。\n  - 使用#{}可以有效的防止 SQL 注入，提高系统安全性\n\n### 第 7 集 Mybaits 的多级缓存你知道多少\n\n**简介：讲解 Mybatis 多级缓存面试题**\n\n- 考点：Mybatis 多级缓存知识点\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 有没用过 Mybatis 一级缓存，能否介绍下\n\n  - 简介：一级缓存的作用域是 SQLSession，同一个 SqlSession 中执行相同的 SQL 查询(相同的 SQL 和参数)，第一次会去查询数据库并写在缓存中，第二次会直接从缓存中取\n\n  - 基于 PerpetualCache 的 HashMap 本地缓存，默认开启一级缓存\n\n  - 失效策略：当执行 SQL 时候两次查询中间发生了增删改的操作，即 insert、update、delete 等操作 commit 后会清空该 SQLSession 缓存; 比如 sqlsession 关闭，或者清空等\n\n  ![image-20200607094724502](https://image.huanglei.work/mweb/2025/3/22/5f050102-9ff0-403e-b9c3-eab8dc9e89fe.png)\n\n- 有没用过 Mybatis 二级缓存，能否介绍下\n\n  - 二级缓存是 namespace 级别的，多个 SqlSession 去操作同一个 namespace 下的 Mapper 的 sql 语句，多个 SqlSession 可以共用二级缓存,如果两个 mapper 的 namespace 相同，（即使是两个 mapper，那么这两个 mapper 中执行 sql 查询到的数据也将存在相同的二级缓存区域中，但是最后是每个 Mapper 单独的名称空间）\n\n  - 基于 PerpetualCache 的 HashMap 本地缓存，可自定义存储源，如 Ehcache/Redis 等\n\n  - 默认是没有开启二级缓存\n\n  - 操作流程：\n\n    - 第一次调用某个 namespace 下的 SQL 去查询信息，查询到的信息会存放该 mapper 对应的二级缓存区域。\n\n    - 第二次调用同个 namespace 下的 mapper 映射文件中，相同的 sql 去查询信息，会去对应的二级缓存内取结果\n\n  - 失效策略：执行同个 namespace 下的 mapepr 映射文件中增删改 sql，并执行了 commit 操作,会清空该二级缓存\n\n  - 注意：实现二级缓存的时候，MyBatis 建议返回的 POJO 是可序列化的， 也就是建议实现 Serializable 接口\n\n  - 缓存淘汰策略：会使用默认的 LRU 算法来收回（最近最少使用的）\n\n- 一级缓存和二级缓存同时启用，查询顺序是怎样的？\n\n  - 优先查询二级缓存-》查询一级缓存-》数据库\n\n### 第 8 集 你知道 Mybatis3.X 懒加载吗-看这个就懂了？\n\n**简介：mybatis3.x 懒加载面试题**\n\n- 考点：Mybatis 拦加载知识点\n\n- 难度：【 \\*\\*\\* 】\n\n- 什么是 Mybatis3.X 的懒加载？\n\n  - 按需加载，先从单表查询，需要时再从关联表去关联查询，能大大提高数据库性能, 并不是所有场景下使用懒加载都能提高效率\n\n- 哪些查询配置支持懒加载\n\n  - resultMap 里面的 association、collection 有延迟加载功能\n\n    ```xml\n    <resultMap id=\"VideoOrderResultMapLazy\" type=\"VideoOrder\">\n            <id column=\"id\" property=\"id\"/>\n\n            <result column=\"user_id\" property=\"userId\"/>\n            <result column=\"out_trade_no\" property=\"outTradeNo\"/>\n            <result column=\"create_time\" property=\"createTime\"/>\n            <result column=\"state\" property=\"state\"/>\n            <result column=\"total_fee\" property=\"totalFee\"/>\n            <result column=\"video_id\" property=\"videoId\"/>\n            <result column=\"video_title\" property=\"videoTitle\"/>\n            <result column=\"video_img\" property=\"videoImg\"/>\n\n    <!--\n    select： 指定延迟加载需要执行的statement id\n    column： 和select查询关联的字段\n    -->\n            <association property=\"user\" javaType=\"User\" column=\"user_id\" select=\"findUserByUserId\"/>\n\n\n    </resultMap>\n\n        <!--一对一管理查询订单， 订单内部包含用户属性  懒加载-->\n    <select id=\"queryVideoOrderListLazy\" resultMap=\"VideoOrderResultMapLazy\">\n\n            select\n            o.id id,\n            o.user_id ,\n            o.out_trade_no,\n            o.create_time,\n            o.state,\n            o.total_fee,\n            o.video_id,\n            o.video_title,\n            o.video_img\n            from video_order o\n\n    </select>\n\n\n    <select id=\"findUserByUserId\" resultType=\"User\">\n\n          select  * from user where id=#{id}\n\n    </select>\n    ```","filePath":"src/content/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题14.md","digest":"d3c163ceda6342e6","rendered":{"html":"<section><h2 id=\"第十四章-spring-mybatis-框架系列常见面试题\">第十四章 Spring-Mybatis 框架系列常见面试题<a class=\"anchor\" href=\"#第十四章-spring-mybatis-框架系列常见面试题\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"第-1-集-spring-框架核心知识点你是否掌握\">第 1 集 Spring 框架核心知识点你是否掌握<a class=\"anchor\" href=\"#第-1-集-spring-框架核心知识点你是否掌握\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：常见的 spring 核心知识点考查</strong></p><ul>\n<li>\n<p>考点：spring 的核心理念</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>能否介绍下什么是 Spring 框架的 DI 和 IOC</p>\n<ul>\n<li>\n<p>IOC 控制反转，指将对象的创建权，反转到 Spring 容器</p>\n</li>\n<li>\n<p>DI 依赖注入，指 Spring 创建对象的过程中，将对象依赖属性通过配置进行注入,不能单独存在，需要在 IOC 的基础上完成操作</p>\n</li>\n<li>\n<p>依赖注入(DI)和控制反转(IOC)是从不同的角度的描述的同一件事情，通过引入 IOC 容器，利用依赖关系注入的方式，实现对象之间的解耦。</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Spring 里面 bean 的 scope 作用域有哪些，能否解释下</p>\n<ul>\n<li>\n<p>singleton：单例, 默认值，调用 getBean 方法返回是同一个对象,实例会被缓存起来，效率比较高 当一个 bean 被标识为 singleton 时候，spring 的 IOC 容器中只会存在一个该 bean</p>\n</li>\n<li>\n<p>prototype: 多例，调用 getBean 方法创建不同的对象，会频繁的创建和销毁对象造成很大的开销</p>\n</li>\n<li>\n<p>其他少用 （作用域 只在 WebApplicationContext）</p>\n<ul>\n<li>request ：每个 Http 请求都会创建一个新的 bean</li>\n<li>session: 每个 Http Session 请求都会创建一个新的 bean</li>\n<li>global session（基本不用）</li>\n</ul>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:79ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;!--&#x3C;bean id=\"video\" class=\"net.xdclass.sp.domain.Video\" scope=\"singleton\"> --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;bean id=\"video\" class=\"net.xdclass.sp.domain.Video\" scope=\"prototype\"></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;property name=\"id\" value=\"9\"/></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;property name=\"title\" value=\"Spring 5.X课程\" /></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;/bean></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">private static  void testScope(ApplicationContext context){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">Video  video1 = (Video)context.getBean(\"video\");</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">Video  video2 = (Video)context.getBean(\"video\");</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">//靠匹配内存地址，== 是匹配内存地址</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">System.out.println( video1 == video2 );</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-2-集-aop-面向切面编程你知道多少\">第 2 集 AOP 面向切面编程你知道多少<a class=\"anchor\" href=\"#第-2-集-aop-面向切面编程你知道多少\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：Spring 常见面试题 AOP</strong></p><ul>\n<li>\n<p>考点：Spring 的 AOP 相关知识点考查</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>能否说下什么是 AOP, 使用场景有哪些？</p>\n<ul>\n<li>\n<p>Aspect Oriented Program 面向切面编程， 在不改变原有逻辑上增加额外的功能</p>\n</li>\n<li>\n<p>AOP 思想把功能分两个部分，分离系统中的各种关注点</p>\n<ul>\n<li>\n<p>核心关注点</p>\n<ul>\n<li>业务的主要功能</li>\n</ul>\n</li>\n<li>\n<p>横切关注点</p>\n<ul>\n<li>非核心、额外增加的功能</li>\n</ul>\n</li>\n<li>\n<p>用户下单为例子</p>\n<ul>\n<li>\n<p>核心关注点：创建订单</p>\n</li>\n<li>\n<p>横切关注点：记录日志、控制事务</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>好处</p>\n<ul>\n<li>\n<p>减少代码侵入，解耦</p>\n</li>\n<li>\n<p>可以统一处理横切逻辑</p>\n</li>\n<li>\n<p>方便添加和删除横切逻辑</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>能否解释下 AOP 里面常见的概念，比如 横切、通知、连接点、切入点、切面 ？</p>\n<ul>\n<li>\n<p>横切关注点</p>\n<ul>\n<li>\n<p>对哪些方法进行拦截，拦截后怎么处理，这些就叫横切关注点</p>\n</li>\n<li>\n<p>比如 权限认证、日志、事物</p>\n</li>\n</ul>\n</li>\n<li>\n<p>通知 Advice</p>\n<ul>\n<li>\n<p>在特定的切入点上执行的增强处理</p>\n</li>\n<li>\n<p>做啥？ 比如你需要记录日志，控制事务 ，提前编写好通用的模块，需要的地方直接调用</p>\n</li>\n</ul>\n</li>\n<li>\n<p>连接点 JointPoint</p>\n<ul>\n<li>要用通知的地方，业务流程在运行过程中需要插入切面的具体位置，</li>\n<li>一般是方法的调用前后，全部方法都可以是连接点</li>\n<li>只是概念，没啥特殊</li>\n</ul>\n</li>\n<li>\n<p>切入点 Pointcut</p>\n<ul>\n<li>不能全部方法都是连接点，通过特定的规则来筛选连接点, 就是 Pointcut，选中那几个你想要的方法</li>\n<li>在程序中主要体现为书写切入点表达式（通过通配、正则表达式）过滤出特定的一组 JointPoint 连接点</li>\n<li>过滤出相应的 Advice 将要发生的 joinpoint 地方</li>\n</ul>\n</li>\n<li>\n<p>切面 Aspect</p>\n<ul>\n<li>通常是一个类，里面定义 <strong>切入点+通知</strong> , 定义在什么地方； 什么时间点、做什么事情</li>\n<li><strong>通知 advice 指明了时间和做的事情（前置、后置等）</strong></li>\n<li><strong>切入点 pointcut 指定在什么地方干这个事情</strong></li>\n<li>web 接口设计中，web 层->网关层->服务层->数据层，每一层之间也是一个切面，对象和对象，方法和方法之间都是一个个切面</li>\n</ul>\n</li>\n<li>\n<p>目标 target</p>\n<ul>\n<li>目标类，真正的业务逻辑，可以在目标类不知情的条件下，增加新的功能到目标类的链路上</li>\n</ul>\n</li>\n<li>\n<p>织入 Weaving</p>\n<ul>\n<li>把切面（某个类）应用到目标函数的过程称为织入</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://image.huanglei.work/mweb/2025/3/22/6858e8d5-2c57-4c02-8e90-d2cea4937f72.png\" alt=\"image-20200416191234834\"></p>\n</li>\n</ul></section><section><h3 id=\"第-3-集-spring-aop-代理模式面试题\">第 3 集 Spring AOP 代理模式面试题<a class=\"anchor\" href=\"#第-3-集-spring-aop-代理模式面试题\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：Spring 常见面试题静态代理和动态代理</strong></p><ul>\n<li>\n<p>考点：静态代理和动态代理知识点考查</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>能否解释下什么是静态代理</p>\n<ul>\n<li>\n<p>什么是静态代理</p>\n<ul>\n<li>由程序创建或特定工具自动生成源代码，在程序运行前，代理类的.class 文件就已经存在</li>\n<li>通过将目标类与代理类实现同一个接口，让代理类持有真实类对象，然后在代理类方法中调用真实类方法，在调用真实类方法的前后添加我们所需要的功能扩展代码来达到增强的目的</li>\n<li>A -> B -> C</li>\n</ul>\n</li>\n<li>\n<p>优点</p>\n<ul>\n<li>代理使客户端不需要知道实现类是什么，怎么做的，而客户端只需知道代理即可</li>\n<li>方便增加功能，拓展业务逻辑</li>\n</ul>\n</li>\n<li>\n<p>缺点</p>\n<ul>\n<li>代理类中出现大量冗余的代码，非常不利于扩展和维护</li>\n<li>如果接口增加一个方法，除了所有实现类需要实现这个方法外，所有代理类也需要实现此方法。增加了代码维护的复杂度</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>能否解释下什么是动态代理，spring aop 是用什么代理</p>\n<ul>\n<li>在程序运行时，运用反射机制动态创建而成，无需手动编写代码</li>\n<li>SpringAOP 里面常用的是 JDK 动态代理、CGLIB 动态代理</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-4-集-cglib-动态代理和-jdk-动态代理的常见面试题\">第 4 集 CGLib 动态代理和 JDK 动态代理的常见面试题<a class=\"anchor\" href=\"#第-4-集-cglib-动态代理和-jdk-动态代理的常见面试题\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：CGlib 动态代理和 JDK 动态代理的常见面试题</strong></p><ul>\n<li>\n<p>考点：静态代理和动态代理区别考查</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>能否说下 JDK 动态代理和 CGLib 动态代理的区别</p>\n<ul>\n<li>\n<p>JDK 动态代理，要求目标对象<em>实现一个接口</em>，但是有时候目标对象只是一个单独的对象,并没有实现任何的接口,这个时候就可以用 CGLib 动态代理</p>\n</li>\n<li>\n<p>JDK 动态代理是自带的，CGlib 需要引入第三方包</p>\n</li>\n<li>\n<p>CGLib 动态代理,它是在内存中构建一个子类对象从而实现对目标对象功能的扩展</p>\n</li>\n<li>\n<p>CGLib 动态代理基于继承来实现代理，所以无法对 final 类、private 方法和 static 方法实现代理</p>\n</li>\n</ul>\n</li>\n<li>\n<p>说下 Spring AOP 中的代理使用的默认策略？</p>\n<ul>\n<li>如果目标对象实现了接口，则默认采用 JDK 动态代理</li>\n<li>如果目标对象没有实现接口，则采用 CgLib 进行动态代理</li>\n<li>如果目标对象实现了接口，程序里面依旧可以指定使用 CGlib 动态代理</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-5-集-jdbc-和-mybaits-基础面试题你知道多少\">第 5 集 JDBC 和 Mybaits 基础面试题你知道多少<a class=\"anchor\" href=\"#第-5-集-jdbc-和-mybaits-基础面试题你知道多少\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：讲解 JDBC 和 Mybatis 基础面试题</strong></p><ul>\n<li>\n<p>考点：JDBC 和 Mybatis 基础面试题考查</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>说下 JDBC 连接数据库的开发步骤</p>\n<ul>\n<li>\n<p>加载数据库驱动</p>\n</li>\n<li>\n<p>获取数据连接对象</p>\n</li>\n<li>\n<p>获取语句对象</p>\n<ul>\n<li>\n<p>会话对象有两种 Statement 和 PreparedStatement 执行语句，他们区别是？</p>\n<ul>\n<li>PreparedStatement 在执行之前会进行预编译</li>\n<li>效率高于 Statement,且能够有效防止 SQL 注入</li>\n<li>PreparedStatement 支持?占位符而不是直接拼接，提高可读性</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>处理结果集</p>\n</li>\n<li>\n<p>关闭资源</p>\n<ul>\n<li>rs.close()、st.close()、conn.close() 注意关闭顺序以及处理异常</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>能否简单说下 Mybatis 加载的流程</p>\n<ul>\n<li>每个基于 MyBatis 的应用都是以一个 SqlSessionFactory 的实例为核心</li>\n<li>SqlSessionFactory 的实例可以通过 SqlSessionFactoryBuilder 获得</li>\n<li>SqlSessionFactoryBuilder 可以从 XML 配置文件或一个预先配置的 Configuration 实例来构建出 SqlSessionFactory 实例</li>\n<li>工厂设计模式里面 需要获取 SqlSession ，里面提供了在数据库执行 SQL 命令所需的所有方法</li>\n</ul>\n<p><img src=\"https://image.huanglei.work/mweb/2025/3/22/c03ec47a-fb5d-4256-b1bc-a576dc367ba2.png\" alt=\"image-20200411134415859\"></p>\n</li>\n</ul></section><section><h3 id=\"第-6-集-mybatis3x-防止注入知识点\">第 6 集 Mybatis3.X 防止注入知识点<a class=\"anchor\" href=\"#第-6-集-mybatis3x-防止注入知识点\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：mybatis3.x 防止 sql 注入知识点</strong></p><ul>\n<li>\n<p>考点：Mybatis 防注入知识点考查</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>#{}和${}的区别是什么?</p>\n<ul>\n<li>#{}是预编译处理，${}是字符串替换。</li>\n<li>Mybatis 在处理#{}时，会将 sql 中的#{}替换为?号，调用 PreparedStatement 的 set 方法来赋值；</li>\n<li>Mybatis 在处理<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow></mrow><mtext>时，就是把</mtext></mrow><annotation encoding=\"application/x-tex\">{}时，就是把</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\"></span><span class=\"mord cjk_fallback\">时，就是把</span></span></span></span>{}替换成变量的值。</li>\n<li>使用#{}可以有效的防止 SQL 注入，提高系统安全性</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-7-集-mybaits-的多级缓存你知道多少\">第 7 集 Mybaits 的多级缓存你知道多少<a class=\"anchor\" href=\"#第-7-集-mybaits-的多级缓存你知道多少\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：讲解 Mybatis 多级缓存面试题</strong></p><ul>\n<li>\n<p>考点：Mybatis 多级缓存知识点</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>有没用过 Mybatis 一级缓存，能否介绍下</p>\n<ul>\n<li>\n<p>简介：一级缓存的作用域是 SQLSession，同一个 SqlSession 中执行相同的 SQL 查询(相同的 SQL 和参数)，第一次会去查询数据库并写在缓存中，第二次会直接从缓存中取</p>\n</li>\n<li>\n<p>基于 PerpetualCache 的 HashMap 本地缓存，默认开启一级缓存</p>\n</li>\n<li>\n<p>失效策略：当执行 SQL 时候两次查询中间发生了增删改的操作，即 insert、update、delete 等操作 commit 后会清空该 SQLSession 缓存; 比如 sqlsession 关闭，或者清空等</p>\n</li>\n</ul>\n<p><img src=\"https://image.huanglei.work/mweb/2025/3/22/5f050102-9ff0-403e-b9c3-eab8dc9e89fe.png\" alt=\"image-20200607094724502\"></p>\n</li>\n<li>\n<p>有没用过 Mybatis 二级缓存，能否介绍下</p>\n<ul>\n<li>\n<p>二级缓存是 namespace 级别的，多个 SqlSession 去操作同一个 namespace 下的 Mapper 的 sql 语句，多个 SqlSession 可以共用二级缓存,如果两个 mapper 的 namespace 相同，（即使是两个 mapper，那么这两个 mapper 中执行 sql 查询到的数据也将存在相同的二级缓存区域中，但是最后是每个 Mapper 单独的名称空间）</p>\n</li>\n<li>\n<p>基于 PerpetualCache 的 HashMap 本地缓存，可自定义存储源，如 Ehcache/Redis 等</p>\n</li>\n<li>\n<p>默认是没有开启二级缓存</p>\n</li>\n<li>\n<p>操作流程：</p>\n<ul>\n<li>\n<p>第一次调用某个 namespace 下的 SQL 去查询信息，查询到的信息会存放该 mapper 对应的二级缓存区域。</p>\n</li>\n<li>\n<p>第二次调用同个 namespace 下的 mapper 映射文件中，相同的 sql 去查询信息，会去对应的二级缓存内取结果</p>\n</li>\n</ul>\n</li>\n<li>\n<p>失效策略：执行同个 namespace 下的 mapepr 映射文件中增删改 sql，并执行了 commit 操作,会清空该二级缓存</p>\n</li>\n<li>\n<p>注意：实现二级缓存的时候，MyBatis 建议返回的 POJO 是可序列化的， 也就是建议实现 Serializable 接口</p>\n</li>\n<li>\n<p>缓存淘汰策略：会使用默认的 LRU 算法来收回（最近最少使用的）</p>\n</li>\n</ul>\n</li>\n<li>\n<p>一级缓存和二级缓存同时启用，查询顺序是怎样的？</p>\n<ul>\n<li>优先查询二级缓存-》查询一级缓存-》数据库</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-8-集-你知道-mybatis3x-懒加载吗-看这个就懂了\">第 8 集 你知道 Mybatis3.X 懒加载吗-看这个就懂了？<a class=\"anchor\" href=\"#第-8-集-你知道-mybatis3x-懒加载吗-看这个就懂了\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：mybatis3.x 懒加载面试题</strong></p><ul>\n<li>\n<p>考点：Mybatis 拦加载知识点</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>什么是 Mybatis3.X 的懒加载？</p>\n<ul>\n<li>按需加载，先从单表查询，需要时再从关联表去关联查询，能大大提高数据库性能, 并不是所有场景下使用懒加载都能提高效率</li>\n</ul>\n</li>\n<li>\n<p>哪些查询配置支持懒加载</p>\n<ul>\n<li>\n<p>resultMap 里面的 association、collection 有延迟加载功能</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"xml\" class=\"wrap\" style=\"--ecMaxLine:97ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">resultMap</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">id</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"VideoOrderResultMapLazy\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">type</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"VideoOrder\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">id</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">column</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"id\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">property</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"id\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">/></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">column</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"user_id\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">property</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"userId\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">/></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">column</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"out_trade_no\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">property</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"outTradeNo\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">/></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">column</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"create_time\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">property</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"createTime\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">/></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">column</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"state\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">property</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"state\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">/></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">column</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"total_fee\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">property</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"totalFee\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">/></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">column</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"video_id\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">property</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"videoId\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">/></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">column</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"video_title\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">property</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"videoTitle\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">/></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">column</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"video_img\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">property</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"videoImg\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">/></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!--</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">select： 指定延迟加载需要执行的statement id</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">column： 和select查询关联的字段</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">--></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">association</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">property</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"user\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">javaType</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"User\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">column</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"user_id\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">select</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"findUserByUserId\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">/></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">resultMap</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!--一对一管理查询订单， 订单内部包含用户属性  懒加载--></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">select</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">id</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"queryVideoOrderListLazy\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">resultMap</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"VideoOrderResultMapLazy\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">select</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">o.id id,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">o.user_id ,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">o.out_trade_no,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">o.create_time,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">o.state,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">o.total_fee,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">o.video_id,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">o.video_title,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">o.video_img</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">from video_order o</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">select</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">select</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">id</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"findUserByUserId\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">resultType</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"User\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">select  * from user where id=#{id}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">select</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul>\n</li>\n</ul></section></section>","metadata":{"headings":[{"depth":2,"slug":"第十四章-spring-mybatis-框架系列常见面试题","text":"第十四章 Spring-Mybatis 框架系列常见面试题#"},{"depth":3,"slug":"第-1-集-spring-框架核心知识点你是否掌握","text":"第 1 集 Spring 框架核心知识点你是否掌握#"},{"depth":3,"slug":"第-2-集-aop-面向切面编程你知道多少","text":"第 2 集 AOP 面向切面编程你知道多少#"},{"depth":3,"slug":"第-3-集-spring-aop-代理模式面试题","text":"第 3 集 Spring AOP 代理模式面试题#"},{"depth":3,"slug":"第-4-集-cglib-动态代理和-jdk-动态代理的常见面试题","text":"第 4 集 CGLib 动态代理和 JDK 动态代理的常见面试题#"},{"depth":3,"slug":"第-5-集-jdbc-和-mybaits-基础面试题你知道多少","text":"第 5 集 JDBC 和 Mybaits 基础面试题你知道多少#"},{"depth":3,"slug":"第-6-集-mybatis3x-防止注入知识点","text":"第 6 集 Mybatis3.X 防止注入知识点#"},{"depth":3,"slug":"第-7-集-mybaits-的多级缓存你知道多少","text":"第 7 集 Mybaits 的多级缓存你知道多少#"},{"depth":3,"slug":"第-8-集-你知道-mybatis3x-懒加载吗-看这个就懂了","text":"第 8 集 你知道 Mybatis3.X 懒加载吗-看这个就懂了？#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"后端高级工程师面试专题14","published":"2025-11-14T00:00:00.000Z","pinned":false,"description":"第十四章 Spring-Mybatis 框架系列常见面试题","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":14,"words":2846,"excerpt":"简介：常见的 spring 核心知识点考查"},"imagePaths":[]}},"collection":"posts"}],"2025-11-13":[{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题13","data":{"title":"后端高级工程师面试专题13","published":"2025-11-13T00:00:00.000Z","draft":false,"description":"第十三章 最接近用户的协议-Http 协议","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"后端高级工程师面试专题12","prevSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题12","nextTitle":"后端高级工程师面试专题14","nextSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题14"},"body":"## 第十三章 最接近用户的协议-Http 协议\n\n### 第 1 集 http 协议之核心面试知识点\n\n**简介：http 状态码和 method 知识点考查**\n\n- 考点：是否掌握 Http 基础知识，遵循开发规范\n\n- 难度：【 \\*\\*\\* 】\n\n- 常见的 Http Method 有哪些，使用场景分别是？\n\n    ```text\n    http1.0定义了三种：\n\n        GET: 向服务器获取资源，比如常见的查询请求\n        POST: 向服务器提交数据而发送的请求\n        Head: 和get类似，返回的响应中没有具体的内容，用于获取报头\n\n    http1.1定义了六种\n\n        PUT：一般是用于更新请求，比如更新个人信息、商品信息全量更新\n        PATCH：PUT 方法的补充,更新指定资源的部分数据\n        DELETE：用于删除指定的资源\n        OPTIONS: 获取服务器支持的HTTP请求方法,服务器性能、跨域检查等\n        CONNECT: 方法的作用就是把服务器作为跳板，让服务器代替用户去访问其它网页，之后把数据原原本本的返回给用户，网页开发基本不用这个方法，如果是http代理就会使用这个，让服务器代理用户去访问其他网页，类似中介\n        TRACE：回显服务器收到的请求，主要用于测试或诊断\n    ```\n\n- 常见 http 状态码解析\n\n    ```text\n    浏览器向服务器请求时，服务端响应的消息头里面有状态码，表示请求结果的状态\n\n    分类\n    1XX: 收到请求，需要请求者继续执行操作，比较少用\n\n    2XX: 请求成功，常用的 200\n\n    3XX: 重定向，浏览器在拿到服务器返回的这个状态码后会自动跳转到一个新的URL地址，这个地址可以从响应的Location首部中获取；\n\n    好处：网站改版、域名迁移等，多个域名指向同个主站导流\n    必须记住： 301：永久性跳转，比如域名过期，换个域名 302：临时性跳转\n\n    4XX: 客服端出错，请求包含语法错误或者无法完成请求\n    必须记住：\n      400: 请求出错，比如语法协议\n      403: 没权限访问\n      404: 找不到这个路径对应的接口或者文件\n      405: 不允许此方法进行提交，Method not allowed，比如接口一定要POST方式，而你是用了GET\n\n    5XX: 服务端出错，服务器在处理请求的过程中发生了错误\n    必须记住：\n        500: 服务器内部报错了，完成不了这次请求\n        503: 服务器宕机\n    ```\n\n### 第 2 集 http 协议无状态解决方法 Cookie 和 Session\n\n**简介：单机情况下 http 无状态解决方案，cookie 和 session**\n\n- 考点：是否掌握 cookie 和 session 知识点\n\n- 难度：【 \\*\\*\\* 】\n\n- 说下 Cookie 和 Session 的区别和联系\n\n    ```text\n    cookie数据保存在客户端，session数据保存在服务端\n    cookie不是很安全，容易泄露，不能直接明文存储信息\n    Cookie大小和数量存储有限制\n    ```\n\n- 你们公司 C 端业务登录的是怎样做的（业务量大，集群部署）\n\n    ```text\n    部分业务是采用redis替代本身的tomcat单机session (业务需要高度可控)\n\n    还有其他业务是使用JSON Web token (C端普通业务)\n    ```\n\n  ![image-20200606173941994](/images/后端高级工程师面试专题/39748226-148a-43dd-a30e-3b27095cd511.png)\n\n### 第 3 集 http 协议之分布式业务无状态解决方案 JWT\n\n**简介：分布式业务场景的常见登录解决方案 JWT**\n\n- 考点：是否知道 JWT\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 你们公司是用 JWT 做集群的登录解决是不是，能否介绍下 JWT\n\n  - JWT 是一个开放标准，它定义了一种用于简洁，自包含的用于通信双方之间以 JSON 对象的形式安全传递信息的方法。 可以使用 HMAC 算法或者是 RSA 的公钥密钥对进行签名\n\n  - JWT 格式组成 头部、负载、签名\n\n    - header+payload+signature\n\n      - 头部：主要是描述签名算法\n      - 负载：主要描述是加密对象的信息，如用户的 id 等，也可以加些规范里面的东西，如 iss 签发者，exp 过期时间，sub 面向的用户\n      - 签名：主要是把前面两部分进行加密，防止别人拿到 token 进行 base 解密后篡改 token\n\n  - **简单来说: 就是通过一定规范来生成 token，然后可以通过解密算法逆向解密 token，这样就可以获取用户信息**\n\n    ```text\n    {\n        id:888,\n        name:'二当家小D',\n        expire:10000\n    }\n\n    funtion 加密(object, appsecret){\n        xxxx\n        return base64( token);\n    }\n\n    function 解密(token ,appsecret){\n\n        xxxx\n        //成功返回true,失败返回false\n    }\n    ```\n\n- 为啥使用这个呢，有什么优缺点\n\n  - 优点\n\n    - 生产的 token 可以包含基本信息，比如 id、用户昵称、头像等信息，避免再次查库\n    - 存储在客户端，不占用服务端的内存资源，使用加解密的方式进行校验，在分布式业务中能较好的提高性能和节省空间\n\n  - 缺点\n\n    - token 是经过 base64 编码，所以可以解码，因此 token 加密前的对象不应该包含敏感信息，如用户权限，密码等\n    - 如果没有服务端存储，则不能做登录失效处理，除非服务端改秘钥\n\n- 生成的 token，在客户端或者浏览器是怎么存储的\n\n  - 可以存储在 cookie，localstorage 和 sessionStorage 里面\n\n### 第 4 集 浏览器输入 url 按回车背后经历了哪些\n\n**简介：浏览器网络请求链路**\n\n- 考点：是否掌握 http 请求产生到响应的链路\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 说下常用浏览器输入一个 url 到用户看到结果，中间经过哪些流程\n\n    ```text\n    1、浏览器输入url, 解析url地址是否合法\n\n    2、浏览器检查是否有缓存, 如果有直接显示。如果没有跳到第三步。\n\n    3、在发送http请求前，需要域名解析（DNS解析），解析获取对应过的ip地址。\n\n    4、浏览器向服务器发起tcp链接，完成tcp三次握手\n\n    5、握手成功后，浏览器向服务器发送http请求\n\n    6、服务器收到处理的请求，将数据返回至浏览器\n\n    7、浏览器收到http响应。\n\n    8、浏览器解析响应。如果响应可以缓存，则存入缓存\n\n    9、浏览器进行页面渲染\n    ```\n\n### 第 5 集 浏览器同源策略和跨域掌握了吗？\n\n**简介：什么是浏览器的同源策略和跨域知识点**\n\n- 考点：同源策略和跨域知识点\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 你是否知道什么是浏览器同源策略\n\n    ```text\n    同源策略（Same origin policy）是一种约定，它是浏览器最核心也最基本的安全功能，如果缺少了同源策略，则浏览器的正常功能可能都会受到影响。\n\n    由Netscape提出的一个著名的安全策略。\n\n    当一个浏览器的两个tab页中分别打开来 百度和谷歌的页面\n\n    当浏览器的百度tab页执行一个脚本的时候会检查这个脚本是属于哪个页面的，\n\n    即检查是否同源，只有和百度同源的脚本才会被执行。\n\n    如果非同源，那么在请求数据时，浏览器会在控制台中报一个异常，提示拒绝访问。\n\n    同源策略是浏览器的行为，是为了保护本地数据不被JavaScript代码获取回来的数据污染，因此拦截的是客户端发\n\n    出的请求回来的数据接收，即请求发送了，服务器响应了，但是无法被浏览器接收\n    ```\n\n- 为什么会出现跨域，有什么常见的解决方案\n\n  - 跨域：浏览器同源策略 1995 年，同源政策由 Netscape 公司引入浏览器。目前，所有浏览器都实行这个政策。 最初，它的含义是指，A 网页设置的 Cookie，B 网页不能打开，除非这两个网页\"同源\"。所谓\"同源\"指的是\"三个相同\"\n\n      ```text\n      协议相同  http https\n      域名相同  www.xdclass.net\n      端口相同  80  81\n      \n      一句话：浏览器从一个域名的网页去请求另一个域名的资源时，域名、端口、协议任一不同，都是跨域\n      \n      浏览器控制台跨域提示：\n      No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'null' is therefore not allowed access.\n      ```\n\n  - 解决方法\n\n    - JSONP\n\n    - 页面这层再包装一层服务，目前最多就是 nodejs\n\n    - Http 响应头配置允许跨域\n\n      - nginx 代理服务器\n\n      - 后端程序代码配置\n\n          ```text\n          程序代码中处理 SpringBoot 通过拦截器配置\n          \n          //表示接受任意域名的请求,也可以指定域名\n          response.setHeader(\"Access-Control-Allow-Origin\", request.getHeader(\"origin\"));\n          \n          //该字段可选，是个布尔值，表示是否可以携带cookie\n          response.setHeader(\"Access-Control-Allow-Credentials\", \"true\");\n          \n          response.setHeader(\"Access-Control-Allow-Methods\", \"GET, HEAD, POST, PUT, PATCH, DELETE, OPTIONS\");\n          \n          response.setHeader(\"Access-Control-Allow-Headers\", \"*\");\n          ```","filePath":"src/content/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题13.md","digest":"6eaa7ab00b31c3a5","rendered":{"html":"<section><h2 id=\"第十三章-最接近用户的协议-http-协议\">第十三章 最接近用户的协议-Http 协议<a class=\"anchor\" href=\"#第十三章-最接近用户的协议-http-协议\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"第-1-集-http-协议之核心面试知识点\">第 1 集 http 协议之核心面试知识点<a class=\"anchor\" href=\"#第-1-集-http-协议之核心面试知识点\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：http 状态码和 method 知识点考查</strong></p><ul>\n<li>\n<p>考点：是否掌握 Http 基础知识，遵循开发规范</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>常见的 Http Method 有哪些，使用场景分别是？</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:110ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">http1.0定义了三种：</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">GET: 向服务器获取资源，比如常见的查询请求</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">POST: 向服务器提交数据而发送的请求</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">Head: 和get类似，返回的响应中没有具体的内容，用于获取报头</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">http1.1定义了六种</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">PUT：一般是用于更新请求，比如更新个人信息、商品信息全量更新</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">PATCH：PUT 方法的补充,更新指定资源的部分数据</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">DELETE：用于删除指定的资源</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">OPTIONS: 获取服务器支持的HTTP请求方法,服务器性能、跨域检查等</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">CONNECT: 方法的作用就是把服务器作为跳板，让服务器代替用户去访问其它网页，之后把数据原原本本的返回给用户，网页开发基本不用这个方法，如果是http代理就会使用这个，让服务器代理用户去访问其他网页，类似中介</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">TRACE：回显服务器收到的请求，主要用于测试或诊断</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>常见 http 状态码解析</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:67ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">浏览器向服务器请求时，服务端响应的消息头里面有状态码，表示请求结果的状态</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">分类</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1XX: 收到请求，需要请求者继续执行操作，比较少用</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">2XX: 请求成功，常用的 200</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">3XX: 重定向，浏览器在拿到服务器返回的这个状态码后会自动跳转到一个新的URL地址，这个地址可以从响应的Location首部中获取；</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">好处：网站改版、域名迁移等，多个域名指向同个主站导流</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">必须记住： 301：永久性跳转，比如域名过期，换个域名 302：临时性跳转</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">4XX: 客服端出错，请求包含语法错误或者无法完成请求</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">必须记住：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">400: 请求出错，比如语法协议</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">403: 没权限访问</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">404: 找不到这个路径对应的接口或者文件</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">405: 不允许此方法进行提交，Method not allowed，比如接口一定要POST方式，而你是用了GET</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">5XX: 服务端出错，服务器在处理请求的过程中发生了错误</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">必须记住：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">500: 服务器内部报错了，完成不了这次请求</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">503: 服务器宕机</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-2-集-http-协议无状态解决方法-cookie-和-session\">第 2 集 http 协议无状态解决方法 Cookie 和 Session<a class=\"anchor\" href=\"#第-2-集-http-协议无状态解决方法-cookie-和-session\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：单机情况下 http 无状态解决方案，cookie 和 session</strong></p><ul>\n<li>\n<p>考点：是否掌握 cookie 和 session 知识点</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>说下 Cookie 和 Session 的区别和联系</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:30ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">cookie数据保存在客户端，session数据保存在服务端</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">cookie不是很安全，容易泄露，不能直接明文存储信息</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">Cookie大小和数量存储有限制</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>你们公司 C 端业务登录的是怎样做的（业务量大，集群部署）</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:43ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">部分业务是采用redis替代本身的tomcat单机session (业务需要高度可控)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">还有其他业务是使用JSON Web token (C端普通业务)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/39748226-148a-43dd-a30e-3b27095cd511.png\" alt=\"image-20200606173941994\"></p>\n</li>\n</ul></section><section><h3 id=\"第-3-集-http-协议之分布式业务无状态解决方案-jwt\">第 3 集 http 协议之分布式业务无状态解决方案 JWT<a class=\"anchor\" href=\"#第-3-集-http-协议之分布式业务无状态解决方案-jwt\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：分布式业务场景的常见登录解决方案 JWT</strong></p><ul>\n<li>\n<p>考点：是否知道 JWT</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>你们公司是用 JWT 做集群的登录解决是不是，能否介绍下 JWT</p>\n<ul>\n<li>\n<p>JWT 是一个开放标准，它定义了一种用于简洁，自包含的用于通信双方之间以 JSON 对象的形式安全传递信息的方法。 可以使用 HMAC 算法或者是 RSA 的公钥密钥对进行签名</p>\n</li>\n<li>\n<p>JWT 格式组成 头部、负载、签名</p>\n<ul>\n<li>\n<p>header+payload+signature</p>\n<ul>\n<li>头部：主要是描述签名算法</li>\n<li>负载：主要描述是加密对象的信息，如用户的 id 等，也可以加些规范里面的东西，如 iss 签发者，exp 过期时间，sub 面向的用户</li>\n<li>签名：主要是把前面两部分进行加密，防止别人拿到 token 进行 base 解密后篡改 token</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>简单来说: 就是通过一定规范来生成 token，然后可以通过解密算法逆向解密 token，这样就可以获取用户信息</strong></p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:30ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">id:888,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">name:'二当家小D',</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">expire:10000</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">funtion 加密(object, appsecret){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">xxxx</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">return base64( token);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">function 解密(token ,appsecret){</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">xxxx</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">//成功返回true,失败返回false</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul>\n</li>\n<li>\n<p>为啥使用这个呢，有什么优缺点</p>\n<ul>\n<li>\n<p>优点</p>\n<ul>\n<li>生产的 token 可以包含基本信息，比如 id、用户昵称、头像等信息，避免再次查库</li>\n<li>存储在客户端，不占用服务端的内存资源，使用加解密的方式进行校验，在分布式业务中能较好的提高性能和节省空间</li>\n</ul>\n</li>\n<li>\n<p>缺点</p>\n<ul>\n<li>token 是经过 base64 编码，所以可以解码，因此 token 加密前的对象不应该包含敏感信息，如用户权限，密码等</li>\n<li>如果没有服务端存储，则不能做登录失效处理，除非服务端改秘钥</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>生成的 token，在客户端或者浏览器是怎么存储的</p>\n<ul>\n<li>可以存储在 cookie，localstorage 和 sessionStorage 里面</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-4-集-浏览器输入-url-按回车背后经历了哪些\">第 4 集 浏览器输入 url 按回车背后经历了哪些<a class=\"anchor\" href=\"#第-4-集-浏览器输入-url-按回车背后经历了哪些\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：浏览器网络请求链路</strong></p><ul>\n<li>\n<p>考点：是否掌握 http 请求产生到响应的链路</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>说下常用浏览器输入一个 url 到用户看到结果，中间经过哪些流程</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:40ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1、浏览器输入url, 解析url地址是否合法</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">2、浏览器检查是否有缓存, 如果有直接显示。如果没有跳到第三步。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">3、在发送http请求前，需要域名解析（DNS解析），解析获取对应过的ip地址。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">4、浏览器向服务器发起tcp链接，完成tcp三次握手</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">5、握手成功后，浏览器向服务器发送http请求</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">6、服务器收到处理的请求，将数据返回至浏览器</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">7、浏览器收到http响应。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">8、浏览器解析响应。如果响应可以缓存，则存入缓存</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">9、浏览器进行页面渲染</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-5-集-浏览器同源策略和跨域掌握了吗\">第 5 集 浏览器同源策略和跨域掌握了吗？<a class=\"anchor\" href=\"#第-5-集-浏览器同源策略和跨域掌握了吗\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：什么是浏览器的同源策略和跨域知识点</strong></p><ul>\n<li>\n<p>考点：同源策略和跨域知识点</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>你是否知道什么是浏览器同源策略</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:76ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">同源策略（Same origin policy）是一种约定，它是浏览器最核心也最基本的安全功能，如果缺少了同源策略，则浏览器的正常功能可能都会受到影响。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">由Netscape提出的一个著名的安全策略。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">当一个浏览器的两个tab页中分别打开来 百度和谷歌的页面</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">当浏览器的百度tab页执行一个脚本的时候会检查这个脚本是属于哪个页面的，</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">即检查是否同源，只有和百度同源的脚本才会被执行。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">如果非同源，那么在请求数据时，浏览器会在控制台中报一个异常，提示拒绝访问。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">同源策略是浏览器的行为，是为了保护本地数据不被JavaScript代码获取回来的数据污染，因此拦截的是客户端发</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">出的请求回来的数据接收，即请求发送了，服务器响应了，但是无法被浏览器接收</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>为什么会出现跨域，有什么常见的解决方案</p>\n<ul>\n<li>\n<p>跨域：浏览器同源策略 1995 年，同源政策由 Netscape 公司引入浏览器。目前，所有浏览器都实行这个政策。 最初，它的含义是指，A 网页设置的 Cookie，B 网页不能打开，除非这两个网页”同源”。所谓”同源”指的是”三个相同”</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:124ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">协议相同  http https</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">域名相同  www.xdclass.net</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">端口相同  80  81</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">一句话：浏览器从一个域名的网页去请求另一个域名的资源时，域名、端口、协议任一不同，都是跨域</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">浏览器控制台跨域提示：</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'null' is therefore not allowed access.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>解决方法</p>\n<ul>\n<li>\n<p>JSONP</p>\n</li>\n<li>\n<p>页面这层再包装一层服务，目前最多就是 nodejs</p>\n</li>\n<li>\n<p>Http 响应头配置允许跨域</p>\n<ul>\n<li>\n<p>nginx 代理服务器</p>\n</li>\n<li>\n<p>后端程序代码配置</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:99ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">程序代码中处理 SpringBoot 通过拦截器配置</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">//表示接受任意域名的请求,也可以指定域名</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">response.setHeader(\"Access-Control-Allow-Origin\", request.getHeader(\"origin\"));</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">//该字段可选，是个布尔值，表示是否可以携带cookie</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">response.setHeader(\"Access-Control-Allow-Credentials\", \"true\");</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">response.setHeader(\"Access-Control-Allow-Methods\", \"GET, HEAD, POST, PUT, PATCH, DELETE, OPTIONS\");</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">response.setHeader(\"Access-Control-Allow-Headers\", \"*\");</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul></section></section>","metadata":{"headings":[{"depth":2,"slug":"第十三章-最接近用户的协议-http-协议","text":"第十三章 最接近用户的协议-Http 协议#"},{"depth":3,"slug":"第-1-集-http-协议之核心面试知识点","text":"第 1 集 http 协议之核心面试知识点#"},{"depth":3,"slug":"第-2-集-http-协议无状态解决方法-cookie-和-session","text":"第 2 集 http 协议无状态解决方法 Cookie 和 Session#"},{"depth":3,"slug":"第-3-集-http-协议之分布式业务无状态解决方案-jwt","text":"第 3 集 http 协议之分布式业务无状态解决方案 JWT#"},{"depth":3,"slug":"第-4-集-浏览器输入-url-按回车背后经历了哪些","text":"第 4 集 浏览器输入 url 按回车背后经历了哪些#"},{"depth":3,"slug":"第-5-集-浏览器同源策略和跨域掌握了吗","text":"第 5 集 浏览器同源策略和跨域掌握了吗？#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"后端高级工程师面试专题13","published":"2025-11-13T00:00:00.000Z","pinned":false,"description":"第十三章 最接近用户的协议-Http 协议","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":11,"words":2199,"excerpt":"简介：http 状态码和 method 知识点考查"},"imagePaths":[]}},"collection":"posts"}],"2025-11-12":[{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题12","data":{"title":"后端高级工程师面试专题12","published":"2025-11-12T00:00:00.000Z","draft":false,"description":"第十二章 生产环境数据库性能监控和优化面试环节","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"后端高级工程师面试专题11","prevSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题11","nextTitle":"后端高级工程师面试专题13","nextSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题13"},"body":"## 第十二章 生产环境数据库性能监控和优化面试环节\n\n### 第 1 集 生产环境的数据库，你会做哪些操作保证安全\n\n**简介：生成环境监控指标和安全**\n\n- 考点：是否有监控和数据安全思维\n\n- 难度：【 \\*\\*\\*\\*\\* 】\n\n- 针对线上的数据库，你会做哪些监控，业务性能 + 数据安全 角度分析\n\n    ```text\n    大厂一般都有数据库监控后台，里面指标很多，但是开发人员也必须知道\n\n    业务性能\n        1、应用上线前会审查业务新增的sql，和分析sql执行计划\n            比如是否存在 select * ，索引建立是否合理\n        2、开启慢查询日志，定期分析慢查询日志\n\n        3、监控CPU/内存利用率，读写、网关IO、流量带宽 随着时间的变化统计图\n\n        4、吞吐量QPS/TPS，一天内读写随着时间的变化统计图\n\n    数据安全\n        1、短期增量备份，比如一周一次。 定期全量备份，比如一月一次\n\n        2、检查是否有非授权用户，是否存在弱口令，网络防火墙检查\n\n        3、导出数据是否进行脱敏，防止数据泄露或者黑产利用\n\n        4、数据库 全量操作日志审计，防止数据泄露\n\n        5、数据库账号密码 业务独立，权限独立控制，防止多库共用同个账号密码\n\n        6、高可用 主从架构，多机房部署\n    ```\n\n### 第 2 集 你知道 Mysql 里面有多少种日志\n\n**简介：mysql 常见日志的考查**\n\n- 考点：mysql 常见日志种类和作用\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- Mysql 有多少种常见的日志，分别解释日志的作用\n\n    ```text\n    redo 重做日志\n      作用：确保事务的持久性，防止在发生故障，脏页未写入磁盘。重启数据库会进行redo log执行重做，到达事务一致性\n    \n    undo 回滚日志\n      作用：保证数据的原子性，记录事务发生之前的数据的一个版本，用于回滚。\n      innodb事务的可重复读和读取已提交 隔离级别就是通过mvcc+undo实现\n    \n    errorlog 错误日志\n      作用：Mysql本身启动、停止、运行期间发生的错误信息\n    \n    slow query log 慢查询日志\n      作用：记录执行时间过长的sql，时间阈值可以配置，只记录执行成功\n    \n    binlog 二进制日志\n      作用：用于主从复制，实现主从同步\n    \n    relay log 中继日志\n      作用：用于数据库主从同步，将主库发送来的binlog先保存在本地，然后从库进行回放\n    \n    general log 普通日志\n      作用：记录数据库操作明细，默认关闭，开启会降低数据库性能\n    ```\n\n### 第 3 集 层层套路之数据库主从复制里面知识考查\n\n**简介：数据库主从的用途、原理流程**\n\n- 考点：是否搭建过主从，并掌握原理\n\n- 难度：【 \\*\\*\\*\\*\\* 】\n\n- 你们数据库是单点的吗？有没做多节点优化 ，怎么做的\n\n    ```text\n    我们公司数据库不是单节点，是多节点的，有做主从复制\n    ```\n\n- 既然搭建过数据库主从复制，你能画下流程图说下异步复制原理不\n\n  ![](/images/后端高级工程师面试专题/a3cff282-10a4-4c14-b09b-b541b249b670.jpg)\n\n### 第 4 集 层层套路之数据库主从同步遇到的问题\n\n**简介：数据库主从遇到的问题和解决办法**\n\n- 考点：搭建过主从，肯定有遇过些问题，解决思路\n\n- 难度：【 \\*\\*\\* 】\n\n- 你们搭建数据库主从复制的目的有哪些\n\n    ```text\n    容灾使用，用于故障切换\n    业务需要，进行读写分离减少主库压力\n    ```\n\n- 既然你们搭建了主从同步，且你们日增量数据量也不少，有没遇到同步延迟问题\n\n- 为什么会有同步延迟问题，怎么解决？\n\n    ```text\n    保证性能第一情况下，不能百分百解决主从同步延迟问题，只能增加缓解措施。\n\n    现象：主从同步，大数据量场景下，会发现写入主库的数据，在从库没找到。\n\n    原因：\n      1、主从复制是单线程操作，当主库TPS高，产生的超过从库sql线程执行能力\n\n      2、从库执行了大的sql操作，阻塞等待\n\n      3、服务器硬件问题，如磁盘，CPU,还有网络延迟等\n\n    解决办法：\n      1、业务需要有一定的容忍度，程序和数据库直接增加缓存，降低读压力\n\n      2、业务适合的话，写入主库后，再写缓存，读的时候可以读缓存，没命中再读从库\n\n      3、读写分离，一主多从，分散主库和从库压力\n\n      4、提高硬件配置，比如使用SSD固态硬盘、更好的CPU和网络\n\n      5、进行分库分表，减少单机压力\n    ```\n\n  ![](/images/后端高级工程师面试专题/b666d23c-0032-4f44-8e36-95c8ed15076e.jpg)\n\n### 第 5 集 Mysql 主从复制数据一致性校验方案怎么做\n\n**简介：数据库主从复制数据一致性校验方案**\n\n- 考点：搭建主从复制，有没做过数据一致性校验\n\n- 难度：【 \\*\\*\\* 】\n\n- 什么场景下会出现主从数据不一致\n\n    ```text\n    1、本身复制延迟导致\n    2、主库宕机或者从库宕机都会导致复制中断\n    3、把一个从库提升为主库，可能导致从库和主库的数据不一致性\n    ```\n\n- 是否有做过主从一致性校验，你是怎么做的，如果没做过，你计划怎么做\n\n- 如果不一致你会怎么修复\n\n    ```text\n    Mysql主从复制是基于binlog复制，难免出现复制数据不一致的风险，引起用户数据访问前后不一致的风险\n    所以要定期开展主从复制数据一致性的校验并修复，避免这些问题\n\n    解决方案之一，使用Percona公司下的工具\n\n    pt-table-checksum工具进行一致性校验\n\n      原理：\n      主库利用表中的索引，将表的数据切割成一个个chunk(块)，然后进行计算得到checksum值。\n      从库也执相应的操作，并在从库上计算相同数据块的checksum，然后对比主从中各个表的checksum是否一致并存储到数据库，最后通过存储校验结果的表就可以判断出哪些表的数据不一致\n\n    pt-table-sync(在从库执行)工具进行修复不一致数据，可以修复主从结构数据的不一致，也可以修复非主从结构数据表的数据不一致\n\n      原理：在主库上执行数据的更改，再同步到从库上，不会直接更改成从的数据。在主库上执行更改是基于主库现在的数据，也不会更改主库上的数据，可以同步某些表或整个库的数据，但它不同步表结构、索引，只同步不一致的数据\n\n    注意：\n      默认主库要检查的表在从库都存在，并且同主库表有相同的表结构\n      如果表中没有索引，pt-table-checksum将没法处理，一般要求最基本都要有主键索引\n      pt-table-sync工具会修改数据，使用前最好备份下数据，防止误操作\n    ```\n\n- pt-table-checksum 怎么保证某个 chunk 的时候 checksum 数据一致性？\n\n    ```text\n    当pt工具在计算主库上某chunk的checksum时，主库可能在更新且从库可能复制延迟，那该怎么保证主库与从库计算的是”同一份”数据，答案把要checksum的行加上for update锁并计算，这保证了主库的某个chunk内部数据的一致性\n    ```\n\n  官方地址：<https://www.percona.com/downloads/percona-toolkit/LATEST/>\n\n  其他资料：<https://www.cnblogs.com/zishengY/p/6852280.html>","filePath":"src/content/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题12.md","digest":"39836d499ae18f3f","rendered":{"html":"<section><h2 id=\"第十二章-生产环境数据库性能监控和优化面试环节\">第十二章 生产环境数据库性能监控和优化面试环节<a class=\"anchor\" href=\"#第十二章-生产环境数据库性能监控和优化面试环节\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"第-1-集-生产环境的数据库你会做哪些操作保证安全\">第 1 集 生产环境的数据库，你会做哪些操作保证安全<a class=\"anchor\" href=\"#第-1-集-生产环境的数据库你会做哪些操作保证安全\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：生成环境监控指标和安全</strong></p><ul>\n<li>\n<p>考点：是否有监控和数据安全思维</p>\n</li>\n<li>\n<p>难度：【 ***** 】</p>\n</li>\n<li>\n<p>针对线上的数据库，你会做哪些监控，业务性能 + 数据安全 角度分析</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">大厂一般都有数据库监控后台，里面指标很多，但是开发人员也必须知道</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">业务性能</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">1、应用上线前会审查业务新增的sql，和分析sql执行计划</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">比如是否存在 select * ，索引建立是否合理</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">2、开启慢查询日志，定期分析慢查询日志</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">3、监控CPU/内存利用率，读写、网关IO、流量带宽 随着时间的变化统计图</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">4、吞吐量QPS/TPS，一天内读写随着时间的变化统计图</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">数据安全</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">1、短期增量备份，比如一周一次。 定期全量备份，比如一月一次</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">2、检查是否有非授权用户，是否存在弱口令，网络防火墙检查</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">3、导出数据是否进行脱敏，防止数据泄露或者黑产利用</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">4、数据库 全量操作日志审计，防止数据泄露</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">5、数据库账号密码 业务独立，权限独立控制，防止多库共用同个账号密码</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">6、高可用 主从架构，多机房部署</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-2-集-你知道-mysql-里面有多少种日志\">第 2 集 你知道 Mysql 里面有多少种日志<a class=\"anchor\" href=\"#第-2-集-你知道-mysql-里面有多少种日志\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：mysql 常见日志的考查</strong></p><ul>\n<li>\n<p>考点：mysql 常见日志种类和作用</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>Mysql 有多少种常见的日志，分别解释日志的作用</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:58ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">redo 重做日志</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">作用：确保事务的持久性，防止在发生故障，脏页未写入磁盘。重启数据库会进行redo log执行重做，到达事务一致性</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">undo 回滚日志</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">作用：保证数据的原子性，记录事务发生之前的数据的一个版本，用于回滚。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">innodb事务的可重复读和读取已提交 隔离级别就是通过mvcc+undo实现</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">errorlog 错误日志</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">作用：Mysql本身启动、停止、运行期间发生的错误信息</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">slow query log 慢查询日志</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">作用：记录执行时间过长的sql，时间阈值可以配置，只记录执行成功</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">binlog 二进制日志</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">作用：用于主从复制，实现主从同步</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">relay log 中继日志</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">作用：用于数据库主从同步，将主库发送来的binlog先保存在本地，然后从库进行回放</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">general log 普通日志</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">作用：记录数据库操作明细，默认关闭，开启会降低数据库性能</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-3-集-层层套路之数据库主从复制里面知识考查\">第 3 集 层层套路之数据库主从复制里面知识考查<a class=\"anchor\" href=\"#第-3-集-层层套路之数据库主从复制里面知识考查\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：数据库主从的用途、原理流程</strong></p><ul>\n<li>\n<p>考点：是否搭建过主从，并掌握原理</p>\n</li>\n<li>\n<p>难度：【 ***** 】</p>\n</li>\n<li>\n<p>你们数据库是单点的吗？有没做多节点优化 ，怎么做的</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">我们公司数据库不是单节点，是多节点的，有做主从复制</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>既然搭建过数据库主从复制，你能画下流程图说下异步复制原理不</p>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/a3cff282-10a4-4c14-b09b-b541b249b670.jpg\" alt=\"\"></p>\n</li>\n</ul></section><section><h3 id=\"第-4-集-层层套路之数据库主从同步遇到的问题\">第 4 集 层层套路之数据库主从同步遇到的问题<a class=\"anchor\" href=\"#第-4-集-层层套路之数据库主从同步遇到的问题\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：数据库主从遇到的问题和解决办法</strong></p><ul>\n<li>\n<p>考点：搭建过主从，肯定有遇过些问题，解决思路</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>你们搭建数据库主从复制的目的有哪些</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:17ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">容灾使用，用于故障切换</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">业务需要，进行读写分离减少主库压力</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>既然你们搭建了主从同步，且你们日增量数据量也不少，有没遇到同步延迟问题</p>\n</li>\n<li>\n<p>为什么会有同步延迟问题，怎么解决？</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">保证性能第一情况下，不能百分百解决主从同步延迟问题，只能增加缓解措施。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">现象：主从同步，大数据量场景下，会发现写入主库的数据，在从库没找到。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">原因：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">1、主从复制是单线程操作，当主库TPS高，产生的超过从库sql线程执行能力</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">2、从库执行了大的sql操作，阻塞等待</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">3、服务器硬件问题，如磁盘，CPU,还有网络延迟等</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">解决办法：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">1、业务需要有一定的容忍度，程序和数据库直接增加缓存，降低读压力</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">2、业务适合的话，写入主库后，再写缓存，读的时候可以读缓存，没命中再读从库</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">3、读写分离，一主多从，分散主库和从库压力</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">4、提高硬件配置，比如使用SSD固态硬盘、更好的CPU和网络</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">5、进行分库分表，减少单机压力</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/b666d23c-0032-4f44-8e36-95c8ed15076e.jpg\" alt=\"\"></p>\n</li>\n</ul></section><section><h3 id=\"第-5-集-mysql-主从复制数据一致性校验方案怎么做\">第 5 集 Mysql 主从复制数据一致性校验方案怎么做<a class=\"anchor\" href=\"#第-5-集-mysql-主从复制数据一致性校验方案怎么做\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：数据库主从复制数据一致性校验方案</strong></p><ul>\n<li>\n<p>考点：搭建主从复制，有没做过数据一致性校验</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>什么场景下会出现主从数据不一致</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:29ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1、本身复制延迟导致</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">2、主库宕机或者从库宕机都会导致复制中断</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">3、把一个从库提升为主库，可能导致从库和主库的数据不一致性</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>是否有做过主从一致性校验，你是怎么做的，如果没做过，你计划怎么做</p>\n</li>\n<li>\n<p>如果不一致你会怎么修复</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:104ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">Mysql主从复制是基于binlog复制，难免出现复制数据不一致的风险，引起用户数据访问前后不一致的风险</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">所以要定期开展主从复制数据一致性的校验并修复，避免这些问题</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">解决方案之一，使用Percona公司下的工具</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">pt-table-checksum工具进行一致性校验</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">原理：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">主库利用表中的索引，将表的数据切割成一个个chunk(块)，然后进行计算得到checksum值。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">从库也执相应的操作，并在从库上计算相同数据块的checksum，然后对比主从中各个表的checksum是否一致并存储到数据库，最后通过存储校验结果的表就可以判断出哪些表的数据不一致</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">pt-table-sync(在从库执行)工具进行修复不一致数据，可以修复主从结构数据的不一致，也可以修复非主从结构数据表的数据不一致</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">原理：在主库上执行数据的更改，再同步到从库上，不会直接更改成从的数据。在主库上执行更改是基于主库现在的数据，也不会更改主库上的数据，可以同步某些表或整个库的数据，但它不同步表结构、索引，只同步不一致的数据</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">注意：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">默认主库要检查的表在从库都存在，并且同主库表有相同的表结构</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">如果表中没有索引，pt-table-checksum将没法处理，一般要求最基本都要有主键索引</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">pt-table-sync工具会修改数据，使用前最好备份下数据，防止误操作</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>pt-table-checksum 怎么保证某个 chunk 的时候 checksum 数据一致性？</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:121ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">当pt工具在计算主库上某chunk的checksum时，主库可能在更新且从库可能复制延迟，那该怎么保证主库与从库计算的是”同一份”数据，答案把要checksum的行加上for update锁并计算，这保证了主库的某个chunk内部数据的一致性</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p>官方地址：<a href=\"https://www.percona.com/downloads/percona-toolkit/LATEST/\">https://www.percona.com/downloads/percona-toolkit/LATEST/</a></p>\n<p>其他资料：<a href=\"https://www.cnblogs.com/zishengY/p/6852280.html\">https://www.cnblogs.com/zishengY/p/6852280.html</a></p>\n</li>\n</ul></section></section>","metadata":{"headings":[{"depth":2,"slug":"第十二章-生产环境数据库性能监控和优化面试环节","text":"第十二章 生产环境数据库性能监控和优化面试环节#"},{"depth":3,"slug":"第-1-集-生产环境的数据库你会做哪些操作保证安全","text":"第 1 集 生产环境的数据库，你会做哪些操作保证安全#"},{"depth":3,"slug":"第-2-集-你知道-mysql-里面有多少种日志","text":"第 2 集 你知道 Mysql 里面有多少种日志#"},{"depth":3,"slug":"第-3-集-层层套路之数据库主从复制里面知识考查","text":"第 3 集 层层套路之数据库主从复制里面知识考查#"},{"depth":3,"slug":"第-4-集-层层套路之数据库主从同步遇到的问题","text":"第 4 集 层层套路之数据库主从同步遇到的问题#"},{"depth":3,"slug":"第-5-集-mysql-主从复制数据一致性校验方案怎么做","text":"第 5 集 Mysql 主从复制数据一致性校验方案怎么做#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"后端高级工程师面试专题12","published":"2025-11-12T00:00:00.000Z","pinned":false,"description":"第十二章 生产环境数据库性能监控和优化面试环节","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":10,"words":1921,"excerpt":"简介：生成环境监控指标和安全"},"imagePaths":[]}},"collection":"posts"}],"2025-11-11":[{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题11","data":{"title":"后端高级工程师面试专题11","published":"2025-11-11T00:00:00.000Z","draft":false,"description":"第十一章 数据库设计查询和上线里面的坑你走过多少","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"后端高级工程师面试专题10","prevSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题10","nextTitle":"后端高级工程师面试专题12","nextSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题12"},"body":"## 第十一章 数据库设计查询和上线里面的坑你走过多少\n\n### 第 1 集 数据库查询关键词执行顺序\n\n**简介：数据库查询指令的执行顺序**\n\n- 考点：考查数据库查询指令的执行顺\n\n- 难度：【 \\*\\*\\* 】\n\n- 数据库查询的指令有多个，说下执行顺序 select、where、from、group by、having、order by\n\n    ```text\n    from 从哪个表查询\n    where 初步过滤条件\n    group by 过滤后进行分组[重点]\n    having 对分组后的数据进行二次过滤[重点]\n    select 查看哪些结果字段\n    order by 按照怎样的顺序进行排序返回[重点]\n\n    select video_id,count(id) num from chapter group by video_id  having num >10\n    order by video_id desc\n    ```\n\n- 建议：去网上找 sql 练习题\n\n### 第 2 集 设计数据库表时相似字段类型你能区分吗《上》\n\n**简介：设计数据库的时候相似类型的字段区分**\n\n- 考点：是否知道常用的相似字段他们的区别\n\n- 难度：【 \\*\\*\\* 】\n\n- varchar(len) char(len) len 存储的是字符还是字节\n\n- MySQL 中的 varchar 和 char 有什么区别，应该怎么选择\n\n  |    对比项    |                      char(16)                      |                  varchar(16)                   |\n  | :----------: | :------------------------------------------------: | :--------------------------------------------: |\n  |   长度特点   |                 长度固定，存储字符                 |               长度可变，存储字符               |\n  | 长度不足情况 |       插入的长度小于定义长度时，则用空格填充       |       小于定义长度时，按实际插入长度存储       |\n  |     性能     |             存取速度比 varchar 快得多              |             存取速度比 char 慢得多             |\n  |   使用场景   | 适合存储很短的,固定长度的字符串,如手机号，MD5 值等 | 适合用在长度不固定场景，如收货地址，邮箱地址等 |\n  |              |                                                    |                                                |\n\n### 第 3 集 2038 年 1 月 19 号会有多少系统产生 bug，相似字段类型区分《下》\n\n**简介：设计数据库的时候相似类型的字段区分**\n\n- 考点：是否知道常用的数据库时间类型相似字段的区别\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- MySQL 中的 datetime 和 timestamp 有什么区别\n\n  | 类型      | 占据字节 | 范围                                       | 时区问题                                     |     |\n  | --------- | -------- | ------------------------------------------ | -------------------------------------------- | --- |\n  | datetime  | 8 字节   | 1000-01-01 00:00:00 到 9999-12-31 23:59:59 | 存储与时区无关，不会发生改变                 |     |\n  | timestamp | 4 字节   | 1970-01-01 00:00:01 到 2038-01-19 11:14:07 | 存储的是与时区有关，随数据库的时区而发生改变 |     |\n\n- 为什么 timestamp 只能到 2038 年\n\n    ```text\n    MySQL的timestamp类型是4个字节，最大值是2的31次方减1，结果是2147483647，\n    转换成北京时间就是2038-01-19 11:14:07\n    ```\n\n### 第 4 集 场景模拟之千万级 Mysql 数据表分页查询优化\n\n**简介：针对大数据量 sql 分页优化思路**\n\n- 考点：是否有大数据分页优化思路\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 线上数据库的一个商品表数据量过千万，做深度分页的时候性能很慢，有什么优化思路\n\n    ```text\n    现象：千万级别数据很正常，比如数据流水、日志记录等，数据库正常的深度分页会很慢\n    慢的原因：select * from product limit N,M\n    MySQL执行此类SQL时需要先扫描到N行，然后再去取M行,N越大,MySQL扫描的记录数越多，SQL的性能就会越差\n\n    1、后端、前端缓存\n\n    2、使用ElasticSearch分页搜索\n\n    3、合理使用 mysql 查询缓存，覆盖索引进行查询分页\n      select title,cateory from product limit 1000000,100\n\n    4、如果id是自增且不存在中间删除数据，使用子查询优化，定位偏移位置的 id\n    select * from oper_log where type='BUY' limit 1000000,100; //5.秒\n\n    select id from oper_log where type='BUY' limit 1000000,1; // 0.4秒\n\n    select * from oper_log where type='BUY' and  id>=(select id from oper_log where type='BUY' limit 1000000,1) limit 100; //0.8秒\n    ```\n\n### 第 5 集 BAT 大厂里面 应用版本更新，数据库上线流程\n\n**简介：掌握大厂里面数据库上线流程，版本更新流程**\n\n- 考点：是否有正确的数据库部署流程\n\n- 难度：【 \\*\\*\\*\\*\\* 】\n\n- 你公司里面产品迭代更新，开发好代码和数据库，上线流程是怎样的\n\n  ![](/images/后端高级工程师面试专题/05563b01-1956-4140-811b-a939a7039aa6.jpg)","filePath":"src/content/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题11.md","digest":"3e50a00b4b47b097","rendered":{"html":"<section><h2 id=\"第十一章-数据库设计查询和上线里面的坑你走过多少\">第十一章 数据库设计查询和上线里面的坑你走过多少<a class=\"anchor\" href=\"#第十一章-数据库设计查询和上线里面的坑你走过多少\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"第-1-集-数据库查询关键词执行顺序\">第 1 集 数据库查询关键词执行顺序<a class=\"anchor\" href=\"#第-1-集-数据库查询关键词执行顺序\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：数据库查询指令的执行顺序</strong></p><ul>\n<li>\n<p>考点：考查数据库查询指令的执行顺</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>数据库查询的指令有多个，说下执行顺序 select、where、from、group by、having、order by</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:76ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">from 从哪个表查询</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">where 初步过滤条件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">group by 过滤后进行分组[重点]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">having 对分组后的数据进行二次过滤[重点]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">select 查看哪些结果字段</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">order by 按照怎样的顺序进行排序返回[重点]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">select video_id,count(id) num from chapter group by video_id  having num >10</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">order by video_id desc</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>建议：去网上找 sql 练习题</p>\n</li>\n</ul></section><section><h3 id=\"第-2-集-设计数据库表时相似字段类型你能区分吗上\">第 2 集 设计数据库表时相似字段类型你能区分吗《上》<a class=\"anchor\" href=\"#第-2-集-设计数据库表时相似字段类型你能区分吗上\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：设计数据库的时候相似类型的字段区分</strong></p><ul>\n<li>\n<p>考点：是否知道常用的相似字段他们的区别</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>varchar(len) char(len) len 存储的是字符还是字节</p>\n</li>\n<li>\n<p>MySQL 中的 varchar 和 char 有什么区别，应该怎么选择</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">对比项</th><th align=\"center\">char(16)</th><th align=\"center\">varchar(16)</th></tr></thead><tbody><tr><td align=\"center\">长度特点</td><td align=\"center\">长度固定，存储字符</td><td align=\"center\">长度可变，存储字符</td></tr><tr><td align=\"center\">长度不足情况</td><td align=\"center\">插入的长度小于定义长度时，则用空格填充</td><td align=\"center\">小于定义长度时，按实际插入长度存储</td></tr><tr><td align=\"center\">性能</td><td align=\"center\">存取速度比 varchar 快得多</td><td align=\"center\">存取速度比 char 慢得多</td></tr><tr><td align=\"center\">使用场景</td><td align=\"center\">适合存储很短的,固定长度的字符串,如手机号，MD5 值等</td><td align=\"center\">适合用在长度不固定场景，如收货地址，邮箱地址等</td></tr><tr><td align=\"center\"></td><td align=\"center\"></td><td align=\"center\"></td></tr></tbody></table>\n</li>\n</ul></section><section><h3 id=\"第-3-集-2038-年-1-月-19-号会有多少系统产生-bug相似字段类型区分下\">第 3 集 2038 年 1 月 19 号会有多少系统产生 bug，相似字段类型区分《下》<a class=\"anchor\" href=\"#第-3-集-2038-年-1-月-19-号会有多少系统产生-bug相似字段类型区分下\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：设计数据库的时候相似类型的字段区分</strong></p><ul>\n<li>\n<p>考点：是否知道常用的数据库时间类型相似字段的区别</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>MySQL 中的 datetime 和 timestamp 有什么区别</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>类型</th><th>占据字节</th><th>范围</th><th>时区问题</th><th></th></tr></thead><tbody><tr><td>datetime</td><td>8 字节</td><td>1000-01-01 00:00:00 到 9999-12-31 23:59:59</td><td>存储与时区无关，不会发生改变</td><td></td></tr><tr><td>timestamp</td><td>4 字节</td><td>1970-01-01 00:00:01 到 2038-01-19 11:14:07</td><td>存储的是与时区有关，随数据库的时区而发生改变</td><td></td></tr></tbody></table>\n</li>\n<li>\n<p>为什么 timestamp 只能到 2038 年</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:50ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">MySQL的timestamp类型是4个字节，最大值是2的31次方减1，结果是2147483647，</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">转换成北京时间就是2038-01-19 11:14:07</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-4-集-场景模拟之千万级-mysql-数据表分页查询优化\">第 4 集 场景模拟之千万级 Mysql 数据表分页查询优化<a class=\"anchor\" href=\"#第-4-集-场景模拟之千万级-mysql-数据表分页查询优化\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：针对大数据量 sql 分页优化思路</strong></p><ul>\n<li>\n<p>考点：是否有大数据分页优化思路</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>线上数据库的一个商品表数据量过千万，做深度分页的时候性能很慢，有什么优化思路</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:125ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">现象：千万级别数据很正常，比如数据流水、日志记录等，数据库正常的深度分页会很慢</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">慢的原因：select * from product limit N,M</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">MySQL执行此类SQL时需要先扫描到N行，然后再去取M行,N越大,MySQL扫描的记录数越多，SQL的性能就会越差</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1、后端、前端缓存</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">2、使用ElasticSearch分页搜索</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">3、合理使用 mysql 查询缓存，覆盖索引进行查询分页</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">select title,cateory from product limit 1000000,100</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">4、如果id是自增且不存在中间删除数据，使用子查询优化，定位偏移位置的 id</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">select * from oper_log where type='BUY' limit 1000000,100; //5.秒</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">select id from oper_log where type='BUY' limit 1000000,1; // 0.4秒</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">select * from oper_log where type='BUY' and  id>=(select id from oper_log where type='BUY' limit 1000000,1) limit 100; //0.8秒</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-5-集-bat-大厂里面-应用版本更新数据库上线流程\">第 5 集 BAT 大厂里面 应用版本更新，数据库上线流程<a class=\"anchor\" href=\"#第-5-集-bat-大厂里面-应用版本更新数据库上线流程\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：掌握大厂里面数据库上线流程，版本更新流程</strong></p><ul>\n<li>\n<p>考点：是否有正确的数据库部署流程</p>\n</li>\n<li>\n<p>难度：【 ***** 】</p>\n</li>\n<li>\n<p>你公司里面产品迭代更新，开发好代码和数据库，上线流程是怎样的</p>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/05563b01-1956-4140-811b-a939a7039aa6.jpg\" alt=\"\"></p>\n</li>\n</ul></section></section>","metadata":{"headings":[{"depth":2,"slug":"第十一章-数据库设计查询和上线里面的坑你走过多少","text":"第十一章 数据库设计查询和上线里面的坑你走过多少#"},{"depth":3,"slug":"第-1-集-数据库查询关键词执行顺序","text":"第 1 集 数据库查询关键词执行顺序#"},{"depth":3,"slug":"第-2-集-设计数据库表时相似字段类型你能区分吗上","text":"第 2 集 设计数据库表时相似字段类型你能区分吗《上》#"},{"depth":3,"slug":"第-3-集-2038-年-1-月-19-号会有多少系统产生-bug相似字段类型区分下","text":"第 3 集 2038 年 1 月 19 号会有多少系统产生 bug，相似字段类型区分《下》#"},{"depth":3,"slug":"第-4-集-场景模拟之千万级-mysql-数据表分页查询优化","text":"第 4 集 场景模拟之千万级 Mysql 数据表分页查询优化#"},{"depth":3,"slug":"第-5-集-bat-大厂里面-应用版本更新数据库上线流程","text":"第 5 集 BAT 大厂里面 应用版本更新，数据库上线流程#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"后端高级工程师面试专题11","published":"2025-11-11T00:00:00.000Z","pinned":false,"description":"第十一章 数据库设计查询和上线里面的坑你走过多少","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":5,"words":966,"excerpt":"简介：数据库查询指令的执行顺序"},"imagePaths":[]}},"collection":"posts"}],"2025-11-10":[{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题10","data":{"title":"后端高级工程师面试专题10","published":"2025-11-10T00:00:00.000Z","draft":false,"description":"第十章 MySQL 数据库的面试题你遇过多少","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"后端高级工程师面试专题09","prevSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题09","nextTitle":"后端高级工程师面试专题11","nextSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题11"},"body":"## 第十章 MySQL 数据库的面试题你遇过多少\n\n### 第 1 集 常说的事务 ACID 是什么\n\n**简介：是否掌握事务的 ACID 原理**\n\n- 考点：是否掌握事务的 ACID 原理\n\n- 难度：【 \\*\\* 】\n\n- 你知道 Mysql 事务的四大特性不，简单说下\n\n  ```text\n  事务的四大特性ACID\n  原子性Atomicity：\n    一个事务必须被事务不可分割的最小工作单元，整个操作要么全部成功，要么全部失败，一般就是通过commit和rollback来控制\n\n  一致性Consistency:\n    数据库总能从一个一致性的状态转换到另一个一致性的状态，比如小滴课堂下单支付成功后，开通视频播放权限，只要有任何一方发生异常就不会成功提交事务\n\n  隔离性Isolation:\n    一个事务相对于另一个事务是隔离的，一个事务所做的修改是在最终提交以前，对其他事务是不可见的\n\n  持久性Durability:\n    一旦事务提交，则其所做的修改就会永久保存到数据库中。此时即使系统崩溃，修改的数据也不会丢失\n  ```\n\n### 第 2 集 脏读-不可重复读-幻读你知道多少\n\n**简介：考查数据库隔离级别导致的问题**\n\n- 考点：是否掌握数据库常见隔离级别和对应导致的问题\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 能否简单解释下脏读、不可重复读、幻读的意思\n\n  ```text\n  脏读: 事务中的修改即使没有提交，其他事务也能看见，事务可以读到未提交的数据称为脏读\n\n  不可重复读: 同个事务前后多次读取，不能读到相同的数据内容，中间另一个事务也操作了该同一数据\n\n  幻读：当某个事务在读取某个范围内的记录时，另外一个事务又在该范围内插入了新的记录，当之前的事务再次读取该范围的记录时，发现两次不一样，产生幻读\n\n  幻读和不可重复读的区别是：前者是一个范围，后者是本身，从总的结果来看, 两者都表现为两次读取的结果不一致\n  ```\n\n- 常见的隔离级别由低到高有哪几种，mysql 默认是哪种\n\n  ```text\n  事务的隔离级别越高，事务越安全，但是并发能力越差。\n\n  Read Uncommitted(未提交读，读取未提交内容)\n    事务中的修改即使没有提交，其他事务也能看见，事务可以读到为提交的数据称为脏读\n    也存在不可重复读、幻读问题\n\n  例子：\n    小滴课堂运营小姐姐配置了一个课程活动，原价500元的课程，配置成50元，但是事务没提交。\n    你刚好看到这个课程那么便宜准备购买，但是Anna小姐姐马上回滚了事务，重新配置并提交了事务，你准备下单的时候发现价格变回了500元\n\n\n  Read Committed(提交读，读取提交内容)\n    一个事务开始后只能看见已经提交的事务所做的修改，在事务中执行两次同样的查询可能得到不一样的结果，也叫做不可重复读(前后多次读取，不能读到相同的数据内容)，也存幻读问题\n\n  例子：\n    老王在小滴课堂有1000积分，准备去兑换《面试专题课程》，查询数据库确实有1000积分\n    但是老王的女友同时也在别的地方登录，把1000积分兑换了《SpringCloud微服务专题课程》，且在老王之前提交事务；当系统帮老王兑换《面试专题课程》是发现积分预计没了，兑换失败。\n\n    老王事务A事先读取了数据，他女友事务B紧接了更新了数据且提交了事务，事务A再次读取该数据时，数据已经发生了改变\n\n\n  Repeatable Read(可重复读,mysql默认的事务隔离级别)\n    解决脏读、不可重复读的问题，存在幻读的问题，使用 MMVC机制 实现可重复读\n\n    例子\n    老王在小滴课堂有1000积分，准备去兑换《面试专题课程》，查询数据库确实有1000积分\n    老王的女友同时也在别的地方登录先兑换了这个《面试专题课程》，老王的事务提交的时候发现存在了，之前读取的没用了，像是幻觉\n\n    幻读问题：MySQL的InnoDB引擎通过MVCC自动帮我们解决,即多版本并发控制\n\n\n  Serializable(可串行化)\n    解决脏读、不可重复读、幻读，可保证事务安全，但强制所有事务串行执行，所以并发效率低\n  ```\n\n### 第 3 集 Mysql 常见的存储引擎你知道不\n\n**简介：考查 mysql 的存储引擎**\n\n- 考点：是否知道 Mysql 的存储引擎\n\n- 难度：【 \\*\\* 】\n\n- 说下你知道 Mysql 常见的存储引擎，新版 Mysql 默认是哪个\n\n  ```text\n  常见的有多类，InnoDB、MyISAM、MEMORY、MERGE、ARCHIVE、CSV等\n  一般比较常用的有InnoDB、MyISAM\n  MySQL 5.5以上的版本默认是InnoDB，5.5之前默认存储引擎是MyISAM\n  ```\n\n### 第 4 集 存储引擎 InnoDB、MyISAM 异同点和选择\n\n**简介：考查 mysql 的存储引擎 InnoDB&MyISAM 的异同和选择**\n\n- 考点：是否了解 Mysql 的存储引擎 InnoDB&MyISAM 区别和选择问题\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- mysql 的存储引擎 innodb 和 myisam 有什么区别，应该怎么选择\n\n  |  区别项  |                      Innodb                      |          myisam          |\n  | :------: | :----------------------------------------------: | :----------------------: |\n  |   事务   |                       支持                       |          不支持          |\n  |  锁粒度  |                 行锁，适合高并发                 |    表锁，不适合高并发    |\n  | 是否默认 |                       默认                       |          非默认          |\n  | 支持外键 |                     支持外键                     |          不支持          |\n  | 适合场景 |         读写均衡,写大于读场景，需要事务          | 读多写少场景，不需要事务 |\n  | 全文索引 | 不支持，可以通过插件实现, 更多使用 ElasticSearch |       支持全文索引       |\n\n### 第 5 集 Mysql 数据库索引你知道多少\n\n**简介：考查 mysql 的功能索引掌握情况**\n\n- 考点：mysql 的功能索引\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- mysql 常用的功能索引有哪些\n\n- 分别在什么场景下使用\n\n- 创建语句是怎样的\n\n  | 索引名称 |                                           特点                                            |     | 创建语句                                                              |\n  | :------: | :---------------------------------------------------------------------------------------: | :-: | --------------------------------------------------------------------- |\n  | 普通索引 |                                  最基本的索引,仅加速查询                                  |     | CREATE INDEX idx_name ON table_name(filed_name)                       |\n  | 唯一索引 |             加速查询，列值唯一，允许为空；<br />组合索引则列值的组合必须唯一              |     | CREATE UNIQUE INDEX idx_name ON table_name(filed_name_1,filed_name_2) |\n  | 主键索引 |                  加速查询，列值唯一，<br />一个表只有 1 个，不允许有空值                  |     | ALTER TABLE table_name ADD PRIMARY KEY ( filed_name )                 |\n  | 组合索引 |                                 加速查询，多条件组合查询                                  |     | CREATE INDEX idx_name ON table_name(filed_name_1,filed_name_2);       |\n  | 覆盖索引 | 索引包含所需要的值，不需要“回表”查询，<br />比如查询 两个字段，刚好是 组合索引 的两个字段 |     |                                                                       |\n  | 全文索引 |             对内容进行分词搜索，仅可用于 Myisam， 更多用 ElasticSearch 做搜索             |     | ALTER TABLE table_name ADD FULLTEXT ( filed_name )                    |\n\n### 第 6 集 数据库索引的好处和坏处,你常用的最佳实践\n\n**简介：讲解索引的使用场景和注意事项**\n\n- 考点：考查索引的使用场景和注意事项\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 你们线上数据量每天有多少新增，都是存储在 mysql 库吗，有没做优化\n\n  ```text\n  中型公司或者业务发展好的公司，一天新增几百万数据量\n\n  业务核心数据存储在Mysql里面，针对业务创建合适的索引\n\n  打点数据、日志等存储在ElasticSearch或者MongoDB里面\n  ```\n\n- 你创建索引的时候主要考虑啥，使用索引的优缺点有哪些，使用应该注意些什么\n\n  ```text\n  考虑点：结合实际的业务场景，在哪些字段上创建索引，创建什么类型的索引\n\n  索引好处：\n    快速定位到表的位置，减少服务器扫描的数据\n    有些索引存储了实际的值，特定情况下只要使用索引就能完成查询\n\n  索引缺点：\n    索引会浪费磁盘空间，不要创建非必要的索引\n    插入、更新、删除需要维护索引，带来额外的开销\n    索引过多，修改表的时候重构索引性能差\n\n  索引优化实践\n    前缀索引，特别是TEXT和BLOG类型的字段，只检索前面几个字符，提高检索速度\n    尽量使用数据量少的索引，索引值过长查询速度会受到影响\n    选择合适的索引列顺序\n    内容变动少，且查询频繁，可以建立多几个索引\n    内容变动频繁，谨慎创建索引\n    根据业务创建适合的索引类型，比如某个字段常用来做查询条件，则为这个字段建立索引提高查询速度\n    组合索引选择业务查询最相关的字段\n  ```","filePath":"src/content/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题10.md","digest":"91a34f9651922a35","rendered":{"html":"<section><h2 id=\"第十章-mysql-数据库的面试题你遇过多少\">第十章 MySQL 数据库的面试题你遇过多少<a class=\"anchor\" href=\"#第十章-mysql-数据库的面试题你遇过多少\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"第-1-集-常说的事务-acid-是什么\">第 1 集 常说的事务 ACID 是什么<a class=\"anchor\" href=\"#第-1-集-常说的事务-acid-是什么\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：是否掌握事务的 ACID 原理</strong></p><ul>\n<li>\n<p>考点：是否掌握事务的 ACID 原理</p>\n</li>\n<li>\n<p>难度：【 ** 】</p>\n</li>\n<li>\n<p>你知道 Mysql 事务的四大特性不，简单说下</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:72ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">事务的四大特性ACID</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">原子性Atomicity：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">一个事务必须被事务不可分割的最小工作单元，整个操作要么全部成功，要么全部失败，一般就是通过commit和rollback来控制</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">一致性Consistency:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">数据库总能从一个一致性的状态转换到另一个一致性的状态，比如小滴课堂下单支付成功后，开通视频播放权限，只要有任何一方发生异常就不会成功提交事务</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">隔离性Isolation:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">一个事务相对于另一个事务是隔离的，一个事务所做的修改是在最终提交以前，对其他事务是不可见的</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">持久性Durability:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">一旦事务提交，则其所做的修改就会永久保存到数据库中。此时即使系统崩溃，修改的数据也不会丢失</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-2-集-脏读-不可重复读-幻读你知道多少\">第 2 集 脏读-不可重复读-幻读你知道多少<a class=\"anchor\" href=\"#第-2-集-脏读-不可重复读-幻读你知道多少\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：考查数据库隔离级别导致的问题</strong></p><ul>\n<li>\n<p>考点：是否掌握数据库常见隔离级别和对应导致的问题</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>能否简单解释下脏读、不可重复读、幻读的意思</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:71ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">脏读: 事务中的修改即使没有提交，其他事务也能看见，事务可以读到未提交的数据称为脏读</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">不可重复读: 同个事务前后多次读取，不能读到相同的数据内容，中间另一个事务也操作了该同一数据</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">幻读：当某个事务在读取某个范围内的记录时，另外一个事务又在该范围内插入了新的记录，当之前的事务再次读取该范围的记录时，发现两次不一样，产生幻读</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">幻读和不可重复读的区别是：前者是一个范围，后者是本身，从总的结果来看, 两者都表现为两次读取的结果不一致</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>常见的隔离级别由低到高有哪几种，mysql 默认是哪种</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:93ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">事务的隔离级别越高，事务越安全，但是并发能力越差。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">Read Uncommitted(未提交读，读取未提交内容)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">事务中的修改即使没有提交，其他事务也能看见，事务可以读到为提交的数据称为脏读</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">也存在不可重复读、幻读问题</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">例子：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">小滴课堂运营小姐姐配置了一个课程活动，原价500元的课程，配置成50元，但是事务没提交。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">你刚好看到这个课程那么便宜准备购买，但是Anna小姐姐马上回滚了事务，重新配置并提交了事务，你准备下单的时候发现价格变回了500元</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">Read Committed(提交读，读取提交内容)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">一个事务开始后只能看见已经提交的事务所做的修改，在事务中执行两次同样的查询可能得到不一样的结果，也叫做不可重复读(前后多次读取，不能读到相同的数据内容)，也存幻读问题</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">例子：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">老王在小滴课堂有1000积分，准备去兑换《面试专题课程》，查询数据库确实有1000积分</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">但是老王的女友同时也在别的地方登录，把1000积分兑换了《SpringCloud微服务专题课程》，且在老王之前提交事务；当系统帮老王兑换《面试专题课程》是发现积分预计没了，兑换失败。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">老王事务A事先读取了数据，他女友事务B紧接了更新了数据且提交了事务，事务A再次读取该数据时，数据已经发生了改变</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">Repeatable Read(可重复读,mysql默认的事务隔离级别)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">解决脏读、不可重复读的问题，存在幻读的问题，使用 MMVC机制 实现可重复读</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">例子</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">老王在小滴课堂有1000积分，准备去兑换《面试专题课程》，查询数据库确实有1000积分</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">老王的女友同时也在别的地方登录先兑换了这个《面试专题课程》，老王的事务提交的时候发现存在了，之前读取的没用了，像是幻觉</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">幻读问题：MySQL的InnoDB引擎通过MVCC自动帮我们解决,即多版本并发控制</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">Serializable(可串行化)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">解决脏读、不可重复读、幻读，可保证事务安全，但强制所有事务串行执行，所以并发效率低</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-3-集-mysql-常见的存储引擎你知道不\">第 3 集 Mysql 常见的存储引擎你知道不<a class=\"anchor\" href=\"#第-3-集-mysql-常见的存储引擎你知道不\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：考查 mysql 的存储引擎</strong></p><ul>\n<li>\n<p>考点：是否知道 Mysql 的存储引擎</p>\n</li>\n<li>\n<p>难度：【 ** 】</p>\n</li>\n<li>\n<p>说下你知道 Mysql 常见的存储引擎，新版 Mysql 默认是哪个</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:46ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">常见的有多类，InnoDB、MyISAM、MEMORY、MERGE、ARCHIVE、CSV等</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">一般比较常用的有InnoDB、MyISAM</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">MySQL 5.5以上的版本默认是InnoDB，5.5之前默认存储引擎是MyISAM</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-4-集-存储引擎-innodbmyisam-异同点和选择\">第 4 集 存储引擎 InnoDB、MyISAM 异同点和选择<a class=\"anchor\" href=\"#第-4-集-存储引擎-innodbmyisam-异同点和选择\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：考查 mysql 的存储引擎 InnoDB&#x26;MyISAM 的异同和选择</strong></p><ul>\n<li>\n<p>考点：是否了解 Mysql 的存储引擎 InnoDB&#x26;MyISAM 区别和选择问题</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>mysql 的存储引擎 innodb 和 myisam 有什么区别，应该怎么选择</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">区别项</th><th align=\"center\">Innodb</th><th align=\"center\">myisam</th></tr></thead><tbody><tr><td align=\"center\">事务</td><td align=\"center\">支持</td><td align=\"center\">不支持</td></tr><tr><td align=\"center\">锁粒度</td><td align=\"center\">行锁，适合高并发</td><td align=\"center\">表锁，不适合高并发</td></tr><tr><td align=\"center\">是否默认</td><td align=\"center\">默认</td><td align=\"center\">非默认</td></tr><tr><td align=\"center\">支持外键</td><td align=\"center\">支持外键</td><td align=\"center\">不支持</td></tr><tr><td align=\"center\">适合场景</td><td align=\"center\">读写均衡,写大于读场景，需要事务</td><td align=\"center\">读多写少场景，不需要事务</td></tr><tr><td align=\"center\">全文索引</td><td align=\"center\">不支持，可以通过插件实现, 更多使用 ElasticSearch</td><td align=\"center\">支持全文索引</td></tr></tbody></table>\n</li>\n</ul></section><section><h3 id=\"第-5-集-mysql-数据库索引你知道多少\">第 5 集 Mysql 数据库索引你知道多少<a class=\"anchor\" href=\"#第-5-集-mysql-数据库索引你知道多少\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：考查 mysql 的功能索引掌握情况</strong></p><ul>\n<li>\n<p>考点：mysql 的功能索引</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>mysql 常用的功能索引有哪些</p>\n</li>\n<li>\n<p>分别在什么场景下使用</p>\n</li>\n<li>\n<p>创建语句是怎样的</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">索引名称</th><th align=\"center\">特点</th><th align=\"center\"></th><th>创建语句</th></tr></thead><tbody><tr><td align=\"center\">普通索引</td><td align=\"center\">最基本的索引,仅加速查询</td><td align=\"center\"></td><td>CREATE INDEX idx_name ON table_name(filed_name)</td></tr><tr><td align=\"center\">唯一索引</td><td align=\"center\">加速查询，列值唯一，允许为空；<br>组合索引则列值的组合必须唯一</td><td align=\"center\"></td><td>CREATE UNIQUE INDEX idx_name ON table_name(filed_name_1,filed_name_2)</td></tr><tr><td align=\"center\">主键索引</td><td align=\"center\">加速查询，列值唯一，<br>一个表只有 1 个，不允许有空值</td><td align=\"center\"></td><td>ALTER TABLE table_name ADD PRIMARY KEY ( filed_name )</td></tr><tr><td align=\"center\">组合索引</td><td align=\"center\">加速查询，多条件组合查询</td><td align=\"center\"></td><td>CREATE INDEX idx_name ON table_name(filed_name_1,filed_name_2);</td></tr><tr><td align=\"center\">覆盖索引</td><td align=\"center\">索引包含所需要的值，不需要“回表”查询，<br>比如查询 两个字段，刚好是 组合索引 的两个字段</td><td align=\"center\"></td><td></td></tr><tr><td align=\"center\">全文索引</td><td align=\"center\">对内容进行分词搜索，仅可用于 Myisam， 更多用 ElasticSearch 做搜索</td><td align=\"center\"></td><td>ALTER TABLE table_name ADD FULLTEXT ( filed_name )</td></tr></tbody></table>\n</li>\n</ul></section><section><h3 id=\"第-6-集-数据库索引的好处和坏处你常用的最佳实践\">第 6 集 数据库索引的好处和坏处,你常用的最佳实践<a class=\"anchor\" href=\"#第-6-集-数据库索引的好处和坏处你常用的最佳实践\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：讲解索引的使用场景和注意事项</strong></p><ul>\n<li>\n<p>考点：考查索引的使用场景和注意事项</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>你们线上数据量每天有多少新增，都是存储在 mysql 库吗，有没做优化</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:35ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">中型公司或者业务发展好的公司，一天新增几百万数据量</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">业务核心数据存储在Mysql里面，针对业务创建合适的索引</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">打点数据、日志等存储在ElasticSearch或者MongoDB里面</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>你创建索引的时候主要考虑啥，使用索引的优缺点有哪些，使用应该注意些什么</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:47ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">考虑点：结合实际的业务场景，在哪些字段上创建索引，创建什么类型的索引</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">索引好处：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">快速定位到表的位置，减少服务器扫描的数据</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">有些索引存储了实际的值，特定情况下只要使用索引就能完成查询</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">索引缺点：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">索引会浪费磁盘空间，不要创建非必要的索引</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">插入、更新、删除需要维护索引，带来额外的开销</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">索引过多，修改表的时候重构索引性能差</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">索引优化实践</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">前缀索引，特别是TEXT和BLOG类型的字段，只检索前面几个字符，提高检索速度</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">尽量使用数据量少的索引，索引值过长查询速度会受到影响</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">选择合适的索引列顺序</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">内容变动少，且查询频繁，可以建立多几个索引</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">内容变动频繁，谨慎创建索引</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">根据业务创建适合的索引类型，比如某个字段常用来做查询条件，则为这个字段建立索引提高查询速度</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">组合索引选择业务查询最相关的字段</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section></section>","metadata":{"headings":[{"depth":2,"slug":"第十章-mysql-数据库的面试题你遇过多少","text":"第十章 MySQL 数据库的面试题你遇过多少#"},{"depth":3,"slug":"第-1-集-常说的事务-acid-是什么","text":"第 1 集 常说的事务 ACID 是什么#"},{"depth":3,"slug":"第-2-集-脏读-不可重复读-幻读你知道多少","text":"第 2 集 脏读-不可重复读-幻读你知道多少#"},{"depth":3,"slug":"第-3-集-mysql-常见的存储引擎你知道不","text":"第 3 集 Mysql 常见的存储引擎你知道不#"},{"depth":3,"slug":"第-4-集-存储引擎-innodbmyisam-异同点和选择","text":"第 4 集 存储引擎 InnoDB、MyISAM 异同点和选择#"},{"depth":3,"slug":"第-5-集-mysql-数据库索引你知道多少","text":"第 5 集 Mysql 数据库索引你知道多少#"},{"depth":3,"slug":"第-6-集-数据库索引的好处和坏处你常用的最佳实践","text":"第 6 集 数据库索引的好处和坏处,你常用的最佳实践#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"后端高级工程师面试专题10","published":"2025-11-10T00:00:00.000Z","pinned":false,"description":"第十章 MySQL 数据库的面试题你遇过多少","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":11,"words":2235,"excerpt":"简介：是否掌握事务的 ACID 原理"},"imagePaths":[]}},"collection":"posts"}],"2025-11-09":[{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题09","data":{"title":"后端高级工程师面试专题09","published":"2025-11-09T00:00:00.000Z","draft":false,"description":"第九章 带你走进中间件之消息队列面试环节","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"github代码自动部署到服务器","prevSlug":"环境部署/github代码自动部署到服务器","nextTitle":"后端高级工程师面试专题10","nextSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题10"},"body":"## 第九章 带你走进中间件之消息队列面试环节\n\n### 第 1 集 你知道主流消息队列和怎么选型吗\n\n**简介：对比当下主流的消息队列和选择问题**\n\n- 考点：是否有了解主流消息队列\n\n- 难度：【 \\*\\*\\* 】\n\n- 你用过消息队列，引入队列有啥优缺点，对比其他消息中间产品，选择这款的原因是啥？\n\n  - 优点：解耦系统、异步化、削峰\n\n  - 缺点: 系统可用性降低、复杂度增高、维护成本增高\n\n  - 主流消息队列 Apache ActiveMQ、Kafka、RabbitMQ、RocketMQ\n\n  - ActiveMQ：<http://activemq.apache.org/>\n\n    - Apache 出品，历史悠久，支持多种语言的客户端和协议，支持多种语言 Java, .NET, C++ 等，基于 JMS Provider 的实现\n\n    - 缺点：吞吐量不高，多队列的时候性能下降，存在消息丢失的情况，比较少大规模使用\n\n  - Kafka：<http://kafka.apache.org/>\n\n    - 是由 Apache 软件基金会开发的一个开源流处理平台，由 Scala 和 Java 编写。Kafka 是一种高吞吐量的分布式发布订阅消息系统，它可以处理大规模的网站中的所有动作流数据(网页浏览，搜索和其他用户的行动)，副本集机制，实现数据冗余，保障数据尽量不丢失；支持多个生产者和消费者\n\n    - 缺点：不支持批量和广播消息，运维难度大，文档比较少, 需要掌握 Scala\n\n  - RabbitMQ：<http://www.rabbitmq.com/>\n\n    - 是一个开源的 AMQP 实现，服务器端用 Erlang 语言编写，支持多种客户端，如：Python、Ruby、.NET、Java、JMS、C、用于在分布式系统中存储转发消息，在易用性、扩展性、高可用性等方面表现不错\n\n    - 缺点：使用 Erlang 开发，阅读和修改源码难度大\n\n  - RocketMQ：<http://rocketmq.apache.org/>\n\n    - 阿里开源的一款的消息中间件, 纯 Java 开发，具有高吞吐量、高可用性、适合大规模分布式系统应用的特点, 性能强劲(零拷贝技术)，支持海量堆积, 支持指定次数和时间间隔的失败消息重发,支持 consumer 端 tag 过滤、延迟消息等，在阿里内部进行大规模使用，适合在电商，互联网金融等领域使用\n\n    - 缺点：成熟的资料相对不多，社区处于新生状态但是热度高\n\n### 第 2 集 你知道 oneway/延迟消息的使用场景吗\n\n**简介：是否知道 oneway、延迟消息等类型消息的应用**\n\n- 考点：是否有了解主流消息队列 oneway、延迟消息的使用\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 消息队列的发送方式有哪几种，使用场景分别是怎样的？\n\n    ```text\n    发送方式一般分三种\n\n    SYNC 同步发送\n    应用场景：重要通知邮件、报名短信通知、营销短信系统等\n\n    ASYNC 异步发送\n    应用场景：对RT时间敏感,可以支持更高的并发，回调成功触发相对应的业务，比如注册成功后通知积分系统发放优惠券\n\n    ONEWAY 无需要等待响应\n    应用场景：主要是日志收集，适用于某些耗时非常短，但对可靠性要求并不高的场景, 也就是LogServer, 只负责发送消息，不等待服务器回应且没有回调函数触发，即只发送请求 不等待应答\n    ```\n\n  - 发送方式汇总对比：\n\n    | 发送方式 | 发送 TPS | 发送结果反馈 | 可靠性   |\n    | -------- | -------- | ------------ | -------- |\n    | 同步发送 | 快       | 有           | 不丢失   |\n    | 异步发送 | 快       | 有           | 不丢失   |\n    | 单向发送 | 最快     | 无           | 可能丢失 |\n\n- 有没用过延迟消息，使用场景是怎样的？\n\n    ```text\n    什么是延迟消息：\n        Producer 将消息发送到消息队列 broker服务端，但并不期望这条消息立马投递，而是推迟到在当前时间点之后的某一个时间投递到 Consumer 进行消费\n\n    使用场景一：通过消息触发一些定时任务，比如在某一固定时间点向用户发送提醒消息\n    使用场景二：消息生产和消费有时间窗口要求，比如在天猫电商交易中超时未支付关闭订单的场景，在订单创建时会发送一条 延时消息。这条消息将会在 30 分钟以后投递给消费者，消费者收到此消息后需要判断对应的订单是否已完成支付。 如支付未完成，则关闭订单。如已完成支付则忽略\n    ```\n\n  ![](/images/后端高级工程师面试专题/177f4739-2894-466d-af1a-d2fb5e80cabb.jpg)\n\n### 第 3 集 如何保证消息队列里消息的生成和消费的顺序性\n\n**简介：是否知道如何保证消息队列的消息生成和消费的顺序性**\n\n- 考点：如何保证消息队列的消息生成和消费的顺序性\n\n- 难度：【 \\*\\*\\* 】\n\n- 你用的队列是否支持顺序消息，是怎么实现顺序消息的？\n\n    ```text\n    什么是顺序消息：\n        消息的生产和消费顺序一致\n\n        全局顺序：topic下面全部消息都要有序(少用)，性能要求不高，所有的消息严格按照 FIFO 原则进行消息发布和消费的\t场景，并行度成为消息系统的瓶颈, 吞吐量不够\n        使用场景：在证券处理中，以人民币兑换美元为例子，在价格相同的情况下，先出价者优先处理，则可以通过全局顺序的方式按照 FIFO 的方式进行发布和消费\n\n        局部顺序：只要保证一组消息被顺序消费即可，性能要求高\n        使用场景：电商的订单创建，同一个订单相关的创建订单消息、订单支付消息、订单退款消息、订单物流消息、订单交易成功消息 都会按照先后顺序来发布和消费\n        （阿里巴巴集团内部电商系统均使用局部顺序消息，既保证业务的顺序，同时又能保证业务的高性能）\n\n\n    下面是用RocketMQ举例(用kafka或rabbitmq类似)\n    一个topic下面有多个queue\n\n    顺序发布：对于指定的一个 Topic，客户端将按照一定的先后顺序发送消息\n    举例：订单的顺序流程是：创建、付款、物流、完成，订单号相同的消息会被先后发送到同一个队列中，\n    根据MessageQueueSelector里面自定义策略，根据同个业务id放置到同个queue里面，如订单号取模运算再放到selector中，同一个模的值都会投递到同一条queue\n\n      public MessageQueue select(List<MessageQueue> mqs, Message msg, Object arg) {\n                //如果是订单号是字符串，则进行hash,得到一个hash值\n              Long id = (Long) arg;\n              long index = id % mqs.size();\n              return mqs.get((int)index);\n      }\n\n\n    顺序消费：对于指定的一个 Topic，按照一定的先后顺序接收消息，即先发送的消息一定会先被客户端接收到。\n    举例：消费端要在保证消费同个topic里的同个队列，不应该用MessageListenerConcurrently，\n      应该使用MessageListenerOrderly，自带单线程消费消息，不能再Consumer端再使用多线程去消费，消费端分配到的queue数量是固定的，集群消费会锁住当前正在消费的队列集合的消息，所以会保证顺序消费。\n\n    注意：\n      顺序消息暂不支持广播模式\n      顺序消息不支持异步发送方式，否则将无法严格保证顺序\n      不能再Consumer端再使用多线程去消费\n    ```\n\n  ![](/images/后端高级工程师面试专题/6934e792-9ebe-4bb5-975d-37817fbf0996.jpg)\n\n### 第 4 集 消息队列常见问题之怎么避免重复消费\n\n**简介：考查怎么样可以避免重复消费**\n\n- 考点：是否有真正用过消息队列，是否设计过重复消费\n\n- 难度：【 \\*\\*\\* 】\n\n- 你的业务系统有没做消息的重复消费处理，是怎么做的\n\n  - 幂等性：一个请求，不管重复来多少次，结果是不会改变的。\n\n  - RabbitMQ、RocketMQ、Kafka 等任何队列不保证消息不重复，如果业务需要消息不重复消费，则需要消费端处理业务消息要保持幂等性\n\n    - 方式一：Redis 的 setNX() , 做消息 id 去重 java 版本目前不支持设置过期时间\n\n        ```java\n        //Redis中操作，判断是否已经操作过 TODO\n        boolean flag =  jedis.setNX(key);\n        if(flag){\n                //消费\n        }else{\n                //忽略，重复消费\n        }\n        ```\n\n    - 方式二：redis 的 Incr 原子操作：key 自增，大于 0 返回值大于 0 则说明消费过，(key 可以是消息的 md5 取值, 或者如果消息 id 设计合理直接用 id 做 key)\n\n        ```java\n        int num =  jedis.incr(key);\n        if(num == 1){\n            //消费\n        }else{\n            //忽略，重复消费\n        }\n        ```\n\n    - 方式三：数据库去重表\n\n      - 设计一个去重表，某个字段使用 Message 的 key 做唯一索引，因为存在唯一索引，所以重复消费会失败\n\n          ```sql\n          CREATE TABLE `message_record` (\n          `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n          `key` varchar(128) DEFAULT NULL,\n          `create_time` datetime DEFAULT NULL,\n          PRIMARY KEY (`id`),\n          UNIQUE KEY `key` (`key`)\n          ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n          ```\n\n        ![](/images/后端高级工程师面试专题/9c506de9-5c08-45b0-89a5-f6a9e9511df5.jpg)\n\n### 第 5 集 消息队列常见问题之如何保证消费的可靠性传输？\n\n**简介：如何保证消费的可靠性传输**\n\n- 考点：是否有研究消息队列的底层原理，保证消息的可靠性传输，消息队列的架构\n\n- 难度：【 \\*\\*\\*\\*\\* 】\n\n- 你用了消息队列，你知道这个消息队列如何保证消息的可靠性传输吗\n\n    ```text\n    消息可靠性传输，是非常重要，消息如果丢失，可能带来严重后果，一般从是个角度去分析\n    producer端：\n      不采用oneway发送，使用同步或者异步方式发送，做好重试，但是重试的Message key必须唯一\n      投递的日志需要保存，关键字段，投递时间、投递状态、重试次数、请求体、响应体\n    \n    broker端：\n      多主多从架构，需要多机房\n      同步双写、异步刷盘 (同步刷盘则可靠性更高，但是性能差点，根据业务选择)\n      机器断电重启：异步刷盘，消息丢失；同步刷盘消息不丢失\n      硬件故障：可能存在丢失，看队列架构\n    \n    consumer端\n      消息队列一般都提供的ack机制，发送者为了保证消息肯定消费成功，只有消费者明确表示消费成功，队列才会认为消息消费成功，中途断电、抛出异常等都不会认为成功——即都会重新投递，每次在确保处理完这个消息之后，在代码里调用ack，告诉消息队列消费成功\n    消费端务必做好幂等性处理\n    消息消费务必保留日志，即消息的元数据和消息体，\n    ```\n\n  ![](/images/后端高级工程师面试专题/b5a8756e-2ec7-4ee0-bcab-2a1df57dd645.jpg)\n\n### 第 6 集 消息队列常见问题之消息发生大量堆积应该怎么处理？\n\n**简介：如果消息大量堆积在 broker 里面，应该怎么处理**\n\n- 考点：是否有研究消息队列不可用后的应急方案，是否有架构思维\n\n- 难度：【 \\*\\*\\*\\*\\* 】\n\n- 线上故障了，怎么处理\n\n  - 消息堆积了 10 小时，有几千万条消息待处理，现在怎么办?\n  - 修复 consumer, 然后慢慢消费？也需要几小时才可以消费完成，新的消息怎么办？\n\n    ```text\n    核心思想：紧急临时扩容，更快的速度去消费数据\n\n    - 修复Consumer不消费问题，使其恢复正常消费，根据业务需要看是否要暂停\n\n    - 临时topic队列扩容，并提高消费者能力，但是如果增加Consumer数量，但是堆积的topic里面的message queue数量固定，过多的consumer不能分配到message queue\n\n    - 编写临时处理分发程序，从旧topic快速读取到临时新topic中，新topic的queue数量扩容多倍，然后再启动更多consumer进行在临时新的topic里消费\n\n    - 直到堆积的消息处理完成，再还原到正常的机器数量\n    ```\n\n  ![](/images/后端高级工程师面试专题/fd4ac0cf-0d0c-486f-9135-6a3cffe26fc1.jpg)\n\n  ![](/images/后端高级工程师面试专题/99a5e350-a083-4359-a90a-e1b0bdec3437.jpg)\n\n  ![](/images/后端高级工程师面试专题/59f1b70f-dc2a-4441-914f-e34f30be7a04.jpg)","filePath":"src/content/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题09.md","digest":"1ee7f141527ec0cd","rendered":{"html":"<section><h2 id=\"第九章-带你走进中间件之消息队列面试环节\">第九章 带你走进中间件之消息队列面试环节<a class=\"anchor\" href=\"#第九章-带你走进中间件之消息队列面试环节\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"第-1-集-你知道主流消息队列和怎么选型吗\">第 1 集 你知道主流消息队列和怎么选型吗<a class=\"anchor\" href=\"#第-1-集-你知道主流消息队列和怎么选型吗\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：对比当下主流的消息队列和选择问题</strong></p><ul>\n<li>\n<p>考点：是否有了解主流消息队列</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>你用过消息队列，引入队列有啥优缺点，对比其他消息中间产品，选择这款的原因是啥？</p>\n<ul>\n<li>\n<p>优点：解耦系统、异步化、削峰</p>\n</li>\n<li>\n<p>缺点: 系统可用性降低、复杂度增高、维护成本增高</p>\n</li>\n<li>\n<p>主流消息队列 Apache ActiveMQ、Kafka、RabbitMQ、RocketMQ</p>\n</li>\n<li>\n<p>ActiveMQ：<a href=\"http://activemq.apache.org/\">http://activemq.apache.org/</a></p>\n<ul>\n<li>\n<p>Apache 出品，历史悠久，支持多种语言的客户端和协议，支持多种语言 Java, .NET, C++ 等，基于 JMS Provider 的实现</p>\n</li>\n<li>\n<p>缺点：吞吐量不高，多队列的时候性能下降，存在消息丢失的情况，比较少大规模使用</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Kafka：<a href=\"http://kafka.apache.org/\">http://kafka.apache.org/</a></p>\n<ul>\n<li>\n<p>是由 Apache 软件基金会开发的一个开源流处理平台，由 Scala 和 Java 编写。Kafka 是一种高吞吐量的分布式发布订阅消息系统，它可以处理大规模的网站中的所有动作流数据(网页浏览，搜索和其他用户的行动)，副本集机制，实现数据冗余，保障数据尽量不丢失；支持多个生产者和消费者</p>\n</li>\n<li>\n<p>缺点：不支持批量和广播消息，运维难度大，文档比较少, 需要掌握 Scala</p>\n</li>\n</ul>\n</li>\n<li>\n<p>RabbitMQ：<a href=\"http://www.rabbitmq.com/\">http://www.rabbitmq.com/</a></p>\n<ul>\n<li>\n<p>是一个开源的 AMQP 实现，服务器端用 Erlang 语言编写，支持多种客户端，如：Python、Ruby、.NET、Java、JMS、C、用于在分布式系统中存储转发消息，在易用性、扩展性、高可用性等方面表现不错</p>\n</li>\n<li>\n<p>缺点：使用 Erlang 开发，阅读和修改源码难度大</p>\n</li>\n</ul>\n</li>\n<li>\n<p>RocketMQ：<a href=\"http://rocketmq.apache.org/\">http://rocketmq.apache.org/</a></p>\n<ul>\n<li>\n<p>阿里开源的一款的消息中间件, 纯 Java 开发，具有高吞吐量、高可用性、适合大规模分布式系统应用的特点, 性能强劲(零拷贝技术)，支持海量堆积, 支持指定次数和时间间隔的失败消息重发,支持 consumer 端 tag 过滤、延迟消息等，在阿里内部进行大规模使用，适合在电商，互联网金融等领域使用</p>\n</li>\n<li>\n<p>缺点：成熟的资料相对不多，社区处于新生状态但是热度高</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-2-集-你知道-oneway延迟消息的使用场景吗\">第 2 集 你知道 oneway/延迟消息的使用场景吗<a class=\"anchor\" href=\"#第-2-集-你知道-oneway延迟消息的使用场景吗\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：是否知道 oneway、延迟消息等类型消息的应用</strong></p><ul>\n<li>\n<p>考点：是否有了解主流消息队列 oneway、延迟消息的使用</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>消息队列的发送方式有哪几种，使用场景分别是怎样的？</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:91ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">发送方式一般分三种</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">SYNC 同步发送</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">应用场景：重要通知邮件、报名短信通知、营销短信系统等</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ASYNC 异步发送</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">应用场景：对RT时间敏感,可以支持更高的并发，回调成功触发相对应的业务，比如注册成功后通知积分系统发放优惠券</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ONEWAY 无需要等待响应</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">应用场景：主要是日志收集，适用于某些耗时非常短，但对可靠性要求并不高的场景, 也就是LogServer, 只负责发送消息，不等待服务器回应且没有回调函数触发，即只发送请求 不等待应答</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<ul>\n<li>\n<p>发送方式汇总对比：</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>发送方式</th><th>发送 TPS</th><th>发送结果反馈</th><th>可靠性</th></tr></thead><tbody><tr><td>同步发送</td><td>快</td><td>有</td><td>不丢失</td></tr><tr><td>异步发送</td><td>快</td><td>有</td><td>不丢失</td></tr><tr><td>单向发送</td><td>最快</td><td>无</td><td>可能丢失</td></tr></tbody></table>\n</li>\n</ul>\n</li>\n<li>\n<p>有没用过延迟消息，使用场景是怎样的？</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:132ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">什么是延迟消息：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">Producer 将消息发送到消息队列 broker服务端，但并不期望这条消息立马投递，而是推迟到在当前时间点之后的某一个时间投递到 Consumer 进行消费</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">使用场景一：通过消息触发一些定时任务，比如在某一固定时间点向用户发送提醒消息</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">使用场景二：消息生产和消费有时间窗口要求，比如在天猫电商交易中超时未支付关闭订单的场景，在订单创建时会发送一条 延时消息。这条消息将会在 30 分钟以后投递给消费者，消费者收到此消息后需要判断对应的订单是否已完成支付。 如支付未完成，则关闭订单。如已完成支付则忽略</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/177f4739-2894-466d-af1a-d2fb5e80cabb.jpg\" alt=\"\"></p>\n</li>\n</ul></section><section><h3 id=\"第-3-集-如何保证消息队列里消息的生成和消费的顺序性\">第 3 集 如何保证消息队列里消息的生成和消费的顺序性<a class=\"anchor\" href=\"#第-3-集-如何保证消息队列里消息的生成和消费的顺序性\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：是否知道如何保证消息队列的消息生成和消费的顺序性</strong></p><ul>\n<li>\n<p>考点：如何保证消息队列的消息生成和消费的顺序性</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>你用的队列是否支持顺序消息，是怎么实现顺序消息的？</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:112ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">什么是顺序消息：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">消息的生产和消费顺序一致</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">全局顺序：topic下面全部消息都要有序(少用)，性能要求不高，所有的消息严格按照 FIFO 原则进行消息发布和消费的  场景，并行度成为消息系统的瓶颈, 吞吐量不够</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">使用场景：在证券处理中，以人民币兑换美元为例子，在价格相同的情况下，先出价者优先处理，则可以通过全局顺序的方式按照 FIFO 的方式进行发布和消费</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">局部顺序：只要保证一组消息被顺序消费即可，性能要求高</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">使用场景：电商的订单创建，同一个订单相关的创建订单消息、订单支付消息、订单退款消息、订单物流消息、订单交易成功消息 都会按照先后顺序来发布和消费</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">（阿里巴巴集团内部电商系统均使用局部顺序消息，既保证业务的顺序，同时又能保证业务的高性能）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">下面是用RocketMQ举例(用kafka或rabbitmq类似)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">一个topic下面有多个queue</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">顺序发布：对于指定的一个 Topic，客户端将按照一定的先后顺序发送消息</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">举例：订单的顺序流程是：创建、付款、物流、完成，订单号相同的消息会被先后发送到同一个队列中，</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">根据MessageQueueSelector里面自定义策略，根据同个业务id放置到同个queue里面，如订单号取模运算再放到selector中，同一个模的值都会投递到同一条queue</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">public MessageQueue select(List&#x3C;MessageQueue> mqs, Message msg, Object arg) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">            </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">//如果是订单号是字符串，则进行hash,得到一个hash值</span></div></div><div class=\"ec-line\" style=\"--ecIndent:10ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">          </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">Long id = (Long) arg;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:10ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">          </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">long index = id % mqs.size();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:10ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">          </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">return mqs.get((int)index);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">顺序消费：对于指定的一个 Topic，按照一定的先后顺序接收消息，即先发送的消息一定会先被客户端接收到。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">举例：消费端要在保证消费同个topic里的同个队列，不应该用MessageListenerConcurrently，</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">应该使用MessageListenerOrderly，自带单线程消费消息，不能再Consumer端再使用多线程去消费，消费端分配到的queue数量是固定的，集群消费会锁住当前正在消费的队列集合的消息，所以会保证顺序消费。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">注意：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">顺序消息暂不支持广播模式</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">顺序消息不支持异步发送方式，否则将无法严格保证顺序</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">不能再Consumer端再使用多线程去消费</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/6934e792-9ebe-4bb5-975d-37817fbf0996.jpg\" alt=\"\"></p>\n</li>\n</ul></section><section><h3 id=\"第-4-集-消息队列常见问题之怎么避免重复消费\">第 4 集 消息队列常见问题之怎么避免重复消费<a class=\"anchor\" href=\"#第-4-集-消息队列常见问题之怎么避免重复消费\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：考查怎么样可以避免重复消费</strong></p><ul>\n<li>\n<p>考点：是否有真正用过消息队列，是否设计过重复消费</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>你的业务系统有没做消息的重复消费处理，是怎么做的</p>\n<ul>\n<li>\n<p>幂等性：一个请求，不管重复来多少次，结果是不会改变的。</p>\n</li>\n<li>\n<p>RabbitMQ、RocketMQ、Kafka 等任何队列不保证消息不重复，如果业务需要消息不重复消费，则需要消费端处理业务消息要保持幂等性</p>\n<ul>\n<li>\n<p>方式一：Redis 的 setNX() , 做消息 id 去重 java 版本目前不支持设置过期时间</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:33ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">//Redis中操作，判断是否已经操作过 TODO</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">boolean</span><span style=\"--0:#24292E;--1:#E1E4E8\"> flag </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">  jedis.</span><span style=\"--0:#6F42C1;--1:#B392F0\">setNX</span><span style=\"--0:#24292E;--1:#E1E4E8\">(key);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\">(flag){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//消费</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//忽略，重复消费</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>方式二：redis 的 Incr 原子操作：key 自增，大于 0 返回值大于 0 则说明消费过，(key 可以是消息的 md5 取值, 或者如果消息 id 设计合理直接用 id 做 key)</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> num </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">  jedis.</span><span style=\"--0:#6F42C1;--1:#B392F0\">incr</span><span style=\"--0:#24292E;--1:#E1E4E8\">(key);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\">(num </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">//消费</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">//忽略，重复消费</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>方式三：数据库去重表</p>\n<ul>\n<li>\n<p>设计一个去重表，某个字段使用 Message 的 key 做唯一索引，因为存在唯一索引，所以重复消费会失败</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"sql\" class=\"wrap\" style=\"--ecMaxLine:46ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">CREATE</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">TABLE</span><span style=\"--0:#24292E;--1:#E1E4E8\"> `</span><span style=\"--0:#6F42C1;--1:#B392F0\">message_record</span><span style=\"--0:#24292E;--1:#E1E4E8\">` (</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">`id`</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">11</span><span style=\"--0:#24292E;--1:#E1E4E8\">) unsigned </span><span style=\"--0:#BF3441;--1:#F97583\">NOT NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\"> AUTO_INCREMENT,</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">`key`</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">varchar</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">128</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#BF3441;--1:#F97583\">DEFAULT</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">`create_time`</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">datetime</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">DEFAULT</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">PRIMARY KEY</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#032F62;--1:#9ECBFF\">`id`</span><span style=\"--0:#24292E;--1:#E1E4E8\">),</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">UNIQUE</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">KEY</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">`key`</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#032F62;--1:#9ECBFF\">`key`</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">) ENGINE</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">InnoDB </span><span style=\"--0:#BF3441;--1:#F97583\">DEFAULT</span><span style=\"--0:#24292E;--1:#E1E4E8\"> CHARSET</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">utf8mb4;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/9c506de9-5c08-45b0-89a5-f6a9e9511df5.jpg\" alt=\"\"></p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-5-集-消息队列常见问题之如何保证消费的可靠性传输\">第 5 集 消息队列常见问题之如何保证消费的可靠性传输？<a class=\"anchor\" href=\"#第-5-集-消息队列常见问题之如何保证消费的可靠性传输\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：如何保证消费的可靠性传输</strong></p><ul>\n<li>\n<p>考点：是否有研究消息队列的底层原理，保证消息的可靠性传输，消息队列的架构</p>\n</li>\n<li>\n<p>难度：【 ***** 】</p>\n</li>\n<li>\n<p>你用了消息队列，你知道这个消息队列如何保证消息的可靠性传输吗</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:123ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">消息可靠性传输，是非常重要，消息如果丢失，可能带来严重后果，一般从是个角度去分析</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">producer端：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">不采用oneway发送，使用同步或者异步方式发送，做好重试，但是重试的Message key必须唯一</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">投递的日志需要保存，关键字段，投递时间、投递状态、重试次数、请求体、响应体</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">broker端：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">多主多从架构，需要多机房</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">同步双写、异步刷盘 (同步刷盘则可靠性更高，但是性能差点，根据业务选择)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">机器断电重启：异步刷盘，消息丢失；同步刷盘消息不丢失</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">硬件故障：可能存在丢失，看队列架构</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">consumer端</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">消息队列一般都提供的ack机制，发送者为了保证消息肯定消费成功，只有消费者明确表示消费成功，队列才会认为消息消费成功，中途断电、抛出异常等都不会认为成功——即都会重新投递，每次在确保处理完这个消息之后，在代码里调用ack，告诉消息队列消费成功</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">消费端务必做好幂等性处理</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">消息消费务必保留日志，即消息的元数据和消息体，</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/b5a8756e-2ec7-4ee0-bcab-2a1df57dd645.jpg\" alt=\"\"></p>\n</li>\n</ul></section><section><h3 id=\"第-6-集-消息队列常见问题之消息发生大量堆积应该怎么处理\">第 6 集 消息队列常见问题之消息发生大量堆积应该怎么处理？<a class=\"anchor\" href=\"#第-6-集-消息队列常见问题之消息发生大量堆积应该怎么处理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：如果消息大量堆积在 broker 里面，应该怎么处理</strong></p><ul>\n<li>\n<p>考点：是否有研究消息队列不可用后的应急方案，是否有架构思维</p>\n</li>\n<li>\n<p>难度：【 ***** 】</p>\n</li>\n<li>\n<p>线上故障了，怎么处理</p>\n<ul>\n<li>\n<p>消息堆积了 10 小时，有几千万条消息待处理，现在怎么办?</p>\n</li>\n<li>\n<p>修复 consumer, 然后慢慢消费？也需要几小时才可以消费完成，新的消息怎么办？</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:100ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">核心思想：紧急临时扩容，更快的速度去消费数据</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">- 修复Consumer不消费问题，使其恢复正常消费，根据业务需要看是否要暂停</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">- 临时topic队列扩容，并提高消费者能力，但是如果增加Consumer数量，但是堆积的topic里面的message queue数量固定，过多的consumer不能分配到message queue</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">- 编写临时处理分发程序，从旧topic快速读取到临时新topic中，新topic的queue数量扩容多倍，然后再启动更多consumer进行在临时新的topic里消费</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">- 直到堆积的消息处理完成，再还原到正常的机器数量</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/fd4ac0cf-0d0c-486f-9135-6a3cffe26fc1.jpg\" alt=\"\"></p>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/99a5e350-a083-4359-a90a-e1b0bdec3437.jpg\" alt=\"\"></p>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/59f1b70f-dc2a-4441-914f-e34f30be7a04.jpg\" alt=\"\"></p>\n</li>\n</ul></section></section>","metadata":{"headings":[{"depth":2,"slug":"第九章-带你走进中间件之消息队列面试环节","text":"第九章 带你走进中间件之消息队列面试环节#"},{"depth":3,"slug":"第-1-集-你知道主流消息队列和怎么选型吗","text":"第 1 集 你知道主流消息队列和怎么选型吗#"},{"depth":3,"slug":"第-2-集-你知道-oneway延迟消息的使用场景吗","text":"第 2 集 你知道 oneway/延迟消息的使用场景吗#"},{"depth":3,"slug":"第-3-集-如何保证消息队列里消息的生成和消费的顺序性","text":"第 3 集 如何保证消息队列里消息的生成和消费的顺序性#"},{"depth":3,"slug":"第-4-集-消息队列常见问题之怎么避免重复消费","text":"第 4 集 消息队列常见问题之怎么避免重复消费#"},{"depth":3,"slug":"第-5-集-消息队列常见问题之如何保证消费的可靠性传输","text":"第 5 集 消息队列常见问题之如何保证消费的可靠性传输？#"},{"depth":3,"slug":"第-6-集-消息队列常见问题之消息发生大量堆积应该怎么处理","text":"第 6 集 消息队列常见问题之消息发生大量堆积应该怎么处理？#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"后端高级工程师面试专题09","published":"2025-11-09T00:00:00.000Z","pinned":false,"description":"第九章 带你走进中间件之消息队列面试环节","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":15,"words":2954,"excerpt":"简介：对比当下主流的消息队列和选择问题"},"imagePaths":[]}},"collection":"posts"}],"2025-11-08":[{"id":"环境部署/github代码自动部署到服务器","data":{"title":"github代码自动部署到服务器","published":"2025-11-08T00:00:00.000Z","draft":false,"description":"通过github webhook自动部署静态网站","image":"","tags":["github","webhook","网站部署"],"category":"环境部署","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"后端高级工程师面试专题08","prevSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题08","nextTitle":"后端高级工程师面试专题09","nextSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题09"},"body":"## deploy.sh\n\n```shell\n#!/bin/bash\n\nWEBROOT=\"/usr/local/nginx/html/project\"\nBACKUP_DIR=\"/usr/local/nginx/html/project-backup-$(date +%Y%m%d-%H%M%S)\"\nREPO_DIR=\"/root/github-webhook/repo-$(date +%s)\"\n\necho \"Starting deployment...\"\n\n# 拉取最新代码\ngit clone --depth 1 git@github.com:SDF001/sdf001.github.io.git $REPO_DIR\n\nif [ $? -ne 0 ]; then\n    echo \"Git clone failed\"\n    exit 1\nfi\n\n# 检查目标目录是否存在\nif [ ! -d \"$WEBROOT\" ]; then\n    mkdir -p \"$WEBROOT\"\n    echo \"Created web root directory: $WEBROOT\"\nfi\n\n# 备份当前版本\nif [ -d \"$WEBROOT\" ] && [ \"$(ls -A $WEBROOT)\" ]; then\n    echo \"Creating backup...\"\n    cp -r $WEBROOT $BACKUP_DIR\nelse\n    echo \"No existing content to backup\"\nfi\n\n# 清空目标目录并复制新文件（解决目录非空问题）\necho \"Removing old files from target directory...\"\nrm -rf $WEBROOT/*\n\n# 复制新文件到目标目录\necho \"Copying new files...\"\ncp -r $REPO_DIR/* $WEBROOT/\n\n# 清理克隆的仓库目录\nrm -rf $REPO_DIR\n\necho \"Deployment completed successfully\"\n\n# 清理旧备份（保留最近3个）\nls -dt /usr/local/nginx/html/project-backup-* 2>/dev/null | tail -n +4 | xargs rm -rf 2>/dev/null || true\n```\n\n## webhook.py\n\n```python\nfrom flask import Flask, request, jsonify\nimport subprocess\nimport os\nimport logging\n\n# 配置日志\nlogging.basicConfig(\n    level=logging.INFO,\n    format='%(asctime)s - %(levelname)s - %(message)s',\n    handlers=[\n        logging.FileHandler('/root/github-webhook/webhook.log'),\n        logging.StreamHandler()  # 同时输出到控制台\n    ]\n)\n\nlogger = logging.getLogger(__name__)\n\napp = Flask(__name__)\n\n# 设置 Flask 日志级别\napp.logger.setLevel(logging.INFO)\n\n@app.route('/webhook', methods=['POST'])\ndef webhook():\n    try:\n        payload = request.get_data()\n        event_type = request.headers.get('X-GitHub-Event')\n        user_agent = request.headers.get('User-Agent', '')\n        \n        logger.info(f\"Received {event_type} event from {user_agent}\")\n        \n        if event_type == 'push':\n            logger.info(\"Push event detected, starting deployment...\")\n            # 异步执行部署\n            import threading\n            thread = threading.Thread(target=execute_deploy)\n            thread.daemon = True\n            thread.start()\n            \n            return jsonify({'status': 'received'}), 200\n        \n        logger.info(f\"Event type {event_type} ignored\")\n        return jsonify({'status': 'ignored'}), 200\n        \n    except Exception as e:\n        logger.error(f\"Error processing webhook: {str(e)}\")\n        import traceback\n        traceback.print_exc()\n        return jsonify({'error': 'Internal server error'}), 500\n\ndef execute_deploy():\n    \"\"\"在后台执行部署\"\"\"\n    deploy_script = '/root/github-webhook/deploy.sh'\n    \n    try:\n        logger.info(f\"Starting deployment using script: {deploy_script}\")\n        \n        # 检查脚本是否存在\n        if not os.path.exists(deploy_script):\n            logger.error(f\"Error: Deploy script not found at {deploy_script}\")\n            return\n        \n        # 检查脚本是否有执行权限\n        if not os.access(deploy_script, os.X_OK):\n            logger.info(f\"Making script executable: {deploy_script}\")\n            os.chmod(deploy_script, 0o755)\n        \n        # 兼容旧版本 Python 的写法\n        process = subprocess.Popen(\n            ['bash', deploy_script],\n            stdout=subprocess.PIPE,\n            stderr=subprocess.PIPE,\n            universal_newlines=True\n        )\n        stdout, stderr = process.communicate(timeout=60)\n        \n        if process.returncode == 0:\n            logger.info(\"Deployment completed successfully\")\n            logger.info(f\"Output: {stdout}\")\n        else:\n            logger.error(f\"Deployment failed with return code {process.returncode}\")\n            logger.error(f\"Error output: {stderr}\")\n    except subprocess.TimeoutExpired:\n        logger.error(\"Deployment script timed out\")\n    except Exception as e:\n        logger.error(f\"Deployment error: {str(e)}\")\n        import traceback\n        traceback.print_exc()\n\nif __name__ == '__main__':\n    logger.info(\"Starting webhook server without signature verification\")\n    logger.info(f\"Deploy script path: /root/github-webhook/deploy.sh\")\n    app.run(host='0.0.0.0', port=12345, debug=False)\n```\n\n:::note\n需要安装 flask, `pip install flask`\n\nwebhook 不设置 SECRET\n:::\n\n## start-webhook.sh\n\n```shell\n#!/bin/bash\n\n# 简单的启动脚本\nWEBHOOK_PY=\"webhook.py\"\nLOG_FILE=\"webhook.log\"\n\necho \"Starting webhook service...\"\n\n# 检查是否有正在运行的实例\nif pgrep -f \"python3 $WEBHOOK_PY\" > /dev/null; then\n    echo \"Webhook service is already running\"\n    exit 1\nfi\n\n# 启动服务\nnohup python3 \"$WEBHOOK_PY\" > \"$LOG_FILE\" 2>&1 &\n\nif [ $? -eq 0 ]; then\n    echo \"Webhook service started successfully\"\n    echo \"PID: $!\"\n    echo \"Log file: $LOG_FILE\"\nelse\n    echo \"Failed to start webhook service\"\n    exit 1\nfi\n```\n\n## 设置 nginx 反向代理\n\n```text\n        location /webhook {\n            proxy_pass http://localhost:12345;\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n        }\n```\n\n## github 设置 webhook\n\n- 设置 Payload URL 为 https://huanglei.work/webhook\n- 设置 Content type 为 application/json","filePath":"src/content/posts/环境部署/github代码自动部署到服务器.md","digest":"ba55499f92663279","rendered":{"html":"<section><h2 id=\"deploysh\">deploy.sh<a class=\"anchor\" href=\"#deploysh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:105ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#!/bin/bash</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">WEBROOT</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"/usr/local/nginx/html/project\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">BACKUP_DIR</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"/usr/local/nginx/html/project-backup-$(</span><span style=\"--0:#6F42C1;--1:#B392F0\">date</span><span style=\"--0:#032F62;--1:#9ECBFF\"> +%Y%m%d-%H%M%S)\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">REPO_DIR</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"/root/github-webhook/repo-$(</span><span style=\"--0:#6F42C1;--1:#B392F0\">date</span><span style=\"--0:#032F62;--1:#9ECBFF\"> +%s)\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">echo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Starting deployment...\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 拉取最新代码</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">clone</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--depth</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">git@github.com:SDF001/sdf001.github.io.git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> $REPO_DIR</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> [ </span><span style=\"--0:#005CC5;--1:#79B8FF\">$?</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-ne</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ]; </span><span style=\"--0:#BF3441;--1:#F97583\">then</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">echo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Git clone failed\"</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">exit</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">fi</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 检查目标目录是否存在</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> [ </span><span style=\"--0:#BF3441;--1:#F97583\">!</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-d</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">$WEBROOT</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ]; </span><span style=\"--0:#BF3441;--1:#F97583\">then</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">mkdir</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-p</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">$WEBROOT</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">echo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Created web root directory: </span><span style=\"--0:#24292E;--1:#E1E4E8\">$WEBROOT</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">fi</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 备份当前版本</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> [ </span><span style=\"--0:#BF3441;--1:#F97583\">-d</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">$WEBROOT</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ] &#x26;&#x26; [ </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"$(</span><span style=\"--0:#6F42C1;--1:#B392F0\">ls</span><span style=\"--0:#032F62;--1:#9ECBFF\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-A</span><span style=\"--0:#032F62;--1:#9ECBFF\"> </span><span style=\"--0:#24292E;--1:#E1E4E8\">$WEBROOT</span><span style=\"--0:#032F62;--1:#9ECBFF\">)\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ]; </span><span style=\"--0:#BF3441;--1:#F97583\">then</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">echo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Creating backup...\"</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">cp</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-r</span><span style=\"--0:#24292E;--1:#E1E4E8\"> $WEBROOT $BACKUP_DIR</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">echo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"No existing content to backup\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">fi</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 清空目标目录并复制新文件（解决目录非空问题）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">echo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Removing old files from target directory...\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">rm</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-rf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> $WEBROOT</span><span style=\"--0:#032F62;--1:#9ECBFF\">/</span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 复制新文件到目标目录</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">echo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Copying new files...\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">cp</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-r</span><span style=\"--0:#24292E;--1:#E1E4E8\"> $REPO_DIR</span><span style=\"--0:#032F62;--1:#9ECBFF\">/</span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> $WEBROOT</span><span style=\"--0:#032F62;--1:#9ECBFF\">/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 清理克隆的仓库目录</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">rm</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-rf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> $REPO_DIR</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">echo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Deployment completed successfully\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 清理旧备份（保留最近3个）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ls</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-dt</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/usr/local/nginx/html/project-backup-</span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">2></span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/null</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">|</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">tail</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+4</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">|</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">xargs</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">rm</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-rf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">2></span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/null</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">||</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">true</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"webhookpy\">webhook.py<a class=\"anchor\" href=\"#webhookpy\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"python\" class=\"wrap\" style=\"--ecMaxLine:84ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> flask </span><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Flask, request, jsonify</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> subprocess</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> os</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> logging</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 配置日志</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">logging.basicConfig(</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#AE4B07;--1:#FFAB70\">level</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">logging.</span><span style=\"--0:#005CC5;--1:#79B8FF\">INFO</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#AE4B07;--1:#FFAB70\">format</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">'</span><span style=\"--0:#005CC5;--1:#79B8FF\">%(asctime)s</span><span style=\"--0:#032F62;--1:#9ECBFF\"> - </span><span style=\"--0:#005CC5;--1:#79B8FF\">%(levelname)s</span><span style=\"--0:#032F62;--1:#9ECBFF\"> - </span><span style=\"--0:#005CC5;--1:#79B8FF\">%(message)s</span><span style=\"--0:#032F62;--1:#9ECBFF\">'</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#AE4B07;--1:#FFAB70\">handlers</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">logging.FileHandler(</span><span style=\"--0:#032F62;--1:#9ECBFF\">'/root/github-webhook/webhook.log'</span><span style=\"--0:#24292E;--1:#E1E4E8\">),</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">logging.StreamHandler()  </span><span style=\"--0:#616972;--1:#99A0A6\"># 同时输出到控制台</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">logger </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> logging.getLogger(</span><span style=\"--0:#005CC5;--1:#79B8FF\">__name__</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">app </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Flask(</span><span style=\"--0:#005CC5;--1:#79B8FF\">__name__</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 设置 Flask 日志级别</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">app.logger.setLevel(logging.</span><span style=\"--0:#005CC5;--1:#79B8FF\">INFO</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">@app.route</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">'/webhook'</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#AE4B07;--1:#FFAB70\">methods</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#032F62;--1:#9ECBFF\">'POST'</span><span style=\"--0:#24292E;--1:#E1E4E8\">])</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">def</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">webhook</span><span style=\"--0:#24292E;--1:#E1E4E8\">():</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">payload </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> request.get_data()</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">event_type </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> request.headers.get(</span><span style=\"--0:#032F62;--1:#9ECBFF\">'X-GitHub-Event'</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">user_agent </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> request.headers.get(</span><span style=\"--0:#032F62;--1:#9ECBFF\">'User-Agent'</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#032F62;--1:#9ECBFF\">''</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">logger.info(</span><span style=\"--0:#BF3441;--1:#F97583\">f</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Received </span><span style=\"--0:#005CC5;--1:#79B8FF\">{</span><span style=\"--0:#24292E;--1:#E1E4E8\">event_type</span><span style=\"--0:#005CC5;--1:#79B8FF\">}</span><span style=\"--0:#032F62;--1:#9ECBFF\"> event from </span><span style=\"--0:#005CC5;--1:#79B8FF\">{</span><span style=\"--0:#24292E;--1:#E1E4E8\">user_agent</span><span style=\"--0:#005CC5;--1:#79B8FF\">}</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> event_type </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'push'</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">logger.info(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Push event detected, starting deployment...\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#616972;--1:#99A0A6\"># 异步执行部署</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> threading</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">thread </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> threading.Thread(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">target</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">execute_deploy)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">thread.daemon </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">True</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">thread.start()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> jsonify({</span><span style=\"--0:#032F62;--1:#9ECBFF\">'status'</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">'received'</span><span style=\"--0:#24292E;--1:#E1E4E8\">}), </span><span style=\"--0:#005CC5;--1:#79B8FF\">200</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">logger.info(</span><span style=\"--0:#BF3441;--1:#F97583\">f</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Event type </span><span style=\"--0:#005CC5;--1:#79B8FF\">{</span><span style=\"--0:#24292E;--1:#E1E4E8\">event_type</span><span style=\"--0:#005CC5;--1:#79B8FF\">}</span><span style=\"--0:#032F62;--1:#9ECBFF\"> ignored\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> jsonify({</span><span style=\"--0:#032F62;--1:#9ECBFF\">'status'</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">'ignored'</span><span style=\"--0:#24292E;--1:#E1E4E8\">}), </span><span style=\"--0:#005CC5;--1:#79B8FF\">200</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">except</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">Exception</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">as</span><span style=\"--0:#24292E;--1:#E1E4E8\"> e:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">logger.error(</span><span style=\"--0:#BF3441;--1:#F97583\">f</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Error processing webhook: </span><span style=\"--0:#005CC5;--1:#79B8FF\">{str</span><span style=\"--0:#24292E;--1:#E1E4E8\">(e)</span><span style=\"--0:#005CC5;--1:#79B8FF\">}</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> traceback</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">traceback.print_exc()</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> jsonify({</span><span style=\"--0:#032F62;--1:#9ECBFF\">'error'</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">'Internal server error'</span><span style=\"--0:#24292E;--1:#E1E4E8\">}), </span><span style=\"--0:#005CC5;--1:#79B8FF\">500</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">def</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">execute_deploy</span><span style=\"--0:#24292E;--1:#E1E4E8\">():</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"\"\"在后台执行部署\"\"\"</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">deploy_script </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'/root/github-webhook/deploy.sh'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">54</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">55</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">56</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">logger.info(</span><span style=\"--0:#BF3441;--1:#F97583\">f</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Starting deployment using script: </span><span style=\"--0:#005CC5;--1:#79B8FF\">{</span><span style=\"--0:#24292E;--1:#E1E4E8\">deploy_script</span><span style=\"--0:#005CC5;--1:#79B8FF\">}</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">57</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">58</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\"># 检查脚本是否存在</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">59</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">not</span><span style=\"--0:#24292E;--1:#E1E4E8\"> os.path.exists(deploy_script):</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">60</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">logger.error(</span><span style=\"--0:#BF3441;--1:#F97583\">f</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Error: Deploy script not found at </span><span style=\"--0:#005CC5;--1:#79B8FF\">{</span><span style=\"--0:#24292E;--1:#E1E4E8\">deploy_script</span><span style=\"--0:#005CC5;--1:#79B8FF\">}</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">61</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">return</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">62</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">63</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\"># 检查脚本是否有执行权限</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">64</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">not</span><span style=\"--0:#24292E;--1:#E1E4E8\"> os.access(deploy_script, os.</span><span style=\"--0:#005CC5;--1:#79B8FF\">X_OK</span><span style=\"--0:#24292E;--1:#E1E4E8\">):</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">65</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">logger.info(</span><span style=\"--0:#BF3441;--1:#F97583\">f</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Making script executable: </span><span style=\"--0:#005CC5;--1:#79B8FF\">{</span><span style=\"--0:#24292E;--1:#E1E4E8\">deploy_script</span><span style=\"--0:#005CC5;--1:#79B8FF\">}</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">66</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">os.chmod(deploy_script, </span><span style=\"--0:#BF3441;--1:#F97583\">0o</span><span style=\"--0:#005CC5;--1:#79B8FF\">755</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">67</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">68</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\"># 兼容旧版本 Python 的写法</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">69</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">process </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> subprocess.Popen(</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">70</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#032F62;--1:#9ECBFF\">'bash'</span><span style=\"--0:#24292E;--1:#E1E4E8\">, deploy_script],</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">71</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#AE4B07;--1:#FFAB70\">stdout</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">subprocess.</span><span style=\"--0:#005CC5;--1:#79B8FF\">PIPE</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">72</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#AE4B07;--1:#FFAB70\">stderr</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">subprocess.</span><span style=\"--0:#005CC5;--1:#79B8FF\">PIPE</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">73</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#AE4B07;--1:#FFAB70\">universal_newlines</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#005CC5;--1:#79B8FF\">True</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">74</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">75</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">stdout, stderr </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> process.communicate(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">timeout</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#005CC5;--1:#79B8FF\">60</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">76</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">77</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> process.returncode </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">78</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">logger.info(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Deployment completed successfully\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">79</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">logger.info(</span><span style=\"--0:#BF3441;--1:#F97583\">f</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Output: </span><span style=\"--0:#005CC5;--1:#79B8FF\">{</span><span style=\"--0:#24292E;--1:#E1E4E8\">stdout</span><span style=\"--0:#005CC5;--1:#79B8FF\">}</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">80</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">81</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">logger.error(</span><span style=\"--0:#BF3441;--1:#F97583\">f</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Deployment failed with return code </span><span style=\"--0:#005CC5;--1:#79B8FF\">{</span><span style=\"--0:#24292E;--1:#E1E4E8\">process.returncode</span><span style=\"--0:#005CC5;--1:#79B8FF\">}</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">82</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">logger.error(</span><span style=\"--0:#BF3441;--1:#F97583\">f</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Error output: </span><span style=\"--0:#005CC5;--1:#79B8FF\">{</span><span style=\"--0:#24292E;--1:#E1E4E8\">stderr</span><span style=\"--0:#005CC5;--1:#79B8FF\">}</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">83</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">except</span><span style=\"--0:#24292E;--1:#E1E4E8\"> subprocess.TimeoutExpired:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">84</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">logger.error(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Deployment script timed out\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">85</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">except</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">Exception</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">as</span><span style=\"--0:#24292E;--1:#E1E4E8\"> e:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">86</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">logger.error(</span><span style=\"--0:#BF3441;--1:#F97583\">f</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Deployment error: </span><span style=\"--0:#005CC5;--1:#79B8FF\">{str</span><span style=\"--0:#24292E;--1:#E1E4E8\">(e)</span><span style=\"--0:#005CC5;--1:#79B8FF\">}</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">87</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> traceback</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">88</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">traceback.print_exc()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">89</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">90</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">__name__</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'__main__'</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">91</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">logger.info(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Starting webhook server without signature verification\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">92</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">logger.info(</span><span style=\"--0:#BF3441;--1:#F97583\">f</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Deploy script path: /root/github-webhook/deploy.sh\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">93</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">app.run(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">host</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">'0.0.0.0'</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#AE4B07;--1:#FFAB70\">port</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#005CC5;--1:#79B8FF\">12345</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#AE4B07;--1:#FFAB70\">debug</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#005CC5;--1:#79B8FF\">False</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote class=\"admonition bdm-note\"><span class=\"bdm-title\">NOTE</span><p>需要安装 flask, <code>pip install flask</code></p><p>webhook 不设置 SECRET</p></blockquote></section>\n<section><h2 id=\"start-webhooksh\">start-webhook.sh<a class=\"anchor\" href=\"#start-webhooksh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:51ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#!/bin/bash</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 简单的启动脚本</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">WEBHOOK_PY</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"webhook.py\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">LOG_FILE</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"webhook.log\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">echo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Starting webhook service...\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 检查是否有正在运行的实例</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">pgrep</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-f</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"python3 </span><span style=\"--0:#24292E;--1:#E1E4E8\">$WEBHOOK_PY</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/null</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#BF3441;--1:#F97583\">then</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">echo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Webhook service is already running\"</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">exit</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">fi</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 启动服务</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">nohup</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">python3</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">$WEBHOOK_PY</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">$LOG_FILE</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">2>&#x26;1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> &#x26;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> [ </span><span style=\"--0:#005CC5;--1:#79B8FF\">$?</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-eq</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ]; </span><span style=\"--0:#BF3441;--1:#F97583\">then</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">echo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Webhook service started successfully\"</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">echo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"PID: </span><span style=\"--0:#005CC5;--1:#79B8FF\">$!</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">echo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Log file: </span><span style=\"--0:#24292E;--1:#E1E4E8\">$LOG_FILE</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">echo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Failed to start webhook service\"</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">exit</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">fi</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"设置-nginx-反向代理\">设置 nginx 反向代理<a class=\"anchor\" href=\"#设置-nginx-反向代理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:52ch\"><code><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">location /webhook {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">            </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">proxy_pass http://localhost:12345;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">            </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">proxy_set_header Host $host;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">            </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">proxy_set_header X-Real-IP $remote_addr;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"github-设置-webhook\">github 设置 webhook<a class=\"anchor\" href=\"#github-设置-webhook\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>设置 Payload URL 为 <a href=\"https://huanglei.work/webhook\">https://huanglei.work/webhook</a></li>\n<li>设置 Content type 为 application/json</li>\n</ul></section>","metadata":{"headings":[{"depth":2,"slug":"deploysh","text":"deploy.sh#"},{"depth":2,"slug":"webhookpy","text":"webhook.py#"},{"depth":2,"slug":"start-webhooksh","text":"start-webhook.sh#"},{"depth":2,"slug":"设置-nginx-反向代理","text":"设置 nginx 反向代理#"},{"depth":2,"slug":"github-设置-webhook","text":"github 设置 webhook#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"github代码自动部署到服务器","published":"2025-11-08T00:00:00.000Z","pinned":false,"description":"通过github webhook自动部署静态网站","image":"","tags":["github","webhook","网站部署"],"category":"环境部署","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":3,"words":583,"excerpt":""},"imagePaths":[]}},"collection":"posts"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题08","data":{"title":"后端高级工程师面试专题08","published":"2025-11-08T00:00:00.000Z","draft":false,"description":"第八章 手把手剖析并发底层原理和最佳实践","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"后端高级工程师面试专题07","prevSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题07","nextTitle":"github代码自动部署到服务器","nextSlug":"环境部署/github代码自动部署到服务器"},"body":"## 第八章 手把手剖析并发底层原理和最佳实践\n\n### 第 1 集 并发编程核心底层 AQS 你知道不\n\n**简介: 常见的并发编程 AQS 考查**\n\n- 考点：考查是否知道并发编程 AQS\n\n- 难度：【 \\*\\*\\* 】\n\n- 知道 AQS 吗？能否介绍下，它的核心思想是什么\n\n    ```text\n    AQS的全称为（AbstractQueuedSynchronizer），这个类在java.util.concurrent.locks包下面。它是一个Java提高的底层同步工具类，比如CountDownLatch、ReentrantLock，Semaphore，ReentrantReadWriteLock，SynchronousQueue，FutureTask等等皆是基于AQS的\n\n    只要搞懂了AQS，那么J.U.C中绝大部分的api都能轻松掌握\n\n    简单来说：是用一个int类型的变量表示同步状态，并提供了一系列的CAS操作来管理这个同步状态对象\n    一个是 state（用于计数器，类似gc的回收计数器）\n    一个是线程标记（当前线程是谁加锁的），\n    一个是阻塞队列（用于存放其他未拿到锁的线程)\n\n    例子：线程A调用了lock()方法，通过CAS将state赋值为1，然后将该锁标记为线程A加锁。如果线程A还未释放锁时，线程B来请求，会查询锁标记的状态，因为当前的锁标记为 线程A，线程B未能匹配上，所以线程B会加入阻塞队列，直到线程A触发了 unlock() 方法，这时线程B才有机会去拿到锁，但是不一定肯定拿到\n    ```\n\n    ```text\n    acquire(int arg) 源码讲解，好比加锁lock操作\n        tryAcquire()尝试直接去获取资源，如果成功则直接返回,AQS里面未实现但没有定义成abstract，因为独占模式下只用实现tryAcquire-tryRelease，而共享模式下只用实现tryAcquireShared-tryReleaseShared，类似设计模式里面的适配器模式\n\n        addWaiter() 根据不同模式将线程加入等待队列的尾部，有Node.EXCLUSIVE互斥模式、Node.SHARED共享模式；如果队列不为空，则以通过compareAndSetTail方法以CAS将当前线程节点加入到等待队列的末尾。否则通过enq(node)方法初始化一个等待队列\n      \n        acquireQueued()使线程在等待队列中获取资源，一直获取到资源后才返回,如果在等待过程中被中断，则返回true，否则返回false\n\n    release(int arg)源码讲解 好比解锁unlock\n      独占模式下线程释放指定量的资源，里面是根据tryRelease()的返回值来判断该线程是否已经完成释放掉资源了；在自义定同步器在实现时，如果已经彻底释放资源(state=0)，要返回true，否则返回false\n        unparkSuccessor方法用于唤醒等待队列中下一个线程\n    ```\n\n  ![](https://image.huanglei.work/mweb/2025/3/22/a2768155-93a6-45bd-8e6f-9361d9c87a96.jpg)\n\n- 你知道的 AQS 有几种同步方式，实现同步器一般要覆盖哪些方法\n\n    ```text\n    独占式: 比如ReentrantLock\n\n    共享式：比如Semaphore\n\n    存在组合：组合式的如ReentrantReadWriteLock，AQS为使用提供了底层支撑，使用者可以自由组装实现\n\n    1. boolean tryAcquire(int arg)\n    2. boolean tryRelease(int arg)\n    3. int tryAcquireShared(int arg)\n    4. boolean tryReleaseShared(int arg)\n    5. boolean isHeldExclusively()\n\n    不需要全部实现，根据获取的锁的种类可以选择实现不同的方法，比如\n    实现支持独占锁的同步器应该实现tryAcquire、 tryRelease、isHeldExclusively\n    实现支持共享获取的同步器应该实现tryAcquireShared、tryReleaseShared、isHeldExclusively\n    ```\n\n- 注意：线程获取锁成功后直接返回，不会进入等待队列里面，只有失败的时候才会\n\n    ```java\n    //线程获取锁成功后 直接返回，不会进入等待队列里面，只有失败的时候才会\n    public final void acquire(int arg) {\n    if (!tryAcquire(arg) && acquireQueued(addWaiter(Node.EXCLUSIVE), arg))\n    　　selfInterrupt();\n    }\n\n    =========\n    //获取失败则将当前线程封装为Node.EXCLUSIVE的Node节点插入AQS阻塞队列的尾部\n    final boolean acquireQueued(final Node node, int arg) {\n            boolean failed = true;\n            try {\n                boolean interrupted = false;\n                for (;;) {\n                    final Node p = node.predecessor();\n                    if (p == head && tryAcquire(arg)) {\n                        setHead(node);\n                        p.next = null; // help GC\n                        failed = false;\n                        return interrupted;\n                    }\n                    if (shouldParkAfterFailedAcquire(p, node) &&\n                        parkAndCheckInterrupt())\n                        interrupted = true;\n                }\n            } finally {\n                if (failed)\n                    cancelAcquire(node);\n            }\n        }\n    ==================\n    //调用LockSupport.park(this)方式阻塞自己\n    private final boolean parkAndCheckInterrupt() {\n            LockSupport.park(this);\n            return Thread.interrupted();\n    }\n    ```\n\n### 第 2 集 源码剖析并发编程 ReentrantLock 实现原理\n\n**简介: 源码解析 ReentrantLock 实现原理**\n\n- 考点：考查是否知道 ReentrantLock 底层实现 (如果对上集 AQS 不熟悉，可以看这集后再去回顾 AQS)\n\n- 难度：【 \\*\\*\\* 】\n\n- java 里面的公平锁和非公平锁你知道多少，有没看过 ReentrantLock 源码？\n\n  ![](/images/后端高级工程师面试专题/17c43bf8-2f54-412b-b592-292b67c40ae3.jpg)\n\n- 公平锁和非公平锁核心区别\n\n  ![](/images/后端高级工程师面试专题/97e74ce8-c1b9-446a-97ab-e90543dc9ddd.jpg)\n\n### 第 3 集 你可以说清 ReentrantLock 和 synchronized 的差别不\n\n**简介: 源码解析 ReentrantLock 实现原理**\n\n- 考点：考查 ReentrantLock 和 synchronized 的掌握情况\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- ReentrantLock 和 synchronized 使用的场景是什么，实现机制有什么不同\n\n    ```text\n    ReentrantLock和synchronized都是独占锁\n    \n    synchronized：\n      1、是悲观锁会引起其他线程阻塞，java内置关键字，\n      2、无法判断是否获取锁的状态，锁可重入、不可中断、只能是非公平\n      3、加锁解锁的过程是隐式的,用户不用手动操作,优点是操作简单但显得不够灵活\n      4、一般并发场景使用足够、可以放在被递归执行的方法上,且不用担心线程最后能否正确释放锁\n      5、synchronized操作的应该是对象头中mark word，参考原先原理图片\n    \n    ReentrantLock：\n      1、是个Lock接口的实现类，是悲观锁，\n      2、可以判断是否获取到锁，可重入、可判断、可公平可不公平\n      3、需要手动加锁和解锁,且 解锁的操作尽量要放在finally代码块中,保证线程正确释放锁\n      4、在复杂的并发场景中使用在重入时要却确保重复获取锁的次数必须和重复释放锁的次数一样，否则可能导致\t\t其他线程无法获得该锁。\n      5、创建的时候通过传进参数true创建公平锁,如果传入的是false或没传参数则创建的是非公平锁\n      6、底层不同是AQS的state和FIFO队列来控制加锁\n    ```\n\n### 第 4 集 读写锁 ReentrantReadWriteLock 你是否知道\n\n**简介: 讲解 ReentrantReadWriteLock 读写锁的掌握情况**\n\n- 考点：考查 ReentrantReadWriteLock 读写锁的掌握情况\n\n- 难度：【 \\*\\*\\* 】\n\n- 知道 ReentrantReadWriteLock 吗？和 ReentrantLock 有啥不同？\n\n  ![](/images/后端高级工程师面试专题/04fc64c0-fbf3-4b05-a19d-ba5e2c213a9d.jpg)\n\n    ```java\n    ReentrantReadWriteLock\n      1、读写锁接口ReadWriteLock接口的一个具体实现，实现了读写锁的分离，\n      2、支持公平和非公平，底层也是基于AQS实现\n      3、允许从写锁降级为读锁\n          流程：先获取写锁，然后获取读锁，最后释放写锁；但不能从读锁升级到写锁\n    \n      4、重入：读锁后还可以获取读锁；获取了写锁之后既可以再次获取写锁又可以获取读锁\n      核心：读锁是共享的，写锁是独占的。 读和读之间不会互斥，读和写、写和读、写和写之间才会互斥，主要是提升了读写的性能\n\n\n    ReentrantLock是独占锁且可重入的，相比synchronized而言功能更加丰富也更适合复杂的并发场景，但是也有弊端，假如有两个线程A/B访问数据，加锁是为了防止线程A在写数据， 线程B在读数据造成的数据不一致； 但线程A在读数据，线程C也在读数据，读数据是不会改变数据没有必要加锁，但是还是加锁了，降低了程序的性能，所以就有了ReadWriteLock读写锁接口\n\n\n    场景：读多写少，比如设计一个缓存组件 或 提高Collection的并发性\n    class CachedData {\n    *   Object data;\n    *   volatile boolean cacheValid;\n    *   final ReentrantReadWriteLock rwl = new ReentrantReadWriteLock();\n        *\n    *   void processCachedData() {\n    *     rwl.readLock().lock();\n    *     if (!cacheValid) {\n    *       // Must release read lock before acquiring write lock\n    *       rwl.readLock().unlock();\n    *       rwl.writeLock().lock();\n    *       try {\n    *         // Recheck state because another thread might have\n    *         // acquired write lock and changed state before we did.\n    *         if (!cacheValid) {\n    *           data = ...\n    *           cacheValid = true;\n    *         }\n    *         // Downgrade by acquiring read lock before releasing write lock\n    *         rwl.readLock().lock();\n    *       } finally {\n    *         rwl.writeLock().unlock(); // Unlock write, still hold read\n    *       }\n    *     }\n        *\n    *     try {\n    *       use(data);\n    *     } finally {\n    *       rwl.readLock().unlock();\n    *     }\n    *   }\n    * }}\n\n\n      class RWDictionary {\n    *   private final Map<String, Data> m = new TreeMap<String, Data>();\n    *   private final ReentrantReadWriteLock rwl = new ReentrantReadWriteLock();\n    *   private final Lock r = rwl.readLock();\n    *   private final Lock w = rwl.writeLock();\n        *\n    *   public Data get(String key) {\n    *     r.lock();\n    *     try { return m.get(key); }\n    *     finally { r.unlock(); }\n    *   }\n    *   public String[] allKeys() {\n    *     r.lock();\n    *     try { return m.keySet().toArray(); }\n    *     finally { r.unlock(); }\n    *   }\n    *   public Data put(String key, Data value) {\n    *     w.lock();\n    *     try { return m.put(key, value); }\n    *     finally { w.unlock(); }\n    *   }\n    *   public void clear() {\n    *     w.lock();\n    *     try { m.clear(); }\n    *     finally { w.unlock(); }\n    *   }\n    * }}\n    ```\n\n### 第 5 集 阻塞队列 BlockingQueue 是否知道\n\n**简介: 讲解阻塞队列 BlockingQueue 的掌握情况**\n\n- 考点：考查阻塞队列 BlockingQueue 的掌握情况\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 并发编程里面解决生产消费者模型你知道哪几种方式？\n\n    ```text\n    核心：要保证生产者不会在缓冲区满时放入数据，消费者也不会在缓冲区空时消耗数据\n\n    常用的同步方法是采用信号或加锁机制\n    1、wait() / notify()方法\n\n    2、await() / signal()方法\n      用ReentrantLock和Condition实现等待/通知模型\n\n    3、Semaphore信号量\n\n    4、BlockingQueue阻塞队列\n      ArrayBlockingQueue\n      LinkedBlockingQueue\n          put方法用来向队尾存入元素，如果队列满，则阻塞\n      　　 take方法用来从队首取元素，如果队列为空，则阻塞\n    ```\n\n- 你知道阻塞队列 BlockingQueue 不？介绍下常见的阻塞队列\n\n    ```text\n    BlockingQueue: j.u.c包下的提供了线程安全的队列访问的接口，并发包下很多高级同步类的实现都是基于阻塞队列实现的\n\n    1、当阻塞队列进行插入数据时，如果队列已满，线程将会阻塞等待直到队列非满\n    2、从阻塞队列读数据时，如果队列为空，线程将会阻塞等待直到队列里面是非空的时候\n\n    常见的阻塞队列\n      ArrayBlockingQueue：\n          基于数组实现的一个阻塞队列，需要指定容量大小，FIFO先进先出顺序\n\n      LinkedBlockingQueue：\n          基于链表实现的一个阻塞队列，如果不指定容量大小，默认 Integer.MAX_VALUE, FIFO先进先出顺序\n      \n      PriorityBlockingQueue：\n          一个支持优先级的无界阻塞队列，默认情况下元素采用自然顺序升序排序，也可以自定义排序实现 java.lang.Comparable接口\n      \n      DelayQueue：\n          延迟队列，在指定时间才能获取队列元素的功能，队列头元素是最接近过期的元素，里面的对象必须实现 java.util.concurrent.Delayed 接口并实现CompareTo和getDelay方法\n    ```\n\n### 第 6 集 并发队列 ConcurrentLinkedQueue 是否掌握\n\n**简介: 讲解非阻塞队列 ConcurrentLinkedQueue 的掌握情况**\n\n- 考点：考查非阻塞队列 ConcurrentLinkedQueue 的掌握情况\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 你知道非阻塞队列 ConcurrentLinkedQueue 不，它怎么实现线程安全的？\n\n    ```text\n    线程安全原因：\n    ConcurrentLinkedQueue是基于链表实现的无界线程安全队列，采用FIFO进行排序\n    保证线程安全的三要素：原子、有序、可见性\n\n    1、底层结构是Node，链表头部和尾部节点是head和tail，使用节点变量和内部类属性使用volatile声明保证了有序和可见性\n\n    2、插入、移除、更新操作使用CAS无锁操作，保证了原子性\n\n    3、假如多线程并发修改导致 CAS 更新失败，采用for循环插入保证更新操作成功\n    ```\n\n### 第 7 集 说说你认为的并发编程最佳实践\n\n**简介: 并发编程常用的最佳实践**\n\n- 考点：考查是否有用多线程，总结个人的最佳实践\n\n- 难度：【 \\*\\*\\* 】\n\n- 平时多线程用的挺多的，写出 3 条你遵循的多线程最佳实践\n\n    ```text\n    给不同模块的线程起名称，方便后续排查问题\n\n    使用同步代码块或者同步的方法的时候，尽量减小同步范围\n\n    多用并发集合少用同步集合\n      支持线程安全\n          同步集合：Hashtable/Vector/同步工具类包装Collections.synXXX\n          并发集合：ConcurrentHashMap、CopyOnWriteArrayList\n\n    线上业务需要使用多线程，优先考虑线程池是否更加合适，然后判断哪种线程池比较好，最后才是自己创建单一线程\n    ```\n\n- 用过线程池不? 有什么好处， java 里有哪些是常用的线程池\n\n    ```text\n    好处：重用存在的线程，减少对象创建销毁的开销，有效的控制最大并发线程数，提高系统资源的使用率，同时避免过多资源竞争，避免堵塞，且可以定时定期执行、单线程、并发数控制，配置任务过多任务后的拒绝策略等功能\n\n    类别\n    newFixedThreadPool\n      一个定长线程池，可控制线程最大并发数\n\n    newCachedThreadPool\n      一个可缓存线程池\n\n    newSingleThreadExecutor\n      一个单线程化的线程池，用唯一的工作线程来执行任务\n\n    newScheduledThreadPool\n      一个定长线程池，支持定时/周期性任务执行\n    ```\n\n### 第 8 集 线程池里面的坑你踩过吗？\n\n**简介:常见线程池里面坑是否知道**\n\n- 考点：是否知道线程池里面的坑\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 【阿里巴巴编码规范】 线程池不允许使用 Executors 去创建，要通过 ThreadPoolExecutor 的方式原因？\n\n    ```text\n    Executors创建的线程池底层也是调用 ThreadPoolExecutor，只不过使用不同的参数、队列、拒绝策略等,如果使用不当，会造成资源耗尽问题；\n    直接使用ThreadPoolExecutor让使用者更加清楚线程池允许规则，常见参数的使用，避免风险\n\n    常见的线程池问题：\n    newFixedThreadPool和newSingleThreadExecutor:\n      队列使用LinkedBlockingQueue，队列长度为 Integer.MAX_VALUE，可能造成堆积，导致OOM\n\n    newScheduledThreadPool和newCachedThreadPool:\n      线程池里面允许最大的线程数是Integer.MAX_VALUE，可能会创建过多线程，导致OOM\n    ```\n\n  ![](https://image.huanglei.work/mweb/2025/3/22/1d02fffe-0a41-4282-b5eb-8bef93d600df.jpg)\n\n  ![](https://image.huanglei.work/mweb/2025/3/22/31caf4a0-9872-414b-90da-6b2b740beee2.jpg)\n\n### 第 9 集 ThreadPoolExecutor 核心参数是否掌握\n\n**简介: 并发编程里面的 ThreadPoolExecutor 参数考查**\n\n- 考点：ThreadPoolExecutor 常见参数的掌握\n\n- 难度：【 \\*\\*\\* 】\n\n- ThreadPoolExecutor 构造函数里面的参数你是否掌握，能否解释下各个参数的作用\n\n    ```java\n    public ThreadPoolExecutor(int corePoolSize,\n                                  int maximumPoolSize,\n                                  long keepAliveTime,\n                                  TimeUnit unit,\n                                  BlockingQueue<Runnable> workQueue,\n                                  ThreadFactory threadFactory,\n                                  RejectedExecutionHandler handler)\n    ```\n\n    ```\n    corePoolSize：核心线程数，线程池也会维护线程的最少数量，默认情况下核心线程会一直存活，即使没有任务也不会受存keepAliveTime控制\n    坑：在刚创建线程池时线程不会立即启动，到有任务提交时才开始创建线程并逐步线程数目达到corePoolSize\n\n    maximumPoolSize：线程池维护线程的最大数量，超过将被阻塞\n    坑：当核心线程满，且阻塞队列也满时，才会判断当前线程数是否小于最大线程数，才决定是否创建新线程\n\n    keepAliveTime：非核心线程的闲置超时时间，超过这个时间就会被回收，直到线程数量等于corePoolSize\n\n    unit：指定keepAliveTime的单位，如TimeUnit.SECONDS、TimeUnit.MILLISECONDS\n\n    workQueue:线程池中的任务队列,常用的是 ArrayBlockingQueue、LinkedBlockingQueue、SynchronousQueue\n\n    threadFactory：创建新线程时使用的工厂\n\n    handler: RejectedExecutionHandler是一个接口且只有一个方法,线程池中的数量大于maximumPoolSize，对拒绝任务的处理策略，默认有4种策略AbortPolicy、CallerRunsPolicy、DiscardOldestPolicy、DiscardPolicy\n    ```","filePath":"src/content/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题08.md","digest":"a2fba3ff0ffd3dd1","rendered":{"html":"<section><h2 id=\"第八章-手把手剖析并发底层原理和最佳实践\">第八章 手把手剖析并发底层原理和最佳实践<a class=\"anchor\" href=\"#第八章-手把手剖析并发底层原理和最佳实践\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"第-1-集-并发编程核心底层-aqs-你知道不\">第 1 集 并发编程核心底层 AQS 你知道不<a class=\"anchor\" href=\"#第-1-集-并发编程核心底层-aqs-你知道不\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介: 常见的并发编程 AQS 考查</strong></p><ul>\n<li>\n<p>考点：考查是否知道并发编程 AQS</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>知道 AQS 吗？能否介绍下，它的核心思想是什么</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:190ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">AQS的全称为（AbstractQueuedSynchronizer），这个类在java.util.concurrent.locks包下面。它是一个Java提高的底层同步工具类，比如CountDownLatch、ReentrantLock，Semaphore，ReentrantReadWriteLock，SynchronousQueue，FutureTask等等皆是基于AQS的</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">只要搞懂了AQS，那么J.U.C中绝大部分的api都能轻松掌握</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">简单来说：是用一个int类型的变量表示同步状态，并提供了一系列的CAS操作来管理这个同步状态对象</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">一个是 state（用于计数器，类似gc的回收计数器）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">一个是线程标记（当前线程是谁加锁的），</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">一个是阻塞队列（用于存放其他未拿到锁的线程)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">例子：线程A调用了lock()方法，通过CAS将state赋值为1，然后将该锁标记为线程A加锁。如果线程A还未释放锁时，线程B来请求，会查询锁标记的状态，因为当前的锁标记为 线程A，线程B未能匹配上，所以线程B会加入阻塞队列，直到线程A触发了 unlock() 方法，这时线程B才有机会去拿到锁，但是不一定肯定拿到</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:150ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">acquire(int arg) 源码讲解，好比加锁lock操作</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">tryAcquire()尝试直接去获取资源，如果成功则直接返回,AQS里面未实现但没有定义成abstract，因为独占模式下只用实现tryAcquire-tryRelease，而共享模式下只用实现tryAcquireShared-tryReleaseShared，类似设计模式里面的适配器模式</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">addWaiter() 根据不同模式将线程加入等待队列的尾部，有Node.EXCLUSIVE互斥模式、Node.SHARED共享模式；如果队列不为空，则以通过compareAndSetTail方法以CAS将当前线程节点加入到等待队列的末尾。否则通过enq(node)方法初始化一个等待队列</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">acquireQueued()使线程在等待队列中获取资源，一直获取到资源后才返回,如果在等待过程中被中断，则返回true，否则返回false</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">release(int arg)源码讲解 好比解锁unlock</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">独占模式下线程释放指定量的资源，里面是根据tryRelease()的返回值来判断该线程是否已经完成释放掉资源了；在自义定同步器在实现时，如果已经彻底释放资源(state=0)，要返回true，否则返回false</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">unparkSuccessor方法用于唤醒等待队列中下一个线程</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p><img src=\"https://image.huanglei.work/mweb/2025/3/22/a2768155-93a6-45bd-8e6f-9361d9c87a96.jpg\" alt=\"\"></p>\n</li>\n<li>\n<p>你知道的 AQS 有几种同步方式，实现同步器一般要覆盖哪些方法</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:67ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">独占式: 比如ReentrantLock</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">共享式：比如Semaphore</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">存在组合：组合式的如ReentrantReadWriteLock，AQS为使用提供了底层支撑，使用者可以自由组装实现</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1. boolean tryAcquire(int arg)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">2. boolean tryRelease(int arg)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">3. int tryAcquireShared(int arg)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">4. boolean tryReleaseShared(int arg)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">5. boolean isHeldExclusively()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">不需要全部实现，根据获取的锁的种类可以选择实现不同的方法，比如</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">实现支持独占锁的同步器应该实现tryAcquire、 tryRelease、isHeldExclusively</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">实现支持共享获取的同步器应该实现tryAcquireShared、tryReleaseShared、isHeldExclusively</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>注意：线程获取锁成功后直接返回，不会进入等待队列里面，只有失败的时候才会</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:70ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">//线程获取锁成功后 直接返回，不会进入等待队列里面，只有失败的时候才会</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">final</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">acquire</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> arg) {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">!</span><span style=\"--0:#6F42C1;--1:#B392F0\">tryAcquire</span><span style=\"--0:#24292E;--1:#E1E4E8\">(arg) </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">acquireQueued</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">addWaiter</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Node.EXCLUSIVE), arg))</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">　　</span><span style=\"--0:#6F42C1;--1:#B392F0\">selfInterrupt</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">=========</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">//获取失败则将当前线程封装为Node.EXCLUSIVE的Node节点插入AQS阻塞队列的尾部</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">final</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">boolean</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">acquireQueued</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">final</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Node node, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> arg) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">boolean</span><span style=\"--0:#24292E;--1:#E1E4E8\"> failed </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">true</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">boolean</span><span style=\"--0:#24292E;--1:#E1E4E8\"> interrupted </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">false</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (;;) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">                </span><span style=\"--0:#BF3441;--1:#F97583\">final</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Node p </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> node.</span><span style=\"--0:#6F42C1;--1:#B392F0\">predecessor</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">                </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (p </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> head </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">tryAcquire</span><span style=\"--0:#24292E;--1:#E1E4E8\">(arg)) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:20ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">                    </span><span style=\"--0:#6F42C1;--1:#B392F0\">setHead</span><span style=\"--0:#24292E;--1:#E1E4E8\">(node);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:20ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">p.next </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">null</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#616972;--1:#99A0A6\">// help GC</span></div></div><div class=\"ec-line\" style=\"--ecIndent:20ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">failed </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">false</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:20ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">                    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> interrupted;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">                </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">shouldParkAfterFailedAcquire</span><span style=\"--0:#24292E;--1:#E1E4E8\">(p, node) </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:20ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">                    </span><span style=\"--0:#6F42C1;--1:#B392F0\">parkAndCheckInterrupt</span><span style=\"--0:#24292E;--1:#E1E4E8\">())</span></div></div><div class=\"ec-line\" style=\"--ecIndent:20ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">interrupted </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">true</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">finally</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (failed)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">                </span><span style=\"--0:#6F42C1;--1:#B392F0\">cancelAcquire</span><span style=\"--0:#24292E;--1:#E1E4E8\">(node);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">==================</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">//调用LockSupport.park(this)方式阻塞自己</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">final</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">boolean</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">parkAndCheckInterrupt</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">LockSupport.</span><span style=\"--0:#6F42C1;--1:#B392F0\">park</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">this</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">interrupted</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-2-集-源码剖析并发编程-reentrantlock-实现原理\">第 2 集 源码剖析并发编程 ReentrantLock 实现原理<a class=\"anchor\" href=\"#第-2-集-源码剖析并发编程-reentrantlock-实现原理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介: 源码解析 ReentrantLock 实现原理</strong></p><ul>\n<li>\n<p>考点：考查是否知道 ReentrantLock 底层实现 (如果对上集 AQS 不熟悉，可以看这集后再去回顾 AQS)</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>java 里面的公平锁和非公平锁你知道多少，有没看过 ReentrantLock 源码？</p>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/17c43bf8-2f54-412b-b592-292b67c40ae3.jpg\" alt=\"\"></p>\n</li>\n<li>\n<p>公平锁和非公平锁核心区别</p>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/97e74ce8-c1b9-446a-97ab-e90543dc9ddd.jpg\" alt=\"\"></p>\n</li>\n</ul></section><section><h3 id=\"第-3-集-你可以说清-reentrantlock-和-synchronized-的差别不\">第 3 集 你可以说清 ReentrantLock 和 synchronized 的差别不<a class=\"anchor\" href=\"#第-3-集-你可以说清-reentrantlock-和-synchronized-的差别不\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介: 源码解析 ReentrantLock 实现原理</strong></p><ul>\n<li>\n<p>考点：考查 ReentrantLock 和 synchronized 的掌握情况</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>ReentrantLock 和 synchronized 使用的场景是什么，实现机制有什么不同</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:66ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ReentrantLock和synchronized都是独占锁</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">synchronized：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">1、是悲观锁会引起其他线程阻塞，java内置关键字，</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">2、无法判断是否获取锁的状态，锁可重入、不可中断、只能是非公平</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">3、加锁解锁的过程是隐式的,用户不用手动操作,优点是操作简单但显得不够灵活</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">4、一般并发场景使用足够、可以放在被递归执行的方法上,且不用担心线程最后能否正确释放锁</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">5、synchronized操作的应该是对象头中mark word，参考原先原理图片</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ReentrantLock：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">1、是个Lock接口的实现类，是悲观锁，</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">2、可以判断是否获取到锁，可重入、可判断、可公平可不公平</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">3、需要手动加锁和解锁,且 解锁的操作尽量要放在finally代码块中,保证线程正确释放锁</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">4、在复杂的并发场景中使用在重入时要却确保重复获取锁的次数必须和重复释放锁的次数一样，否则可能导致    其他线程无法获得该锁。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">5、创建的时候通过传进参数true创建公平锁,如果传入的是false或没传参数则创建的是非公平锁</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">6、底层不同是AQS的state和FIFO队列来控制加锁</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-4-集-读写锁-reentrantreadwritelock-你是否知道\">第 4 集 读写锁 ReentrantReadWriteLock 你是否知道<a class=\"anchor\" href=\"#第-4-集-读写锁-reentrantreadwritelock-你是否知道\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介: 讲解 ReentrantReadWriteLock 读写锁的掌握情况</strong></p><ul>\n<li>\n<p>考点：考查 ReentrantReadWriteLock 读写锁的掌握情况</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>知道 ReentrantReadWriteLock 吗？和 ReentrantLock 有啥不同？</p>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/04fc64c0-fbf3-4b05-a19d-ba5e2c213a9d.jpg\" alt=\"\"></p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:187ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ReentrantReadWriteLock</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">、读写锁接口ReadWriteLock接口的一个具体实现，实现了读写锁的分离，</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">、支持公平和非公平，底层也是基于AQS实现</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">3</span><span style=\"--0:#24292E;--1:#E1E4E8\">、允许从写锁降级为读锁</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">流程：先获取写锁，然后获取读锁，最后释放写锁；但不能从读锁升级到写锁</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">4</span><span style=\"--0:#24292E;--1:#E1E4E8\">、重入：读锁后还可以获取读锁；获取了写锁之后既可以再次获取写锁又可以获取读锁</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">核心：读锁是共享的，写锁是独占的。 读和读之间不会互斥，读和写、写和读、写和写之间才会互斥，主要是提升了读写的性能</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ReentrantLock是独占锁且可重入的，相比synchronized而言功能更加丰富也更适合复杂的并发场景，但是也有弊端，假如有两个线程A</span><span style=\"--0:#BF3441;--1:#F97583\">/</span><span style=\"--0:#24292E;--1:#E1E4E8\">B访问数据，加锁是为了防止线程A在写数据， 线程B在读数据造成的数据不一致； 但线程A在读数据，线程C也在读数据，读数据是不会改变数据没有必要加锁，但是还是加锁了，降低了程序的性能，所以就有了ReadWriteLock读写锁接口</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">场景：读多写少，比如设计一个缓存组件 或 提高Collection的并发性</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">CachedData</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">   Object data;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#BF3441;--1:#F97583\">volatile</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">boolean</span><span style=\"--0:#24292E;--1:#E1E4E8\"> cacheValid;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#BF3441;--1:#F97583\">final</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ReentrantReadWriteLock rwl </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ReentrantReadWriteLock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">*</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">processCachedData</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">     rwl.</span><span style=\"--0:#6F42C1;--1:#B392F0\">readLock</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">lock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">     </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">!</span><span style=\"--0:#24292E;--1:#E1E4E8\">cacheValid) {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">       </span><span style=\"--0:#616972;--1:#99A0A6\">// Must release read lock before acquiring write lock</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">       rwl.</span><span style=\"--0:#6F42C1;--1:#B392F0\">readLock</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">unlock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">       rwl.</span><span style=\"--0:#6F42C1;--1:#B392F0\">writeLock</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">lock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">       </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">         </span><span style=\"--0:#616972;--1:#99A0A6\">// Recheck state because another thread might have</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">         </span><span style=\"--0:#616972;--1:#99A0A6\">// acquired write lock and changed state before we did.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">         </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">!</span><span style=\"--0:#24292E;--1:#E1E4E8\">cacheValid) {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">           data </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ...</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">           cacheValid </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">true</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">         }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">         </span><span style=\"--0:#616972;--1:#99A0A6\">// Downgrade by acquiring read lock before releasing write lock</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">         rwl.</span><span style=\"--0:#6F42C1;--1:#B392F0\">readLock</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">lock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">       } </span><span style=\"--0:#BF3441;--1:#F97583\">finally</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">         rwl.</span><span style=\"--0:#6F42C1;--1:#B392F0\">writeLock</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">unlock</span><span style=\"--0:#24292E;--1:#E1E4E8\">(); </span><span style=\"--0:#616972;--1:#99A0A6\">// Unlock write, still hold read</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">       }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">     }</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">*</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">     </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">       </span><span style=\"--0:#6F42C1;--1:#B392F0\">use</span><span style=\"--0:#24292E;--1:#E1E4E8\">(data);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">     } </span><span style=\"--0:#BF3441;--1:#F97583\">finally</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">       rwl.</span><span style=\"--0:#6F42C1;--1:#B392F0\">readLock</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">unlock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">     }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">   }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> }}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">RWDictionary</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">final</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Map&#x3C;</span><span style=\"--0:#BF3441;--1:#F97583\">String</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">Data</span><span style=\"--0:#24292E;--1:#E1E4E8\">> m </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> TreeMap&#x3C;</span><span style=\"--0:#BF3441;--1:#F97583\">String</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">Data</span><span style=\"--0:#24292E;--1:#E1E4E8\">>();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">final</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ReentrantReadWriteLock rwl </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ReentrantReadWriteLock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">final</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Lock r </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> rwl.</span><span style=\"--0:#6F42C1;--1:#B392F0\">readLock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">final</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Lock w </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> rwl.</span><span style=\"--0:#6F42C1;--1:#B392F0\">writeLock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">54</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">*</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">55</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Data </span><span style=\"--0:#6F42C1;--1:#B392F0\">get</span><span style=\"--0:#24292E;--1:#E1E4E8\">(String </span><span style=\"--0:#AE4B07;--1:#FFAB70\">key</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">56</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">     r.</span><span style=\"--0:#6F42C1;--1:#B392F0\">lock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">57</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">     </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> m.</span><span style=\"--0:#6F42C1;--1:#B392F0\">get</span><span style=\"--0:#24292E;--1:#E1E4E8\">(key); }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">58</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">     </span><span style=\"--0:#BF3441;--1:#F97583\">finally</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { r.</span><span style=\"--0:#6F42C1;--1:#B392F0\">unlock</span><span style=\"--0:#24292E;--1:#E1E4E8\">(); }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">59</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">   }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">60</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">String</span><span style=\"--0:#24292E;--1:#E1E4E8\">[] </span><span style=\"--0:#6F42C1;--1:#B392F0\">allKeys</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">61</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">     r.</span><span style=\"--0:#6F42C1;--1:#B392F0\">lock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">62</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">     </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> m.</span><span style=\"--0:#6F42C1;--1:#B392F0\">keySet</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">toArray</span><span style=\"--0:#24292E;--1:#E1E4E8\">(); }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">63</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">     </span><span style=\"--0:#BF3441;--1:#F97583\">finally</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { r.</span><span style=\"--0:#6F42C1;--1:#B392F0\">unlock</span><span style=\"--0:#24292E;--1:#E1E4E8\">(); }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">64</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">   }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">65</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Data </span><span style=\"--0:#6F42C1;--1:#B392F0\">put</span><span style=\"--0:#24292E;--1:#E1E4E8\">(String </span><span style=\"--0:#AE4B07;--1:#FFAB70\">key</span><span style=\"--0:#24292E;--1:#E1E4E8\">, Data </span><span style=\"--0:#AE4B07;--1:#FFAB70\">value</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">66</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">     w.</span><span style=\"--0:#6F42C1;--1:#B392F0\">lock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">67</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">     </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> m.</span><span style=\"--0:#6F42C1;--1:#B392F0\">put</span><span style=\"--0:#24292E;--1:#E1E4E8\">(key, value); }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">68</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">     </span><span style=\"--0:#BF3441;--1:#F97583\">finally</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { w.</span><span style=\"--0:#6F42C1;--1:#B392F0\">unlock</span><span style=\"--0:#24292E;--1:#E1E4E8\">(); }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">69</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">   }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">70</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">clear</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">71</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">     w.</span><span style=\"--0:#6F42C1;--1:#B392F0\">lock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">72</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">     </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { m.</span><span style=\"--0:#6F42C1;--1:#B392F0\">clear</span><span style=\"--0:#24292E;--1:#E1E4E8\">(); }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">73</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">     </span><span style=\"--0:#BF3441;--1:#F97583\">finally</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { w.</span><span style=\"--0:#6F42C1;--1:#B392F0\">unlock</span><span style=\"--0:#24292E;--1:#E1E4E8\">(); }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">74</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">   }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">75</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> }}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-5-集-阻塞队列-blockingqueue-是否知道\">第 5 集 阻塞队列 BlockingQueue 是否知道<a class=\"anchor\" href=\"#第-5-集-阻塞队列-blockingqueue-是否知道\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介: 讲解阻塞队列 BlockingQueue 的掌握情况</strong></p><ul>\n<li>\n<p>考点：考查阻塞队列 BlockingQueue 的掌握情况</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>并发编程里面解决生产消费者模型你知道哪几种方式？</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">核心：要保证生产者不会在缓冲区满时放入数据，消费者也不会在缓冲区空时消耗数据</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">常用的同步方法是采用信号或加锁机制</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1、wait() / notify()方法</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">2、await() / signal()方法</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">用ReentrantLock和Condition实现等待/通知模型</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">3、Semaphore信号量</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">4、BlockingQueue阻塞队列</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">ArrayBlockingQueue</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">LinkedBlockingQueue</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">      </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">put方法用来向队尾存入元素，如果队列满，则阻塞</span></div></div><div class=\"ec-line\" style=\"--ecIndent:5ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  　　 </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">take方法用来从队首取元素，如果队列为空，则阻塞</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>你知道阻塞队列 BlockingQueue 不？介绍下常见的阻塞队列</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:107ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">BlockingQueue: j.u.c包下的提供了线程安全的队列访问的接口，并发包下很多高级同步类的实现都是基于阻塞队列实现的</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1、当阻塞队列进行插入数据时，如果队列已满，线程将会阻塞等待直到队列非满</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">2、从阻塞队列读数据时，如果队列为空，线程将会阻塞等待直到队列里面是非空的时候</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">常见的阻塞队列</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">ArrayBlockingQueue：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">      </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">基于数组实现的一个阻塞队列，需要指定容量大小，FIFO先进先出顺序</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">LinkedBlockingQueue：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">      </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">基于链表实现的一个阻塞队列，如果不指定容量大小，默认 Integer.MAX_VALUE, FIFO先进先出顺序</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">PriorityBlockingQueue：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">      </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">一个支持优先级的无界阻塞队列，默认情况下元素采用自然顺序升序排序，也可以自定义排序实现 java.lang.Comparable接口</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">DelayQueue：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">      </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">延迟队列，在指定时间才能获取队列元素的功能，队列头元素是最接近过期的元素，里面的对象必须实现 java.util.concurrent.Delayed 接口并实现CompareTo和getDelay方法</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-6-集-并发队列-concurrentlinkedqueue-是否掌握\">第 6 集 并发队列 ConcurrentLinkedQueue 是否掌握<a class=\"anchor\" href=\"#第-6-集-并发队列-concurrentlinkedqueue-是否掌握\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介: 讲解非阻塞队列 ConcurrentLinkedQueue 的掌握情况</strong></p><ul>\n<li>\n<p>考点：考查非阻塞队列 ConcurrentLinkedQueue 的掌握情况</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>你知道非阻塞队列 ConcurrentLinkedQueue 不，它怎么实现线程安全的？</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:65ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">线程安全原因：</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ConcurrentLinkedQueue是基于链表实现的无界线程安全队列，采用FIFO进行排序</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">保证线程安全的三要素：原子、有序、可见性</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1、底层结构是Node，链表头部和尾部节点是head和tail，使用节点变量和内部类属性使用volatile声明保证了有序和可见性</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">2、插入、移除、更新操作使用CAS无锁操作，保证了原子性</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">3、假如多线程并发修改导致 CAS 更新失败，采用for循环插入保证更新操作成功</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-7-集-说说你认为的并发编程最佳实践\">第 7 集 说说你认为的并发编程最佳实践<a class=\"anchor\" href=\"#第-7-集-说说你认为的并发编程最佳实践\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介: 并发编程常用的最佳实践</strong></p><ul>\n<li>\n<p>考点：考查是否有用多线程，总结个人的最佳实践</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>平时多线程用的挺多的，写出 3 条你遵循的多线程最佳实践</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:53ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">给不同模块的线程起名称，方便后续排查问题</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">使用同步代码块或者同步的方法的时候，尽量减小同步范围</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">多用并发集合少用同步集合</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">支持线程安全</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">      </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">同步集合：Hashtable/Vector/同步工具类包装Collections.synXXX</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">      </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">并发集合：ConcurrentHashMap、CopyOnWriteArrayList</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">线上业务需要使用多线程，优先考虑线程池是否更加合适，然后判断哪种线程池比较好，最后才是自己创建单一线程</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>用过线程池不? 有什么好处， java 里有哪些是常用的线程池</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:100ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">好处：重用存在的线程，减少对象创建销毁的开销，有效的控制最大并发线程数，提高系统资源的使用率，同时避免过多资源竞争，避免堵塞，且可以定时定期执行、单线程、并发数控制，配置任务过多任务后的拒绝策略等功能</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">类别</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">newFixedThreadPool</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">一个定长线程池，可控制线程最大并发数</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">newCachedThreadPool</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">一个可缓存线程池</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">newSingleThreadExecutor</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">一个单线程化的线程池，用唯一的工作线程来执行任务</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">newScheduledThreadPool</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">一个定长线程池，支持定时/周期性任务执行</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-8-集-线程池里面的坑你踩过吗\">第 8 集 线程池里面的坑你踩过吗？<a class=\"anchor\" href=\"#第-8-集-线程池里面的坑你踩过吗\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介:常见线程池里面坑是否知道</strong></p><ul>\n<li>\n<p>考点：是否知道线程池里面的坑</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>【阿里巴巴编码规范】 线程池不允许使用 Executors 去创建，要通过 ThreadPoolExecutor 的方式原因？</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:78ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">Executors创建的线程池底层也是调用 ThreadPoolExecutor，只不过使用不同的参数、队列、拒绝策略等,如果使用不当，会造成资源耗尽问题；</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">直接使用ThreadPoolExecutor让使用者更加清楚线程池允许规则，常见参数的使用，避免风险</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">常见的线程池问题：</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">newFixedThreadPool和newSingleThreadExecutor:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">队列使用LinkedBlockingQueue，队列长度为 Integer.MAX_VALUE，可能造成堆积，导致OOM</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">newScheduledThreadPool和newCachedThreadPool:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">线程池里面允许最大的线程数是Integer.MAX_VALUE，可能会创建过多线程，导致OOM</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p><img src=\"https://image.huanglei.work/mweb/2025/3/22/1d02fffe-0a41-4282-b5eb-8bef93d600df.jpg\" alt=\"\"></p>\n<p><img src=\"https://image.huanglei.work/mweb/2025/3/22/31caf4a0-9872-414b-90da-6b2b740beee2.jpg\" alt=\"\"></p>\n</li>\n</ul></section><section><h3 id=\"第-9-集-threadpoolexecutor-核心参数是否掌握\">第 9 集 ThreadPoolExecutor 核心参数是否掌握<a class=\"anchor\" href=\"#第-9-集-threadpoolexecutor-核心参数是否掌握\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介: 并发编程里面的 ThreadPoolExecutor 参数考查</strong></p><ul>\n<li>\n<p>考点：ThreadPoolExecutor 常见参数的掌握</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>ThreadPoolExecutor 构造函数里面的参数你是否掌握，能否解释下各个参数的作用</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:64ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ThreadPoolExecutor</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> corePoolSize,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:30ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">                              </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> maximumPoolSize,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:30ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">                              </span><span style=\"--0:#BF3441;--1:#F97583\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> keepAliveTime,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:30ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                              </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">TimeUnit unit,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:30ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                              </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">BlockingQueue</span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\">Runnable</span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> workQueue,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:30ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                              </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">ThreadFactory threadFactory,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:30ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                              </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">RejectedExecutionHandler handler)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:151ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">corePoolSize：核心线程数，线程池也会维护线程的最少数量，默认情况下核心线程会一直存活，即使没有任务也不会受存keepAliveTime控制</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">坑：在刚创建线程池时线程不会立即启动，到有任务提交时才开始创建线程并逐步线程数目达到corePoolSize</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">maximumPoolSize：线程池维护线程的最大数量，超过将被阻塞</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">坑：当核心线程满，且阻塞队列也满时，才会判断当前线程数是否小于最大线程数，才决定是否创建新线程</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">keepAliveTime：非核心线程的闲置超时时间，超过这个时间就会被回收，直到线程数量等于corePoolSize</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">unit：指定keepAliveTime的单位，如TimeUnit.SECONDS、TimeUnit.MILLISECONDS</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">workQueue:线程池中的任务队列,常用的是 ArrayBlockingQueue、LinkedBlockingQueue、SynchronousQueue</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">threadFactory：创建新线程时使用的工厂</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">handler: RejectedExecutionHandler是一个接口且只有一个方法,线程池中的数量大于maximumPoolSize，对拒绝任务的处理策略，默认有4种策略AbortPolicy、CallerRunsPolicy、DiscardOldestPolicy、DiscardPolicy</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section></section>","metadata":{"headings":[{"depth":2,"slug":"第八章-手把手剖析并发底层原理和最佳实践","text":"第八章 手把手剖析并发底层原理和最佳实践#"},{"depth":3,"slug":"第-1-集-并发编程核心底层-aqs-你知道不","text":"第 1 集 并发编程核心底层 AQS 你知道不#"},{"depth":3,"slug":"第-2-集-源码剖析并发编程-reentrantlock-实现原理","text":"第 2 集 源码剖析并发编程 ReentrantLock 实现原理#"},{"depth":3,"slug":"第-3-集-你可以说清-reentrantlock-和-synchronized-的差别不","text":"第 3 集 你可以说清 ReentrantLock 和 synchronized 的差别不#"},{"depth":3,"slug":"第-4-集-读写锁-reentrantreadwritelock-你是否知道","text":"第 4 集 读写锁 ReentrantReadWriteLock 你是否知道#"},{"depth":3,"slug":"第-5-集-阻塞队列-blockingqueue-是否知道","text":"第 5 集 阻塞队列 BlockingQueue 是否知道#"},{"depth":3,"slug":"第-6-集-并发队列-concurrentlinkedqueue-是否掌握","text":"第 6 集 并发队列 ConcurrentLinkedQueue 是否掌握#"},{"depth":3,"slug":"第-7-集-说说你认为的并发编程最佳实践","text":"第 7 集 说说你认为的并发编程最佳实践#"},{"depth":3,"slug":"第-8-集-线程池里面的坑你踩过吗","text":"第 8 集 线程池里面的坑你踩过吗？#"},{"depth":3,"slug":"第-9-集-threadpoolexecutor-核心参数是否掌握","text":"第 9 集 ThreadPoolExecutor 核心参数是否掌握#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"后端高级工程师面试专题08","published":"2025-11-08T00:00:00.000Z","pinned":false,"description":"第八章 手把手剖析并发底层原理和最佳实践","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":19,"words":3782,"excerpt":"简介: 常见的并发编程 AQS 考查"},"imagePaths":[]}},"collection":"posts"}],"2025-11-07":[{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题07","data":{"title":"后端高级工程师面试专题07","published":"2025-11-07T00:00:00.000Z","draft":false,"description":"第七章 攻克必考知识点 并发编程进阶系列","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"后端高级工程师面试专题06","prevSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题06","nextTitle":"后端高级工程师面试专题08","nextSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题08"},"body":"## 第七章 攻克必考知识点 并发编程进阶系列\n\n### 第 1 集 并发编程三要素你是否知道，解释+例子\n\n**简介: 常见的并发编程三要素**\n\n- 考点：考查是否知道并发编程 3 要素\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 并发编程三要素是否知道，能否分别解释下，举个简单的例子\n\n    ```text\n    原子性:一个不可再被分割的颗粒，原子性指的是一个或多个操作要么全部执行成功要么全部执行失败，期间不能被中断，也不存在上下文切换，线程切换会带来原子性的问题\n\n    int num = 1; // 原子操作\n    num++; // 非原子操作，从主内存读取num到线程工作内存，进行 +1，再把num写到主内存, 除非用原子类，即java.util.concurrent.atomic里的原子变量类\n\n    解决办法是可以用synchronized 或 Lock(比如ReentrantLock) 来把这个多步操作“变成”原子操作，但是volatile，前面有说到不能修饰有依赖值的情况\n\n    public class XdTest {\n        private int num = 0;\n\n        //使用lock，每个对象都是有锁，只有获得这个锁才可以进行对应的操作\n        Lock lock = new ReentrantLock();\n        public  void add1(){\n            lock.lock();\n            try {\n                num++;\n            }finally {\n                lock.unlock();\n            }\n        }\n      \n        //使用synchronized，和上述是一个操作，这个是保证方法被锁住而已，上述的是代码块被锁住\n        public synchronized void add2(){\n            num++;\n        }\n    }\n    解决核心思想：把一个方法或者代码块看做一个整体，保证是一个不可分割的整体\n\n\n    ========================================\n    有序性: 程序执行的顺序按照代码的先后顺序执行，因为处理器可能会对指令进行重排序\n    JVM在编译java代码或者CPU执行JVM字节码时，对现有的指令进行重新排序，主要目的是优化运行效率(不改变程序结果的前提)\n    int a = 3 //1\n    int b = 4 //2\n    int c =5 //3\n    int h = a*b*c //4\n\n    上面的例子 执行顺序1,2,3,4 和 2,1,3,4 结果都是一样，指令重排序可以提高执行效率，但是多线程上可能会影响结果\n\n    假如下面的场景，正常是顺序处理\n    //线程1\n    before();//处理初始化工作，处理完成后才可以正式运行下面的run方法\n    flag = true; //标记资源处理好了，如果资源没处理好，此时程序就可能出现问题\n    //线程2\n    while(flag){\n        run(); //核心业务代码\n    }\n\n    指令重排序后，导致顺序换了，程序出现问题，且难排查\n\n    //线程1\n    flag = true; //标记资源处理好了，如果资源没处理好，此时程序就可能出现问题\n    //线程2\n    while(flag){\n        run(); //核心业务代码\n    }\n    before();//处理初始化工作，处理完成后才可以正式运行下面的run方法\n\n\n    ========================================\n    可见性: 一个线程A对共享变量的修改,另一个线程B能够立刻看到\n    // 线程 A 执行\n    int num = 0;\n    // 线程 A 执行\n    num++;\n    // 线程 B 执行\n    System.out.print(\"num的值：\" + num);\n\n    线程A执行 i++ 后再执行线程 B，线程 B可能有2个结果，可能是0和1。\n\n    因为 i++ 在线程A中执行运算，并没有立刻更新到主内存当中，而线程B就去主内存当中读取并打印，此时打印的就是0；也可能线程A执行完成更新到主内存了,线程B的值是1。\n    所以需要保证线程的可见性\n    synchronized、lock和volatile能够保证线程可见性\n    ```\n\n### 第 2 集 常见进程/线程调度算法你是否知道\n\n**简介: 常见的进程、线程间调度算法**\n\n- 考点：考查是否知道常见进程和线程间的调度算法\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 说下你知道的调度算法，比如进程间的调度；\n\n  ![](https://image.huanglei.work/mweb/2025/3/22/89e65a19-6158-4f4f-ab67-1b1afd0cba4c.jpg)\n\n    ```text\n    先来先服务调度算法：\n      按照作业/进程到达的先后顺序进行调度 ，即：优先考虑在系统中等待时间最长的作业\n      排在长进程后的短进程的等待时间长，不利于短作业/进程\n\n    短作业优先调度算法：\n      短进程/作业（要求服务时间最短）在实际情况中占有很大比例，为了使得它们优先执行\n      对长作业不友好\n\n    高响应比优先调度算法:\n      在每次调度时，先计算各个作业的优先权：优先权=响应比=（等待时间+要求服务时间）/要求服务时间,\n      因为等待时间与服务时间之和就是系统对该作业的响应时间，所以 优先权=响应比=响应时间/要求服务时间，选\t择优先权高的进行服务需要计算优先权信息，增加了系统的开销\n\n    时间片轮转调度算法:\n      轮流的为各个进程服务，让每个进程在一定时间间隔内都可以得到响应\n      由于高频率的进程切换，会增加了开销，且不区分任务的紧急程度\n\n    优先级调度算法:\n      根据任务的紧急程度进行调度，高优先级的先处理，低优先级的慢处理\n      如果高优先级任务很多且持续产生，那低优先级的就可能很慢才被处理\n    ```\n\n  ![](https://image.huanglei.work/mweb/2025/3/22/b834f466-e7ac-4843-b19a-d6e44c14eb2b.jpg)\n\n- 常见的线程间的调度算法是怎样的，java 是哪种\n\n    ```text\n    线程调度是指系统为线程分配CPU使用权的过程，主要分两种\n\n    协同式线程调度(分时调度模式)：线程执行时间由线程本身来控制，线程把自己的工作执行完之后，要主动通知系统切换到另外一个线程上。最大好处是实现简单，且切换操作对线程自己是可知的，没啥线程同步问题。坏处是线程执行时间不可控制，如果一个线程有问题，可能一直阻塞在那里\n\n    抢占式线程调度：每个线程将由系统来分配执行时间，线程的切换不由线程本身来决定（Java中，Thread.yield()可以让出执行时间，但无法获取执行时间）。线程执行时间系统可控，也不会有一个线程导致整个进程阻塞\n\n\n    Java线程调度就是抢占式调度,优先让可运行池中优先级高的线程占用CPU,如果可运行池中的线程优先级相同,那就随机选择一个线程\n\n    所以我们如果希望某些线程多分配一些时间，给一些线程少分配一些时间，可以通过设置线程优先级来完成。\n    JAVA的线程的优先级，以1到10的整数指定。当多个线程可以运行时，VM一般会运行最高优先级的线程（Thread.MIN_PRIORITY至Thread.MAX_PRIORITY）\n\n    在两线程同时处于就绪runnable状态时，优先级越高的线程越容易被系统选择执行。但是优先级并不是100%可以获得，只不过是机会更大而已。\n\n    有人会说，wait,notify不就是线程本身控制吗？\n    其实不是，wait是可以让出执行时间，notify后无法获取执行时间，随机等待队列里面获取而已\n    ```\n\n### 第 3 集 java 多线程里面常用的锁找你知道多少《上》\n\n- 考点：考查对常见的锁是否掌握\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 你日常开发里面用过 java 里面有哪些锁？分别解释下\n\n    ```text\n    悲观锁：当线程去操作数据的时候，总认为别的线程会去修改数据，所以它每次拿数据的时候都会上锁，别的线程去拿数据的时候就会阻塞，比如synchronized\n    乐观锁：每次去拿数据的时候都认为别人不会修改，更新的时候会判断是别人是否回去更新数据，通过版本来判断，如果数据被修改了就拒绝更新，比如CAS是乐观锁，但严格来说并不是锁，通过原子性来保证数据的同步，比如说数据库的乐观锁，通过版本控制来实现，CAS不会保证线程同步，乐观的认为在数据更新期间没有其他线程影响\n    小结：悲观锁适合写操作多的场景，乐观锁适合读操作多的场景，乐观锁的吞吐量会比悲观锁多\n\n\n    公平锁：指多个线程按照申请锁的顺序来获取锁，简单来说 如果一个线程组里，能保证每个线程都能拿到锁 比如ReentrantLock(底层是同步队列FIFO:First Input First Output来实现)\n    非公平锁：获取锁的方式是随机获取的，保证不了每个线程都能拿到锁，也就是存在有线程饿死,一直拿不到锁，比如synchronized、ReentrantLock\n    小结：非公平锁性能高于公平锁，更能重复利用CPU的时间\n\n\n    可重入锁：也叫递归锁，在外层使用锁之后，在内层仍然可以使用，并且不发生死锁\n    不可重入锁：若当前线程执行某个方法已经获取了该锁，那么在方法中尝试再次获取锁时，就会获取不到被阻塞\n    小结：可重入锁能一定程度的避免死锁 synchronized、ReentrantLock 重入锁\n\n        private void meathA(){\n            //获取锁 TODO\n            meathB();\n        }\n      \n        private void meathB(){\n            //获取锁 TODO\n            //其他操作\n        }\n\n\n    自旋锁：一个线程在获取锁的时候，如果锁已经被其它线程获取，那么该线程将循环等待，然后不断的判断锁是否能够被成功获取，直到获取到锁才会退出循环,任何时刻最多只能有一个执行单元获得锁.\n    小结：不会发生线程状态的切换，一直处于用户态，减少了线程上下文切换的消耗，缺点是循环会消耗CPU\n    常见的自旋锁：TicketLock,CLHLock,MSCLock\n    ```\n\n  ![](https://image.huanglei.work/mweb/2025/3/22/d22ed641-baba-46df-a701-fb5edd5ed628.jpg)\n\n### 第 4 集 java 多线程里面常用的锁找你知道多少《下》\n\n- 考点：考查对常见的锁是否掌握\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 你日常开发里面用过 java 里面有哪些锁？分别解释下\n\n    ```text\n    共享锁：也叫S锁/读锁，能查看但无法修改和删除的一种数据锁，加锁后其它用户可以并发读取、查询数据，但不能修改，增加，删除数据，该锁可被多个线程所持有，用于资源数据共享\n\n    互斥锁：也叫X锁/排它锁/写锁/独占锁/独享锁/ 该锁每一次只能被一个线程所持有,加锁后任何线程试图再次加锁的线程会被阻塞，直到当前线程解锁。例子：如果 线程A 对 data1 加上排他锁后，则其他线程不能再对 data1 加任何类型的锁,获得互斥锁的线程即能读数据又能修改数据\n\n    死锁：两个或两个以上的线程在执行过程中，由于竞争资源或者由于彼此通信而造成的一种阻塞的现象，若无外力作用，它们都将无法让程序进行下去\n\n    下面三种是Jvm为了提高锁的获取与释放效率而做的优化 针对Synchronized的锁升级，锁的状态是通过对象监视器在对象头中的字段来表明，是不可逆的过程，\n    偏向锁：一段同步代码一直被一个线程所访问，那么该线程会自动获取锁，获取锁的代价更低，\n    轻量级锁：当锁是偏向锁的时候，被其他线程访问，偏向锁就会升级为轻量级锁，其他线程会通过自旋的形式尝试获取锁，但不会阻塞，且性能会高点\n    重量级锁：当锁为轻量级锁的时候，其他线程虽然是自旋，但自旋不会一直循环下去，当自旋一定次数的时候且还没有获取到锁，就会进入阻塞，该锁升级为重量级锁，重量级锁会让其他申请的线程进入阻塞，性能也会降低\n\n    分段锁、行锁、表锁\n    ```\n\n  ![](https://image.huanglei.work/mweb/2025/3/22/b8287b84-f7ee-437e-94c5-87e556d4786c.jpg)\n\n### 第 5 集 上机实战之多线程里面的死锁，写一个例子并解决死锁\n\n- 考点：考查对常见的死锁是否掌握\n\n- 难度：【 \\*\\*\\* 】\n\n- 上机实战：写个多线程死锁的例子\n\n    ```text\n    线程在获得了锁A并且没有释放的情况下去申请锁B，\n    这时另一个线程已经获得了锁B，在释放锁B之前又要先获得锁A\n    因此闭环发生，陷入死锁循环\n    ```\n\n    ```java\n    /**\n     * 小滴课堂\n    * 面试专题第一季\n    *\n    */\n    public class DeadLockDemo {\n\n        private static String locka = \"locka\";\n\n        private static String lockb = \"lockb\";\n\n        public void methodA(){\n\n            synchronized (locka){\n                System.out.println(\"我是A方法中获得了锁A \"+Thread.currentThread().getName() );\n\n                //让出CPU执行权，不释放锁\n                try {\n                    Thread.sleep(2000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n\n                synchronized(lockb){\n                    System.out.println(\"我是A方法中获得了锁B \"+Thread.currentThread().getName() );\n                }\n            }\n        }\n\n        public void methodB(){\n            synchronized (lockb){\n                System.out.println(\"我是B方法中获得了锁B \"+Thread.currentThread().getName() );\n\n                //让出CPU执行权，不释放锁\n                try {\n                    Thread.sleep(2000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n\n                synchronized(locka){\n                    System.out.println(\"我是B方法中获得了锁A \"+Thread.currentThread().getName() );\n                }\n            }\n        }\n\n        public static void main(String [] args){\n\n            System.out.println(\"主线程运行开始运行：\"+Thread.currentThread().getName());\n\n            DeadLockDemo deadLockDemo = new DeadLockDemo();\n\n            new Thread(()->{\n                deadLockDemo.methodA();\n            }).start();\n\n            new Thread(()->{\n                deadLockDemo.methodB();\n            }).start();\n\n            System.out.println(\"主线程运行结束：\"+Thread.currentThread().getName());\n\n        }\n    }\n    ```\n\n- 线上经常会产生诡异的情况，有可能是死锁，且难排查！！！\n\n    ```text\n    死锁的4个必要条件\n\n    互斥条件：资源不能共享，只能由一个线程使用\n    请求与保持条件：线程已经获得一些资源，但因请求其他资源发生阻塞，对已经获得的资源保持不释放\n    不可抢占：有些资源是不可强占的，当某个线程获得这个资源后，系统不能强行回收，只能由线程使用完自己释放\n    循环等待条件：多个线程形成环形链，每个都占用对方申请的下个资源\n\n    只要发生死锁，上面的条件都成立；只要一个不满足，就不会发生死锁\n    ```\n\n- 那上面的例子怎么解决死锁，优化下代码\n\n    ```java\n    // 常见的解决办法：\n    //     调整申请锁的范围\n    //     调整申请锁的顺序\n\n    /**\n    * 小滴课堂 面试专题第一季\n    * 解决 死锁，通过调整锁的范围\n    */\n    public class FixDeadLockDemo {\n\n        private static String locka = \"locka\";\n\n        private static String lockb = \"lockb\";\n\n        public void methodA(){\n\n            synchronized (locka){\n                System.out.println(\"我是A方法中获得了锁A \"+Thread.currentThread().getName() );\n\n                //让出CPU执行权，不释放锁\n                try {\n                    Thread.sleep(2000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n\n            }\n\n            synchronized(lockb){\n                System.out.println(\"我是A方法中获得了锁B \"+Thread.currentThread().getName() );\n            }\n        }\n\n        public void methodB(){\n            synchronized (lockb){\n                System.out.println(\"我是B方法中获得了锁B \"+Thread.currentThread().getName() );\n\n                //让出CPU执行权，不释放锁\n                try {\n                    Thread.sleep(2000);\n\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n\n            }\n\n            synchronized(locka){\n                System.out.println(\"我是B方法中获得了锁A \"+Thread.currentThread().getName() );\n            }\n        }\n\n        public static void main(String [] args){\n\n            System.out.println(\"主线程运行开始运行：\"+Thread.currentThread().getName());\n\n            FixDeadLockDemo deadLockDemo = new FixDeadLockDemo();\n\n            for(int i=0; i<10;i++){\n                new Thread(()->{\n                    deadLockDemo.methodA();\n                }).start();\n\n                new Thread(()->{\n                    deadLockDemo.methodB();\n                }).start();\n            }\n\n            System.out.println(\"主线程运行结束：\"+Thread.currentThread().getName());\n\n        }\n    }\n    ```\n\n### 第 6 集 上机实战之多线程里面的不可重入锁设计\n\n- 考点：考查对常见的不可重入锁是否掌握\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 上机实战：设计一个简单的不可重入锁\n\n    ```java\n    不可重入锁：若当前线程执行某个方法已经获取了该锁，那么在方法中尝试再次获取锁时，就会获取不到被阻塞\n\n        private void methodA(){\n            //获取锁 TODO\n            methodB();\n        }\n\n        private void methodB(){\n            //获取锁 TODO\n            //其他操作\n        }\n    ```\n\n    ```java\n    /**\n    * 小滴课堂:二当家小D\n    *\n    * 不可重入锁 简单例子\n    *\n    *  不可重入锁：若当前线程执行某个方法已经获取了该锁，那么在方法中尝试再次获取锁时，就会获取不到被阻塞\n    */\n    public class UnreentrantLock {\n\n        private boolean isLocked = false;\n\n        public synchronized void lock() throws InterruptedException {\n\n            System.out.println(\"进入lock加锁 \"+Thread.currentThread().getName());\n\n            //判断是否已经被锁，如果被锁则当前请求的线程进行等待\n            while (isLocked){\n                System.out.println(\"进入wait等待 \"+Thread.currentThread().getName());\n                wait();\n            }\n            //进行加锁\n            isLocked = true;\n        }\n        public synchronized void unlock(){\n            System.out.println(\"进入unlock解锁 \"+Thread.currentThread().getName());\n            isLocked = false;\n            //唤醒对象锁池里面的一个线程\n            notify();\n        }\n    }\n\n    public class Main {\n        private UnreentrantLock unreentrantLock = new UnreentrantLock();\n        //加锁建议在try里面，解锁建议在finally\n        public void  methodA(){\n            try {\n                unreentrantLock.lock();\n                System.out.println(\"methodA方法被调用\");\n                methodB();\n            }catch (InterruptedException e){\n                e.fillInStackTrace();\n            } finally {\n                unreentrantLock.unlock();\n            }\n        }\n\n        public void methodB(){\n            try {\n                unreentrantLock.lock();\n                System.out.println(\"methodB方法被调用\");\n            }catch (InterruptedException e){\n                e.fillInStackTrace();\n            } finally {\n                unreentrantLock.unlock();\n            }\n        }\n        public static void main(String [] args){\n            //演示的是同个线程\n            new Main().methodA();\n        }\n    }\n\n    //同一个线程，重复获取锁失败，形成死锁，这个就是不可重入锁\n    ```\n\n### 第 7 集 上机实战之多线程里面的可重入锁设计\n\n- 考点：考查对常见的重入锁是否掌握\n\n- 难度：【 \\*\\*\\* 】\n\n- 上机实战：设计一个简单的可重入锁\n\n    ```java\n    可重入锁：也叫递归锁，在外层使用锁之后，在内层仍然可以使用，并且不发生死锁\n\n    /**\n    * 小滴课堂:二当家小D\n    *\n    * 可重入锁 简单例子\n    *\n    * 不可重入锁：也叫递归锁，在外层使用锁之后，在内层仍然可以使用，并且不发生死锁\n    */\n    public class ReentrantLock {\n\n        private boolean isLocked = false;\n\n        //用于记录是不是重入的线程\n        private Thread lockedOwner = null;\n\n        //累计加锁次数，加锁一次累加1，解锁一次减少1\n        private int lockedCount = 0;\n\n        public synchronized void lock() throws InterruptedException {\n\n            System.out.println(\"进入lock加锁 \"+Thread.currentThread().getName());\n\n            Thread thread = Thread.currentThread();\n\n            //判断是否是同个线程获取锁, 引用地址的比较\n            while (isLocked && lockedOwner != thread ){\n                System.out.println(\"进入wait等待 \"+Thread.currentThread().getName());\n                System.out.println(\"当前锁状态 isLocked = \"+isLocked);\n                System.out.println(\"当前count数量 lockedCount =  \"+lockedCount);\n                wait();\n            }\n\n            //进行加锁\n            isLocked = true;\n            lockedOwner = thread;\n            lockedCount++;\n        }\n        public synchronized void unlock(){\n            System.out.println(\"进入unlock解锁 \"+Thread.currentThread().getName());\n\n            Thread thread = Thread.currentThread();\n\n            //线程A加的锁，只能由线程A解锁，其他线程B不能解锁\n            if(thread == this.lockedOwner){\n                lockedCount--;\n                if(lockedCount == 0){\n                    isLocked = false;\n                    lockedOwner = null;\n                    //唤醒对象锁池里面的一个线程\n                    notify();\n                }\n            }\n        }\n    }\n\n    public class Main {\n        //private UnreentrantLock unreentrantLock = new UnreentrantLock();\n        private ReentrantLock reentrantLock = new ReentrantLock();\n\n        //加锁建议在try里面，解锁建议在finally\n        public void  methodA(){\n\n            try {\n                reentrantLock.lock();\n                System.out.println(\"methodA方法被调用\");\n                methodB();\n\n            }catch (InterruptedException e){\n                e.fillInStackTrace();\n\n            } finally {\n                reentrantLock.unlock();\n            }\n\n        }\n\n        public void methodB(){\n\n            try {\n                reentrantLock.lock();\n                System.out.println(\"methodB方法被调用\");\n\n            }catch (InterruptedException e){\n                e.fillInStackTrace();\n\n            } finally {\n                reentrantLock.unlock();\n            }\n        }\n\n        public static void main(String [] args){\n            for(int i=0 ;i<10;i++){\n                //演示的是同个线程\n                new Main().methodA();\n            }\n        }\n    }\n    ```\n\n### 第 8 集 多线程的 synchronized 了解不，新版 JDK 里面优化点\n\n- 考点：考查对常见的 synchronized 是否掌握，新版 JDK6 里面优化了什么\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 对 synchronized 了解不，能否介绍下你对 synchronized 的理解\n\n    ```text\n    synchronized是解决线程安全的问题，常用在 同步普通方法、静态方法、代码块 中\n\n    非公平、可重入\n\n    每个对象有一个锁和一个等待队列，锁只能被一个线程持有，其他需要锁的线程需要阻塞等待。锁被释放后，对象会从队列中取出一个并唤醒，唤醒哪个线程是不确定的，不保证公平性\n\n    两种形式：\n    方法：生成的字节码文件中会多一个 ACC_SYNCHRONIZED 标志位，当一个线程访问方法时，会去检查是否存在ACC_SYNCHRONIZED标识，如果存在，执行线程将先获取monitor，获取成功之后才能执行方法体，方法执行完后再释放monitor。在方法执行期间，其他任何线程都无法再获得同一个monitor对象，也叫隐式同步\n\n    代码块：加了 synchronized 关键字的代码段，生成的字节码文件会多出 monitorenter 和 monitorexit 两条指令，每个monitor维护着一个记录着拥有次数的计数器, 未被拥有的monitor的该计数器为0，当一个线程获执行monitorenter后，该计数器自增1;当同一个线程执行monitorexit指令的时候，计数器再自减1。当计数器为0的时候,monitor将被释放.也叫显式同步\n\n    两种本质上没有区别，底层都是通过monitor来实现同步, 只是方法的同步是一种隐式的方式来实现，无需通过字节码来完成\n    ```\n\n    ```text\n    查看字节码\n    javac XXX.java\n    javap -v XXX.class\n    ```\n\n- 同步方法字节码\n\n  ![](/images/后端高级工程师面试专题/d7e59ae5-029c-414f-a1cc-03b39381769d.jpg)\n\n- 同步代码块字节码\n\n  ![](/images/后端高级工程师面试专题/4af9a24b-6817-452b-a091-b4836185853d.jpg)\n\n- jdk1.6 后进行了优化，你知道哪些大的变化\n\n    ```text\n    有得到锁的资源进入Block状态,涉及到操作系统用户模式和内核模式的切换，代价比较高\n    jdk6进行了优化，增加了从偏向锁到轻量级锁再到重量级锁的过渡，但是在最终转变为重量级锁之后，性能仍然较低\n    ```\n\n  ![](/images/后端高级工程师面试专题/e1ec55ed-ae2a-4b0e-890e-b50c57022c39.jpg)\n\n### 第 9 集 高性能的 Compare and Swap 你知道多少\n\n**简介：并发编程面试核心点 CAS 考查**\n\n- 考点：考查对常见的 CAS 是否掌握\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 了解 CAS 不，能否解释下什么是 CAS\n\n    ```text\n    全称是Compare And Swap，即比较再交换，是实现并发应用到的一种技术\n    底层通过Unsafe类实现原子性操作操作包含三个操作数 —— 内存地址（V）、预期原值（A）和新值(B)。\n    如果内存位置的值与预期原值相匹配，那么处理器会自动将该位置值更新为新值 ，若果在第一轮循环中，a线程获取地址里面的值被b线程修改了，那么a线程需要自旋，到下次循环才有可能机会执行。\n    \n    CAS这个是属于乐观锁，性能较悲观锁有很大的提高\n    AtomicXXX 等原子类底层就是CAS实现，一定程度比synchonized好，因为后者是悲观锁\n    ```\n\n  ![](/images/后端高级工程师面试专题/b630acfa-7395-470d-8240-2e629e0a62a5.jpg)\n\n### 第 10 集 CAS 性能虽好, 但存在的 ABA 问题你知道不？\n\n**简介：并发编程面试核心点 CAS 常见存在的问题考查**\n\n- 考点：考查对 CAS 常见的问题是否掌握\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- CAS 会存在什么比较严重的问题？\n\n    ```text\n    1、自旋时间长CPU利用率增加，CAS里面是一个循环判断的过程，如果线程一直没有获取到状态，cpu资源会一直被占用\n    \n    2、存在ABA问题\n    ```\n\n- 能否解释下什么是 ABA 问题，怎么避免这个问题呢？\n\n    ```text\n    如果一个变量V初次读取是A值，并且在准备赋值的时候也是A值，那就能说明A值没有被修改过吗？其实是不能的，因为变量V可能被其他线程改回A值，结果就是会导致CAS操作误认为从来没被修改过，从而赋值给V\n\n    给变量加一个版本号即可，在比较的时候不仅要比较当前变量的值 还需要比较当前变量的版本号。\n    在java5中，已经提供了AtomicStampedReference来解决问题，检查当前引用是否等于预期引用，其次检查当前标志是否等于预期标志，如果都相等就会以原子的方式将引用和标志都设置为新值\n    ```\n\n  ![](https://image.huanglei.work/mweb/2025/3/22/36d8d9ba-f69b-4b25-b07c-ca294140ae70.jpg)","filePath":"src/content/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题07.md","digest":"3176fe2f059f08c7","rendered":{"html":"<section><h2 id=\"第七章-攻克必考知识点-并发编程进阶系列\">第七章 攻克必考知识点 并发编程进阶系列<a class=\"anchor\" href=\"#第七章-攻克必考知识点-并发编程进阶系列\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"第-1-集-并发编程三要素你是否知道解释例子\">第 1 集 并发编程三要素你是否知道，解释+例子<a class=\"anchor\" href=\"#第-1-集-并发编程三要素你是否知道解释例子\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介: 常见的并发编程三要素</strong></p><ul>\n<li>\n<p>考点：考查是否知道并发编程 3 要素</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>并发编程三要素是否知道，能否分别解释下，举个简单的例子</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:93ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">原子性:一个不可再被分割的颗粒，原子性指的是一个或多个操作要么全部执行成功要么全部执行失败，期间不能被中断，也不存在上下文切换，线程切换会带来原子性的问题</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int num = 1; // 原子操作</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">num++; // 非原子操作，从主内存读取num到线程工作内存，进行 +1，再把num写到主内存, 除非用原子类，即java.util.concurrent.atomic里的原子变量类</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">解决办法是可以用synchronized 或 Lock(比如ReentrantLock) 来把这个多步操作“变成”原子操作，但是volatile，前面有说到不能修饰有依赖值的情况</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">public class XdTest {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">private int num = 0;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">//使用lock，每个对象都是有锁，只有获得这个锁才可以进行对应的操作</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">Lock lock = new ReentrantLock();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">public  void add1(){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">lock.lock();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">try {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">            </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">num++;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">}finally {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">            </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">lock.unlock();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">//使用synchronized，和上述是一个操作，这个是保证方法被锁住而已，上述的是代码块被锁住</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">public synchronized void add2(){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">num++;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">解决核心思想：把一个方法或者代码块看做一个整体，保证是一个不可分割的整体</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">========================================</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">有序性: 程序执行的顺序按照代码的先后顺序执行，因为处理器可能会对指令进行重排序</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">JVM在编译java代码或者CPU执行JVM字节码时，对现有的指令进行重新排序，主要目的是优化运行效率(不改变程序结果的前提)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int a = 3 //1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int b = 4 //2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int c =5 //3</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int h = a*b*c //4</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">上面的例子 执行顺序1,2,3,4 和 2,1,3,4 结果都是一样，指令重排序可以提高执行效率，但是多线程上可能会影响结果</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">假如下面的场景，正常是顺序处理</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">//线程1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">before();//处理初始化工作，处理完成后才可以正式运行下面的run方法</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">flag = true; //标记资源处理好了，如果资源没处理好，此时程序就可能出现问题</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">//线程2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">while(flag){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">run(); //核心业务代码</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">指令重排序后，导致顺序换了，程序出现问题，且难排查</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">//线程1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">flag = true; //标记资源处理好了，如果资源没处理好，此时程序就可能出现问题</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">//线程2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">54</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">while(flag){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">55</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">run(); //核心业务代码</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">56</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">57</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">before();//处理初始化工作，处理完成后才可以正式运行下面的run方法</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">58</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">59</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">60</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">========================================</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">61</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">可见性: 一个线程A对共享变量的修改,另一个线程B能够立刻看到</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">62</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">// 线程 A 执行</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">63</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int num = 0;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">64</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">// 线程 A 执行</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">65</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">num++;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">66</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">// 线程 B 执行</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">67</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">System.out.print(\"num的值：\" + num);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">68</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">69</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">线程A执行 i++ 后再执行线程 B，线程 B可能有2个结果，可能是0和1。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">70</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">71</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">因为 i++ 在线程A中执行运算，并没有立刻更新到主内存当中，而线程B就去主内存当中读取并打印，此时打印的就是0；也可能线程A执行完成更新到主内存了,线程B的值是1。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">72</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">所以需要保证线程的可见性</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">73</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">synchronized、lock和volatile能够保证线程可见性</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-2-集-常见进程线程调度算法你是否知道\">第 2 集 常见进程/线程调度算法你是否知道<a class=\"anchor\" href=\"#第-2-集-常见进程线程调度算法你是否知道\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介: 常见的进程、线程间调度算法</strong></p><ul>\n<li>\n<p>考点：考查是否知道常见进程和线程间的调度算法</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>说下你知道的调度算法，比如进程间的调度；</p>\n<p><img src=\"https://image.huanglei.work/mweb/2025/3/22/89e65a19-6158-4f4f-ab67-1b1afd0cba4c.jpg\" alt=\"\"></p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:83ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">先来先服务调度算法：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">按照作业/进程到达的先后顺序进行调度 ，即：优先考虑在系统中等待时间最长的作业</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">排在长进程后的短进程的等待时间长，不利于短作业/进程</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">短作业优先调度算法：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">短进程/作业（要求服务时间最短）在实际情况中占有很大比例，为了使得它们优先执行</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">对长作业不友好</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">高响应比优先调度算法:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">在每次调度时，先计算各个作业的优先权：优先权=响应比=（等待时间+要求服务时间）/要求服务时间,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">因为等待时间与服务时间之和就是系统对该作业的响应时间，所以 优先权=响应比=响应时间/要求服务时间，选  择优先权高的进行服务需要计算优先权信息，增加了系统的开销</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">时间片轮转调度算法:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">轮流的为各个进程服务，让每个进程在一定时间间隔内都可以得到响应</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">由于高频率的进程切换，会增加了开销，且不区分任务的紧急程度</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">优先级调度算法:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">根据任务的紧急程度进行调度，高优先级的先处理，低优先级的慢处理</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">如果高优先级任务很多且持续产生，那低优先级的就可能很慢才被处理</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p><img src=\"https://image.huanglei.work/mweb/2025/3/22/b834f466-e7ac-4843-b19a-d6e44c14eb2b.jpg\" alt=\"\"></p>\n</li>\n<li>\n<p>常见的线程间的调度算法是怎样的，java 是哪种</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:130ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">线程调度是指系统为线程分配CPU使用权的过程，主要分两种</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">协同式线程调度(分时调度模式)：线程执行时间由线程本身来控制，线程把自己的工作执行完之后，要主动通知系统切换到另外一个线程上。最大好处是实现简单，且切换操作对线程自己是可知的，没啥线程同步问题。坏处是线程执行时间不可控制，如果一个线程有问题，可能一直阻塞在那里</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">抢占式线程调度：每个线程将由系统来分配执行时间，线程的切换不由线程本身来决定（Java中，Thread.yield()可以让出执行时间，但无法获取执行时间）。线程执行时间系统可控，也不会有一个线程导致整个进程阻塞</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">Java线程调度就是抢占式调度,优先让可运行池中优先级高的线程占用CPU,如果可运行池中的线程优先级相同,那就随机选择一个线程</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">所以我们如果希望某些线程多分配一些时间，给一些线程少分配一些时间，可以通过设置线程优先级来完成。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">JAVA的线程的优先级，以1到10的整数指定。当多个线程可以运行时，VM一般会运行最高优先级的线程（Thread.MIN_PRIORITY至Thread.MAX_PRIORITY）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">在两线程同时处于就绪runnable状态时，优先级越高的线程越容易被系统选择执行。但是优先级并不是100%可以获得，只不过是机会更大而已。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">有人会说，wait,notify不就是线程本身控制吗？</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">其实不是，wait是可以让出执行时间，notify后无法获取执行时间，随机等待队列里面获取而已</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-3-集-java-多线程里面常用的锁找你知道多少上\">第 3 集 java 多线程里面常用的锁找你知道多少《上》<a class=\"anchor\" href=\"#第-3-集-java-多线程里面常用的锁找你知道多少上\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>考点：考查对常见的锁是否掌握</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>你日常开发里面用过 java 里面有哪些锁？分别解释下</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:152ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">悲观锁：当线程去操作数据的时候，总认为别的线程会去修改数据，所以它每次拿数据的时候都会上锁，别的线程去拿数据的时候就会阻塞，比如synchronized</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">乐观锁：每次去拿数据的时候都认为别人不会修改，更新的时候会判断是别人是否回去更新数据，通过版本来判断，如果数据被修改了就拒绝更新，比如CAS是乐观锁，但严格来说并不是锁，通过原子性来保证数据的同步，比如说数据库的乐观锁，通过版本控制来实现，CAS不会保证线程同步，乐观的认为在数据更新期间没有其他线程影响</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">小结：悲观锁适合写操作多的场景，乐观锁适合读操作多的场景，乐观锁的吞吐量会比悲观锁多</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">公平锁：指多个线程按照申请锁的顺序来获取锁，简单来说 如果一个线程组里，能保证每个线程都能拿到锁 比如ReentrantLock(底层是同步队列FIFO:First Input First Output来实现)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">非公平锁：获取锁的方式是随机获取的，保证不了每个线程都能拿到锁，也就是存在有线程饿死,一直拿不到锁，比如synchronized、ReentrantLock</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">小结：非公平锁性能高于公平锁，更能重复利用CPU的时间</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">可重入锁：也叫递归锁，在外层使用锁之后，在内层仍然可以使用，并且不发生死锁</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">不可重入锁：若当前线程执行某个方法已经获取了该锁，那么在方法中尝试再次获取锁时，就会获取不到被阻塞</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">小结：可重入锁能一定程度的避免死锁 synchronized、ReentrantLock 重入锁</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">private void meathA(){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">//获取锁 TODO</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">meathB();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">private void meathB(){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">//获取锁 TODO</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">//其他操作</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">自旋锁：一个线程在获取锁的时候，如果锁已经被其它线程获取，那么该线程将循环等待，然后不断的判断锁是否能够被成功获取，直到获取到锁才会退出循环,任何时刻最多只能有一个执行单元获得锁.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">小结：不会发生线程状态的切换，一直处于用户态，减少了线程上下文切换的消耗，缺点是循环会消耗CPU</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">常见的自旋锁：TicketLock,CLHLock,MSCLock</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p><img src=\"https://image.huanglei.work/mweb/2025/3/22/d22ed641-baba-46df-a701-fb5edd5ed628.jpg\" alt=\"\"></p>\n</li>\n</ul></section><section><h3 id=\"第-4-集-java-多线程里面常用的锁找你知道多少下\">第 4 集 java 多线程里面常用的锁找你知道多少《下》<a class=\"anchor\" href=\"#第-4-集-java-多线程里面常用的锁找你知道多少下\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>考点：考查对常见的锁是否掌握</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>你日常开发里面用过 java 里面有哪些锁？分别解释下</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:139ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">共享锁：也叫S锁/读锁，能查看但无法修改和删除的一种数据锁，加锁后其它用户可以并发读取、查询数据，但不能修改，增加，删除数据，该锁可被多个线程所持有，用于资源数据共享</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">互斥锁：也叫X锁/排它锁/写锁/独占锁/独享锁/ 该锁每一次只能被一个线程所持有,加锁后任何线程试图再次加锁的线程会被阻塞，直到当前线程解锁。例子：如果 线程A 对 data1 加上排他锁后，则其他线程不能再对 data1 加任何类型的锁,获得互斥锁的线程即能读数据又能修改数据</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">死锁：两个或两个以上的线程在执行过程中，由于竞争资源或者由于彼此通信而造成的一种阻塞的现象，若无外力作用，它们都将无法让程序进行下去</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">下面三种是Jvm为了提高锁的获取与释放效率而做的优化 针对Synchronized的锁升级，锁的状态是通过对象监视器在对象头中的字段来表明，是不可逆的过程，</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">偏向锁：一段同步代码一直被一个线程所访问，那么该线程会自动获取锁，获取锁的代价更低，</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">轻量级锁：当锁是偏向锁的时候，被其他线程访问，偏向锁就会升级为轻量级锁，其他线程会通过自旋的形式尝试获取锁，但不会阻塞，且性能会高点</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">重量级锁：当锁为轻量级锁的时候，其他线程虽然是自旋，但自旋不会一直循环下去，当自旋一定次数的时候且还没有获取到锁，就会进入阻塞，该锁升级为重量级锁，重量级锁会让其他申请的线程进入阻塞，性能也会降低</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">分段锁、行锁、表锁</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p><img src=\"https://image.huanglei.work/mweb/2025/3/22/b8287b84-f7ee-437e-94c5-87e556d4786c.jpg\" alt=\"\"></p>\n</li>\n</ul></section><section><h3 id=\"第-5-集-上机实战之多线程里面的死锁写一个例子并解决死锁\">第 5 集 上机实战之多线程里面的死锁，写一个例子并解决死锁<a class=\"anchor\" href=\"#第-5-集-上机实战之多线程里面的死锁写一个例子并解决死锁\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>考点：考查对常见的死锁是否掌握</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>上机实战：写个多线程死锁的例子</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:29ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">线程在获得了锁A并且没有释放的情况下去申请锁B，</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">这时另一个线程已经获得了锁B，在释放锁B之前又要先获得锁A</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">因此闭环发生，陷入死锁循环</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:85ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">/**</span></div></div><div class=\"ec-line\" style=\"--ecIndent:1ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\"> </span></span><span style=\"--0:#616972;--1:#99A0A6\">* 小滴课堂</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">* 面试专题第一季</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">*</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">*/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">DeadLockDemo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> String locka </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"locka\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> String lockb </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"lockb\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">methodA</span><span style=\"--0:#24292E;--1:#E1E4E8\">(){</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">synchronized</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (locka){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"我是A方法中获得了锁A \"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">() );</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#616972;--1:#99A0A6\">//让出CPU执行权，不释放锁</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">sleep</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">2000</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">catch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (InterruptedException </span><span style=\"--0:#AE4B07;--1:#FFAB70\">e</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">e.</span><span style=\"--0:#6F42C1;--1:#B392F0\">printStackTrace</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">synchronized</span><span style=\"--0:#24292E;--1:#E1E4E8\">(lockb){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"我是A方法中获得了锁B \"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">() );</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">methodB</span><span style=\"--0:#24292E;--1:#E1E4E8\">(){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">synchronized</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (lockb){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"我是B方法中获得了锁B \"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">() );</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#616972;--1:#99A0A6\">//让出CPU执行权，不释放锁</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">sleep</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">2000</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">catch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (InterruptedException </span><span style=\"--0:#AE4B07;--1:#FFAB70\">e</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">e.</span><span style=\"--0:#6F42C1;--1:#B392F0\">printStackTrace</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">synchronized</span><span style=\"--0:#24292E;--1:#E1E4E8\">(locka){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"我是B方法中获得了锁A \"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">() );</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">String</span><span style=\"--0:#24292E;--1:#E1E4E8\"> [] </span><span style=\"--0:#AE4B07;--1:#FFAB70\">args</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"主线程运行开始运行：\"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">DeadLockDemo deadLockDemo </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">DeadLockDemo</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">Thread</span><span style=\"--0:#24292E;--1:#E1E4E8\">(()</span><span style=\"--0:#BF3441;--1:#F97583\">-></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">54</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">deadLockDemo.</span><span style=\"--0:#6F42C1;--1:#B392F0\">methodA</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">55</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}).</span><span style=\"--0:#6F42C1;--1:#B392F0\">start</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">56</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">57</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">Thread</span><span style=\"--0:#24292E;--1:#E1E4E8\">(()</span><span style=\"--0:#BF3441;--1:#F97583\">-></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">58</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">deadLockDemo.</span><span style=\"--0:#6F42C1;--1:#B392F0\">methodB</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">59</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}).</span><span style=\"--0:#6F42C1;--1:#B392F0\">start</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">60</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">61</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"主线程运行结束：\"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">62</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">63</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">64</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>线上经常会产生诡异的情况，有可能是死锁，且难排查！！！</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:50ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">死锁的4个必要条件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">互斥条件：资源不能共享，只能由一个线程使用</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">请求与保持条件：线程已经获得一些资源，但因请求其他资源发生阻塞，对已经获得的资源保持不释放</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">不可抢占：有些资源是不可强占的，当某个线程获得这个资源后，系统不能强行回收，只能由线程使用完自己释放</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">循环等待条件：多个线程形成环形链，每个都占用对方申请的下个资源</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">只要发生死锁，上面的条件都成立；只要一个不满足，就不会发生死锁</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>那上面的例子怎么解决死锁，优化下代码</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:81ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 常见的解决办法：</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">//     调整申请锁的范围</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">//     调整申请锁的顺序</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">/**</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">* 小滴课堂 面试专题第一季</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">* 解决 死锁，通过调整锁的范围</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">*/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">FixDeadLockDemo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> String locka </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"locka\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> String lockb </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"lockb\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">methodA</span><span style=\"--0:#24292E;--1:#E1E4E8\">(){</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">synchronized</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (locka){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"我是A方法中获得了锁A \"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">() );</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#616972;--1:#99A0A6\">//让出CPU执行权，不释放锁</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">sleep</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">2000</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">catch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (InterruptedException </span><span style=\"--0:#AE4B07;--1:#FFAB70\">e</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">e.</span><span style=\"--0:#6F42C1;--1:#B392F0\">printStackTrace</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">synchronized</span><span style=\"--0:#24292E;--1:#E1E4E8\">(lockb){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"我是A方法中获得了锁B \"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">() );</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">methodB</span><span style=\"--0:#24292E;--1:#E1E4E8\">(){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">synchronized</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (lockb){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"我是B方法中获得了锁B \"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">() );</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#616972;--1:#99A0A6\">//让出CPU执行权，不释放锁</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">sleep</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">2000</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">catch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (InterruptedException </span><span style=\"--0:#AE4B07;--1:#FFAB70\">e</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">e.</span><span style=\"--0:#6F42C1;--1:#B392F0\">printStackTrace</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">synchronized</span><span style=\"--0:#24292E;--1:#E1E4E8\">(locka){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"我是B方法中获得了锁A \"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">() );</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">String</span><span style=\"--0:#24292E;--1:#E1E4E8\"> [] </span><span style=\"--0:#AE4B07;--1:#FFAB70\">args</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">54</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">55</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"主线程运行开始运行：\"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">56</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">57</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">FixDeadLockDemo deadLockDemo </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">FixDeadLockDemo</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">58</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">59</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> i</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">; i</span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\">;i</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">60</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">Thread</span><span style=\"--0:#24292E;--1:#E1E4E8\">(()</span><span style=\"--0:#BF3441;--1:#F97583\">-></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">61</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">deadLockDemo.</span><span style=\"--0:#6F42C1;--1:#B392F0\">methodA</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">62</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}).</span><span style=\"--0:#6F42C1;--1:#B392F0\">start</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">63</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">64</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">Thread</span><span style=\"--0:#24292E;--1:#E1E4E8\">(()</span><span style=\"--0:#BF3441;--1:#F97583\">-></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">65</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">deadLockDemo.</span><span style=\"--0:#6F42C1;--1:#B392F0\">methodB</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">66</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}).</span><span style=\"--0:#6F42C1;--1:#B392F0\">start</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">67</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">68</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">69</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"主线程运行结束：\"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">70</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">71</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">72</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-6-集-上机实战之多线程里面的不可重入锁设计\">第 6 集 上机实战之多线程里面的不可重入锁设计<a class=\"anchor\" href=\"#第-6-集-上机实战之多线程里面的不可重入锁设计\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>考点：考查对常见的不可重入锁是否掌握</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>上机实战：设计一个简单的不可重入锁</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:49ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">不可重入锁：若当前线程执行某个方法已经获取了该锁，那么在方法中尝试再次获取锁时，就会获取不到被阻塞</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">methodA</span><span style=\"--0:#24292E;--1:#E1E4E8\">(){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//获取锁 TODO</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#6F42C1;--1:#B392F0\">methodB</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">methodB</span><span style=\"--0:#24292E;--1:#E1E4E8\">(){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//获取锁 TODO</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//其他操作</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:77ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">/**</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">* 小滴课堂:二当家小D</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">*</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">* 不可重入锁 简单例子</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">*</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">*  不可重入锁：若当前线程执行某个方法已经获取了该锁，那么在方法中尝试再次获取锁时，就会获取不到被阻塞</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">*/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">UnreentrantLock</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">boolean</span><span style=\"--0:#24292E;--1:#E1E4E8\"> isLocked </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">false</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">synchronized</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">lock</span><span style=\"--0:#24292E;--1:#E1E4E8\">() </span><span style=\"--0:#BF3441;--1:#F97583\">throws</span><span style=\"--0:#24292E;--1:#E1E4E8\"> InterruptedException {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"进入lock加锁 \"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//判断是否已经被锁，如果被锁则当前请求的线程进行等待</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (isLocked){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"进入wait等待 \"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#6F42C1;--1:#B392F0\">wait</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//进行加锁</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">isLocked </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">true</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">synchronized</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">unlock</span><span style=\"--0:#24292E;--1:#E1E4E8\">(){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"进入unlock解锁 \"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">isLocked </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">false</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//唤醒对象锁池里面的一个线程</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#6F42C1;--1:#B392F0\">notify</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">Main</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> UnreentrantLock unreentrantLock </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">UnreentrantLock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">//加锁建议在try里面，解锁建议在finally</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">methodA</span><span style=\"--0:#24292E;--1:#E1E4E8\">(){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">unreentrantLock.</span><span style=\"--0:#6F42C1;--1:#B392F0\">lock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"methodA方法被调用\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#6F42C1;--1:#B392F0\">methodB</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span><span style=\"--0:#BF3441;--1:#F97583\">catch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (InterruptedException </span><span style=\"--0:#AE4B07;--1:#FFAB70\">e</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">e.</span><span style=\"--0:#6F42C1;--1:#B392F0\">fillInStackTrace</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">finally</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">unreentrantLock.</span><span style=\"--0:#6F42C1;--1:#B392F0\">unlock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">methodB</span><span style=\"--0:#24292E;--1:#E1E4E8\">(){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">unreentrantLock.</span><span style=\"--0:#6F42C1;--1:#B392F0\">lock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"methodB方法被调用\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span><span style=\"--0:#BF3441;--1:#F97583\">catch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (InterruptedException </span><span style=\"--0:#AE4B07;--1:#FFAB70\">e</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">e.</span><span style=\"--0:#6F42C1;--1:#B392F0\">fillInStackTrace</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">finally</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">54</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">unreentrantLock.</span><span style=\"--0:#6F42C1;--1:#B392F0\">unlock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">55</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">56</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">57</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">String</span><span style=\"--0:#24292E;--1:#E1E4E8\"> [] </span><span style=\"--0:#AE4B07;--1:#FFAB70\">args</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">58</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//演示的是同个线程</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">59</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">Main</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">methodA</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">60</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">61</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">62</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">63</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">//同一个线程，重复获取锁失败，形成死锁，这个就是不可重入锁</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-7-集-上机实战之多线程里面的可重入锁设计\">第 7 集 上机实战之多线程里面的可重入锁设计<a class=\"anchor\" href=\"#第-7-集-上机实战之多线程里面的可重入锁设计\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>考点：考查对常见的重入锁是否掌握</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>上机实战：设计一个简单的可重入锁</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:77ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">可重入锁：也叫递归锁，在外层使用锁之后，在内层仍然可以使用，并且不发生死锁</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">/**</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">* 小滴课堂:二当家小D</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">*</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">* 可重入锁 简单例子</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">*</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">* 不可重入锁：也叫递归锁，在外层使用锁之后，在内层仍然可以使用，并且不发生死锁</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">*/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ReentrantLock</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">boolean</span><span style=\"--0:#24292E;--1:#E1E4E8\"> isLocked </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">false</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">//用于记录是不是重入的线程</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Thread lockedOwner </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">null</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">//累计加锁次数，加锁一次累加1，解锁一次减少1</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> lockedCount </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">synchronized</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">lock</span><span style=\"--0:#24292E;--1:#E1E4E8\">() </span><span style=\"--0:#BF3441;--1:#F97583\">throws</span><span style=\"--0:#24292E;--1:#E1E4E8\"> InterruptedException {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"进入lock加锁 \"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread thread </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//判断是否是同个线程获取锁, 引用地址的比较</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (isLocked </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> lockedOwner </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> thread ){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"进入wait等待 \"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"当前锁状态 isLocked = \"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">isLocked);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"当前count数量 lockedCount =  \"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">lockedCount);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#6F42C1;--1:#B392F0\">wait</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//进行加锁</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">isLocked </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">true</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">lockedOwner </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> thread;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">lockedCount</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">synchronized</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">unlock</span><span style=\"--0:#24292E;--1:#E1E4E8\">(){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"进入unlock解锁 \"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread thread </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//线程A加的锁，只能由线程A解锁，其他线程B不能解锁</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\">(thread </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">this</span><span style=\"--0:#24292E;--1:#E1E4E8\">.lockedOwner){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">lockedCount</span><span style=\"--0:#BF3441;--1:#F97583\">--</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\">(lockedCount </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">isLocked </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">false</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">lockedOwner </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">null</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\"><span class=\"indent\">                </span><span style=\"--0:#616972;--1:#99A0A6\">//唤醒对象锁池里面的一个线程</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span class=\"indent\">                </span><span style=\"--0:#6F42C1;--1:#B392F0\">notify</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">54</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">55</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">56</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">57</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">Main</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">58</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">//private UnreentrantLock unreentrantLock = new UnreentrantLock();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">59</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ReentrantLock reentrantLock </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ReentrantLock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">60</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">61</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">//加锁建议在try里面，解锁建议在finally</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">62</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">methodA</span><span style=\"--0:#24292E;--1:#E1E4E8\">(){</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">63</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">64</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">65</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">reentrantLock.</span><span style=\"--0:#6F42C1;--1:#B392F0\">lock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">66</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"methodA方法被调用\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">67</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#6F42C1;--1:#B392F0\">methodB</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">68</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">69</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span><span style=\"--0:#BF3441;--1:#F97583\">catch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (InterruptedException </span><span style=\"--0:#AE4B07;--1:#FFAB70\">e</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">70</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">e.</span><span style=\"--0:#6F42C1;--1:#B392F0\">fillInStackTrace</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">71</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">72</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">finally</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">73</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">reentrantLock.</span><span style=\"--0:#6F42C1;--1:#B392F0\">unlock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">74</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">75</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">76</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">77</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">78</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">methodB</span><span style=\"--0:#24292E;--1:#E1E4E8\">(){</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">79</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">80</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">81</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">reentrantLock.</span><span style=\"--0:#6F42C1;--1:#B392F0\">lock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">82</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"methodB方法被调用\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">83</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">84</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span><span style=\"--0:#BF3441;--1:#F97583\">catch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (InterruptedException </span><span style=\"--0:#AE4B07;--1:#FFAB70\">e</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">85</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">e.</span><span style=\"--0:#6F42C1;--1:#B392F0\">fillInStackTrace</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">86</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">87</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">finally</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">88</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">reentrantLock.</span><span style=\"--0:#6F42C1;--1:#B392F0\">unlock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">89</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">90</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">91</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">92</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">String</span><span style=\"--0:#24292E;--1:#E1E4E8\"> [] </span><span style=\"--0:#AE4B07;--1:#FFAB70\">args</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">93</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> i</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ;i</span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\">;i</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">94</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#616972;--1:#99A0A6\">//演示的是同个线程</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">95</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">Main</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">methodA</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">96</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">97</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">98</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-8-集-多线程的-synchronized-了解不新版-jdk-里面优化点\">第 8 集 多线程的 synchronized 了解不，新版 JDK 里面优化点<a class=\"anchor\" href=\"#第-8-集-多线程的-synchronized-了解不新版-jdk-里面优化点\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>考点：考查对常见的 synchronized 是否掌握，新版 JDK6 里面优化了什么</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>对 synchronized 了解不，能否介绍下你对 synchronized 的理解</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:210ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">synchronized是解决线程安全的问题，常用在 同步普通方法、静态方法、代码块 中</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">非公平、可重入</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">每个对象有一个锁和一个等待队列，锁只能被一个线程持有，其他需要锁的线程需要阻塞等待。锁被释放后，对象会从队列中取出一个并唤醒，唤醒哪个线程是不确定的，不保证公平性</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">两种形式：</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">方法：生成的字节码文件中会多一个 ACC_SYNCHRONIZED 标志位，当一个线程访问方法时，会去检查是否存在ACC_SYNCHRONIZED标识，如果存在，执行线程将先获取monitor，获取成功之后才能执行方法体，方法执行完后再释放monitor。在方法执行期间，其他任何线程都无法再获得同一个monitor对象，也叫隐式同步</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">代码块：加了 synchronized 关键字的代码段，生成的字节码文件会多出 monitorenter 和 monitorexit 两条指令，每个monitor维护着一个记录着拥有次数的计数器, 未被拥有的monitor的该计数器为0，当一个线程获执行monitorenter后，该计数器自增1;当同一个线程执行monitorexit指令的时候，计数器再自减1。当计数器为0的时候,monitor将被释放.也叫显式同步</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">两种本质上没有区别，底层都是通过monitor来实现同步, 只是方法的同步是一种隐式的方式来实现，无需通过字节码来完成</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:18ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">查看字节码</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">javac XXX.java</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">javap -v XXX.class</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>同步方法字节码</p>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/d7e59ae5-029c-414f-a1cc-03b39381769d.jpg\" alt=\"\"></p>\n</li>\n<li>\n<p>同步代码块字节码</p>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/4af9a24b-6817-452b-a091-b4836185853d.jpg\" alt=\"\"></p>\n</li>\n<li>\n<p>jdk1.6 后进行了优化，你知道哪些大的变化</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:53ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">有得到锁的资源进入Block状态,涉及到操作系统用户模式和内核模式的切换，代价比较高</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">jdk6进行了优化，增加了从偏向锁到轻量级锁再到重量级锁的过渡，但是在最终转变为重量级锁之后，性能仍然较低</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/e1ec55ed-ae2a-4b0e-890e-b50c57022c39.jpg\" alt=\"\"></p>\n</li>\n</ul></section><section><h3 id=\"第-9-集-高性能的-compare-and-swap-你知道多少\">第 9 集 高性能的 Compare and Swap 你知道多少<a class=\"anchor\" href=\"#第-9-集-高性能的-compare-and-swap-你知道多少\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：并发编程面试核心点 CAS 考查</strong></p><ul>\n<li>\n<p>考点：考查对常见的 CAS 是否掌握</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>了解 CAS 不，能否解释下什么是 CAS</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:90ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">全称是Compare And Swap，即比较再交换，是实现并发应用到的一种技术</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">底层通过Unsafe类实现原子性操作操作包含三个操作数 —— 内存地址（V）、预期原值（A）和新值(B)。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">如果内存位置的值与预期原值相匹配，那么处理器会自动将该位置值更新为新值 ，若果在第一轮循环中，a线程获取地址里面的值被b线程修改了，那么a线程需要自旋，到下次循环才有可能机会执行。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">CAS这个是属于乐观锁，性能较悲观锁有很大的提高</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">AtomicXXX 等原子类底层就是CAS实现，一定程度比synchonized好，因为后者是悲观锁</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/b630acfa-7395-470d-8240-2e629e0a62a5.jpg\" alt=\"\"></p>\n</li>\n</ul></section><section><h3 id=\"第-10-集-cas-性能虽好-但存在的-aba-问题你知道不\">第 10 集 CAS 性能虽好, 但存在的 ABA 问题你知道不？<a class=\"anchor\" href=\"#第-10-集-cas-性能虽好-但存在的-aba-问题你知道不\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：并发编程面试核心点 CAS 常见存在的问题考查</strong></p><ul>\n<li>\n<p>考点：考查对 CAS 常见的问题是否掌握</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>CAS 会存在什么比较严重的问题？</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:57ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1、自旋时间长CPU利用率增加，CAS里面是一个循环判断的过程，如果线程一直没有获取到状态，cpu资源会一直被占用</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">2、存在ABA问题</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>能否解释下什么是 ABA 问题，怎么避免这个问题呢？</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:98ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">如果一个变量V初次读取是A值，并且在准备赋值的时候也是A值，那就能说明A值没有被修改过吗？其实是不能的，因为变量V可能被其他线程改回A值，结果就是会导致CAS操作误认为从来没被修改过，从而赋值给V</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">给变量加一个版本号即可，在比较的时候不仅要比较当前变量的值 还需要比较当前变量的版本号。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">在java5中，已经提供了AtomicStampedReference来解决问题，检查当前引用是否等于预期引用，其次检查当前标志是否等于预期标志，如果都相等就会以原子的方式将引用和标志都设置为新值</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p><img src=\"https://image.huanglei.work/mweb/2025/3/22/36d8d9ba-f69b-4b25-b07c-ca294140ae70.jpg\" alt=\"\"></p>\n</li>\n</ul></section></section>","metadata":{"headings":[{"depth":2,"slug":"第七章-攻克必考知识点-并发编程进阶系列","text":"第七章 攻克必考知识点 并发编程进阶系列#"},{"depth":3,"slug":"第-1-集-并发编程三要素你是否知道解释例子","text":"第 1 集 并发编程三要素你是否知道，解释+例子#"},{"depth":3,"slug":"第-2-集-常见进程线程调度算法你是否知道","text":"第 2 集 常见进程/线程调度算法你是否知道#"},{"depth":3,"slug":"第-3-集-java-多线程里面常用的锁找你知道多少上","text":"第 3 集 java 多线程里面常用的锁找你知道多少《上》#"},{"depth":3,"slug":"第-4-集-java-多线程里面常用的锁找你知道多少下","text":"第 4 集 java 多线程里面常用的锁找你知道多少《下》#"},{"depth":3,"slug":"第-5-集-上机实战之多线程里面的死锁写一个例子并解决死锁","text":"第 5 集 上机实战之多线程里面的死锁，写一个例子并解决死锁#"},{"depth":3,"slug":"第-6-集-上机实战之多线程里面的不可重入锁设计","text":"第 6 集 上机实战之多线程里面的不可重入锁设计#"},{"depth":3,"slug":"第-7-集-上机实战之多线程里面的可重入锁设计","text":"第 7 集 上机实战之多线程里面的可重入锁设计#"},{"depth":3,"slug":"第-8-集-多线程的-synchronized-了解不新版-jdk-里面优化点","text":"第 8 集 多线程的 synchronized 了解不，新版 JDK 里面优化点#"},{"depth":3,"slug":"第-9-集-高性能的-compare-and-swap-你知道多少","text":"第 9 集 高性能的 Compare and Swap 你知道多少#"},{"depth":3,"slug":"第-10-集-cas-性能虽好-但存在的-aba-问题你知道不","text":"第 10 集 CAS 性能虽好, 但存在的 ABA 问题你知道不？#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"后端高级工程师面试专题07","published":"2025-11-07T00:00:00.000Z","pinned":false,"description":"第七章 攻克必考知识点 并发编程进阶系列","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":29,"words":5841,"excerpt":"简介: 常见的并发编程三要素"},"imagePaths":[]}},"collection":"posts"}],"2025-11-06":[{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题06","data":{"title":"后端高级工程师面试专题06","published":"2025-11-06T00:00:00.000Z","draft":false,"description":"第六章 面试必备知识之玩转并发编程技术点","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"后端高级工程师面试专题05","prevSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题05","nextTitle":"后端高级工程师面试专题07","nextSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题07"},"body":"## 第六章 面试必备知识之玩转并发编程技术点\n\n### 第 1 集 多年开发经验的你是否知道线程+进程+协程的区别\n\n**简介：是否掌握线程、进程、协程的区别**\n\n- 考点：是否掌握线程、进程、协程的区别\n\n- 难度【 \\*\\*\\* 】\n\n- 能否解释下什么是进程、线程、协程，他们之间的关系是怎样的\n\n    ```text\n    答案：\n    进程: 本质上是一个独立执行的程序，进程是操作系统进行资源分配和调度的基本概念，操作系统进行资源分配和调度的一个独立单位\n\n    线程:是操作系统能够进行运算调度的最小单位。它被包含在进程之中，是进程中的实际运作单位。一个进程中可以并发多个线程，每条线程执行不同的任务，切换受系统控制。\n\n    协程: 又称为微线程，是一种用户态的轻量级线程，协程不像线程和进程需要进行系统内核上的上下文切换，协程的上下文切换是由用户自己决定的，有自己的上下文，所以说是轻量级的线程，也称之为用户级别的线程就叫协程，一个线程可以多个协程,线程进程都是同步机制，而协程则是异步\n    Java的原生语法中并没有实现协程,目前python、Lua和GO等语言支持\n\n    关系：一个进程可以有多个线程，它允许计算机同时运行两个或多个程序。线程是进程的最小执行单位，CPU的调度切换的是进程和线程，进程和线程多了之后调度会消耗大量的CPU，CPU上真正运行的是线程，线程可以对应多个协程\n    ```\n\n- 协程对于多线程有什么优缺点吗\n\n- 难度【 \\*\\*\\* 】\n\n    ```text\n    优点：\n      非常快速的上下文切换，不用系统内核的上下文切换，减小开销\n      单线程即可实现高并发，单核CPU可以支持上万的协程\n      由于只有一个线程，也不存在同时写变量的冲突，在协程中控制共享资源不需要加锁\n    \n    缺点：\n      协程无法利用多核资源，本质也是个单线程\n      协程需要和进程配合才能运行在多CPU上\n      目前java没成熟的第三方库，存在风险\n      调试debug存在难度，不利于发现问题\n    ```\n\n### 第 2 集 多年开发经验的你是否可以清晰表达 并发、并行的区别\n\n**简介：是否清晰表达并发+并行的区别**\n\n- 考点：计算机基础并发、并行概念\n\n- 难度【 \\*\\* 】\n\n- 说下并发和并行的区别，举些例子说下\n\n    ```text\n    并发 concurrency：\n    一台处理器上同时处理任务, 这个同时实际上是交替处理多个任务，程序中可以同时拥有两个或者多个线程，当有多个线程在操作时,如果系统只有一个CPU,则它根本不可能真正同时进行一个以上的线程,它只能把CPU运行时间划分成若干个时间段,再将时间段分配给各个线程执行\n\n    并行 parallellism：\n      多个CPU上同时处理多个任务，一个CPU执行一个进程时，另一个CPU可以执行另一个进程，两个进程互不抢占CPU资源，可以同时进行\n\n    并发指在一段时间内宏观上去处理多个任务。  并行指同一个时刻，多个任务确实真的同时运行。\n\n    例子：\n    并发是一心多用，听课和看电影，但是CPU大脑只有一个，所以轮着来\n    并行：火影忍者中的影分身，有多个你出现，可以分别做不同的事情\n\n    一个项目经理A和3个程序B C D的故事\n    单线程\n    并发：A给B讲完需求，B自己去实现，期间A继续给C和D讲，不用等待某个程序员去完成，期间项目经理没空闲下来\n    并行：直接找3个项目经理分别分配给3个程序员\n    ```\n\n### 第 3 集 新版 Java 多线程的实现方式你知道多少《上》\n\n**简介: Java 多线程的实现方式和区别**\n\n- 考点：java 多线程基础知识\n\n- 难度：【 \\*\\*\\* 】\n\n- 你知道 java 里面实现多线程有哪几种方式，有什么不同，比较常用哪种\n\n  - 继承 Thread\n\n      ```java\n      // 继承Thread，重写里面run方法，创建实例，执行start\n\n      // 优点：代码编写最简单直接操作\n      // 缺点：没返回值，继承一个类后，没法继承其他的类，拓展性差\n\n      public class ThreadDemo1 extends Thread {\n          @Override\n          public void run() {\n              System.out.println(\"继承Thread实现多线程，名称：\"+Thread.currentThread().getName());\n          }\n      }\n\n      public static void main(String[] args) {\n\n            ThreadDemo1 threadDemo1 = new ThreadDemo1();\n            threadDemo1.setName(\"demo1\");\n            threadDemo1.start();\n            System.out.println(\"主线程名称：\"+Thread.currentThread().getName());\n\n      }\n      ```\n\n  - 实现 Runnable\n\n      ```java\n      // 自定义类实现Runnable，实现里面run方法，创建Thread类，使用Runnable接口的实现对象作为参数传递给Thread对象，调用Strat方法\n      \n      // 优点：线程类可以实现多个几接口，可以再继承一个类\n      // 缺点：没返回值，不能直接启动，需要通过构造一个Thread实例传递进去启动\n\n      public class ThreadDemo2 implements Runnable {\n      \n          @Override\n          public void run() {\n              System.out.println(\"通过Runnable实现多线程，名称：\"+Thread.currentThread().getName());\n          }\n      }\n\n      public static void main(String[] args) {\n              ThreadDemo2 threadDemo2 = new ThreadDemo2();\n              Thread thread = new Thread(threadDemo2);\n              thread.setName(\"demo2\");\n              thread.start();\n              System.out.println(\"主线程名称：\"+Thread.currentThread().getName());\n      }\n\n      // JDK8之后采用lambda表达式\n      public static void main(String[] args) {\n          Thread thread = new Thread(()->{\n                      System.out.println(\"通过Runnable实现多线程，名称：\"+Thread.currentThread().getName());\n                  });\n          thread.setName(\"demo2\");\n          thread.start();\n          System.out.println(\"主线程名称：\"+Thread.currentThread().getName());\n      }\n      ```\n\n### 第 4 集 新版 Java 多线程的实现方式你知道多少《下》\n\n**简介: Java 多线程的实现方式和区别**\n\n- 考点：java 多线程基础知识\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 你知道 java 里面实现多线程有哪几种方式，有什么不同，比较常用哪种\n\n  - 通过 Callable 和 FutureTask 方式\n\n      ```java\n      // 创建callable接口的实现类，并实现call方法，结合FutureTask类包装Callable对象，实现多线程\n\n      // 优点：有返回值，拓展性也高\n      // 缺点：jdk5以后才支持，需要重写call方法，结合多个类比如FutureTask和Thread类\n\n      public class MyTask implements Callable<Object> {\n          @Override\n          public Object call() throws Exception {\n      \n              System.out.println(\"通过Callable实现多线程，名称：\"+Thread.currentThread().getName());\n      \n              return \"这是返回值\";\n          }\n      }\n      \n      public static void main(String[] args) {\n\n              FutureTask<Object> futureTask = new FutureTask<>(()->{\n                  System.out.println(\"通过Callable实现多线程，名称：\"+Thread.currentThread().getName());\n                  return \"这是返回值\";\n              });\n\n\n      //        MyTask myTask = new MyTask();\n      //        FutureTask<Object> futureTask = new FutureTask<>(myTask);\n      \n              //FutureTask继承了Runnable，可以放在Thread中启动执行\n              Thread thread = new Thread(futureTask);\n              thread.setName(\"demo3\");\n              thread.start();\n              System.out.println(\"主线程名称:\"+Thread.currentThread().getName());\n      \n              try {\n      \n                  System.out.println(futureTask.get());\n      \n              } catch (InterruptedException e) {\n                  //阻塞等待中被中断，则抛出\n                  e.printStackTrace();\n              } catch (ExecutionException e) {\n      \n                  //执行过程发送异常被抛出\n                  e.printStackTrace();\n              }\n\n          }\n      ```\n\n  - 通过线程池创建线程\n\n      ```java\n      // 自定义Runnable接口，实现run方法，创建线程池，调用执行方法并传入对象\n\n      // 优点：安全高性能，复用线程\n      // 缺点: jdk5后才支持，需要结合Runnable进行使用\n\n      public class ThreadDemo4 implements Runnable {\n      \n          @Override\n          public void run() {\n              System.out.println(\"通过线程池+runnable实现多线程，名称：\"+Thread.currentThread().getName());\n          }\n      }\n\n      public static void main(String[] args) {\n              ExecutorService executorService = Executors.newFixedThreadPool(3);\n      \n              for(int i=0;i<10;i++){\n                  executorService.execute(new ThreadDemo4());\n              }\n\n              System.out.println(\"主线程名称:\"+Thread.currentThread().getName());\n      \n              //关闭线程池\n              executorService.shutdown();\n      }\n      ```\n\n-  一般常用的 Runnable 和 第四种线程池 + Runnable，简单方便扩展，和高性能 (池化的思想)\n\n### 第 5 集 新版 Java 线程的状态你知道多少？\n\n**简介：线程有几种状态有哪些，分别解释下**\n\n- 考点：是否掌握线程常见的状态\n\n- 难度：【 \\*\\* 】\n\n- java 线程常见的基本状态有哪些，这些状态分别是做什么的\n\n    ```text\n    JDK的线程状态分6种，JVM里面9种，我们一般说JDK的线程状态\n    \n    常见的5种状态\n    \n    创建(NEW): 生成线程对象，但是并没有调用该对象start(), new Thread()\n    \n    就绪(Runnable)：当调用线程对象的start()方法，线程就进入就绪状态，但是此刻线程调度还没把该线程设置为当前线程，就是没获得CPU使用权。   如果线程运行后，从等待或者睡眠中回来之后，也会进入就绪状态\n      注意:有些文档把就绪和运行两种状态统一称为 “运行中”\n    \n    运行(Running)\n      程序将处于就绪状态的线程设置为当前线程，即获得CPU使用权，这个时候线程进入运行状态，开始运行run里面的逻辑\n    \n    阻塞(Blocked)\n      等待阻塞：进入该状态的线程需要等待其他线程作出一定动作(通知或中断)，这种状态的话CPU不会分配过来，他们需要被唤醒，可能也会无限等待下去。比如调用wait(状态就会变成WAITING状态)，也可能通过调用sleep(状态就会变成TIMED_WAITING), join或者发出IO请求，阻塞结束后线程重新进入就绪状态\n    \n      同步阻塞：线程在获取synchronized同步锁失败，即锁被其他线程占用，它就会进入同步阻塞状态\n    \n      备注：相关资料会用细分下面的状态\n          等待(WAITING)：进入该状态的线程需要等待其他线程做出一些特定动作（通知或中断）。\n            超时等待(TIMED_WAITING)：该状态不同于WAITING，它可以在指定的时间后自行返回\n\n    死亡(TERMINATED):一个线程run方法执行结束，该线程就死亡了，不能进入就绪状态\n    ```\n\n### 第 6 集 新版 Java 线程的常见方法你知道多少？\n\n**简介：线程有几种状态,他们转化关系是怎样的**\n\n- 考点：常见线程的 api 操作是否熟悉\n\n- 难度：【 \\*\\* 】\n\n- 是否了解多线程开发里面常用的方法，sleep/yield/join wait/notify/notifyAll, 分别解释下\n\n    ```text\n    sleep\n      属于线程Thread的方法\n      让线程暂缓执行，等待预计时间之后再恢复\n      交出CPU使用权，不会释放锁\n      进入阻塞状态TIME_WAITGING，睡眠结束变为就绪Runnable\n\n    yield\n      属于线程Thread的方法\n      t1/t2/t3\n      暂停当前线程的对象，去执行其他线程\n      交出CPU使用权，不会释放锁，和sleep类似\n      作用：让相同优先级的线程轮流执行，但是不保证一定轮流\n      注意：不会让线程进入阻塞状态，直接变为就绪Runnable，只需要重新获得CPU使用权\n\n\n    join\n      属于线程Thread的方法\n      在主线程上运行调用该方法，会让主线程休眠，不会释放已经持有的对象锁\n      让调用join方法的线程先执行完毕，在执行其他线程\n      类似让救护车警车优先通过\n\n    wait\n      属于Object的方法\n      当前线程调用对象的wait方法，会释放锁，进入线程的等待队列\n      需要依靠notify或者notifyAll唤醒，或者wait(timeout)时间自动唤醒\n\n    notify\n      属于Object的方法\n      唤醒在对象监视器上等待的单个线程，选择是任意的\n\n    notifyAll\n      属于Object的方法\n      唤醒在对象监视器上等待的全部线程\n    ```\n\n### 第 7 集 新版 Java 线程的状态转换流程图你会画不\n\n**简介：线程有几种状态和 API，画出转换流程图**\n\n- 考点：常见线程状态和 API 结合考查\n\n- 难度：【 \\*\\*\\*\\* 】\n\n- 看来挺熟悉多线程的，那你画下线程的状态转换图和这些转换过程常用的 api 也标记下\n\n  ![](https://image.huanglei.work/mweb/2025/3/22/89637b63-7472-492d-8ffd-5e3861b8cd96.jpg)\n\n### 第 8 集 新版 Java 并发编程核心知识点掌握多少《一》\n\n**简介：并发编程常见知识点考查**\n\n- 考点：并发编程常见知识点考查\n\n- 难度：【 \\*\\*\\* 】\n\n- 平时业务代码里面使用过多线程吗，能举例几个多线程的业务场景吗？\n\n    ```text\n    异步任务：用户注册、记录日志\n    定时任务：定期备份日志、备份数据库\n    分布式计算：Hadoop处理任务mapreduce，master-wark(单机单进程)\n    服务器编程：Socket网络编程，一个连接一个线程\n    ```\n\n- 能举几个不是线程安全的数据结构吗？\n\n    ```text\n    HashMap、ArrayList、LinkedList\n    ```\n\n- 在 Java 中可以有哪些方法来保证线程安全\n\n    ```text\n    加锁,比如synchronize/ReentrantLock\n    使用volatile声明变量，轻量级同步，不能保证原子性(需要解释)\n    使用线程安全类(原子类AtomicXXX，并发容器，同步容器 CopyOnWriteArrayList/ConcurrentHashMap等\n    ThreadLocal本地私有变量/信号量Semaphore等\n    ```\n\n### 第 9 集 新版 Java 并发编程核心知识点 volatile 掌握多少 《二》\n\n**简介：并发编程常见知识点考查：volatile**\n\n- 考点：并发编程常见知识点考查\n\n- 难度：【 \\*\\*\\* 】\n\n- 了解 volatile 关键字不？能否解释下，然后这和 synchronized 有什么大的区别\n\n    ```text\n    volatile是轻量级的synchronized，保证了共享变量的可见性，被volatile关键字修饰的变量，如果值发生了变化，其他线程立刻可见，避免出现脏读现象\n\n    volatile：保证可见性，但是不能保证原子性\n    synchronized：保证可见性，也保证原子性\n\n    使用场景\n    1、不能修饰写入操作依赖当前值的变量，比如num++、num=num+1,不是原子操作，肉眼看起来是，但是JVM字节码层面不止一步\n\n    2、由于禁止了指令重排，所以JVM相关的优化没了，效率会偏弱\n    ```\n\n- 为什么会出现脏读？\n\n    ```text\n    JAVA内存模型简称 JMM\n    JMM规定所有的变量存在在主内存，每个线程有自己的工作内存,线程对变量的操作都在工作内存中进行，不能直接对主内存就行操作\n\n    使用volatile修饰变量\n    每次读取前必须从主内存属性最新的值\n    每次写入需要立刻写到主内存中\n\n    volatile关键字修修饰的变量随时看到的自己的最新值，假如线程1对变量v进行修改，那么线程2是可以马上看见\n    ```\n\n  ![](https://image.huanglei.work/mweb/2025/3/22/5152bdec-4d05-4399-ab6b-e77087690923.jpg)\n\n### 第 10 集 新版 Java 并发编程 指令重排/happens-before 掌握多少《三》\n\n**简介：并发编程常见知识点考查：指令重排、happens-before**\n\n- 考点：并发编程常见知识点考查\n\n- 难度：【 \\*\\*\\* 】\n\n- 你说 volatile 可以避免指令重排，能否解释下什么是指令重排\n\n    ```text\n    指令重排序分两类 编译器重排序和运行时重排序\n\n    JVM在编译java代码或者CPU执行JVM字节码时，对现有的指令进行重新排序，主要目的是优化运行效率(不改变程序结果的前提)\n\n    int a = 3 //1\n    int b = 4 //2\n    int c =5 //3\n    int h = a*b*c //4\n\n    定义顺序 1,2,3,4\n    计算顺序  1,3,2,4 和 2,1,3,4 结果都是一样\n\n    虽然指令重排序可以提高执行效率，但是多线程上可能会影响结果，有什么解决办法？\n    解决办法：内存屏障\n    解释：内存屏障是屏障指令，使CPU对屏障指令之前和之后的内存操作执行结果的一种约束\n    ```\n\n- 知道 happens-before 吗，能否简单解释下？\n\n    ```text\n    先行发生原则，volatile的内存可见性就提现了该原则之一\n\n    例子：\n    //线程A操作\n    int k = 1;\n\n    //线程B操作\n    int j = k;\n\n    //线程C操作\n    int k = 2\n\n    分析：\n    假设线程A中的操作“k=1”先行发生于线程B的操作“j=k”，那确定在线程B的操作执行后，变量j的值一定等于1，依据有两个：一是先行发生原则，“k=1”的结果可以被观察到；二是第三者线程C还没出现，线程A操作结束之后没有其他线程会修改变量k的值。\n\n    但是考虑线程C出现了，保持线程A和线程B之间的先行发生关系，线程C出现在线程A和线程B的操作之间，但是线程C与线程B没有先行发生关系，那j的值会是多少？答案是1和2都有可能，因为线程C对变量k的影响可能会被线程B观察到，也可能不会，所以线程B就存在读取到不符合预期数据的风险，不具备多线程安全性\n\n    八大原则(对这个不理解，一定要去补充相关博文知识)\n    1、程序次序规则\n    2、管程锁定规则\n    3、volatile变量规则\n    4、线程启动规则\n    5、线程中断规则\n    6、线程终止规则\n    7、对象终结规则\n    8、传递性\n    ```","filePath":"src/content/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题06.md","digest":"b0a6bbe114f166f6","rendered":{"html":"<section><h2 id=\"第六章-面试必备知识之玩转并发编程技术点\">第六章 面试必备知识之玩转并发编程技术点<a class=\"anchor\" href=\"#第六章-面试必备知识之玩转并发编程技术点\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"第-1-集-多年开发经验的你是否知道线程进程协程的区别\">第 1 集 多年开发经验的你是否知道线程+进程+协程的区别<a class=\"anchor\" href=\"#第-1-集-多年开发经验的你是否知道线程进程协程的区别\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：是否掌握线程、进程、协程的区别</strong></p><ul>\n<li>\n<p>考点：是否掌握线程、进程、协程的区别</p>\n</li>\n<li>\n<p>难度【 *** 】</p>\n</li>\n<li>\n<p>能否解释下什么是进程、线程、协程，他们之间的关系是怎样的</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:131ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">答案：</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">进程: 本质上是一个独立执行的程序，进程是操作系统进行资源分配和调度的基本概念，操作系统进行资源分配和调度的一个独立单位</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">线程:是操作系统能够进行运算调度的最小单位。它被包含在进程之中，是进程中的实际运作单位。一个进程中可以并发多个线程，每条线程执行不同的任务，切换受系统控制。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">协程: 又称为微线程，是一种用户态的轻量级线程，协程不像线程和进程需要进行系统内核上的上下文切换，协程的上下文切换是由用户自己决定的，有自己的上下文，所以说是轻量级的线程，也称之为用户级别的线程就叫协程，一个线程可以多个协程,线程进程都是同步机制，而协程则是异步</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">Java的原生语法中并没有实现协程,目前python、Lua和GO等语言支持</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">关系：一个进程可以有多个线程，它允许计算机同时运行两个或多个程序。线程是进程的最小执行单位，CPU的调度切换的是进程和线程，进程和线程多了之后调度会消耗大量的CPU，CPU上真正运行的是线程，线程可以对应多个协程</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>协程对于多线程有什么优缺点吗</p>\n</li>\n<li>\n<p>难度【 *** 】</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">优点：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">非常快速的上下文切换，不用系统内核的上下文切换，减小开销</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">单线程即可实现高并发，单核CPU可以支持上万的协程</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">由于只有一个线程，也不存在同时写变量的冲突，在协程中控制共享资源不需要加锁</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">缺点：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">协程无法利用多核资源，本质也是个单线程</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">协程需要和进程配合才能运行在多CPU上</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">目前java没成熟的第三方库，存在风险</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">调试debug存在难度，不利于发现问题</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-2-集-多年开发经验的你是否可以清晰表达-并发并行的区别\">第 2 集 多年开发经验的你是否可以清晰表达 并发、并行的区别<a class=\"anchor\" href=\"#第-2-集-多年开发经验的你是否可以清晰表达-并发并行的区别\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：是否清晰表达并发+并行的区别</strong></p><ul>\n<li>\n<p>考点：计算机基础并发、并行概念</p>\n</li>\n<li>\n<p>难度【 ** 】</p>\n</li>\n<li>\n<p>说下并发和并行的区别，举些例子说下</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:128ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">并发 concurrency：</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">一台处理器上同时处理任务, 这个同时实际上是交替处理多个任务，程序中可以同时拥有两个或者多个线程，当有多个线程在操作时,如果系统只有一个CPU,则它根本不可能真正同时进行一个以上的线程,它只能把CPU运行时间划分成若干个时间段,再将时间段分配给各个线程执行</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">并行 parallellism：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">多个CPU上同时处理多个任务，一个CPU执行一个进程时，另一个CPU可以执行另一个进程，两个进程互不抢占CPU资源，可以同时进行</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">并发指在一段时间内宏观上去处理多个任务。  并行指同一个时刻，多个任务确实真的同时运行。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">例子：</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">并发是一心多用，听课和看电影，但是CPU大脑只有一个，所以轮着来</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">并行：火影忍者中的影分身，有多个你出现，可以分别做不同的事情</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">一个项目经理A和3个程序B C D的故事</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">单线程</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">并发：A给B讲完需求，B自己去实现，期间A继续给C和D讲，不用等待某个程序员去完成，期间项目经理没空闲下来</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">并行：直接找3个项目经理分别分配给3个程序员</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-3-集-新版-java-多线程的实现方式你知道多少上\">第 3 集 新版 Java 多线程的实现方式你知道多少《上》<a class=\"anchor\" href=\"#第-3-集-新版-java-多线程的实现方式你知道多少上\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介: Java 多线程的实现方式和区别</strong></p><ul>\n<li>\n<p>考点：java 多线程基础知识</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>你知道 java 里面实现多线程有哪几种方式，有什么不同，比较常用哪种</p>\n<ul>\n<li>\n<p>继承 Thread</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:81ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 继承Thread，重写里面run方法，创建实例，执行start</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 优点：代码编写最简单直接操作</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 缺点：没返回值，继承一个类后，没法继承其他的类，拓展性差</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ThreadDemo1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">extends</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">Thread</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">@</span><span style=\"--0:#BF3441;--1:#F97583\">Override</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">run</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"继承Thread实现多线程，名称：\"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">String</span><span style=\"--0:#24292E;--1:#E1E4E8\">[] args) {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">ThreadDemo1 threadDemo1 </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ThreadDemo1</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">threadDemo1.</span><span style=\"--0:#6F42C1;--1:#B392F0\">setName</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"demo1\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">threadDemo1.</span><span style=\"--0:#6F42C1;--1:#B392F0\">start</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"主线程名称：\"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>实现 Runnable</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:91ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 自定义类实现Runnable，实现里面run方法，创建Thread类，使用Runnable接口的实现对象作为参数传递给Thread对象，调用Strat方法</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 优点：线程类可以实现多个几接口，可以再继承一个类</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 缺点：没返回值，不能直接启动，需要通过构造一个Thread实例传递进去启动</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ThreadDemo2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">implements</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">Runnable</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">@</span><span style=\"--0:#BF3441;--1:#F97583\">Override</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">run</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"通过Runnable实现多线程，名称：\"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">String</span><span style=\"--0:#24292E;--1:#E1E4E8\">[] args) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">ThreadDemo2 threadDemo2 </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ThreadDemo2</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread thread </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">Thread</span><span style=\"--0:#24292E;--1:#E1E4E8\">(threadDemo2);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">setName</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"demo2\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">start</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"主线程名称：\"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// JDK8之后采用lambda表达式</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">String</span><span style=\"--0:#24292E;--1:#E1E4E8\">[] args) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread thread </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">Thread</span><span style=\"--0:#24292E;--1:#E1E4E8\">(()</span><span style=\"--0:#BF3441;--1:#F97583\">-></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"通过Runnable实现多线程，名称：\"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">});</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">setName</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"demo2\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">start</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"主线程名称：\"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-4-集-新版-java-多线程的实现方式你知道多少下\">第 4 集 新版 Java 多线程的实现方式你知道多少《下》<a class=\"anchor\" href=\"#第-4-集-新版-java-多线程的实现方式你知道多少下\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介: Java 多线程的实现方式和区别</strong></p><ul>\n<li>\n<p>考点：java 多线程基础知识</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>你知道 java 里面实现多线程有哪几种方式，有什么不同，比较常用哪种</p>\n<ul>\n<li>\n<p>通过 Callable 和 FutureTask 方式</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:87ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 创建callable接口的实现类，并实现call方法，结合FutureTask类包装Callable对象，实现多线程</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 优点：有返回值，拓展性也高</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 缺点：jdk5以后才支持，需要重写call方法，结合多个类比如FutureTask和Thread类</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">MyTask</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">implements</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">Callable</span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#BF3441;--1:#F97583\">Object</span><span style=\"--0:#24292E;--1:#E1E4E8\">> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">@</span><span style=\"--0:#BF3441;--1:#F97583\">Override</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Object </span><span style=\"--0:#6F42C1;--1:#B392F0\">call</span><span style=\"--0:#24292E;--1:#E1E4E8\">() </span><span style=\"--0:#BF3441;--1:#F97583\">throws</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Exception {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"通过Callable实现多线程，名称：\"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"这是返回值\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">String</span><span style=\"--0:#24292E;--1:#E1E4E8\">[] args) {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">FutureTask&#x3C;</span><span style=\"--0:#BF3441;--1:#F97583\">Object</span><span style=\"--0:#24292E;--1:#E1E4E8\">> futureTask </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> FutureTask&#x3C;>(()</span><span style=\"--0:#BF3441;--1:#F97583\">-></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"通过Callable实现多线程，名称：\"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"这是返回值\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">});</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">//        MyTask myTask = new MyTask();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">//        FutureTask&#x3C;Object> futureTask = new FutureTask&#x3C;>(myTask);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//FutureTask继承了Runnable，可以放在Thread中启动执行</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread thread </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">Thread</span><span style=\"--0:#24292E;--1:#E1E4E8\">(futureTask);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">setName</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"demo3\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">start</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"主线程名称:\"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(futureTask.</span><span style=\"--0:#6F42C1;--1:#B392F0\">get</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">catch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (InterruptedException </span><span style=\"--0:#AE4B07;--1:#FFAB70\">e</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#616972;--1:#99A0A6\">//阻塞等待中被中断，则抛出</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">e.</span><span style=\"--0:#6F42C1;--1:#B392F0\">printStackTrace</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">catch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (ExecutionException </span><span style=\"--0:#AE4B07;--1:#FFAB70\">e</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#616972;--1:#99A0A6\">//执行过程发送异常被抛出</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">e.</span><span style=\"--0:#6F42C1;--1:#B392F0\">printStackTrace</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>通过线程池创建线程</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:87ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 自定义Runnable接口，实现run方法，创建线程池，调用执行方法并传入对象</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 优点：安全高性能，复用线程</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 缺点: jdk5后才支持，需要结合Runnable进行使用</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ThreadDemo4</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">implements</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">Runnable</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">@</span><span style=\"--0:#BF3441;--1:#F97583\">Override</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">run</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"通过线程池+runnable实现多线程，名称：\"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">String</span><span style=\"--0:#24292E;--1:#E1E4E8\">[] args) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">ExecutorService executorService </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Executors.</span><span style=\"--0:#6F42C1;--1:#B392F0\">newFixedThreadPool</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">3</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> i</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;i</span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\">;i</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">executorService.</span><span style=\"--0:#6F42C1;--1:#B392F0\">execute</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ThreadDemo4</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"主线程名称:\"</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">Thread.</span><span style=\"--0:#6F42C1;--1:#B392F0\">currentThread</span><span style=\"--0:#24292E;--1:#E1E4E8\">().</span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//关闭线程池</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">executorService.</span><span style=\"--0:#6F42C1;--1:#B392F0\">shutdown</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul>\n</li>\n<li>\n<p>一般常用的 Runnable 和 第四种线程池 + Runnable，简单方便扩展，和高性能 (池化的思想)</p>\n</li>\n</ul></section><section><h3 id=\"第-5-集-新版-java-线程的状态你知道多少\">第 5 集 新版 Java 线程的状态你知道多少？<a class=\"anchor\" href=\"#第-5-集-新版-java-线程的状态你知道多少\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：线程有几种状态有哪些，分别解释下</strong></p><ul>\n<li>\n<p>考点：是否掌握线程常见的状态</p>\n</li>\n<li>\n<p>难度：【 ** 】</p>\n</li>\n<li>\n<p>java 线程常见的基本状态有哪些，这些状态分别是做什么的</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:161ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">JDK的线程状态分6种，JVM里面9种，我们一般说JDK的线程状态</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">常见的5种状态</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">创建(NEW): 生成线程对象，但是并没有调用该对象start(), new Thread()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">就绪(Runnable)：当调用线程对象的start()方法，线程就进入就绪状态，但是此刻线程调度还没把该线程设置为当前线程，就是没获得CPU使用权。   如果线程运行后，从等待或者睡眠中回来之后，也会进入就绪状态</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">注意:有些文档把就绪和运行两种状态统一称为 “运行中”</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">运行(Running)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">程序将处于就绪状态的线程设置为当前线程，即获得CPU使用权，这个时候线程进入运行状态，开始运行run里面的逻辑</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">阻塞(Blocked)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">等待阻塞：进入该状态的线程需要等待其他线程作出一定动作(通知或中断)，这种状态的话CPU不会分配过来，他们需要被唤醒，可能也会无限等待下去。比如调用wait(状态就会变成WAITING状态)，也可能通过调用sleep(状态就会变成TIMED_WAITING), join或者发出IO请求，阻塞结束后线程重新进入就绪状态</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">同步阻塞：线程在获取synchronized同步锁失败，即锁被其他线程占用，它就会进入同步阻塞状态</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">备注：相关资料会用细分下面的状态</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">      </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">等待(WAITING)：进入该状态的线程需要等待其他线程做出一些特定动作（通知或中断）。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">超时等待(TIMED_WAITING)：该状态不同于WAITING，它可以在指定的时间后自行返回</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">死亡(TERMINATED):一个线程run方法执行结束，该线程就死亡了，不能进入就绪状态</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-6-集-新版-java-线程的常见方法你知道多少\">第 6 集 新版 Java 线程的常见方法你知道多少？<a class=\"anchor\" href=\"#第-6-集-新版-java-线程的常见方法你知道多少\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：线程有几种状态,他们转化关系是怎样的</strong></p><ul>\n<li>\n<p>考点：常见线程的 api 操作是否熟悉</p>\n</li>\n<li>\n<p>难度：【 ** 】</p>\n</li>\n<li>\n<p>是否了解多线程开发里面常用的方法，sleep/yield/join wait/notify/notifyAll, 分别解释下</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:47ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">sleep</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">属于线程Thread的方法</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">让线程暂缓执行，等待预计时间之后再恢复</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">交出CPU使用权，不会释放锁</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">进入阻塞状态TIME_WAITGING，睡眠结束变为就绪Runnable</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">yield</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">属于线程Thread的方法</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">t1/t2/t3</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">暂停当前线程的对象，去执行其他线程</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">交出CPU使用权，不会释放锁，和sleep类似</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">作用：让相同优先级的线程轮流执行，但是不保证一定轮流</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">注意：不会让线程进入阻塞状态，直接变为就绪Runnable，只需要重新获得CPU使用权</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">join</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">属于线程Thread的方法</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">在主线程上运行调用该方法，会让主线程休眠，不会释放已经持有的对象锁</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">让调用join方法的线程先执行完毕，在执行其他线程</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">类似让救护车警车优先通过</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">wait</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">属于Object的方法</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">当前线程调用对象的wait方法，会释放锁，进入线程的等待队列</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">需要依靠notify或者notifyAll唤醒，或者wait(timeout)时间自动唤醒</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">notify</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">属于Object的方法</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">唤醒在对象监视器上等待的单个线程，选择是任意的</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">notifyAll</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">属于Object的方法</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">唤醒在对象监视器上等待的全部线程</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-7-集-新版-java-线程的状态转换流程图你会画不\">第 7 集 新版 Java 线程的状态转换流程图你会画不<a class=\"anchor\" href=\"#第-7-集-新版-java-线程的状态转换流程图你会画不\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：线程有几种状态和 API，画出转换流程图</strong></p><ul>\n<li>\n<p>考点：常见线程状态和 API 结合考查</p>\n</li>\n<li>\n<p>难度：【 **** 】</p>\n</li>\n<li>\n<p>看来挺熟悉多线程的，那你画下线程的状态转换图和这些转换过程常用的 api 也标记下</p>\n<p><img src=\"https://image.huanglei.work/mweb/2025/3/22/89637b63-7472-492d-8ffd-5e3861b8cd96.jpg\" alt=\"\"></p>\n</li>\n</ul></section><section><h3 id=\"第-8-集-新版-java-并发编程核心知识点掌握多少一\">第 8 集 新版 Java 并发编程核心知识点掌握多少《一》<a class=\"anchor\" href=\"#第-8-集-新版-java-并发编程核心知识点掌握多少一\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：并发编程常见知识点考查</strong></p><ul>\n<li>\n<p>考点：并发编程常见知识点考查</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>平时业务代码里面使用过多线程吗，能举例几个多线程的业务场景吗？</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:44ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">异步任务：用户注册、记录日志</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">定时任务：定期备份日志、备份数据库</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">分布式计算：Hadoop处理任务mapreduce，master-wark(单机单进程)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">服务器编程：Socket网络编程，一个连接一个线程</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>能举几个不是线程安全的数据结构吗？</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:28ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">HashMap、ArrayList、LinkedList</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>在 Java 中可以有哪些方法来保证线程安全</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:70ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">加锁,比如synchronize/ReentrantLock</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">使用volatile声明变量，轻量级同步，不能保证原子性(需要解释)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">使用线程安全类(原子类AtomicXXX，并发容器，同步容器 CopyOnWriteArrayList/ConcurrentHashMap等</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ThreadLocal本地私有变量/信号量Semaphore等</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-9-集-新版-java-并发编程核心知识点-volatile-掌握多少-二\">第 9 集 新版 Java 并发编程核心知识点 volatile 掌握多少 《二》<a class=\"anchor\" href=\"#第-9-集-新版-java-并发编程核心知识点-volatile-掌握多少-二\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：并发编程常见知识点考查：volatile</strong></p><ul>\n<li>\n<p>考点：并发编程常见知识点考查</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>了解 volatile 关键字不？能否解释下，然后这和 synchronized 有什么大的区别</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:82ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">volatile是轻量级的synchronized，保证了共享变量的可见性，被volatile关键字修饰的变量，如果值发生了变化，其他线程立刻可见，避免出现脏读现象</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">volatile：保证可见性，但是不能保证原子性</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">synchronized：保证可见性，也保证原子性</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">使用场景</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1、不能修饰写入操作依赖当前值的变量，比如num++、num=num+1,不是原子操作，肉眼看起来是，但是JVM字节码层面不止一步</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">2、由于禁止了指令重排，所以JVM相关的优化没了，效率会偏弱</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>为什么会出现脏读？</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:60ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">JAVA内存模型简称 JMM</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">JMM规定所有的变量存在在主内存，每个线程有自己的工作内存,线程对变量的操作都在工作内存中进行，不能直接对主内存就行操作</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">使用volatile修饰变量</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">每次读取前必须从主内存属性最新的值</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">每次写入需要立刻写到主内存中</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">volatile关键字修修饰的变量随时看到的自己的最新值，假如线程1对变量v进行修改，那么线程2是可以马上看见</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p><img src=\"https://image.huanglei.work/mweb/2025/3/22/5152bdec-4d05-4399-ab6b-e77087690923.jpg\" alt=\"\"></p>\n</li>\n</ul></section><section><h3 id=\"第-10-集-新版-java-并发编程-指令重排happens-before-掌握多少三\">第 10 集 新版 Java 并发编程 指令重排/happens-before 掌握多少《三》<a class=\"anchor\" href=\"#第-10-集-新版-java-并发编程-指令重排happens-before-掌握多少三\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：并发编程常见知识点考查：指令重排、happens-before</strong></p><ul>\n<li>\n<p>考点：并发编程常见知识点考查</p>\n</li>\n<li>\n<p>难度：【 *** 】</p>\n</li>\n<li>\n<p>你说 volatile 可以避免指令重排，能否解释下什么是指令重排</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:63ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">指令重排序分两类 编译器重排序和运行时重排序</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">JVM在编译java代码或者CPU执行JVM字节码时，对现有的指令进行重新排序，主要目的是优化运行效率(不改变程序结果的前提)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int a = 3 //1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int b = 4 //2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int c =5 //3</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int h = a*b*c //4</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">定义顺序 1,2,3,4</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">计算顺序  1,3,2,4 和 2,1,3,4 结果都是一样</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">虽然指令重排序可以提高执行效率，但是多线程上可能会影响结果，有什么解决办法？</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">解决办法：内存屏障</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">解释：内存屏障是屏障指令，使CPU对屏障指令之前和之后的内存操作执行结果的一种约束</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>知道 happens-before 吗，能否简单解释下？</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:147ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">先行发生原则，volatile的内存可见性就提现了该原则之一</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">例子：</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">//线程A操作</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int k = 1;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">//线程B操作</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int j = k;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">//线程C操作</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int k = 2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">分析：</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">假设线程A中的操作“k=1”先行发生于线程B的操作“j=k”，那确定在线程B的操作执行后，变量j的值一定等于1，依据有两个：一是先行发生原则，“k=1”的结果可以被观察到；二是第三者线程C还没出现，线程A操作结束之后没有其他线程会修改变量k的值。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">但是考虑线程C出现了，保持线程A和线程B之间的先行发生关系，线程C出现在线程A和线程B的操作之间，但是线程C与线程B没有先行发生关系，那j的值会是多少？答案是1和2都有可能，因为线程C对变量k的影响可能会被线程B观察到，也可能不会，所以线程B就存在读取到不符合预期数据的风险，不具备多线程安全性</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">八大原则(对这个不理解，一定要去补充相关博文知识)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1、程序次序规则</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">2、管程锁定规则</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">3、volatile变量规则</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">4、线程启动规则</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">5、线程中断规则</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">6、线程终止规则</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">7、对象终结规则</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">8、传递性</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section></section>","metadata":{"headings":[{"depth":2,"slug":"第六章-面试必备知识之玩转并发编程技术点","text":"第六章 面试必备知识之玩转并发编程技术点#"},{"depth":3,"slug":"第-1-集-多年开发经验的你是否知道线程进程协程的区别","text":"第 1 集 多年开发经验的你是否知道线程+进程+协程的区别#"},{"depth":3,"slug":"第-2-集-多年开发经验的你是否可以清晰表达-并发并行的区别","text":"第 2 集 多年开发经验的你是否可以清晰表达 并发、并行的区别#"},{"depth":3,"slug":"第-3-集-新版-java-多线程的实现方式你知道多少上","text":"第 3 集 新版 Java 多线程的实现方式你知道多少《上》#"},{"depth":3,"slug":"第-4-集-新版-java-多线程的实现方式你知道多少下","text":"第 4 集 新版 Java 多线程的实现方式你知道多少《下》#"},{"depth":3,"slug":"第-5-集-新版-java-线程的状态你知道多少","text":"第 5 集 新版 Java 线程的状态你知道多少？#"},{"depth":3,"slug":"第-6-集-新版-java-线程的常见方法你知道多少","text":"第 6 集 新版 Java 线程的常见方法你知道多少？#"},{"depth":3,"slug":"第-7-集-新版-java-线程的状态转换流程图你会画不","text":"第 7 集 新版 Java 线程的状态转换流程图你会画不#"},{"depth":3,"slug":"第-8-集-新版-java-并发编程核心知识点掌握多少一","text":"第 8 集 新版 Java 并发编程核心知识点掌握多少《一》#"},{"depth":3,"slug":"第-9-集-新版-java-并发编程核心知识点-volatile-掌握多少-二","text":"第 9 集 新版 Java 并发编程核心知识点 volatile 掌握多少 《二》#"},{"depth":3,"slug":"第-10-集-新版-java-并发编程-指令重排happens-before-掌握多少三","text":"第 10 集 新版 Java 并发编程 指令重排/happens-before 掌握多少《三》#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"后端高级工程师面试专题06","published":"2025-11-06T00:00:00.000Z","pinned":false,"description":"第六章 面试必备知识之玩转并发编程技术点","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":21,"words":4158,"excerpt":"简介：是否掌握线程、进程、协程的区别"},"imagePaths":[]}},"collection":"posts"}],"2025-11-05":[{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题05","data":{"title":"后端高级工程师面试专题05","published":"2025-11-05T00:00:00.000Z","draft":false,"description":"第五章 面试 BAT 高级工程师/技术经理的 java 集合框架 Map 了解多少","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"AI智能化云盘01","prevSlug":"项目大课/ai智能化云盘/ai智能化云盘01","nextTitle":"后端高级工程师面试专题06","nextSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题06"},"body":"## 第五章 面试 BAT 高级工程师/技术经理的 java 集合框架 Map 了解多少\n\n### 第 1 集 编程语言面试题之新版 javase 集合框架 Map 篇<小试牛刀上>\n**简介：集合框架里面基础 Map 面试题**\n\n- 考点：Map 相关基础知识掌握情况\n\n- 难度【 \\*\\*\\* 】\n\n- 了解 Map 吗？用过哪些 Map 的实现\n\n  答：HashMap、Hashtable、LinkedHashMap、TreeMap、ConcurrentHashMap\n\n* 说下 HashMap 和 Hashtable 的区别\n\n  答：\n\n  - HashMap：底层是基于数组+链表，非线程安全的，默认容量是 16、允许有空的健和值\n  - Hashtable：基于哈希表实现，线程安全的(加了 synchronized)，默认容量是 11，不允许有 null 的健和值\n\n### 第 2 集 编程语言面试题之对象底层 HashCode 和 equals 掌握了吗\n\n**简介：对象的比较、排重 hashcode 和 equals 经常需要重写，也是 map 和 set 里面常用知识**\n\n- 考点：hashcode 和 equals 掌握情况\n\n- 难度【 \\*\\*\\*\\* 】\n\n- 介绍下对象的 hashCode()和 equals()，使用场景\n\n    ```text\n    hashcode\n        顶级类Object里面的方法，所有的类都是继承Object,返回是一个int类型的数\n        根据一定的hash规则(存储地址，字段，长度等)，映射成一个数组，即散列值\n    \n    equals\n        顶级类Object里面的方法，所有的类都是继承Object,返回是一个boolean类型\n        根据自定义的匹配规则，用于匹配两个对象是否一样，一般逻辑如下\n        //判断地址是否一样\n        //非空判断和Class类型判断\n        //强转\n        //对象里面的字段一一匹配\n    \n    使用场景：对象比较、或者集合容器里面排重、比较、排序\n    ```\n\n- 代码实战: 编写一个 User 对象，重写里面的 hashcode 和 equal 方法\n\n    ```java\n    import java.util.Date;\n    import java.util.Objects;\n    \n    public class User {\n    \n        private int age;\n    \n        private  String name;\n    \n        private Date time;\n    \n        public int getAge() {\n            return age;\n        }\n    \n        public void setAge(int age) {\n            this.age = age;\n        }\n    \n        public String getName() {\n            return name;\n        }\n    \n        public void setName(String name) {\n            this.name = name;\n        }\n    \n        public Date getTime() {\n            return time;\n        }\n    \n        public void setTime(Date time) {\n            this.time = time;\n        }\n\n\n        @Override\n        public int hashCode() {\n      \n            //int code = age/name.length()+time.hashCode();\n            //return code\n      \n            return Objects.hash(age,name,time);\n      \n        }\n      \n        @Override\n        public boolean equals(Object obj) {\n      \n            if(this == obj) return true;\n      \n            if(obj == null || getClass() != obj.getClass()) return false;\n      \n            User user = (User) obj;\n      \n            return age == user.age && Objects.equals(name, user.name) && Objects.equals(time, user.time);\n      \n        }\n    }\n    ```\n\n### 第 3 集 编程语言面试题之新版 javase 集合框架 Map 篇<小试牛刀下>\n\n**简介：集合框架里面基础 Map 面试题**\n\n- 考点：Map 相关基础知识掌握情况\n\n- 难度【 \\*\\*\\* 】\n\n- HashMap 和 TreeMap 应该怎么选择，使用场景\n\n    ```text\n    hashMap: 散列桶(数组+链表)，可以实现快速的存储和检索，但是确实包含无序的元素，适用于在map中插入删除和定位元素\n\n    treeMap:使用存储结构是一个平衡二叉树->红黑树，可以自定义排序规则，要实现Comparator接口\n    能便捷的实现内部元素的各种排序，但是一般性能比HashMap差，适用于安装自然排序或者自定义排序规则\n    (写过微信支付签名工具类就用这个类)\n    ```\n\n- Set 和 Map 的关系\n\n    ```text\n    核心就是不保存重复的元素，存储一组唯一的对象\n    set的每一种实现都是对应Map里面的一种封装，\n    HashSet对应的就是HashMap，treeSet对应的就是treeMap\n    ```\n\n* 常见 Map 的排序规则是怎样的？\n\n    ```text\n    按照添加顺序使用LinkedHashMap，按照自然排序使用TreeMap，自定义排序 TreeMap(Comparetor c)\n    ```\n\n### 第 4 集 编程语言面试题之新版 javase 集合框架 Map 篇<进阶>\n\n**简介：集合框架里面基础 Map 面试题进阶**\n\n- 考点：考查 Map 的横向和纵向知识点\n\n- 难度【 \\*\\*\\*\\* 】\n\n- 如果需要线程安全，且效率高的 Map，应该怎么做？\n\n  答案：多线程环境下可以用 concurrent 包下的 ConcurrentHashMap, 或者使用 Collections.synchronizedMap(),\n\n  ConcurrentHashMap 虽然是线程安全，但是他的效率比 Hashtable 要高很多\n\n- 为什么 Collections.synchronizedMap 后是线程安全的？\n\n  答案：使用 Collections.synchronizedMap 包装后返回的 map 是加锁的\n\n### 第 5 集 编程语言面试题之新版 javase 集合框架 Map 高手篇<上>\n\n**简介：深入底层 HashMap 实现原理**\n\n- 考点：是否掌握 HashMap 的底层实现\n\n- 难度【 \\*\\*\\*\\* 】\n\n- 看过 HashMap 源码吗，介绍下你了解的 HashMap\n\n    ```text\n    答案：\n        看过源码\n\n        HashMap底层(数组+链表+红黑树 jdk8才有红黑树)\n        \n        数组中每一项是一个链表，即数组和链表的结合体\n        \n        Node<K,V>[] table 是数组，数组的元素是Entry(Node继承Entry)，Entry元素是一个key-value的键值对，它持有一个指向下个Entry的引用，table数组的每个Entry元素同时也作为当前Entry链表的首节点，也指向了该链表的下个Entry元素\n        \n        在JDK1.8中，链表的长度大于8，链表会转换成红黑树\n    ```\n\n  ![](https://image.huanglei.work/mweb/2025/3/22/4f0eda0e-4de4-4eb3-8332-ba123ed73fef.jpg)\n\n- 能否解释下什么是 Hash 碰撞？常见的解决办法有哪些，hashmap 采用哪种方法\n\n    ```text\n    答：\n      hash碰撞的意思是不同key计算得到的Hash值相同，需要放到同个bucket中\n\n      常见的解决办法：链表法、开发地址法、再哈希法等\n      \n      HashMap采用的是链表法\n    ```\n\n### 第 6 集 编程语言面试题之新版 javase 集合框架 Map 高手篇<中>\n\n**简介：深入底层 HashMap 实现原理**\n\n- 考点：是否掌握 HashMap 的底层实现\n\n- 难度【 \\*\\*\\*\\*\\* 】\n\n- 你说 HashMap 底层是 数组+链表+红黑树，为什么要用这几类结构呢？\n\n    ```text\n    答案：\n    数组 Node<K,V>[] table ，根据对象的key的hash值进行在数组里面是哪个节点\n\n    链表的作用是解决hash冲突，将hash值一样的对象存在一个链表放在hash值对应的槽位\n\n    红黑树 JDK8使用红黑树来替代超过8个节点的链表，主要是查询性能的提升，从原来的O(n)到O(logn),\n    通过hash碰撞，让HashMap不断产生碰撞，那么相同的key的位置的链表就会不断增长，当对这个Hashmap的相应位置进行查询的时候，就会循环遍历这个超级大的链表，性能就会下降，所以改用红黑树\n    ```\n\n  ![](https://image.huanglei.work/mweb/2025/3/22/4f0eda0e-4de4-4eb3-8332-ba123ed73fef.jpg)\n\n- 为啥选择红黑树而不用其他树，比如二叉查找树，为啥不一直开始就用红黑树，而是到 8 的长度后才变换\n\n    ```text\n    答案：二叉查找树在特殊情况下也会变成一条线性结构，和原先的链表存在一样的深度遍历问题，查找性能就会慢，\n    使用红黑树主要是提升查找数据的速度，红黑树是平衡二叉树的一种，插入新数据后会通过左旋，右旋、变色等操作来保持平衡，解决单链表查询深度的问题\n\n    数据量少的时候操作数据，遍历线性表比红黑树所消耗的资源少，且前期数据少 平衡二叉树保持平衡是需要消耗资源的，所以前期采用线性表，等到一定数之后变换到红黑树\n    ```\n\n  ![](https://image.huanglei.work/mweb/2025/3/22/980ff954-09f1-4425-888a-cad4e038ac46.jpg)\n\n### 第 7 集 源码剖析之深入新版 HashMap 高手篇<下>\n\n**简介：深入底层 HashMap 实现原理，分析 put、get 源码实现**\n\n- 考点：是否掌握 HashMap 的底层实现，put、get 流程\n\n- 难度【 \\*\\*\\*\\*\\*\\* 】\n\n- 说下 hashmap 的 put 和 get 的核心逻辑（JDK8 以上版本）\n\n  - put 核心流程，看图（高清图看资料里面，第 5 章第 7 集文件夹里面的 html 文件）\n\n    ![](https://image.huanglei.work/mweb/2025/3/22/1198b989-bd9b-45d4-a371-d73a0961a758.jpg)\n\n  - get 核心流程\n\n      ```java\n      final Node<K,V> getNode(int hash, Object key) {\n          Node<K,V>[] tab; Node<K,V> first, e; int n; K k;\n          if ((tab = table) != null && (n = tab.length) > 0 &&\n              (first = tab[(n - 1) & hash]) != null) {\n              //获取首节点，hash碰撞概览小，通常链表第一个节点就是值，没必要去循环遍历，处于效率\n              if (first.hash == hash && // always check first node\n                  ((k = first.key) == key || (key != null && key.equals(k))))\n                  return first;\n              //如果不止一个节点，就需要循环遍历，存在多个hash碰撞\n              if ((e = first.next) != null) {\n                  //判断是否是红黑树，如果是则调用树的查找\n                  if (first instanceof TreeNode)\n                      return ((TreeNode<K,V>)first).getTreeNode(hash, key);\n                  //链表结构，则循环遍历获取节点\n                  do {\n                      if (e.hash == hash &&\n                          ((k = e.key) == key || (key != null && key.equals(k))))\n                          return e;\n                  } while ((e = e.next) != null);\n              }\n          }\n          return null;\n      }\n      ```\n\n### 第 8 集 编程语言面试题之新版 javase 集合框架 ConcurrentHashMap 篇\n\n**简介：并发包里面 ConcurrentHashMap 面试题**\n\n- 考点：是否掌握并发包下的 ConcurrentHashMap 基础和原理\n\n- 难度【 \\*\\*\\*\\* 】\n\n- 了解 ConcurrentHashMap 吗？为什么性能比 hashtable 高，说下原理\n\n    ```text\n    ConcurrentHashMap线程安全的Map, hashtable类基本上所有的方法都是采用synchronized进行线程安全控制\n    高并发情况下效率就降低\n\n    ConcurrentHashMap是采用了分段锁的思想提高性能，锁粒度更细化\n    ```\n\n- jdk1.7 和 jdk1.8 里面 ConcurrentHashMap 实现的区别有没了解\n\n    ```text\n    JDK8之前，ConcurrentHashMap使用锁分段技术，将数据分成一段段存储，每个数据段配置一把锁，即segment类，这个类继承ReentrantLock来保证线程安全\n    技术点：Segment+HashEntry\n    \n    JKD8的版本取消Segment这个分段锁数据结构，底层也是使用Node数组+链表+红黑树，从而实现对每一段数据就行加锁，也减少了并发冲突的概率，CAS(读)+Synchronized(写)\n    技术点：Node+Cas+Synchronized\n    ```\n\n### 第 9 集 源码剖析之深入新版 ConcurrentHashMap 篇\n\n**简介：解读并发包里面 ConcurrentHashMap 核心 Put 源码**\n\n- 考点：是否掌握并发包下的 ConcurrentHashMap 基础和原理\n\n- 难度【 \\*\\*\\*\\* 】\n\n- 说下 ConcurrentHashMap 的 put 的核心逻辑（JDK8 以上版本）\n\n    ```text\n    spread(key.hashCode())  重哈希，减少碰撞概率\n    tabAt(i) 获取table中索引为i的Node元素\n    casTabAt(i) 利用CAS操作获取table中索引为i的Node元素\n\n\n    put的核心流程\n    1、key进行重哈希spread(key.hashCode())\n    2、对当前table进行无条件循环\n    3、如果没有初始化table，则用initTable进行初始化\n    4、如果没有hash冲突，则直接用cas插入新节点，成功后则直接判断是否需要扩容，然后结束\n    5、(fh = f.hash) == MOVED 如果是这个状态则是扩容操作，先进行扩容\n    6、存在hash冲突，利用synchronized (f) 加锁保证线程安全\n    7、如果是链表，则直接遍历插入，如果数量大于8，则需要转换成红黑树\n    8、如果是红黑树则按照红黑树规则插入\n    9、最后是检查是否需要扩容addCount()\n    ```\n\n推荐资料：\n\n  - <https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html>","filePath":"src/content/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题05.md","digest":"2730ccc10ba89b79","rendered":{"html":"<section><h2 id=\"第五章-面试-bat-高级工程师技术经理的-java-集合框架-map-了解多少\">第五章 面试 BAT 高级工程师/技术经理的 java 集合框架 Map 了解多少<a class=\"anchor\" href=\"#第五章-面试-bat-高级工程师技术经理的-java-集合框架-map-了解多少\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"第-1-集-编程语言面试题之新版-javase-集合框架-map-篇小试牛刀上\">第 1 集 编程语言面试题之新版 javase 集合框架 Map 篇&#x3C;小试牛刀上><a class=\"anchor\" href=\"#第-1-集-编程语言面试题之新版-javase-集合框架-map-篇小试牛刀上\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：集合框架里面基础 Map 面试题</strong></p><ul>\n<li>\n<p>考点：Map 相关基础知识掌握情况</p>\n</li>\n<li>\n<p>难度【 *** 】</p>\n</li>\n<li>\n<p>了解 Map 吗？用过哪些 Map 的实现</p>\n<p>答：HashMap、Hashtable、LinkedHashMap、TreeMap、ConcurrentHashMap</p>\n</li>\n</ul><ul>\n<li>\n<p>说下 HashMap 和 Hashtable 的区别</p>\n<p>答：</p>\n<ul>\n<li>HashMap：底层是基于数组+链表，非线程安全的，默认容量是 16、允许有空的健和值</li>\n<li>Hashtable：基于哈希表实现，线程安全的(加了 synchronized)，默认容量是 11，不允许有 null 的健和值</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-2-集-编程语言面试题之对象底层-hashcode-和-equals-掌握了吗\">第 2 集 编程语言面试题之对象底层 HashCode 和 equals 掌握了吗<a class=\"anchor\" href=\"#第-2-集-编程语言面试题之对象底层-hashcode-和-equals-掌握了吗\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：对象的比较、排重 hashcode 和 equals 经常需要重写，也是 map 和 set 里面常用知识</strong></p><ul>\n<li>\n<p>考点：hashcode 和 equals 掌握情况</p>\n</li>\n<li>\n<p>难度【 **** 】</p>\n</li>\n<li>\n<p>介绍下对象的 hashCode()和 equals()，使用场景</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:48ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">hashcode</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">顶级类Object里面的方法，所有的类都是继承Object,返回是一个int类型的数</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">根据一定的hash规则(存储地址，字段，长度等)，映射成一个数组，即散列值</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">equals</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">顶级类Object里面的方法，所有的类都是继承Object,返回是一个boolean类型</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">根据自定义的匹配规则，用于匹配两个对象是否一样，一般逻辑如下</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">//判断地址是否一样</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">//非空判断和Class类型判断</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">//强转</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">//对象里面的字段一一匹配</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">使用场景：对象比较、或者集合容器里面排重、比较、排序</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>代码实战: 编写一个 User 对象，重写里面的 hashcode 和 equal 方法</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:101ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> java.util.Date;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> java.util.Objects;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">User</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> age;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\">  String name;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Date time;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">getAge</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> age;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setAge</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">age</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#005CC5;--1:#79B8FF\">this</span><span style=\"--0:#24292E;--1:#E1E4E8\">.age </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> age;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> String </span><span style=\"--0:#6F42C1;--1:#B392F0\">getName</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> name;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setName</span><span style=\"--0:#24292E;--1:#E1E4E8\">(String </span><span style=\"--0:#AE4B07;--1:#FFAB70\">name</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#005CC5;--1:#79B8FF\">this</span><span style=\"--0:#24292E;--1:#E1E4E8\">.name </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> name;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Date </span><span style=\"--0:#6F42C1;--1:#B392F0\">getTime</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> time;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setTime</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Date </span><span style=\"--0:#AE4B07;--1:#FFAB70\">time</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#005CC5;--1:#79B8FF\">this</span><span style=\"--0:#24292E;--1:#E1E4E8\">.time </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> time;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">@</span><span style=\"--0:#BF3441;--1:#F97583\">Override</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">hashCode</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//int code = age/name.length()+time.hashCode();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//return code</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Objects.</span><span style=\"--0:#6F42C1;--1:#B392F0\">hash</span><span style=\"--0:#24292E;--1:#E1E4E8\">(age,name,time);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">@</span><span style=\"--0:#BF3441;--1:#F97583\">Override</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">boolean</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">equals</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Object </span><span style=\"--0:#AE4B07;--1:#FFAB70\">obj</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">this</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> obj) </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">true</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\">(obj </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">null</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">||</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">getClass</span><span style=\"--0:#24292E;--1:#E1E4E8\">() </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> obj.</span><span style=\"--0:#6F42C1;--1:#B392F0\">getClass</span><span style=\"--0:#24292E;--1:#E1E4E8\">()) </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">false</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">54</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">User user </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (User) obj;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">55</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">56</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> age </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> user.age </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Objects.</span><span style=\"--0:#6F42C1;--1:#B392F0\">equals</span><span style=\"--0:#24292E;--1:#E1E4E8\">(name, user.name) </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Objects.</span><span style=\"--0:#6F42C1;--1:#B392F0\">equals</span><span style=\"--0:#24292E;--1:#E1E4E8\">(time, user.time);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">57</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">58</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">59</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-3-集-编程语言面试题之新版-javase-集合框架-map-篇小试牛刀下\">第 3 集 编程语言面试题之新版 javase 集合框架 Map 篇&#x3C;小试牛刀下><a class=\"anchor\" href=\"#第-3-集-编程语言面试题之新版-javase-集合框架-map-篇小试牛刀下\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：集合框架里面基础 Map 面试题</strong></p><ul>\n<li>\n<p>考点：Map 相关基础知识掌握情况</p>\n</li>\n<li>\n<p>难度【 *** 】</p>\n</li>\n<li>\n<p>HashMap 和 TreeMap 应该怎么选择，使用场景</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:62ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">hashMap: 散列桶(数组+链表)，可以实现快速的存储和检索，但是确实包含无序的元素，适用于在map中插入删除和定位元素</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">treeMap:使用存储结构是一个平衡二叉树->红黑树，可以自定义排序规则，要实现Comparator接口</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">能便捷的实现内部元素的各种排序，但是一般性能比HashMap差，适用于安装自然排序或者自定义排序规则</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">(写过微信支付签名工具类就用这个类)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>Set 和 Map 的关系</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">核心就是不保存重复的元素，存储一组唯一的对象</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">set的每一种实现都是对应Map里面的一种封装，</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">HashSet对应的就是HashMap，treeSet对应的就是treeMap</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul><ul>\n<li>\n<p>常见 Map 的排序规则是怎样的？</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:65ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">按照添加顺序使用LinkedHashMap，按照自然排序使用TreeMap，自定义排序 TreeMap(Comparetor c)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-4-集-编程语言面试题之新版-javase-集合框架-map-篇进阶\">第 4 集 编程语言面试题之新版 javase 集合框架 Map 篇&#x3C;进阶><a class=\"anchor\" href=\"#第-4-集-编程语言面试题之新版-javase-集合框架-map-篇进阶\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：集合框架里面基础 Map 面试题进阶</strong></p><ul>\n<li>\n<p>考点：考查 Map 的横向和纵向知识点</p>\n</li>\n<li>\n<p>难度【 **** 】</p>\n</li>\n<li>\n<p>如果需要线程安全，且效率高的 Map，应该怎么做？</p>\n<p>答案：多线程环境下可以用 concurrent 包下的 ConcurrentHashMap, 或者使用 Collections.synchronizedMap(),</p>\n<p>ConcurrentHashMap 虽然是线程安全，但是他的效率比 Hashtable 要高很多</p>\n</li>\n<li>\n<p>为什么 Collections.synchronizedMap 后是线程安全的？</p>\n<p>答案：使用 Collections.synchronizedMap 包装后返回的 map 是加锁的</p>\n</li>\n</ul></section><section><h3 id=\"第-5-集-编程语言面试题之新版-javase-集合框架-map-高手篇上\">第 5 集 编程语言面试题之新版 javase 集合框架 Map 高手篇&#x3C;上><a class=\"anchor\" href=\"#第-5-集-编程语言面试题之新版-javase-集合框架-map-高手篇上\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：深入底层 HashMap 实现原理</strong></p><ul>\n<li>\n<p>考点：是否掌握 HashMap 的底层实现</p>\n</li>\n<li>\n<p>难度【 **** 】</p>\n</li>\n<li>\n<p>看过 HashMap 源码吗，介绍下你了解的 HashMap</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:146ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">答案：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">看过源码</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">HashMap底层(数组+链表+红黑树 jdk8才有红黑树)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">数组中每一项是一个链表，即数组和链表的结合体</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">Node&#x3C;K,V>[] table 是数组，数组的元素是Entry(Node继承Entry)，Entry元素是一个key-value的键值对，它持有一个指向下个Entry的引用，table数组的每个Entry元素同时也作为当前Entry链表的首节点，也指向了该链表的下个Entry元素</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">在JDK1.8中，链表的长度大于8，链表会转换成红黑树</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p><img src=\"https://image.huanglei.work/mweb/2025/3/22/4f0eda0e-4de4-4eb3-8332-ba123ed73fef.jpg\" alt=\"\"></p>\n</li>\n<li>\n<p>能否解释下什么是 Hash 碰撞？常见的解决办法有哪些，hashmap 采用哪种方法</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:43ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">答：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">hash碰撞的意思是不同key计算得到的Hash值相同，需要放到同个bucket中</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">常见的解决办法：链表法、开发地址法、再哈希法等</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">HashMap采用的是链表法</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-6-集-编程语言面试题之新版-javase-集合框架-map-高手篇中\">第 6 集 编程语言面试题之新版 javase 集合框架 Map 高手篇&#x3C;中><a class=\"anchor\" href=\"#第-6-集-编程语言面试题之新版-javase-集合框架-map-高手篇中\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：深入底层 HashMap 实现原理</strong></p><ul>\n<li>\n<p>考点：是否掌握 HashMap 的底层实现</p>\n</li>\n<li>\n<p>难度【 ***** 】</p>\n</li>\n<li>\n<p>你说 HashMap 底层是 数组+链表+红黑树，为什么要用这几类结构呢？</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:98ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">答案：</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">数组 Node&#x3C;K,V>[] table ，根据对象的key的hash值进行在数组里面是哪个节点</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">链表的作用是解决hash冲突，将hash值一样的对象存在一个链表放在hash值对应的槽位</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">红黑树 JDK8使用红黑树来替代超过8个节点的链表，主要是查询性能的提升，从原来的O(n)到O(logn),</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">通过hash碰撞，让HashMap不断产生碰撞，那么相同的key的位置的链表就会不断增长，当对这个Hashmap的相应位置进行查询的时候，就会循环遍历这个超级大的链表，性能就会下降，所以改用红黑树</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p><img src=\"https://image.huanglei.work/mweb/2025/3/22/4f0eda0e-4de4-4eb3-8332-ba123ed73fef.jpg\" alt=\"\"></p>\n</li>\n<li>\n<p>为啥选择红黑树而不用其他树，比如二叉查找树，为啥不一直开始就用红黑树，而是到 8 的长度后才变换</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:77ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">答案：二叉查找树在特殊情况下也会变成一条线性结构，和原先的链表存在一样的深度遍历问题，查找性能就会慢，</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">使用红黑树主要是提升查找数据的速度，红黑树是平衡二叉树的一种，插入新数据后会通过左旋，右旋、变色等操作来保持平衡，解决单链表查询深度的问题</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">数据量少的时候操作数据，遍历线性表比红黑树所消耗的资源少，且前期数据少 平衡二叉树保持平衡是需要消耗资源的，所以前期采用线性表，等到一定数之后变换到红黑树</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p><img src=\"https://image.huanglei.work/mweb/2025/3/22/980ff954-09f1-4425-888a-cad4e038ac46.jpg\" alt=\"\"></p>\n</li>\n</ul></section><section><h3 id=\"第-7-集-源码剖析之深入新版-hashmap-高手篇下\">第 7 集 源码剖析之深入新版 HashMap 高手篇&#x3C;下><a class=\"anchor\" href=\"#第-7-集-源码剖析之深入新版-hashmap-高手篇下\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：深入底层 HashMap 实现原理，分析 put、get 源码实现</strong></p><ul>\n<li>\n<p>考点：是否掌握 HashMap 的底层实现，put、get 流程</p>\n</li>\n<li>\n<p>难度【 ****** 】</p>\n</li>\n<li>\n<p>说下 hashmap 的 put 和 get 的核心逻辑（JDK8 以上版本）</p>\n<ul>\n<li>\n<p>put 核心流程，看图（高清图看资料里面，第 5 章第 7 集文件夹里面的 html 文件）</p>\n<p><img src=\"https://image.huanglei.work/mweb/2025/3/22/1198b989-bd9b-45d4-a371-d73a0961a758.jpg\" alt=\"\"></p>\n</li>\n<li>\n<p>get 核心流程</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:75ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">final</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Node</span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\">K,V</span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">getNode</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> hash, Object key) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Node&#x3C;</span><span style=\"--0:#BF3441;--1:#F97583\">K</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#BF3441;--1:#F97583\">V</span><span style=\"--0:#24292E;--1:#E1E4E8\">>[] tab; Node&#x3C;</span><span style=\"--0:#BF3441;--1:#F97583\">K</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#BF3441;--1:#F97583\">V</span><span style=\"--0:#24292E;--1:#E1E4E8\">> first, e; </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> n; K k;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ((tab </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> table) </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">null</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (n </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> tab.length) </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">(first </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> tab[(n </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> hash]) </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">null</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//获取首节点，hash碰撞概览小，通常链表第一个节点就是值，没必要去循环遍历，处于效率</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (first.hash </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> hash </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\">// always check first node</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">((k </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> first.key) </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> key </span><span style=\"--0:#BF3441;--1:#F97583\">||</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (key </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">null</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> key.</span><span style=\"--0:#6F42C1;--1:#B392F0\">equals</span><span style=\"--0:#24292E;--1:#E1E4E8\">(k))))</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> first;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//如果不止一个节点，就需要循环遍历，存在多个hash碰撞</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ((e </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> first.next) </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">null</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#616972;--1:#99A0A6\">//判断是否是红黑树，如果是则调用树的查找</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (first </span><span style=\"--0:#BF3441;--1:#F97583\">instanceof</span><span style=\"--0:#24292E;--1:#E1E4E8\"> TreeNode)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">                </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ((TreeNode</span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\">K,V</span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\">)first).</span><span style=\"--0:#6F42C1;--1:#B392F0\">getTreeNode</span><span style=\"--0:#24292E;--1:#E1E4E8\">(hash, key);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#616972;--1:#99A0A6\">//链表结构，则循环遍历获取节点</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">do</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">                </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (e.hash </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> hash </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:20ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">((k </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> e.key) </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> key </span><span style=\"--0:#BF3441;--1:#F97583\">||</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (key </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">null</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> key.</span><span style=\"--0:#6F42C1;--1:#B392F0\">equals</span><span style=\"--0:#24292E;--1:#E1E4E8\">(k))))</span></div></div><div class=\"ec-line\" style=\"--ecIndent:20ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">                    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> e;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ((e </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> e.next) </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">null</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">null</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-8-集-编程语言面试题之新版-javase-集合框架-concurrenthashmap-篇\">第 8 集 编程语言面试题之新版 javase 集合框架 ConcurrentHashMap 篇<a class=\"anchor\" href=\"#第-8-集-编程语言面试题之新版-javase-集合框架-concurrenthashmap-篇\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：并发包里面 ConcurrentHashMap 面试题</strong></p><ul>\n<li>\n<p>考点：是否掌握并发包下的 ConcurrentHashMap 基础和原理</p>\n</li>\n<li>\n<p>难度【 **** 】</p>\n</li>\n<li>\n<p>了解 ConcurrentHashMap 吗？为什么性能比 hashtable 高，说下原理</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:69ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ConcurrentHashMap线程安全的Map, hashtable类基本上所有的方法都是采用synchronized进行线程安全控制</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">高并发情况下效率就降低</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ConcurrentHashMap是采用了分段锁的思想提高性能，锁粒度更细化</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>jdk1.7 和 jdk1.8 里面 ConcurrentHashMap 实现的区别有没了解</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:95ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">JDK8之前，ConcurrentHashMap使用锁分段技术，将数据分成一段段存储，每个数据段配置一把锁，即segment类，这个类继承ReentrantLock来保证线程安全</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">技术点：Segment+HashEntry</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">JKD8的版本取消Segment这个分段锁数据结构，底层也是使用Node数组+链表+红黑树，从而实现对每一段数据就行加锁，也减少了并发冲突的概率，CAS(读)+Synchronized(写)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">技术点：Node+Cas+Synchronized</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-9-集-源码剖析之深入新版-concurrenthashmap-篇\">第 9 集 源码剖析之深入新版 ConcurrentHashMap 篇<a class=\"anchor\" href=\"#第-9-集-源码剖析之深入新版-concurrenthashmap-篇\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：解读并发包里面 ConcurrentHashMap 核心 Put 源码</strong></p><ul>\n<li>\n<p>考点：是否掌握并发包下的 ConcurrentHashMap 基础和原理</p>\n</li>\n<li>\n<p>难度【 **** 】</p>\n</li>\n<li>\n<p>说下 ConcurrentHashMap 的 put 的核心逻辑（JDK8 以上版本）</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:45ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">spread(key.hashCode())  重哈希，减少碰撞概率</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">tabAt(i) 获取table中索引为i的Node元素</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">casTabAt(i) 利用CAS操作获取table中索引为i的Node元素</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">put的核心流程</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1、key进行重哈希spread(key.hashCode())</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">2、对当前table进行无条件循环</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">3、如果没有初始化table，则用initTable进行初始化</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">4、如果没有hash冲突，则直接用cas插入新节点，成功后则直接判断是否需要扩容，然后结束</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">5、(fh = f.hash) == MOVED 如果是这个状态则是扩容操作，先进行扩容</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">6、存在hash冲突，利用synchronized (f) 加锁保证线程安全</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">7、如果是链表，则直接遍历插入，如果数量大于8，则需要转换成红黑树</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">8、如果是红黑树则按照红黑树规则插入</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">9、最后是检查是否需要扩容addCount()</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul><p>推荐资料：</p><ul>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html\">https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html</a></li>\n</ul></section></section>","metadata":{"headings":[{"depth":2,"slug":"第五章-面试-bat-高级工程师技术经理的-java-集合框架-map-了解多少","text":"第五章 面试 BAT 高级工程师/技术经理的 java 集合框架 Map 了解多少#"},{"depth":3,"slug":"第-1-集-编程语言面试题之新版-javase-集合框架-map-篇小试牛刀上","text":"第 1 集 编程语言面试题之新版 javase 集合框架 Map 篇<小试牛刀上>#"},{"depth":3,"slug":"第-2-集-编程语言面试题之对象底层-hashcode-和-equals-掌握了吗","text":"第 2 集 编程语言面试题之对象底层 HashCode 和 equals 掌握了吗#"},{"depth":3,"slug":"第-3-集-编程语言面试题之新版-javase-集合框架-map-篇小试牛刀下","text":"第 3 集 编程语言面试题之新版 javase 集合框架 Map 篇<小试牛刀下>#"},{"depth":3,"slug":"第-4-集-编程语言面试题之新版-javase-集合框架-map-篇进阶","text":"第 4 集 编程语言面试题之新版 javase 集合框架 Map 篇<进阶>#"},{"depth":3,"slug":"第-5-集-编程语言面试题之新版-javase-集合框架-map-高手篇上","text":"第 5 集 编程语言面试题之新版 javase 集合框架 Map 高手篇<上>#"},{"depth":3,"slug":"第-6-集-编程语言面试题之新版-javase-集合框架-map-高手篇中","text":"第 6 集 编程语言面试题之新版 javase 集合框架 Map 高手篇<中>#"},{"depth":3,"slug":"第-7-集-源码剖析之深入新版-hashmap-高手篇下","text":"第 7 集 源码剖析之深入新版 HashMap 高手篇<下>#"},{"depth":3,"slug":"第-8-集-编程语言面试题之新版-javase-集合框架-concurrenthashmap-篇","text":"第 8 集 编程语言面试题之新版 javase 集合框架 ConcurrentHashMap 篇#"},{"depth":3,"slug":"第-9-集-源码剖析之深入新版-concurrenthashmap-篇","text":"第 9 集 源码剖析之深入新版 ConcurrentHashMap 篇#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"后端高级工程师面试专题05","published":"2025-11-05T00:00:00.000Z","pinned":false,"description":"第五章 面试 BAT 高级工程师/技术经理的 java 集合框架 Map 了解多少","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":13,"words":2585,"excerpt":"简介：集合框架里面基础 Map 面试题"},"imagePaths":[]}},"collection":"posts"},{"id":"项目大课/ai智能化云盘/ai智能化云盘01","data":{"title":"AI智能化云盘01","published":"2025-11-05T00:00:00.000Z","draft":false,"description":"第一章 学AI智能化云盘大课前你需要知道的内容","image":"","tags":["AI智能化云盘"],"category":"项目大课","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"后端高级工程师面试专题04","prevSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题04","nextTitle":"后端高级工程师面试专题05","nextSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题05"},"body":"# 第一章 学AI智能化云盘大课前你需要知道的内容\n\n## 新一代AI智能化云盘课程大纲内容介绍\n\n### 课程介绍\n\n- AI 智能化云盘大课，准备近 2 年的综合性实战项目，是**后端分布式大项目 + 结合 AI 大模型智能体开发 + 业务应用**\n\n- 打造新一代 AI 智能化云盘，加入众多新技术 + **后端业务领域超多解决方案** + **AI 大模型多案例应用场景**落地\n\n- 智能化云盘采用多语言开发，云盘板块采用 **Java 开发后端项目**，**AI 智能化板块采用 Python + LangChain 框架 + 大模型开发**\n\n- 后端和大模型板块内容各占一半，不会 Python 不影响，课程会从 0 到 1 教你上手 Python\n\n- 并掌握 AI 大模型 Agent 开发和主流解决方案和三方类库等多案例实战\n\n> **注意：**\n> 学习前，你【不需要任何机器学习和人工智能基础】课程里面如果用到的都会先讲解，不用担心\n> \n> 所以本套课程是 后端/前端业务研发工程师最适合上手的【业务系统 + LLM 大模型应用开发】的大项目课程\n> \n> 课程不会做单一复杂链路的大模型底层和理论，而是**重点讲解 AI 大模型的多种使用场景和编码落地的解决方案**\n> \n> 即是**下一个互联网 10 年的关键竞争力**，适合市面上 90% 的应用进行 AI 智能化重构方案\n\n### 项目核心技术体系\n\n后端业务全新技术：SpringBoot3.X 全家桶 + JDK21 + 超多实用 java 生态类库 + 大文件传输处理\n\n- AI 大模型全新技术：Python3.1X + FastAPI 框架 + 全新 LangChain 框架 + 向量数据库 Milvus + 多个大模型\n\n- 智能化云盘 多数一线大厂正在研发的业务领域，全网首个后端业务 + AI 大模型一起的项目教程\n\n- LLM大模型支持在线大模型调用和本地私有化部署，包括不限于 ChatGLM、GPT-4、通义千问、LLaMa 等\n\n- 后端业务开发板块：打造私有化云盘，大文件上传、秒传、下载、在线分享等核心模块\n\n- AI 大模型 Agent 板块\n\n  - LLM 大模型 Prompt 工程、RAG 知识库构建、Agent 智能体开发\n\n  - Memory 长短期记忆、LCEL、Tools 自定义工具、MaaS 模型服务搭建等\n\n### 核心业务模块应用场景\n\n业务应用类似阿里/百度云盘、NAS 等，支持多类型文件存储和处理，支持多类型存储架构\n\n- 基于云盘存储文件，结合 LLM 大模型，开发多个 Agent 智能体，应用多个业务场景，包括不限于\n\n  - 从 0 到 1 讲解 AI 大模型基础 + 项目实战，拓展前端/后端工程师必备的人工智能知识和应用实战\n\n  - 智能机器人 Chat 助理：长短期记忆的个人助理、智能客服、智能销售顾问等\n\n  - 企业问答知识库: 知识库检索内容问答、自定义上传到知识库、在线解析 URL 地址、实时联网搜索等\n\n  - 文档 AI 助手：文档概要总结、内容进行分段总结、AIGC 营销内容生产等\n\n![image-20241217115445442](/images/AI智能化云盘/image-20241217115445442.png)\n\n\n## 智能化云盘大课适合人员和新岗位方向\n\n### 课程适合人员\n\n- 多年 CRUD 老手/技术组长/CTO，工作多年技术成长遇到瓶颈，项目亮点稀缺？\n\n  - AI 大模型重塑后端业务，打造不一样大厂简历，掌握后端业务 + AI 大模型解决方案\n\n  - 大模型为核心的人工智能新时代到来，市场对大模型应用开发需求“指数级”飙升\n\n  - 用于电商、教育、金融、物流、营销…各行业都可冲刺，下一个互联网十年\n\n- 计划跳槽一二线互联网大厂，想突破成为 技术组长/架构师的同学（技术+管理）\n\n  - 从 0 到 1 架构智能云盘项目，包括需求文档 + 架构图 + 技术选项 + AI 解决方案 + 部署上线\n\n  - 超多不同领域的通用解决方案 + 应用场景，达到举一反三的思考能力\n\n  - 各行业都需要 AI 大模型的知识与解决方案 + 应用能力，个人能力的分水岭重新划分\n\n  - 掌握后端业务 + 人工智能下的 MASS 服务架构\n\n- 工作 1 到 7 年的后端工程师，传统 IT 企业转行互联网公司（缺少亮点互联网项目）\n\n  - 采用全新互联网主流技术栈，整合 AI 大模型提升编码能力+业务应用落地\n\n  - 超通用的大型互联网项目经验，90% 公司都可以包装，且适合直接使用\n\n  - 通过 AI 大模型 提高自己行业竞争力的，适合各类技术人员\n\n- 校招计划进一线大厂，本科、研究生的同学（国内/海外大厂都可以）\n\n  - 告别烂大街没亮点的简历项目，课程项目来自一线大厂实际业务应用\n\n  - 避免本地虚拟机部署，从 0 到 1 手把手 + 多角度实战 + 生产服务器落地部署\n\n  - 满足不同业务场景的 AI 智能化解决方案，带你实战互联网大厂开发流程\n\n### AI大模型的行业解决方案和案例库参考\n\n- https://page.dingtalk.com/wow/dingtalk/default/dingtalk/I0HfYX4QStBIpLgxnZQe\n\n- https://wolai.dingtalk.com/jVUBREtv4JHXRnBSWRaWj6\n\n- https://bigmodel.cn/\n\n### 市场岗位方向\n\n- 高级 Java 工程师/技术组长/架构师（本身后端能力 + AI 大模型应用开发能力）\n\n- AI 应用开发工程师（前端、后端、测试、运维、大数据等其他方向转）\n\n- AI 大模型开发工程师（前端、后端、测试、运维、大数据等其他方向转）\n\n![image-20241217115138477](/images/AI智能化云盘/image-20241217115138477.png)\n\n\n## 你的疑惑-智能化云盘大课高频问题解答\n\n- **问题：大模型是直接调用 API 吗，就是调用通义千问或者文心一言接口吗？**\n\n  - 不少同学认为，LLM 大模型只是简单调用 API？那如何和后端业务 + 数据库数据联动？\n\n  - 架构也和微服务类似，LLM 重试机制、兜底降级机制等等怎么做？敏感数据敢上传外部？\n\n  - 比如\n\n    - 某一次失败之后应该怎么处理，还有日志生成、管理资源、性能优化、准确性等等\n\n    - 这一些都是很关键的，靠普通的 API 是解决不了的，这个就是大课的部分解决方案，还有更多！！！！\n\n  - 通义千问或者文心一言都是一个基层模型底座，这些大模型类似我们的操作系统，不是商业应用程序\n\n  - 类似我们会基于操作系统上开发 App 软件；那 AI 应用就是基于这些大模型作为底座，开发上层的商业智能化应用\n\n  - 比如\n\n    - 公司需要做智能知识库、行业智能客服、智慧政务、AI 律师、AI 客服等，那就没法用这些平台\n\n    - 因为你公司不可能把敏感数据上传上去，而且也没法做到\n\n    - 比如律师行业，医疗行业，财税行业等专业领域知识都是\n\n  - 所以直接调用外部的 API 完全不一样，像通义千问等只是通用大模型，适合个人提升效率啥的，这个很容易\n\n  -  但是达不到商用级别，也难和公司的业务结合一起；\n\n  - 像很多公司都是有沉淀很多历史的资料，文档记录，案例等，而且又敏感，不能上传外部的 LLM 平台\n\n  - 所以都需要私有化部署，针对公司本身所处的行业进行深度定制和优化，结合常规的后端和前端项目整合一起\n\n- **问题：学完这个大课，可以开发怎么样的项目和应用呢？**\n\n  - AI 文档助手\n\n    - 你可以给一堆专业文档，包括 word 文档、PDF 等，让 AI 工具帮你生成 文档总结做周报、季度汇报等\n\n    - 给公司培训的的时候，可以从网上寻找很多资料，但是杂乱分散，可以让 AI 帮你整理和汇总，排版清晰\n\n    - 让 AI 帮你写多类型跳槽简历、毕业论文\n    \n  - 企业知识库\n\n    - 将企业的各类知识资源进行智能化归类、整合，形成一套问题与答案的集合\n\n    - 【企业内部知识共享】作为企业内部的知识共享平台，帮助员工快速获取所需知识，提高团队协作效率\n\n    - 【客户服务】AI 企业问答知识库可以为客户提供快速准确的解答服务 理解客户的问题并给出相应的答案\n\n    - 【员工培训】AI 企业问答知识库还可以作为员工培训的平台，根据员工的个人需求进行定制化培训\n    \n  - 私人 AI 助理\n\n    - 聊天与陪伴：私人 AI 助理可以陪伴用户聊天、讲笑话、玩小游戏等，提供轻松愉快的休闲娱乐体验\n\n    - 个性化推荐：根据用户的喜好和行为习惯，推荐音乐、电影、书籍等娱乐内容\n\n    - 健康管理：监测家庭成员的健康状况，提供运动、饮食建议，甚至可以协助医生进行诊断\n    \n  - 特定领域智能聊天机器人\n\n    - 通过给 AI 一系列资料，单独训练特定领域，然后让帮我们做出决策\n    \n    - 比如\n\n      - 各个大公司财报和历史股票行情信息，让 AI 汇总和给出指导建议\n      \n      - 给出医院检查报告等，AI 训练可以给出诊断和建议\n      \n      - 给出特定领域销售部门的日常话术和专业知识， 充当智能客服\n\n- **问题：IT 行业工作从事前端开发 或 后端开发、测试方向、大学生 等是否适合学习？大专是否可以？**\n\n  - 课程侧重是 LLM 应用开发，更能贴近企业实际的业务场景，学习难度对比常规人工智能和深度学习会低一些\n\n  - AI 大模型是刚出来的前沿知识，新风口领域项目，课程内容也提供了一些基础课程方便大家快速上手\n\n  - 大学生也可以快速入门然后跟上，至少要学过编程语言，如果有前端或后端技术的学习起来更加快速\n\n  - 所以前端、后端、测试、运维、大数据、技术组长和架构师都适合，下一个互联网 10 年！！！！\n\n  - 学习没有绝对的学历限制，一般中大型企业招聘时，会有要求“本科”\n\n  - 专科也有，但需要技术能力相对过硬，综合个人情况，做好自己的职业规划，提升技术和项目竞争力\n\n- **问题：什么是 AI 大模型应用，什么是 AI 大模型底层原理？课程是重点讲解哪块？**\n\n    - AI 大模型应用开发\n\n      - 就是我们用的很多人工智能工具，比如【智能美颜相机】【智能客服机器人】\n\n      - LLM 应用层面很多很多：企业问答、智能律师、智慧政务、税务等\n\n      - 多数公司都是开发这类应用产品，包括 App，网站等，使用人员和市场需求最多，90% 占比\n\n    - AI 大模型底层原理\n\n      - 就是为啥他的更加智能，采用什么数学算法，为啥更加智能，刨根问底\n\n      - 需要高学历，需要看很多行业英文论文、高等数学知识、算法原理等，岗位和市场需求少 10% 占比\n\n    - 如果个人喜欢编写代码，实现具体的功能，且想要快速看到应用效果，则 AI 大模型应用开发\n\n    - 如果你对算数学模型、机器学习等有很好的基础，有精力进行深入研究则可以学习 AI 大模型底层原理\n\n    - 我们这个课程对于侧重 AI 大模型应用开发，如果你是 0 基础，之前是前端/后端/测试/大数据等背景则推荐\n\n    - 建议优先学习 AI 大模型应用开发，然后在进一步学习 LLM 算法方面知识提升\n\n- **问题：后端业务 + LLM 大模型课程对电脑配置有什么要求，常规几千块的电脑能学不？**\n\n    - 常规电脑即可学习，虽然后端项目涉及多个中间件，LLM 大模型训练和私有化部署等需要用到大量硬件资源\n\n    - 课程会教采用云服务器和三方算力平台解决这类问题，几十块就可以搞定，所以不用担心\n\n    - 课程会讲多个 LLM 大模型，封装成底层，容易切换不同的大模型，包括在线和离线私有化部署的大模型\n\n    - LLM 大模型参数有几亿和几十亿、几百亿等参数规模，这个是需要比较大的算力资源\n\n    - 学习的时候可以使用少点参数进行练习，生产的时候可以根据公司需要选择不同级别的参数规模，结合硬件\n\n    - 这些都需要掌握，不同的级别的项目才好根据情况进行选择\n\n## AI云盘大课技术栈要求和内容安排说明\n\n### 大课技术栈概览\n\n- 基础工具环境：AI 大模型编码插件 + JDK21 + IDEA 旗舰版 + VSCode + Python3.1X + Linux 服务器\n\n- 后端高并发技术：新版 SpringBoot3.X + MybatisPlus + Lombok + Hutool + Mysql8.X + 多个开源工具包\n\n- 中间件 + 存储技术：Redis7.X + Kafak3.X-Kraft 架构 | RabbitMQ + 分布式文件存储 MinIO 或 OSS 存储引擎\n\n- 前后端分离架构下的 Vue3 + AntDesign + Nginx 网关 + 多个前端开源组件（提供完整代码）\n\n- 超多 AI 大模型 + 模型库应用：新版 GPT/ChatGLM/通义千问等 + Huggingface/ModelScope 等\n\n- AI 大模型技术：FastAPI 框架 + 全新 LangChain 框架 + 向量数据库 Milvus + 多个大模型高频类库等\n\n- LLM 框架组件：Model + Prompt + Agent + Chains + Memory + Indexes + RAG+ReAct 等\n\n- DevOps 上线部署：Jenkins CICD + 阿里云 Git 仓库 + 阿里云 ECS 服务器 + Docker 容器编排调度\n\n- ....更多精彩\n\n### 内容安排说明\n\n- 前置必备技术栈：SpringBoot + Mysql +Redis + Kafka｜RabbitMQ + Docker + Linux （不会的去官网学习）\n\n- 其他新技术栈：Python + LangChain + FastAPI + Milvus +MinIO 等大课里面会讲\n\n- **课程有多个板块，讲课安排是逐个技术栈进行击破，然后整合到项目里面，持续改进方案**\n\n> **注意：**\n> 此大课不需要【Python 和人工智能】相关基础，大项目应用前都会从 0 到 1 讲，然后再实战！！！\n> \n> AI 智能网盘 LLM 大模型 Agent 智能体开发代码不多，**但是关联的全新知识很多，务必仔细学**\n> \n> **整个过程大家需要学会思考，发现问题，里面也会留代码和设计的坑，要求大家细心发现并给出优化方案**","filePath":"src/content/posts/项目大课/AI智能化云盘/AI智能化云盘01.md","digest":"3ddd60f2b2456e21","rendered":{"html":"<section><h1 id=\"第一章-学ai智能化云盘大课前你需要知道的内容\">第一章 学AI智能化云盘大课前你需要知道的内容<a class=\"anchor\" href=\"#第一章-学ai智能化云盘大课前你需要知道的内容\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"新一代ai智能化云盘课程大纲内容介绍\">新一代AI智能化云盘课程大纲内容介绍<a class=\"anchor\" href=\"#新一代ai智能化云盘课程大纲内容介绍\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"课程介绍\">课程介绍<a class=\"anchor\" href=\"#课程介绍\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>AI 智能化云盘大课，准备近 2 年的综合性实战项目，是<strong>后端分布式大项目 + 结合 AI 大模型智能体开发 + 业务应用</strong></p>\n</li>\n<li>\n<p>打造新一代 AI 智能化云盘，加入众多新技术 + <strong>后端业务领域超多解决方案</strong> + <strong>AI 大模型多案例应用场景</strong>落地</p>\n</li>\n<li>\n<p>智能化云盘采用多语言开发，云盘板块采用 <strong>Java 开发后端项目</strong>，<strong>AI 智能化板块采用 Python + LangChain 框架 + 大模型开发</strong></p>\n</li>\n<li>\n<p>后端和大模型板块内容各占一半，不会 Python 不影响，课程会从 0 到 1 教你上手 Python</p>\n</li>\n<li>\n<p>并掌握 AI 大模型 Agent 开发和主流解决方案和三方类库等多案例实战</p>\n</li>\n</ul><blockquote>\n<p><strong>注意：</strong>\n学习前，你【不需要任何机器学习和人工智能基础】课程里面如果用到的都会先讲解，不用担心</p>\n<p>所以本套课程是 后端/前端业务研发工程师最适合上手的【业务系统 + LLM 大模型应用开发】的大项目课程</p>\n<p>课程不会做单一复杂链路的大模型底层和理论，而是<strong>重点讲解 AI 大模型的多种使用场景和编码落地的解决方案</strong></p>\n<p>即是<strong>下一个互联网 10 年的关键竞争力</strong>，适合市面上 90% 的应用进行 AI 智能化重构方案</p>\n</blockquote></section><section><h3 id=\"项目核心技术体系\">项目核心技术体系<a class=\"anchor\" href=\"#项目核心技术体系\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>后端业务全新技术：SpringBoot3.X 全家桶 + JDK21 + 超多实用 java 生态类库 + 大文件传输处理</p><ul>\n<li>\n<p>AI 大模型全新技术：Python3.1X + FastAPI 框架 + 全新 LangChain 框架 + 向量数据库 Milvus + 多个大模型</p>\n</li>\n<li>\n<p>智能化云盘 多数一线大厂正在研发的业务领域，全网首个后端业务 + AI 大模型一起的项目教程</p>\n</li>\n<li>\n<p>LLM大模型支持在线大模型调用和本地私有化部署，包括不限于 ChatGLM、GPT-4、通义千问、LLaMa 等</p>\n</li>\n<li>\n<p>后端业务开发板块：打造私有化云盘，大文件上传、秒传、下载、在线分享等核心模块</p>\n</li>\n<li>\n<p>AI 大模型 Agent 板块</p>\n<ul>\n<li>\n<p>LLM 大模型 Prompt 工程、RAG 知识库构建、Agent 智能体开发</p>\n</li>\n<li>\n<p>Memory 长短期记忆、LCEL、Tools 自定义工具、MaaS 模型服务搭建等</p>\n</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"核心业务模块应用场景\">核心业务模块应用场景<a class=\"anchor\" href=\"#核心业务模块应用场景\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>业务应用类似阿里/百度云盘、NAS 等，支持多类型文件存储和处理，支持多类型存储架构</p><ul>\n<li>\n<p>基于云盘存储文件，结合 LLM 大模型，开发多个 Agent 智能体，应用多个业务场景，包括不限于</p>\n<ul>\n<li>\n<p>从 0 到 1 讲解 AI 大模型基础 + 项目实战，拓展前端/后端工程师必备的人工智能知识和应用实战</p>\n</li>\n<li>\n<p>智能机器人 Chat 助理：长短期记忆的个人助理、智能客服、智能销售顾问等</p>\n</li>\n<li>\n<p>企业问答知识库: 知识库检索内容问答、自定义上传到知识库、在线解析 URL 地址、实时联网搜索等</p>\n</li>\n<li>\n<p>文档 AI 助手：文档概要总结、内容进行分段总结、AIGC 营销内容生产等</p>\n</li>\n</ul>\n</li>\n</ul><p><img src=\"/images/AI%E6%99%BA%E8%83%BD%E5%8C%96%E4%BA%91%E7%9B%98/image-20241217115445442.png\" alt=\"image-20241217115445442\"></p></section></section><section><h2 id=\"智能化云盘大课适合人员和新岗位方向\">智能化云盘大课适合人员和新岗位方向<a class=\"anchor\" href=\"#智能化云盘大课适合人员和新岗位方向\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"课程适合人员\">课程适合人员<a class=\"anchor\" href=\"#课程适合人员\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>多年 CRUD 老手/技术组长/CTO，工作多年技术成长遇到瓶颈，项目亮点稀缺？</p>\n<ul>\n<li>\n<p>AI 大模型重塑后端业务，打造不一样大厂简历，掌握后端业务 + AI 大模型解决方案</p>\n</li>\n<li>\n<p>大模型为核心的人工智能新时代到来，市场对大模型应用开发需求“指数级”飙升</p>\n</li>\n<li>\n<p>用于电商、教育、金融、物流、营销…各行业都可冲刺，下一个互联网十年</p>\n</li>\n</ul>\n</li>\n<li>\n<p>计划跳槽一二线互联网大厂，想突破成为 技术组长/架构师的同学（技术+管理）</p>\n<ul>\n<li>\n<p>从 0 到 1 架构智能云盘项目，包括需求文档 + 架构图 + 技术选项 + AI 解决方案 + 部署上线</p>\n</li>\n<li>\n<p>超多不同领域的通用解决方案 + 应用场景，达到举一反三的思考能力</p>\n</li>\n<li>\n<p>各行业都需要 AI 大模型的知识与解决方案 + 应用能力，个人能力的分水岭重新划分</p>\n</li>\n<li>\n<p>掌握后端业务 + 人工智能下的 MASS 服务架构</p>\n</li>\n</ul>\n</li>\n<li>\n<p>工作 1 到 7 年的后端工程师，传统 IT 企业转行互联网公司（缺少亮点互联网项目）</p>\n<ul>\n<li>\n<p>采用全新互联网主流技术栈，整合 AI 大模型提升编码能力+业务应用落地</p>\n</li>\n<li>\n<p>超通用的大型互联网项目经验，90% 公司都可以包装，且适合直接使用</p>\n</li>\n<li>\n<p>通过 AI 大模型 提高自己行业竞争力的，适合各类技术人员</p>\n</li>\n</ul>\n</li>\n<li>\n<p>校招计划进一线大厂，本科、研究生的同学（国内/海外大厂都可以）</p>\n<ul>\n<li>\n<p>告别烂大街没亮点的简历项目，课程项目来自一线大厂实际业务应用</p>\n</li>\n<li>\n<p>避免本地虚拟机部署，从 0 到 1 手把手 + 多角度实战 + 生产服务器落地部署</p>\n</li>\n<li>\n<p>满足不同业务场景的 AI 智能化解决方案，带你实战互联网大厂开发流程</p>\n</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"ai大模型的行业解决方案和案例库参考\">AI大模型的行业解决方案和案例库参考<a class=\"anchor\" href=\"#ai大模型的行业解决方案和案例库参考\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p><a href=\"https://page.dingtalk.com/wow/dingtalk/default/dingtalk/I0HfYX4QStBIpLgxnZQe\">https://page.dingtalk.com/wow/dingtalk/default/dingtalk/I0HfYX4QStBIpLgxnZQe</a></p>\n</li>\n<li>\n<p><a href=\"https://wolai.dingtalk.com/jVUBREtv4JHXRnBSWRaWj6\">https://wolai.dingtalk.com/jVUBREtv4JHXRnBSWRaWj6</a></p>\n</li>\n<li>\n<p><a href=\"https://bigmodel.cn/\">https://bigmodel.cn/</a></p>\n</li>\n</ul></section><section><h3 id=\"市场岗位方向\">市场岗位方向<a class=\"anchor\" href=\"#市场岗位方向\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>高级 Java 工程师/技术组长/架构师（本身后端能力 + AI 大模型应用开发能力）</p>\n</li>\n<li>\n<p>AI 应用开发工程师（前端、后端、测试、运维、大数据等其他方向转）</p>\n</li>\n<li>\n<p>AI 大模型开发工程师（前端、后端、测试、运维、大数据等其他方向转）</p>\n</li>\n</ul><p><img src=\"/images/AI%E6%99%BA%E8%83%BD%E5%8C%96%E4%BA%91%E7%9B%98/image-20241217115138477.png\" alt=\"image-20241217115138477\"></p></section></section><section><h2 id=\"你的疑惑-智能化云盘大课高频问题解答\">你的疑惑-智能化云盘大课高频问题解答<a class=\"anchor\" href=\"#你的疑惑-智能化云盘大课高频问题解答\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>\n<p><strong>问题：大模型是直接调用 API 吗，就是调用通义千问或者文心一言接口吗？</strong></p>\n<ul>\n<li>\n<p>不少同学认为，LLM 大模型只是简单调用 API？那如何和后端业务 + 数据库数据联动？</p>\n</li>\n<li>\n<p>架构也和微服务类似，LLM 重试机制、兜底降级机制等等怎么做？敏感数据敢上传外部？</p>\n</li>\n<li>\n<p>比如</p>\n<ul>\n<li>\n<p>某一次失败之后应该怎么处理，还有日志生成、管理资源、性能优化、准确性等等</p>\n</li>\n<li>\n<p>这一些都是很关键的，靠普通的 API 是解决不了的，这个就是大课的部分解决方案，还有更多！！！！</p>\n</li>\n</ul>\n</li>\n<li>\n<p>通义千问或者文心一言都是一个基层模型底座，这些大模型类似我们的操作系统，不是商业应用程序</p>\n</li>\n<li>\n<p>类似我们会基于操作系统上开发 App 软件；那 AI 应用就是基于这些大模型作为底座，开发上层的商业智能化应用</p>\n</li>\n<li>\n<p>比如</p>\n<ul>\n<li>\n<p>公司需要做智能知识库、行业智能客服、智慧政务、AI 律师、AI 客服等，那就没法用这些平台</p>\n</li>\n<li>\n<p>因为你公司不可能把敏感数据上传上去，而且也没法做到</p>\n</li>\n<li>\n<p>比如律师行业，医疗行业，财税行业等专业领域知识都是</p>\n</li>\n</ul>\n</li>\n<li>\n<p>所以直接调用外部的 API 完全不一样，像通义千问等只是通用大模型，适合个人提升效率啥的，这个很容易</p>\n</li>\n<li>\n<p>但是达不到商用级别，也难和公司的业务结合一起；</p>\n</li>\n<li>\n<p>像很多公司都是有沉淀很多历史的资料，文档记录，案例等，而且又敏感，不能上传外部的 LLM 平台</p>\n</li>\n<li>\n<p>所以都需要私有化部署，针对公司本身所处的行业进行深度定制和优化，结合常规的后端和前端项目整合一起</p>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>问题：学完这个大课，可以开发怎么样的项目和应用呢？</strong></p>\n<ul>\n<li>\n<p>AI 文档助手</p>\n<ul>\n<li>\n<p>你可以给一堆专业文档，包括 word 文档、PDF 等，让 AI 工具帮你生成 文档总结做周报、季度汇报等</p>\n</li>\n<li>\n<p>给公司培训的的时候，可以从网上寻找很多资料，但是杂乱分散，可以让 AI 帮你整理和汇总，排版清晰</p>\n</li>\n<li>\n<p>让 AI 帮你写多类型跳槽简历、毕业论文</p>\n</li>\n</ul>\n</li>\n<li>\n<p>企业知识库</p>\n<ul>\n<li>\n<p>将企业的各类知识资源进行智能化归类、整合，形成一套问题与答案的集合</p>\n</li>\n<li>\n<p>【企业内部知识共享】作为企业内部的知识共享平台，帮助员工快速获取所需知识，提高团队协作效率</p>\n</li>\n<li>\n<p>【客户服务】AI 企业问答知识库可以为客户提供快速准确的解答服务 理解客户的问题并给出相应的答案</p>\n</li>\n<li>\n<p>【员工培训】AI 企业问答知识库还可以作为员工培训的平台，根据员工的个人需求进行定制化培训</p>\n</li>\n</ul>\n</li>\n<li>\n<p>私人 AI 助理</p>\n<ul>\n<li>\n<p>聊天与陪伴：私人 AI 助理可以陪伴用户聊天、讲笑话、玩小游戏等，提供轻松愉快的休闲娱乐体验</p>\n</li>\n<li>\n<p>个性化推荐：根据用户的喜好和行为习惯，推荐音乐、电影、书籍等娱乐内容</p>\n</li>\n<li>\n<p>健康管理：监测家庭成员的健康状况，提供运动、饮食建议，甚至可以协助医生进行诊断</p>\n</li>\n</ul>\n</li>\n<li>\n<p>特定领域智能聊天机器人</p>\n<ul>\n<li>\n<p>通过给 AI 一系列资料，单独训练特定领域，然后让帮我们做出决策</p>\n</li>\n<li>\n<p>比如</p>\n<ul>\n<li>\n<p>各个大公司财报和历史股票行情信息，让 AI 汇总和给出指导建议</p>\n</li>\n<li>\n<p>给出医院检查报告等，AI 训练可以给出诊断和建议</p>\n</li>\n<li>\n<p>给出特定领域销售部门的日常话术和专业知识， 充当智能客服</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>问题：IT 行业工作从事前端开发 或 后端开发、测试方向、大学生 等是否适合学习？大专是否可以？</strong></p>\n<ul>\n<li>\n<p>课程侧重是 LLM 应用开发，更能贴近企业实际的业务场景，学习难度对比常规人工智能和深度学习会低一些</p>\n</li>\n<li>\n<p>AI 大模型是刚出来的前沿知识，新风口领域项目，课程内容也提供了一些基础课程方便大家快速上手</p>\n</li>\n<li>\n<p>大学生也可以快速入门然后跟上，至少要学过编程语言，如果有前端或后端技术的学习起来更加快速</p>\n</li>\n<li>\n<p>所以前端、后端、测试、运维、大数据、技术组长和架构师都适合，下一个互联网 10 年！！！！</p>\n</li>\n<li>\n<p>学习没有绝对的学历限制，一般中大型企业招聘时，会有要求“本科”</p>\n</li>\n<li>\n<p>专科也有，但需要技术能力相对过硬，综合个人情况，做好自己的职业规划，提升技术和项目竞争力</p>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>问题：什么是 AI 大模型应用，什么是 AI 大模型底层原理？课程是重点讲解哪块？</strong></p>\n<ul>\n<li>\n<p>AI 大模型应用开发</p>\n<ul>\n<li>\n<p>就是我们用的很多人工智能工具，比如【智能美颜相机】【智能客服机器人】</p>\n</li>\n<li>\n<p>LLM 应用层面很多很多：企业问答、智能律师、智慧政务、税务等</p>\n</li>\n<li>\n<p>多数公司都是开发这类应用产品，包括 App，网站等，使用人员和市场需求最多，90% 占比</p>\n</li>\n</ul>\n</li>\n<li>\n<p>AI 大模型底层原理</p>\n<ul>\n<li>\n<p>就是为啥他的更加智能，采用什么数学算法，为啥更加智能，刨根问底</p>\n</li>\n<li>\n<p>需要高学历，需要看很多行业英文论文、高等数学知识、算法原理等，岗位和市场需求少 10% 占比</p>\n</li>\n</ul>\n</li>\n<li>\n<p>如果个人喜欢编写代码，实现具体的功能，且想要快速看到应用效果，则 AI 大模型应用开发</p>\n</li>\n<li>\n<p>如果你对算数学模型、机器学习等有很好的基础，有精力进行深入研究则可以学习 AI 大模型底层原理</p>\n</li>\n<li>\n<p>我们这个课程对于侧重 AI 大模型应用开发，如果你是 0 基础，之前是前端/后端/测试/大数据等背景则推荐</p>\n</li>\n<li>\n<p>建议优先学习 AI 大模型应用开发，然后在进一步学习 LLM 算法方面知识提升</p>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>问题：后端业务 + LLM 大模型课程对电脑配置有什么要求，常规几千块的电脑能学不？</strong></p>\n<ul>\n<li>\n<p>常规电脑即可学习，虽然后端项目涉及多个中间件，LLM 大模型训练和私有化部署等需要用到大量硬件资源</p>\n</li>\n<li>\n<p>课程会教采用云服务器和三方算力平台解决这类问题，几十块就可以搞定，所以不用担心</p>\n</li>\n<li>\n<p>课程会讲多个 LLM 大模型，封装成底层，容易切换不同的大模型，包括在线和离线私有化部署的大模型</p>\n</li>\n<li>\n<p>LLM 大模型参数有几亿和几十亿、几百亿等参数规模，这个是需要比较大的算力资源</p>\n</li>\n<li>\n<p>学习的时候可以使用少点参数进行练习，生产的时候可以根据公司需要选择不同级别的参数规模，结合硬件</p>\n</li>\n<li>\n<p>这些都需要掌握，不同的级别的项目才好根据情况进行选择</p>\n</li>\n</ul>\n</li>\n</ul></section><section><h2 id=\"ai云盘大课技术栈要求和内容安排说明\">AI云盘大课技术栈要求和内容安排说明<a class=\"anchor\" href=\"#ai云盘大课技术栈要求和内容安排说明\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"大课技术栈概览\">大课技术栈概览<a class=\"anchor\" href=\"#大课技术栈概览\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>基础工具环境：AI 大模型编码插件 + JDK21 + IDEA 旗舰版 + VSCode + Python3.1X + Linux 服务器</p>\n</li>\n<li>\n<p>后端高并发技术：新版 SpringBoot3.X + MybatisPlus + Lombok + Hutool + Mysql8.X + 多个开源工具包</p>\n</li>\n<li>\n<p>中间件 + 存储技术：Redis7.X + Kafak3.X-Kraft 架构 | RabbitMQ + 分布式文件存储 MinIO 或 OSS 存储引擎</p>\n</li>\n<li>\n<p>前后端分离架构下的 Vue3 + AntDesign + Nginx 网关 + 多个前端开源组件（提供完整代码）</p>\n</li>\n<li>\n<p>超多 AI 大模型 + 模型库应用：新版 GPT/ChatGLM/通义千问等 + Huggingface/ModelScope 等</p>\n</li>\n<li>\n<p>AI 大模型技术：FastAPI 框架 + 全新 LangChain 框架 + 向量数据库 Milvus + 多个大模型高频类库等</p>\n</li>\n<li>\n<p>LLM 框架组件：Model + Prompt + Agent + Chains + Memory + Indexes + RAG+ReAct 等</p>\n</li>\n<li>\n<p>DevOps 上线部署：Jenkins CICD + 阿里云 Git 仓库 + 阿里云 ECS 服务器 + Docker 容器编排调度</p>\n</li>\n<li>\n<p>…更多精彩</p>\n</li>\n</ul></section><section><h3 id=\"内容安排说明\">内容安排说明<a class=\"anchor\" href=\"#内容安排说明\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>前置必备技术栈：SpringBoot + Mysql +Redis + Kafka｜RabbitMQ + Docker + Linux （不会的去官网学习）</p>\n</li>\n<li>\n<p>其他新技术栈：Python + LangChain + FastAPI + Milvus +MinIO 等大课里面会讲</p>\n</li>\n<li>\n<p><strong>课程有多个板块，讲课安排是逐个技术栈进行击破，然后整合到项目里面，持续改进方案</strong></p>\n</li>\n</ul><blockquote>\n<p><strong>注意：</strong>\n此大课不需要【Python 和人工智能】相关基础，大项目应用前都会从 0 到 1 讲，然后再实战！！！</p>\n<p>AI 智能网盘 LLM 大模型 Agent 智能体开发代码不多，<strong>但是关联的全新知识很多，务必仔细学</strong></p>\n<p><strong>整个过程大家需要学会思考，发现问题，里面也会留代码和设计的坑，要求大家细心发现并给出优化方案</strong></p>\n</blockquote></section></section></section>","metadata":{"headings":[{"depth":1,"slug":"第一章-学ai智能化云盘大课前你需要知道的内容","text":"第一章 学AI智能化云盘大课前你需要知道的内容#"},{"depth":2,"slug":"新一代ai智能化云盘课程大纲内容介绍","text":"新一代AI智能化云盘课程大纲内容介绍#"},{"depth":3,"slug":"课程介绍","text":"课程介绍#"},{"depth":3,"slug":"项目核心技术体系","text":"项目核心技术体系#"},{"depth":3,"slug":"核心业务模块应用场景","text":"核心业务模块应用场景#"},{"depth":2,"slug":"智能化云盘大课适合人员和新岗位方向","text":"智能化云盘大课适合人员和新岗位方向#"},{"depth":3,"slug":"课程适合人员","text":"课程适合人员#"},{"depth":3,"slug":"ai大模型的行业解决方案和案例库参考","text":"AI大模型的行业解决方案和案例库参考#"},{"depth":3,"slug":"市场岗位方向","text":"市场岗位方向#"},{"depth":2,"slug":"你的疑惑-智能化云盘大课高频问题解答","text":"你的疑惑-智能化云盘大课高频问题解答#"},{"depth":2,"slug":"ai云盘大课技术栈要求和内容安排说明","text":"AI云盘大课技术栈要求和内容安排说明#"},{"depth":3,"slug":"大课技术栈概览","text":"大课技术栈概览#"},{"depth":3,"slug":"内容安排说明","text":"内容安排说明#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"AI智能化云盘01","published":"2025-11-05T00:00:00.000Z","pinned":false,"description":"第一章 学AI智能化云盘大课前你需要知道的内容","image":"","tags":["AI智能化云盘"],"category":"项目大课","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":19,"words":3788,"excerpt":"后端业务全新技术：SpringBoot3.X 全家桶 + JDK21 + 超多实用 java 生态类库 + 大文件传输处理"},"imagePaths":[]}},"collection":"posts"}],"2025-11-03":[{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题03","data":{"title":"后端高级工程师面试专题03","published":"2025-11-03T00:00:00.000Z","draft":false,"description":"第三章 应聘大厂工程师/技术经理的你编程基础是否牢固《下》(大厂校招+社招必备)","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"sso","prevSlug":"技术点/sso","nextTitle":"后端高级工程师面试专题04","nextSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题04"},"body":"## 第三章 应聘大厂工程师/技术经理的你编程基础是否牢固《下》(大厂校招+社招必备)\n\n### 第 1 集 编程语言面试题之新版 javase 字符串（重点）\n\n**简介：常用字符串的考查点**\n\n- 难度【 \\*\\*\\* 】\n\n- 问题 1: String str = new String(\"xdclass.net\"); 创建了几个对象？\n\n    ```text\n    答案：\n\n    创建一个对象：常量池存在，则直接new一个对象；\n\n    创建两个对象：常量池不存在，则在常量池创建一个对象，也在堆里面创建一个对象\n    ```\n\n- 问题 2: 下面是比较什么？输出结果是什么？为什么是这样的结果\n    ```java\n    String str1= new String(\"xdclass.net\");\n    String str2= \"xdclass.net\";\n    String str3= \"xdclass.net\";\n    System.out.println(str1 == str2) //false\n    System.out.println(str2 == str3) //true\n    ```\n\n    ```text\n    答案：\n    比较引用的内存地址是否一样\n    第一个是false： new 创建新的对象会开辟新的空间，所以地址不一样\n    第二个是true：都是从常量池里面获取，\"xdclass.net\" 存在于常量池中\n    ```\n\n- 问题 3： 写出下面代码的各个结果？如果需要两个都为 true，应该怎么修改`\n\n    ```java\n    String s1 = \"xdclass\";\n    \n    String s2 = s1 + \".net\";  //变量 + 常量 = 来自堆\n    \n    String s3 = \"xdclass\" + \".net\";  //常量 + 常量 = 来自常亮池\n    \n    System.out.println(s2 == \"xdclass.net\");\n    \n    System.out.println(s3 == \"xdclass.net\");\n    ```\n\n    ```text\n    答案\n    第一条语句打印的结果为false， s2 = s1 + \".net\",   //变量+常量=堆\n    构建了一个新的string对象，并将对象引用赋予s2变量，常量池中的地址不一样，但是值一样。\n\n\n    第二条语句打印的结果为true，javac编译可以对【字符串常量】直接相加的表达式进行优化，不用等到运行期再去进行加法运算处理，而是直接将其编译成一个这些常量相连的结果.\n\n    如果需要第一个输出为true，只需要把变量改为常量即可 fianl String s1 = \"xdclass\";\n    不管是new String(\"XXX\")和直接常量赋值, 都会在字符串常量池创建.只是new String(\"XXX\")方式会在堆中创建一个对象去指向常量池的对象, 普通的常量赋值是直接赋值给变量\n    ```\n\n### 第 2 集 编程语言面试题之新版 javase 字符串相关构建类\n\n**简介：常用字符串相关构建类的使用好区别**\n\n- 考点：是否有举一反三的思维，常用类的掌握情况\n\n- 难度【 \\*\\*\\* 】\n\n- 问：String、StringBuffer 与 StringBuilder 的区别？分别在哪些场景下使用\n\n- 答案：\n\n    ```text\n    三者都是final， 不允许被继承\n    在本质都是char[]字符数组实现\n    String、StringBuffer与StringBuilder中，String是不可变对象，另外两个是可变的\n    ```\n\n    ```text\n    StringBuilder 效率更快，因为它不需要加锁，不具备多线程安全\n\n    StringBuffer里面操作方法用synchronized ，效率相对更低,是线程安全的；\n\n    使用场景：\n        操作少量的数据用String，但是常改变内容且操作数据多情况下最好不要用 String ，因为每次生成中间对象性能会降低\n\n        单线程下操作大量的字符串用StringBuilder，虽然线程不安全但是不影响\n        \n        多线程下操作大量的字符串，且需要保证线程安全 则用StringBuffer\n    ```\n\n### 第 3 集 编程语言面试题之新版 javase 面向对象篇\n\n**简介：面向对象思想 OOP**\n\n- 考点：面向对象思想 OOP 的理解\n\n- 难度【 \\*\\*\\* 】\n\n- 面向对象的四大特性是？分别解释下\n\n    ```text\n    答案：\n        抽象\n            关键词abstract声明的类叫作抽象类，abstract声明的⽅法叫抽象⽅法\n            ⼀个类⾥包含了⼀个或多个抽象⽅法，类就必须指定成抽象类\n            抽象⽅法属于⼀种特殊⽅法，只含有⼀个声明，没有⽅法体\n            抽象支付\n                pay(金额，订单号)，默认实现是本地支付，微信支付，支付宝支付，银行卡支付\n\n        封装\n            封装是把过程和数据包围起来，对数据的访问只能通过已定义的接⼝即⽅法\n            在java中通过关键字private，protected和public实现封装。\n            封装把对象的所有组成部分组合在⼀起，封装定义程序如何引⽤对象的数据，\n            封装实际上使⽤⽅法将类的数据隐藏起来，控制⽤户对类的修改和访问数据的程度。 适当的\n            封装可以让代码更容易理解和维护，也加强了代码的安全性\n            类封装\n            ⽅法封装\n        \n        继承\n            ⼦类继承⽗类的特征和⾏为，使得⼦类对象具有⽗类的⽅法和属性，⽗类也叫基类，具有公共的⽅法和属性\n            动物<-猫\n            动物<-狗\n            abstract class AbsPay{\n        \n            }\n        \n            WeixinPay extends AbsPay{\n        \n            }\n        \n            AliPay extends AbsPay{\n        \n            }\n        \n        多态\n            同⼀个⾏为具有多个不同表现形式的能⼒\n            优点：减少耦合、灵活可拓展\n            ⼀般是继承类或者重写⽅法实现\n    ```\n\n### 第 4 集 编程语言面试题之新版 javase 接口篇\n\n**简介：讲解接口常见面试题，新版 JDK8**\n\n- 考点：基础是否扎实和常用语言是否有了解新语法\n\n- 难度【 \\*\\*\\* 】\n\n- Overload 和 Override 的区别？\n\n    ```text\n    重载Overload：表示同一个类中可以有多个名称相同的方法，但这些方法的参数列表各不相同，参数个数或类型不同\n    重写Override：表示子类中的方法可以与父类中的某个方法的名称和参数完全相同\n    ```\n\n- 接口是否可以继承接口？接口是否支持多继承？类是否支持多继承？接口里面是否可以有方法实现\n\n  - 接⼝⾥可以有静态⽅法和⽅法体\n  - 接⼝中所有的⽅法必须是抽象⽅法（JDK8 之后就不是）\n  - 接⼝不是被类继承了，⽽是要被类实现\n  - 接⼝⽀持多继承, 类不⽀持多个类继承\n\n  > ⼀个类只能继承⼀个类，但是能实现多个接⼝,接⼝能继承另⼀个接⼝，接⼝的继承使⽤ extends 关键字，和类继承⼀样\n\n- 是否了解 JDK8 里面接口新特性\n\n  - interface 中可以有 static ⽅法，但必须有⽅法实现体，该⽅法只属于该接⼝，接⼝名直接调⽤\n    该⽅法\n  - 接⼝中新增 default 关键字修饰的⽅法，default ⽅法只能定义在接⼝中，可以在⼦类或⼦接⼝\n    中被重写 default 定义的⽅法必须有⽅法体\n  - ⽗接⼝的 default ⽅法如果在⼦接⼝或⼦类被重写，那么⼦接⼝实现对象、⼦类对象，调⽤该\n    ⽅法，以重写为准\n  - 本类、接⼝如果没有重写⽗类（即接⼝）的 default ⽅法，则在调⽤ default ⽅法时，使⽤⽗类（接口）\n    定义的 default ⽅法逻辑","filePath":"src/content/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题03.md","digest":"9339f0b3254ae44e","rendered":{"html":"<section><h2 id=\"第三章-应聘大厂工程师技术经理的你编程基础是否牢固下大厂校招社招必备\">第三章 应聘大厂工程师/技术经理的你编程基础是否牢固《下》(大厂校招+社招必备)<a class=\"anchor\" href=\"#第三章-应聘大厂工程师技术经理的你编程基础是否牢固下大厂校招社招必备\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"第-1-集-编程语言面试题之新版-javase-字符串重点\">第 1 集 编程语言面试题之新版 javase 字符串（重点）<a class=\"anchor\" href=\"#第-1-集-编程语言面试题之新版-javase-字符串重点\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：常用字符串的考查点</strong></p><ul>\n<li>\n<p>难度【 *** 】</p>\n</li>\n<li>\n<p>问题 1: String str = new String(“xdclass.net”); 创建了几个对象？</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:37ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">答案：</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">创建一个对象：常量池存在，则直接new一个对象；</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">创建两个对象：常量池不存在，则在常量池创建一个对象，也在堆里面创建一个对象</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>问题 2: 下面是比较什么？输出结果是什么？为什么是这样的结果</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:40ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">String str1</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">String</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"xdclass.net\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">String str2</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"xdclass.net\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">String str3</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"xdclass.net\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(str1 </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> str2) </span><span style=\"--0:#616972;--1:#99A0A6\">//false</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(str2 </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> str3) </span><span style=\"--0:#616972;--1:#99A0A6\">//true</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">答案：</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">比较引用的内存地址是否一样</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">第一个是false： new 创建新的对象会开辟新的空间，所以地址不一样</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">第二个是true：都是从常量池里面获取，\"xdclass.net\" 存在于常量池中</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>问题 3： 写出下面代码的各个结果？如果需要两个都为 true，应该怎么修改`</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:50ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">String s1 </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"xdclass\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">String s2 </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> s1 </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\".net\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;  </span><span style=\"--0:#616972;--1:#99A0A6\">//变量 + 常量 = 来自堆</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">String s3 </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"xdclass\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\".net\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;  </span><span style=\"--0:#616972;--1:#99A0A6\">//常量 + 常量 = 来自常亮池</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(s2 </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"xdclass.net\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(s3 </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"xdclass.net\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:98ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">答案</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">第一条语句打印的结果为false， s2 = s1 + \".net\",   //变量+常量=堆</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">构建了一个新的string对象，并将对象引用赋予s2变量，常量池中的地址不一样，但是值一样。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">第二条语句打印的结果为true，javac编译可以对【字符串常量】直接相加的表达式进行优化，不用等到运行期再去进行加法运算处理，而是直接将其编译成一个这些常量相连的结果.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">如果需要第一个输出为true，只需要把变量改为常量即可 fianl String s1 = \"xdclass\";</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">不管是new String(\"XXX\")和直接常量赋值, 都会在字符串常量池创建.只是new String(\"XXX\")方式会在堆中创建一个对象去指向常量池的对象, 普通的常量赋值是直接赋值给变量</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-2-集-编程语言面试题之新版-javase-字符串相关构建类\">第 2 集 编程语言面试题之新版 javase 字符串相关构建类<a class=\"anchor\" href=\"#第-2-集-编程语言面试题之新版-javase-字符串相关构建类\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：常用字符串相关构建类的使用好区别</strong></p><ul>\n<li>\n<p>考点：是否有举一反三的思维，常用类的掌握情况</p>\n</li>\n<li>\n<p>难度【 *** 】</p>\n</li>\n<li>\n<p>问：String、StringBuffer 与 StringBuilder 的区别？分别在哪些场景下使用</p>\n</li>\n<li>\n<p>答案：</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:56ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">三者都是final， 不允许被继承</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">在本质都是char[]字符数组实现</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">String、StringBuffer与StringBuilder中，String是不可变对象，另外两个是可变的</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:64ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">StringBuilder 效率更快，因为它不需要加锁，不具备多线程安全</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">StringBuffer里面操作方法用synchronized ，效率相对更低,是线程安全的；</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">使用场景：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">操作少量的数据用String，但是常改变内容且操作数据多情况下最好不要用 String ，因为每次生成中间对象性能会降低</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">单线程下操作大量的字符串用StringBuilder，虽然线程不安全但是不影响</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">多线程下操作大量的字符串，且需要保证线程安全 则用StringBuffer</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-3-集-编程语言面试题之新版-javase-面向对象篇\">第 3 集 编程语言面试题之新版 javase 面向对象篇<a class=\"anchor\" href=\"#第-3-集-编程语言面试题之新版-javase-面向对象篇\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：面向对象思想 OOP</strong></p><ul>\n<li>\n<p>考点：面向对象思想 OOP 的理解</p>\n</li>\n<li>\n<p>难度【 *** 】</p>\n</li>\n<li>\n<p>面向对象的四大特性是？分别解释下</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:55ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">答案：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">抽象</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">关键词abstract声明的类叫作抽象类，abstract声明的⽅法叫抽象⽅法</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">⼀个类⾥包含了⼀个或多个抽象⽅法，类就必须指定成抽象类</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">抽象⽅法属于⼀种特殊⽅法，只含有⼀个声明，没有⽅法体</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">抽象支付</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">            </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">pay(金额，订单号)，默认实现是本地支付，微信支付，支付宝支付，银行卡支付</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">封装</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">封装是把过程和数据包围起来，对数据的访问只能通过已定义的接⼝即⽅法</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">在java中通过关键字private，protected和public实现封装。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">封装把对象的所有组成部分组合在⼀起，封装定义程序如何引⽤对象的数据，</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">封装实际上使⽤⽅法将类的数据隐藏起来，控制⽤户对类的修改和访问数据的程度。 适当的</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">封装可以让代码更容易理解和维护，也加强了代码的安全性</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">类封装</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">⽅法封装</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">继承</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">⼦类继承⽗类的特征和⾏为，使得⼦类对象具有⽗类的⽅法和属性，⽗类也叫基类，具有公共的⽅法和属性</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">动物&#x3C;-猫</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">动物&#x3C;-狗</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">abstract class AbsPay{</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">WeixinPay extends AbsPay{</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">AliPay extends AbsPay{</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">多态</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">同⼀个⾏为具有多个不同表现形式的能⼒</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">优点：减少耦合、灵活可拓展</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">⼀般是继承类或者重写⽅法实现</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-4-集-编程语言面试题之新版-javase-接口篇\">第 4 集 编程语言面试题之新版 javase 接口篇<a class=\"anchor\" href=\"#第-4-集-编程语言面试题之新版-javase-接口篇\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：讲解接口常见面试题，新版 JDK8</strong></p><ul>\n<li>\n<p>考点：基础是否扎实和常用语言是否有了解新语法</p>\n</li>\n<li>\n<p>难度【 *** 】</p>\n</li>\n<li>\n<p>Overload 和 Override 的区别？</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:55ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">重载Overload：表示同一个类中可以有多个名称相同的方法，但这些方法的参数列表各不相同，参数个数或类型不同</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">重写Override：表示子类中的方法可以与父类中的某个方法的名称和参数完全相同</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>接口是否可以继承接口？接口是否支持多继承？类是否支持多继承？接口里面是否可以有方法实现</p>\n<ul>\n<li>接⼝⾥可以有静态⽅法和⽅法体</li>\n<li>接⼝中所有的⽅法必须是抽象⽅法（JDK8 之后就不是）</li>\n<li>接⼝不是被类继承了，⽽是要被类实现</li>\n<li>接⼝⽀持多继承, 类不⽀持多个类继承</li>\n</ul>\n<blockquote>\n<p>⼀个类只能继承⼀个类，但是能实现多个接⼝,接⼝能继承另⼀个接⼝，接⼝的继承使⽤ extends 关键字，和类继承⼀样</p>\n</blockquote>\n</li>\n<li>\n<p>是否了解 JDK8 里面接口新特性</p>\n<ul>\n<li>interface 中可以有 static ⽅法，但必须有⽅法实现体，该⽅法只属于该接⼝，接⼝名直接调⽤\n该⽅法</li>\n<li>接⼝中新增 default 关键字修饰的⽅法，default ⽅法只能定义在接⼝中，可以在⼦类或⼦接⼝\n中被重写 default 定义的⽅法必须有⽅法体</li>\n<li>⽗接⼝的 default ⽅法如果在⼦接⼝或⼦类被重写，那么⼦接⼝实现对象、⼦类对象，调⽤该\n⽅法，以重写为准</li>\n<li>本类、接⼝如果没有重写⽗类（即接⼝）的 default ⽅法，则在调⽤ default ⽅法时，使⽤⽗类（接口）\n定义的 default ⽅法逻辑</li>\n</ul>\n</li>\n</ul></section></section>","metadata":{"headings":[{"depth":2,"slug":"第三章-应聘大厂工程师技术经理的你编程基础是否牢固下大厂校招社招必备","text":"第三章 应聘大厂工程师/技术经理的你编程基础是否牢固《下》(大厂校招+社招必备)#"},{"depth":3,"slug":"第-1-集-编程语言面试题之新版-javase-字符串重点","text":"第 1 集 编程语言面试题之新版 javase 字符串（重点）#"},{"depth":3,"slug":"第-2-集-编程语言面试题之新版-javase-字符串相关构建类","text":"第 2 集 编程语言面试题之新版 javase 字符串相关构建类#"},{"depth":3,"slug":"第-3-集-编程语言面试题之新版-javase-面向对象篇","text":"第 3 集 编程语言面试题之新版 javase 面向对象篇#"},{"depth":3,"slug":"第-4-集-编程语言面试题之新版-javase-接口篇","text":"第 4 集 编程语言面试题之新版 javase 接口篇#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"后端高级工程师面试专题03","published":"2025-11-03T00:00:00.000Z","pinned":false,"description":"第三章 应聘大厂工程师/技术经理的你编程基础是否牢固《下》(大厂校招+社招必备)","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":8,"words":1697,"excerpt":"简介：常用字符串的考查点"},"imagePaths":[]}},"collection":"posts"}],"2025-11-02":[{"id":"技术点/sso","data":{"title":"sso","published":"2025-11-02T00:00:00.000Z","draft":false,"description":"SSO（Single Sign-On，单点登录）","image":"","tags":["sso","单点登录"],"category":"技术点","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"后端高级工程师面试专题02","prevSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题02","nextTitle":"后端高级工程师面试专题03","nextSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题03"},"body":"## 什么是 SSO\n\nSSO（Single Sign-On，单点登录）是计算机领域中一种**身份认证机制**，允许用户**只需登录一次**，即可**访问多个相互信任的应\n用系统或服务**，而无需在每个系统中重复输入用户名和密码。\n\n### 核心思想：\n\n> “一次登录，处处通行”（在授权范围内）。\n\n### 举个例子：\n\n你登录了 Google 账号后，无需再次输入密码，就可以直接使用 Gmail、YouTube、Google Drive 等服务——这就是 SSO 的典型应用。\n\n### 技术原理简述（以 Web 为例）：\n\n1. 用户访问应用 A，未登录，被重定向到 **统一的身份提供商（Identity Provider, IdP）**（如\n   Okta、Auth0、Keycloak、Microsoft Entra ID 等）。\n2. 用户在 IdP 输入凭证完成认证。\n3. IdP 向用户浏览器发放一个 **全局会话令牌（如 SAML 断言、OAuth ID Token 或 Cookie）**。\n4. 浏览器携带该令牌访问其他受信任的应用（B、C……），这些应用信任 IdP，验证令牌后自动登录用户。\n\n### 常见协议/标准：\n\n- **SAML**（Security Assertion Markup Language）：企业级常用，XML 格式。\n- **OAuth 2.0 + OpenID Connect (OIDC)**：现代 Web 和移动端主流，基于 JSON/REST。\n- **Kerberos**：常用于 Windows 域环境（如企业内网）。\n\n### 优点：\n\n✅ 提升用户体验（少记密码、少输密码）  \n✅ 降低密码疲劳和弱密码风险  \n✅ 集中管理账号与权限，便于安全审计和注销（如“全局登出”）\n\n### 注意事项：\n\n⚠️ IdP 成为关键安全节点——一旦被攻破，所有关联系统都可能沦陷。  \n⚠️ 各系统必须建立**信任关系**，通常通过证书、共享密钥或元数据交换实现。","filePath":"src/content/posts/技术点/sso.md","digest":"f80fd86997bcdaa1","rendered":{"html":"<section><h2 id=\"什么是-sso\">什么是 SSO<a class=\"anchor\" href=\"#什么是-sso\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>SSO（Single Sign-On，单点登录）是计算机领域中一种<strong>身份认证机制</strong>，允许用户<strong>只需登录一次</strong>，即可<strong>访问多个相互信任的应\n用系统或服务</strong>，而无需在每个系统中重复输入用户名和密码。</p><section><h3 id=\"核心思想\">核心思想：<a class=\"anchor\" href=\"#核心思想\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><blockquote>\n<p>“一次登录，处处通行”（在授权范围内）。</p>\n</blockquote></section><section><h3 id=\"举个例子\">举个例子：<a class=\"anchor\" href=\"#举个例子\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>你登录了 Google 账号后，无需再次输入密码，就可以直接使用 Gmail、YouTube、Google Drive 等服务——这就是 SSO 的典型应用。</p></section><section><h3 id=\"技术原理简述以-web-为例\">技术原理简述（以 Web 为例）：<a class=\"anchor\" href=\"#技术原理简述以-web-为例\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ol>\n<li>用户访问应用 A，未登录，被重定向到 <strong>统一的身份提供商（Identity Provider, IdP）</strong>（如\nOkta、Auth0、Keycloak、Microsoft Entra ID 等）。</li>\n<li>用户在 IdP 输入凭证完成认证。</li>\n<li>IdP 向用户浏览器发放一个 <strong>全局会话令牌（如 SAML 断言、OAuth ID Token 或 Cookie）</strong>。</li>\n<li>浏览器携带该令牌访问其他受信任的应用（B、C……），这些应用信任 IdP，验证令牌后自动登录用户。</li>\n</ol></section><section><h3 id=\"常见协议标准\">常见协议/标准：<a class=\"anchor\" href=\"#常见协议标准\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><strong>SAML</strong>（Security Assertion Markup Language）：企业级常用，XML 格式。</li>\n<li><strong>OAuth 2.0 + OpenID Connect (OIDC)</strong>：现代 Web 和移动端主流，基于 JSON/REST。</li>\n<li><strong>Kerberos</strong>：常用于 Windows 域环境（如企业内网）。</li>\n</ul></section><section><h3 id=\"优点\">优点：<a class=\"anchor\" href=\"#优点\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>✅ 提升用户体验（少记密码、少输密码）<br>\n✅ 降低密码疲劳和弱密码风险<br>\n✅ 集中管理账号与权限，便于安全审计和注销（如“全局登出”）</p></section><section><h3 id=\"注意事项\">注意事项：<a class=\"anchor\" href=\"#注意事项\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>⚠️ IdP 成为关键安全节点——一旦被攻破，所有关联系统都可能沦陷。<br>\n⚠️ 各系统必须建立<strong>信任关系</strong>，通常通过证书、共享密钥或元数据交换实现。</p></section></section>","metadata":{"headings":[{"depth":2,"slug":"什么是-sso","text":"什么是 SSO#"},{"depth":3,"slug":"核心思想","text":"核心思想：#"},{"depth":3,"slug":"举个例子","text":"举个例子：#"},{"depth":3,"slug":"技术原理简述以-web-为例","text":"技术原理简述（以 Web 为例）：#"},{"depth":3,"slug":"常见协议标准","text":"常见协议/标准：#"},{"depth":3,"slug":"优点","text":"优点：#"},{"depth":3,"slug":"注意事项","text":"注意事项：#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"sso","published":"2025-11-02T00:00:00.000Z","description":"SSO（Single Sign-On，单点登录）","image":"","tags":["sso","单点登录"],"category":"技术点","draft":false,"encrypted":false,"password":"","lang":"zh_CN","minutes":2,"words":414,"excerpt":"SSO（Single Sign-On，单点登录）是计算机领域中一种身份认证机制，允许用户只需登录一次，即可访问多个相互信任的应\n用系统或服务，而无需在每个系统中重复输入用户名和密码。"},"imagePaths":[]}},"collection":"posts"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题02","data":{"title":"后端高级工程师面试专题02","published":"2025-11-02T00:00:00.000Z","draft":false,"description":"第二章 应聘大厂工程师/技术经理的你编程基础是否牢固《上》(大厂校招+社招必备)","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"后端高级工程师面试专题01","prevSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题01","nextTitle":"sso","nextSlug":"技术点/sso"},"body":"## 第二章 应聘大厂工程师/技术经理的你编程基础是否牢固《上》(大厂校招+社招必备)\n\n### 第 1 集 编程语言面试题之新版 javase 基础语法篇之运算符《上》\n\n**简介：面试中 短路运算符 和 位运算**\n\n- 考点：计算机基础运算知识\n\n- 难度【 \\*\\*\\* 】\n\n- 你知道运算符 `&` 和 `&&`、`|` 和 `||` 的区别吗？\n\n    ```text\n    & 按位与操作\n    只有对应的两个二进制数为1时，结果位才为1\n    1&1 = 1\n    1&0 = 0\n    0&1 = 0\n    0&0 = 0\n    | 按位或操作\n    有一个为1的时候，结果位就为1\n    1|1 = 1\n    1|0 = 1\n    0|1 = 1\n    0|0 = 0\n    ```\n\n    ```\n    & 和 && 都可以实现 和 这个功能\n    区别：& 两边都运算，而 && 先算 && 左侧，若左侧为false 那么右侧就不运算，判断语句中推荐使用 &&，效率更高\n\n    | 和 || 和上面类似\n    区别：||只要满足第一个条件，后面的条件就不再判断，而|要对所有的条件进行判断\n\n    把&&和||称之为短路运算符\n    ```\n\n- 用最有效率的方法计算 2 乘以 8\n\n    ```text\n    原理：将一个数左移n位，相当于乘以2的n次方，位运算是CPU直接支持的，所以效率高\n    答案：2<<3\n\n    常见的JDK源码里面HashMap的默认容量16\n    int DEFAULT_INITIAL_CAPACITY = 1 << 4; // aka 16\n\n    直接是二进制操作了，表示1左移4位，变成10000，转为10进制也就是16, 直接以二进制形式去运行，效率更高\n    ```\n\n### 第 2 集 编程语言面试题之新版 javase 基础语法篇之运算符《下》\n\n**简介：讲解异或运算在面试中的考查点和分析**\n\n- 考点：计算机基础运算知识\n- 难度【 \\*\\*\\* 】\n\n* 写个方法，传递两个非 0 的 int 数值进去，实现变量交换的方式，有几种方式？\n\n  - 方式一\n\n      ```java\n      public static void swap(int a, int b){\n\n              System.out.printf(\"a=%d, b=%d\",a,b);\n              a = a + b;\n              b = a - b ;\n              a = a - b;\n              System.out.printf(\"\\na=%d, b=%d\",a,b);\n          }\n      ```\n\n  - 方式二 异或运算 (一个数与另一个数异或两次是其本身， 一个数和自身异或结果是 0 )\n\n      ```java\n      public static void swap2(int a, int b){\n      \n          System.out.printf(\"a=%d, b=%d\",a,b);\n      \n          a = a^b;   // a1 = a^b\n          b = b^a;   // b = b^a^b\n          a = a^b;   // a = a1^b = a^b^a\n      \n          System.out.printf(\"\\na=%d, b=%d\",a,b);\n      }\n      \n      解释：\n          a1=a^b\n          b=b^a1=b^a^b=a\n          //此时a1=a^b  b=a\n          a=a1^b=a^b^a=b\n      ```\n\n### 第 3 集 编程语言面试题之新版 javase 基础语法篇之类型\n\n**简介：java 数据类型划分**\n\n- 考点：java 基础类型的划分和运算\n\n- 难度【 \\*\\* 】\n\n- 说下 java 数据类型分类\n\n  - 基础数据类型：byte、short、int、long、float、double、char、boolean\n  - 引用数据类型：其他都是引用类型\n  - String 和 Enum 分别是什么类型：引用类型\n\n- 运算\n\n    ```\n    定义变量 int i = 5;\n    return i++; 和 return ++i; 返回结果是什么\n    ```\n\n- == 和 equals 的区别\n\n  - 基本数据类型比较 要用==判断是否相等\n  - 引用数据类型： ==比较的是内存地址是否一样，不同对象的内存地址不一样，equals 比较的是具体的内容， 也可以让开发者去定义什么条件去判断两个对象是否一样\n\n### 第 4 集 编程语言面试题之新版 javase 基础语法篇 try-catch-finally\n\n**简介：try-catch-finally 异常处理模块的返回值问题**\n\n- 考点：编码规范和执行逻辑\n\n- 难度【 \\*\\*\\* 】\n\n- 下面代码 的 try-catch-finally 语句，try 里面有个 return, finally 里面也有个 return，结果会返回什么？为什么\n\n    ```java\n    public static int test1() {\n            int a = 1;\n            try {\n                System.out.println(a / 0);\n                a = 2;\n            } catch (ArithmeticException e) {\n                a = 3;\n                return a;\n\n            } finally {\n                a = 4;\n            }\n            return a;\n\n        }\n\n        public static int test2() {\n            int a = 1;\n            try {\n                System.out.println(a / 0);\n                a = 2;\n            } catch (ArithmeticException e) {\n                a = 3;\n                return a;\n\n            } finally {\n                a = 4;\n                return a;\n            }\n\n        }\n    ```\n\n```text\n答案：\n    在执行try、catch中的return之前一定会执行finally中的代码（如果finally存在），如果finally中有return语句，就会直接执行finally中的return方法，所以finally中的return语句一定会被执行的\n\n    执行流程：finally执行前的代码里面有包含return，则会先确定return返回值，然后再执行finally的代码，最后再执行return\n```\n\n```text\n小滴课堂 PS: 工作中项目如果这样写，猜会不会被打，不要这样写！！！\n```\n\n### 第 5 集 编程语言面试题之新版 JDK9 基础语法篇 try-with-resource\n\n**简介：新特性考察 try-with-resource 知识点**\n\n- 考点：编程基础和是否有学习新知识特性\n\n- 难度【 \\*\\*\\*\\* 】\n\n- 有了解新版的 JDK 处理 IO 流吗？编写下基础代码, 从一个 txt 文本里面，拷贝里面的内容到另外一个 txt 文本里面\n\n```text\nJDK7之后的写法，JDK9⼜进⾏了改良，但是变化不⼤，记住下⾯的写法即可\n需要关闭的资源只要实现了java.lang.AutoCloseable，就可以⾃动被关闭\ntry()⾥⾯可以定义多个资源，它们的关闭顺序是最后在try()定义的资源先关闭\n```\n\n```java\n try (\nFileInputStream fis = new FileInputStream(\"/Users/xdclass/Desktop/test.txt\");\nBufferedInputStream bis = new BufferedInputStream(fis);\nFileOutputStream fos = new FileOutputStream(\"/Users/xdclass/Desktop/copy.txt\");\nBufferedOutputStream bos = new BufferedOutputStream(fos);\n      ) {\n            int size;\n            byte[] buf = new byte[1024];\n            while ((size = bis.read(buf)) != -1) {\n                bos.write(buf, 0, size);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n```\n\n### 第 6 集 编程语言面试题之文件 API 和递归考察\n\n**简介：常见的文件 API 掌握，和递归算法的熟悉**\n\n- 考点: 文件 API 使用，简单递归逻辑代码编写、代码编写规范，简洁性\n\n- 难度【 \\*\\*\\*\\* 】\n\n- 代码编写需求： 找出某目录下的所有子目录以及子文件并打印到控制台上\n\n```java\n    public static void main(String[] args) {\n\n        //找出某目录下的所有子目录以及子文件并打印到控制台上\n        List<String> paths = new ArrayList<>();\n\n        getAllFilePaths(new File(\"/Users/xdclass/Desktop/小滴课堂-架构面试题教程/demo\"),paths);\n\n        for(String path : paths){\n            System.out.println(path);\n        }\n\n    }\n\n    private static void getAllFilePaths(File filePath, List<String> paths) {\n\n        File[] files =  filePath.listFiles();\n        if(files == null){\n            return;\n        }\n        for(File f : files){\n            if(f.isDirectory()){\n                paths.add(f.getPath());\n                getAllFilePaths(f,paths);\n            }else{\n                paths.add(f.getPath());\n            }\n        }\n    }\n```","filePath":"src/content/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题02.md","digest":"c5fd0c5838199421","rendered":{"html":"<section><h2 id=\"第二章-应聘大厂工程师技术经理的你编程基础是否牢固上大厂校招社招必备\">第二章 应聘大厂工程师/技术经理的你编程基础是否牢固《上》(大厂校招+社招必备)<a class=\"anchor\" href=\"#第二章-应聘大厂工程师技术经理的你编程基础是否牢固上大厂校招社招必备\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"第-1-集-编程语言面试题之新版-javase-基础语法篇之运算符上\">第 1 集 编程语言面试题之新版 javase 基础语法篇之运算符《上》<a class=\"anchor\" href=\"#第-1-集-编程语言面试题之新版-javase-基础语法篇之运算符上\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：面试中 短路运算符 和 位运算</strong></p><ul>\n<li>\n<p>考点：计算机基础运算知识</p>\n</li>\n<li>\n<p>难度【 *** 】</p>\n</li>\n<li>\n<p>你知道运算符 <code>&#x26;</code> 和 <code>&#x26;&#x26;</code>、<code>|</code> 和 <code>||</code> 的区别吗？</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x26; 按位与操作</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">只有对应的两个二进制数为1时，结果位才为1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1&#x26;1 = 1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1&#x26;0 = 0</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">0&#x26;1 = 0</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">0&#x26;0 = 0</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">| 按位或操作</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">有一个为1的时候，结果位就为1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1|1 = 1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1|0 = 1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">0|1 = 1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">0|0 = 0</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:61ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x26; 和 &#x26;&#x26; 都可以实现 和 这个功能</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">区别：&#x26; 两边都运算，而 &#x26;&#x26; 先算 &#x26;&#x26; 左侧，若左侧为false 那么右侧就不运算，判断语句中推荐使用 &#x26;&#x26;，效率更高</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">| 和 || 和上面类似</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">区别：||只要满足第一个条件，后面的条件就不再判断，而|要对所有的条件进行判断</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">把&#x26;&#x26;和||称之为短路运算符</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>用最有效率的方法计算 2 乘以 8</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:55ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">原理：将一个数左移n位，相当于乘以2的n次方，位运算是CPU直接支持的，所以效率高</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">答案：2&#x3C;&#x3C;3</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">常见的JDK源码里面HashMap的默认容量16</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int DEFAULT_INITIAL_CAPACITY = 1 &#x3C;&#x3C; 4; // aka 16</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">直接是二进制操作了，表示1左移4位，变成10000，转为10进制也就是16, 直接以二进制形式去运行，效率更高</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"第-2-集-编程语言面试题之新版-javase-基础语法篇之运算符下\">第 2 集 编程语言面试题之新版 javase 基础语法篇之运算符《下》<a class=\"anchor\" href=\"#第-2-集-编程语言面试题之新版-javase-基础语法篇之运算符下\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：讲解异或运算在面试中的考查点和分析</strong></p><ul>\n<li>考点：计算机基础运算知识</li>\n<li>难度【 *** 】</li>\n</ul><ul>\n<li>\n<p>写个方法，传递两个非 0 的 int 数值进去，实现变量交换的方式，有几种方式？</p>\n<ul>\n<li>\n<p>方式一</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:46ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">swap</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> b){</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"a=%d, b=%d\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">,a,b);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">a </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> b;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">b </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> b ;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">a </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> b;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">a=%d, b=%d\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">,a,b);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>方式二 异或运算 (一个数与另一个数异或两次是其本身， 一个数和自身异或结果是 0 )</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:42ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">swap2</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> b){</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"a=%d, b=%d\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">,a,b);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">a </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a</span><span style=\"--0:#BF3441;--1:#F97583\">^</span><span style=\"--0:#24292E;--1:#E1E4E8\">b;   </span><span style=\"--0:#616972;--1:#99A0A6\">// a1 = a^b</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">b </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> b</span><span style=\"--0:#BF3441;--1:#F97583\">^</span><span style=\"--0:#24292E;--1:#E1E4E8\">a;   </span><span style=\"--0:#616972;--1:#99A0A6\">// b = b^a^b</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">a </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a</span><span style=\"--0:#BF3441;--1:#F97583\">^</span><span style=\"--0:#24292E;--1:#E1E4E8\">b;   </span><span style=\"--0:#616972;--1:#99A0A6\">// a = a1^b = a^b^a</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">a=%d, b=%d\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">,a,b);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">解释：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">a1</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">a</span><span style=\"--0:#BF3441;--1:#F97583\">^</span><span style=\"--0:#24292E;--1:#E1E4E8\">b</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">b</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">b</span><span style=\"--0:#BF3441;--1:#F97583\">^</span><span style=\"--0:#24292E;--1:#E1E4E8\">a1</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">b</span><span style=\"--0:#BF3441;--1:#F97583\">^</span><span style=\"--0:#24292E;--1:#E1E4E8\">a</span><span style=\"--0:#BF3441;--1:#F97583\">^</span><span style=\"--0:#24292E;--1:#E1E4E8\">b</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">a</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">//此时a1=a^b  b=a</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">a</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">a1</span><span style=\"--0:#BF3441;--1:#F97583\">^</span><span style=\"--0:#24292E;--1:#E1E4E8\">b</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">a</span><span style=\"--0:#BF3441;--1:#F97583\">^</span><span style=\"--0:#24292E;--1:#E1E4E8\">b</span><span style=\"--0:#BF3441;--1:#F97583\">^</span><span style=\"--0:#24292E;--1:#E1E4E8\">a</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">b</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-3-集-编程语言面试题之新版-javase-基础语法篇之类型\">第 3 集 编程语言面试题之新版 javase 基础语法篇之类型<a class=\"anchor\" href=\"#第-3-集-编程语言面试题之新版-javase-基础语法篇之类型\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：java 数据类型划分</strong></p><ul>\n<li>\n<p>考点：java 基础类型的划分和运算</p>\n</li>\n<li>\n<p>难度【 ** 】</p>\n</li>\n<li>\n<p>说下 java 数据类型分类</p>\n<ul>\n<li>基础数据类型：byte、short、int、long、float、double、char、boolean</li>\n<li>引用数据类型：其他都是引用类型</li>\n<li>String 和 Enum 分别是什么类型：引用类型</li>\n</ul>\n</li>\n<li>\n<p>运算</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:33ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">定义变量 int i = 5;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">return i++; 和 return ++i; 返回结果是什么</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>== 和 equals 的区别</p>\n<ul>\n<li>基本数据类型比较 要用==判断是否相等</li>\n<li>引用数据类型： ==比较的是内存地址是否一样，不同对象的内存地址不一样，equals 比较的是具体的内容， 也可以让开发者去定义什么条件去判断两个对象是否一样</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-4-集-编程语言面试题之新版-javase-基础语法篇-try-catch-finally\">第 4 集 编程语言面试题之新版 javase 基础语法篇 try-catch-finally<a class=\"anchor\" href=\"#第-4-集-编程语言面试题之新版-javase-基础语法篇-try-catch-finally\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：try-catch-finally 异常处理模块的返回值问题</strong></p><ul>\n<li>\n<p>考点：编码规范和执行逻辑</p>\n</li>\n<li>\n<p>难度【 *** 】</p>\n</li>\n<li>\n<p>下面代码 的 try-catch-finally 语句，try 里面有个 return, finally 里面也有个 return，结果会返回什么？为什么</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">test1</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(a </span><span style=\"--0:#BF3441;--1:#F97583\">/</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">a </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">catch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (ArithmeticException </span><span style=\"--0:#AE4B07;--1:#FFAB70\">e</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">a </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">3</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">finally</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">a </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">4</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">test2</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(a </span><span style=\"--0:#BF3441;--1:#F97583\">/</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">a </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">catch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (ArithmeticException </span><span style=\"--0:#AE4B07;--1:#FFAB70\">e</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">a </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">3</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">finally</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">a </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">4</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:126ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">答案：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">在执行try、catch中的return之前一定会执行finally中的代码（如果finally存在），如果finally中有return语句，就会直接执行finally中的return方法，所以finally中的return语句一定会被执行的</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">执行流程：finally执行前的代码里面有包含return，则会先确定return返回值，然后再执行finally的代码，最后再执行return</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:35ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">小滴课堂 PS: 工作中项目如果这样写，猜会不会被打，不要这样写！！！</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"第-5-集-编程语言面试题之新版-jdk9-基础语法篇-try-with-resource\">第 5 集 编程语言面试题之新版 JDK9 基础语法篇 try-with-resource<a class=\"anchor\" href=\"#第-5-集-编程语言面试题之新版-jdk9-基础语法篇-try-with-resource\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：新特性考察 try-with-resource 知识点</strong></p><ul>\n<li>\n<p>考点：编程基础和是否有学习新知识特性</p>\n</li>\n<li>\n<p>难度【 **** 】</p>\n</li>\n<li>\n<p>有了解新版的 JDK 处理 IO 流吗？编写下基础代码, 从一个 txt 文本里面，拷贝里面的内容到另外一个 txt 文本里面</p>\n</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:44ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">JDK7之后的写法，JDK9⼜进⾏了改良，但是变化不⼤，记住下⾯的写法即可</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">需要关闭的资源只要实现了java.lang.AutoCloseable，就可以⾃动被关闭</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">try()⾥⾯可以定义多个资源，它们的关闭顺序是最后在try()定义的资源先关闭</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:79ch\"><code><div class=\"ec-line\" style=\"--ecIndent:1ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span class=\"indent\"> </span><span style=\"--0:#BF3441;--1:#F97583\">try</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">FileInputStream fis </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">FileInputStream</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"/Users/xdclass/Desktop/test.txt\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">BufferedInputStream bis </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">BufferedInputStream</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fis);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">FileOutputStream fos </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">FileOutputStream</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"/Users/xdclass/Desktop/copy.txt\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">BufferedOutputStream bos </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">BufferedOutputStream</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fos);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> size;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">byte</span><span style=\"--0:#24292E;--1:#E1E4E8\">[] buf </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">byte</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">1024</span><span style=\"--0:#24292E;--1:#E1E4E8\">];</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ((size </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> bis.</span><span style=\"--0:#6F42C1;--1:#B392F0\">read</span><span style=\"--0:#24292E;--1:#E1E4E8\">(buf)) </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">bos.</span><span style=\"--0:#6F42C1;--1:#B392F0\">write</span><span style=\"--0:#24292E;--1:#E1E4E8\">(buf, </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">, size);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">catch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (Exception </span><span style=\"--0:#AE4B07;--1:#FFAB70\">e</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">e.</span><span style=\"--0:#6F42C1;--1:#B392F0\">printStackTrace</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"第-6-集-编程语言面试题之文件-api-和递归考察\">第 6 集 编程语言面试题之文件 API 和递归考察<a class=\"anchor\" href=\"#第-6-集-编程语言面试题之文件-api-和递归考察\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：常见的文件 API 掌握，和递归算法的熟悉</strong></p><ul>\n<li>\n<p>考点: 文件 API 使用，简单递归逻辑代码编写、代码编写规范，简洁性</p>\n</li>\n<li>\n<p>难度【 **** 】</p>\n</li>\n<li>\n<p>代码编写需求： 找出某目录下的所有子目录以及子文件并打印到控制台上</p>\n</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"java\" class=\"wrap\" style=\"--ecMaxLine:84ch\"><code><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">String</span><span style=\"--0:#24292E;--1:#E1E4E8\">[] args) {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">//找出某目录下的所有子目录以及子文件并打印到控制台上</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">List&#x3C;</span><span style=\"--0:#BF3441;--1:#F97583\">String</span><span style=\"--0:#24292E;--1:#E1E4E8\">> paths </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ArrayList&#x3C;>();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#6F42C1;--1:#B392F0\">getAllFilePaths</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">File</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"/Users/xdclass/Desktop/小滴课堂-架构面试题教程/demo\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">),paths);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\">(String path </span><span style=\"--0:#BF3441;--1:#F97583\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> paths){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">System.out.</span><span style=\"--0:#6F42C1;--1:#B392F0\">println</span><span style=\"--0:#24292E;--1:#E1E4E8\">(path);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">private</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">getAllFilePaths</span><span style=\"--0:#24292E;--1:#E1E4E8\">(File filePath, List</span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\">String</span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> paths) {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">File</span><span style=\"--0:#24292E;--1:#E1E4E8\">[] files </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">  filePath.</span><span style=\"--0:#6F42C1;--1:#B392F0\">listFiles</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\">(files </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">null</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\">(File f </span><span style=\"--0:#BF3441;--1:#F97583\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> files){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\">(f.</span><span style=\"--0:#6F42C1;--1:#B392F0\">isDirectory</span><span style=\"--0:#24292E;--1:#E1E4E8\">()){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">paths.</span><span style=\"--0:#6F42C1;--1:#B392F0\">add</span><span style=\"--0:#24292E;--1:#E1E4E8\">(f.</span><span style=\"--0:#6F42C1;--1:#B392F0\">getPath</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">                </span><span style=\"--0:#6F42C1;--1:#B392F0\">getAllFilePaths</span><span style=\"--0:#24292E;--1:#E1E4E8\">(f,paths);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">paths.</span><span style=\"--0:#6F42C1;--1:#B392F0\">add</span><span style=\"--0:#24292E;--1:#E1E4E8\">(f.</span><span style=\"--0:#6F42C1;--1:#B392F0\">getPath</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section>","metadata":{"headings":[{"depth":2,"slug":"第二章-应聘大厂工程师技术经理的你编程基础是否牢固上大厂校招社招必备","text":"第二章 应聘大厂工程师/技术经理的你编程基础是否牢固《上》(大厂校招+社招必备)#"},{"depth":3,"slug":"第-1-集-编程语言面试题之新版-javase-基础语法篇之运算符上","text":"第 1 集 编程语言面试题之新版 javase 基础语法篇之运算符《上》#"},{"depth":3,"slug":"第-2-集-编程语言面试题之新版-javase-基础语法篇之运算符下","text":"第 2 集 编程语言面试题之新版 javase 基础语法篇之运算符《下》#"},{"depth":3,"slug":"第-3-集-编程语言面试题之新版-javase-基础语法篇之类型","text":"第 3 集 编程语言面试题之新版 javase 基础语法篇之类型#"},{"depth":3,"slug":"第-4-集-编程语言面试题之新版-javase-基础语法篇-try-catch-finally","text":"第 4 集 编程语言面试题之新版 javase 基础语法篇 try-catch-finally#"},{"depth":3,"slug":"第-5-集-编程语言面试题之新版-jdk9-基础语法篇-try-with-resource","text":"第 5 集 编程语言面试题之新版 JDK9 基础语法篇 try-with-resource#"},{"depth":3,"slug":"第-6-集-编程语言面试题之文件-api-和递归考察","text":"第 6 集 编程语言面试题之文件 API 和递归考察#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"后端高级工程师面试专题02","published":"2025-11-02T00:00:00.000Z","pinned":false,"description":"第二章 应聘大厂工程师/技术经理的你编程基础是否牢固《上》(大厂校招+社招必备)","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":7,"words":1461,"excerpt":"简介：面试中 短路运算符 和 位运算"},"imagePaths":[]}},"collection":"posts"}],"2025-11-01":[{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题01","data":{"title":"后端高级工程师面试专题01","published":"2025-11-01T00:00:00.000Z","draft":false,"description":"第一章 小滴课堂面试专题介绍+简历分析+投递","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"SDF001","prevTitle":"git","prevSlug":"常用命令/git","nextTitle":"后端高级工程师面试专题02","nextSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题02"},"body":"## 第一章 小滴课堂面试专题介绍+简历分析+投递\n\n### 第 1 集 小滴课堂面试专题课程介绍+适合人员+学后水平\n\n**简介：互联网架构系列面试专题课程介绍，课程适合人员和学后水平**\n\n- 课程推出原因\n\n    ```text\n    从2018到2020年,和许多同学聊过面试的话题，累计不下1万人次，积累了很多同学遇到比较多的问题和疑惑，我把这些综合起来结合自己的经验，推出面试专题。\n\n    下面这些场景你是否遇过一些？\n\n    校招怎么进大厂、社招怎么进大厂\n\n    不知道简历怎么写，怎么投递，投递后没下文\n\n    技术面遇到很多轮，面试官连环问，进了很多坑\n\n    面试问了很多，但是进去后只是做一小块，怎么办？\n\n    技术面没问题，HR面后说不通过\n\n    遇到公司倒闭发不出工资\n\n    以前是传统IT公司，怎么转行到互联网公司\n\n    我是非科班出身，半路培训出来的，学了很多技术，但去到公司只会用，很迷茫\n\n    对未来职业规划不清楚，某个语言是不是不行了，咋办？\n\n    平时写很多业务代码，应该怎么提升自己\n    ```\n\n- 非技术面试题\n\n  - 高级工程师简历编写(15~30k)\n  - 简历投递\n  - HR 人事面试\n\n- 技术面试题难度\n\n  - 初级：\\*\\*\n  - 初中级：\\*\\*\\*\n  - 中级：\\*\\*\\*\\*\n  - 中高级：\\*\\*\\*\\*\\*\n  - 高级: \\*\\*\\*\\*\\*\\*\n\n- 学习形式\n\n  - 视频讲解 + 文字笔记 + 源码分析 + 交互流程图\n\n- 适合人员\n\n  - 面试专题第一季：实习生、校招、初级工程师、中高级工程\n  - 对比大公司岗位：阿里 P6 资深开发工程、腾讯 T2-3 工程师\n\n- 学后水平\n\n  - 掌握大厂简历投递技巧和流程，校招+社招\n  - 学会编写一份适合自己的简历，中高级工程师\n  - 掌握常见的 HR 人事必问面试题\n  - 掌握新版 javase 核心面试题\n  - 掌握 JDK 集合框架核心源码+连环问面试题\n  - 掌握多线程底层源码/AQS/锁设计/线程池+连环问面试题\n  - 掌握消息队列连环问面试题\n  - 掌握数据库索引、设计、集群搭建、分库分表等高级面试题\n  - 远不止，还有更多....\n\n- 保持谦虚好学、术业有专攻、在校的学生，有些知识掌握也比工作好几年掌握的人厉害\n\n- 不要为了面试而面试！！！\n\n  - 知其然知其所以然，知道这个点，更要知道使用场景或者原理\n  - 知其然知其所以然，知道这个点，更要知道使用场景或者原理\n  - 知其然知其所以然，知道这个点，更要知道使用场景或者原理\n\n### 第 2 集 小滴课堂面试专题第一季大纲速览，你知道多少\n\n**简介：常见的 技术和非技术面试题，你知道多少**\n\n提醒：高清图看第一章第 2 集的资料文件里面哈\n\n![小滴课堂面试专题第一季](/images/后端高级工程师面试专题/72422ce7-442c-4e0f-bba5-60af540186c3.png)\n\n### 第 3 集 互联网公司校/社招的招聘要求解读\n\n**简介：解读主流互联网公司的招聘要求**\n\n- 互联网公司比较喜欢的平台\n\n  - boss 直聘 <https://www.zhipin.com/>\n  - 拉钩 <https://www.lagou.com/>\n  - 猎聘 <https://event.liepin.com/>\n  - 公司内部开发\n    - 阿里 <https://campus.alibaba.com/index.htm>\n      - p5、p6、p7、p8\n    - 腾讯 <https://careers.tencent.com/>\n      - t1、t2、t3、t4\n\n- 招聘要求解读\n\n  - 阿里\n  - 腾讯\n  - 其他主流互联网公司\n\n### 第 4 集 学历/部分招聘条件不符合? 互联网公司简历投递技巧\n\n**简介：小滴课堂综合 1000+ 学员常见问题**\n\n- 要求本科，但我是大专学历不符合怎么办？\n\n  - 自考本科\n\n- 招聘部分要求项我不会怎么办？\n\n  - 大部分符合就行\n\n- 要求有 3 年经验，可是我只有 1~2 年怎么办？\n\n  - 大部分符合就行，适当包装\n\n- 我是传统 IT 公司，想转行互联网公司怎么办？\n\n  - 一定熟悉主流的技术栈，vue/react springboot/springcloud/duboo\n  - 尝试修改自己以前的项目，使用新技术栈\n  - 多看主流视频，多实操\n\n### 第 5 集 BAT 大厂社招、校招、内推常见的面试形式有多少\n\n**简介：讲解阿里、腾讯互联网公司常见的面试形式**\n\n- 社招\n\n  - 电话面试\n\n    - 特殊时间段、公司大量招聘\n    - 应聘公司的面试者不在同一城市或者跨省，比如阿里\n    - 不一定是第一面、也可能第三、第四面，比如阿里的高 p、腾讯的 T3-2 以上\n\n  - 视频+共享桌面\n\n    - 通过电话面试\n\n    - 需要上机操作，考查代码能力，(一般都有线答题平台，公司内部研发、外部系统如 leetcode 等)\n\n  - 技术现场面试\n\n    - 如果同城一般直接现场面试\n    - 或者远程面试通过\n    - 现场面试一般会连续几轮，持续几小时\n\n  - HR 现场面试\n\n    - 技术面通过\n    - 多个技术面差不多的竞争者，进一步筛选\n\n  - 发放 Offer 或者不通过\n\n- 校招\n\n  - 网申\n\n    - 春招\n    - 秋招\n\n    ![](/images/后端高级工程师面试专题/e19abc75-3813-4d42-95a0-1019ced88e91.jpg)\n\n  - 流程\n\n    - 网申(填写个人资料) -> 统一时间在线笔试 -> 多轮技术+HR 面试 -> 发放 offer ->实习期 -> 实习答辩 ->转正或者离职\n\n  - 笔试和简历通过后，面试形式和社招一样\n\n- 内推\n\n  - 内推的岗位多种，实习和非实习(正式工作)\n  - 方式：\n\n    - 找师兄师姐\n    - 个人人脉，比如朋友圈认识大厂的人\n    - 领英、脉脉等平台\n\n  - 对比自己投递简历的好处\n\n    - 简历直接到技术面试官手上，更快捷\n    - 对比在招聘平台上，内推更容易获得面试官认可，推荐的人也不会乱推荐\n    - 可以推荐到指定的部门\n\n  - 简历通过后面试形式和社招一样\n\n### 第 6 集 拿到面试通知，怎样应对互联网公司的多轮面试\n\n**简介：拿到面试通知，互联网公司都有多轮面试，怎么准备**\n\n- 面试前\n\n  - 最好去查下公司相关产品业务、如果有 app 或者网站，提前去熟悉\n  - 调查公司的项目，结合技术栈进行加深，也可以看公司其他招聘岗位，推断业务方向\n  - 查询公司盈利能力，未来发展机会，避免公司倒闭或者发不出工资，结合网上评价\n  - 公司交通位置，上下班会不会特别远，面试最好早到 30 分钟，不要迟到\n  - 巩固面试岗位所需要的技术栈，有自己擅长的某一个领域 比如某个中间件或者框架\n  - 大厂会有人才库和面试记录，尽量做足准备再去\n\n- 面试中\n\n  - 要有礼貌，保持头脑清晰，思维清晰\n  - 要有自信，不能自卑或者没信心\n  - 专业技术一定要准备好，尽量往自己熟悉的方向考虑，连环问\n  - 做过项目一定要熟悉，准备好项目的亮点和难点\n  - 有学习热情，掌握主流技术栈，关注前言技术\n  - 大厂存在交叉面，方便评级和保证公平\n\n- 面试后\n\n  - 尽量可以自己总结，复盘\n  - 面试多了，问题都类似，一定去补上，下次也可能遇到\n  - 可以问问面试官有没回答不好的点，可以加个联系方式，多点主动联系\n  - 如果有多个 offer，如果不是特别缺钱，优先选择能学到技术多的，未来总会返还\n\n### 第 7 集 社招+校招被技术面试完虐系列之多方位考查点\n\n**简介：社招和校招常见考查点**\n\n- 为什么说会被技术官完虐，怎样避免\n\n- 校招+社招考查点\n\n  - 计算机编程语言基础\n  - 框架(取决你熟悉的，和面试公司用的)\n  - 网络\n  - 算法\n  - 数据库\n  - 设计模式\n  - 高并发、高可用\n  - 分布式\n  - 海量数据处理\n  - 性能优化\n  - 逻辑思维\n  - 监控\n  - 测试\n  - 安全\n  - 产品运营思维\n    ...\n\n### 第 8 集 互联网公司常见的 HR 人事面试考查问题《上》\n\n**简介：HR 面试，社招和校招常见考查点**\n\n- 做下简单的自我介绍？\n\n  - 尽量介绍和专业相关的，毕业、工作经历等，不能过长，尽量 2 分钟内\n\n- 为什么从上个公司离职？\n\n  - 不能说不好的，比如公司混乱、勾心斗角、负面情绪\n  - 推荐说公司搬迁比较远，然后刚好个人职业规划对某某领域比较喜欢\n\n- 你对加班的是怎么看的？\n\n  - 业务发展好、公司快速发展，项目紧急等加班非常乐意\n\n  - 自己也会合理评估工作，提高个人工作效率\n\n- 有没女朋友，家住在哪里?\n\n  - 考查是否上班太远了，浪费时间，且容易换工作\n\n- 你对自己未来职业规划是怎样的？\n\n  - 往专业上靠拢，比如几年发展成技术负责人，带团队，多少年称为架构师, 比较喜欢看技术书籍提升能力\n\n### 第 9 集 互联网公司常见的 HR 人事面试考查问题《下》\n\n**简介：HR 面试，社招和校招常见考查点**\n\n- 你认为自己有什么缺点？\n\n  - 不能说没有缺点\n  - 避免说影响工作、让人觉得不靠谱\n  - 可以说些表面上看是缺点，从工作的角度看却是优点的缺点：对事情追求比较高，比如代码洁癖爱好者，对自己做的产品比较有要求，但也会适当控制\n\n- 平时有什么爱好或者兴趣？\n\n  - 不能说抽烟喝酒啥的\n  - 建议是积极向上的活动\n\n- 你期望的薪资是多少?\n\n  - 薪酬最好写个范围，也看公司具体有哪些福利，比如餐补、交通、住房补助等，是否有 13 薪或者其他福利\n  - 然后问最终也希望公司可以根据我实际能力给工资，对双方都比较好\n\n- 你还有其他问题想问的吗？\n\n  - 公司是否有员工培训、晋升机制等\n  - 自己面试是否有不足，自己好改进\n  - 什么时候会有面试结果，能不能加个联系方式","filePath":"src/content/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题01.md","digest":"0054e3753b69c9e9","rendered":{"html":"<section><h2 id=\"第一章-小滴课堂面试专题介绍简历分析投递\">第一章 小滴课堂面试专题介绍+简历分析+投递<a class=\"anchor\" href=\"#第一章-小滴课堂面试专题介绍简历分析投递\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"第-1-集-小滴课堂面试专题课程介绍适合人员学后水平\">第 1 集 小滴课堂面试专题课程介绍+适合人员+学后水平<a class=\"anchor\" href=\"#第-1-集-小滴课堂面试专题课程介绍适合人员学后水平\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：互联网架构系列面试专题课程介绍，课程适合人员和学后水平</strong></p><ul>\n<li>\n<p>课程推出原因</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:76ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">从2018到2020年,和许多同学聊过面试的话题，累计不下1万人次，积累了很多同学遇到比较多的问题和疑惑，我把这些综合起来结合自己的经验，推出面试专题。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">下面这些场景你是否遇过一些？</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">校招怎么进大厂、社招怎么进大厂</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">不知道简历怎么写，怎么投递，投递后没下文</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">技术面遇到很多轮，面试官连环问，进了很多坑</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">面试问了很多，但是进去后只是做一小块，怎么办？</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">技术面没问题，HR面后说不通过</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">遇到公司倒闭发不出工资</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">以前是传统IT公司，怎么转行到互联网公司</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">我是非科班出身，半路培训出来的，学了很多技术，但去到公司只会用，很迷茫</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">对未来职业规划不清楚，某个语言是不是不行了，咋办？</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">平时写很多业务代码，应该怎么提升自己</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>非技术面试题</p>\n<ul>\n<li>高级工程师简历编写(15~30k)</li>\n<li>简历投递</li>\n<li>HR 人事面试</li>\n</ul>\n</li>\n<li>\n<p>技术面试题难度</p>\n<ul>\n<li>初级：**</li>\n<li>初中级：***</li>\n<li>中级：****</li>\n<li>中高级：*****</li>\n<li>高级: ******</li>\n</ul>\n</li>\n<li>\n<p>学习形式</p>\n<ul>\n<li>视频讲解 + 文字笔记 + 源码分析 + 交互流程图</li>\n</ul>\n</li>\n<li>\n<p>适合人员</p>\n<ul>\n<li>面试专题第一季：实习生、校招、初级工程师、中高级工程</li>\n<li>对比大公司岗位：阿里 P6 资深开发工程、腾讯 T2-3 工程师</li>\n</ul>\n</li>\n<li>\n<p>学后水平</p>\n<ul>\n<li>掌握大厂简历投递技巧和流程，校招+社招</li>\n<li>学会编写一份适合自己的简历，中高级工程师</li>\n<li>掌握常见的 HR 人事必问面试题</li>\n<li>掌握新版 javase 核心面试题</li>\n<li>掌握 JDK 集合框架核心源码+连环问面试题</li>\n<li>掌握多线程底层源码/AQS/锁设计/线程池+连环问面试题</li>\n<li>掌握消息队列连环问面试题</li>\n<li>掌握数据库索引、设计、集群搭建、分库分表等高级面试题</li>\n<li>远不止，还有更多…</li>\n</ul>\n</li>\n<li>\n<p>保持谦虚好学、术业有专攻、在校的学生，有些知识掌握也比工作好几年掌握的人厉害</p>\n</li>\n<li>\n<p>不要为了面试而面试！！！</p>\n<ul>\n<li>知其然知其所以然，知道这个点，更要知道使用场景或者原理</li>\n<li>知其然知其所以然，知道这个点，更要知道使用场景或者原理</li>\n<li>知其然知其所以然，知道这个点，更要知道使用场景或者原理</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-2-集-小滴课堂面试专题第一季大纲速览你知道多少\">第 2 集 小滴课堂面试专题第一季大纲速览，你知道多少<a class=\"anchor\" href=\"#第-2-集-小滴课堂面试专题第一季大纲速览你知道多少\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：常见的 技术和非技术面试题，你知道多少</strong></p><p>提醒：高清图看第一章第 2 集的资料文件里面哈</p><p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/72422ce7-442c-4e0f-bba5-60af540186c3.png\" alt=\"小滴课堂面试专题第一季\"></p></section><section><h3 id=\"第-3-集-互联网公司校社招的招聘要求解读\">第 3 集 互联网公司校/社招的招聘要求解读<a class=\"anchor\" href=\"#第-3-集-互联网公司校社招的招聘要求解读\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：解读主流互联网公司的招聘要求</strong></p><ul>\n<li>\n<p>互联网公司比较喜欢的平台</p>\n<ul>\n<li>boss 直聘 <a href=\"https://www.zhipin.com/\">https://www.zhipin.com/</a></li>\n<li>拉钩 <a href=\"https://www.lagou.com/\">https://www.lagou.com/</a></li>\n<li>猎聘 <a href=\"https://event.liepin.com/\">https://event.liepin.com/</a></li>\n<li>公司内部开发\n<ul>\n<li>阿里 <a href=\"https://campus.alibaba.com/index.htm\">https://campus.alibaba.com/index.htm</a>\n<ul>\n<li>p5、p6、p7、p8</li>\n</ul>\n</li>\n<li>腾讯 <a href=\"https://careers.tencent.com/\">https://careers.tencent.com/</a>\n<ul>\n<li>t1、t2、t3、t4</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>招聘要求解读</p>\n<ul>\n<li>阿里</li>\n<li>腾讯</li>\n<li>其他主流互联网公司</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-4-集-学历部分招聘条件不符合-互联网公司简历投递技巧\">第 4 集 学历/部分招聘条件不符合? 互联网公司简历投递技巧<a class=\"anchor\" href=\"#第-4-集-学历部分招聘条件不符合-互联网公司简历投递技巧\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：小滴课堂综合 1000+ 学员常见问题</strong></p><ul>\n<li>\n<p>要求本科，但我是大专学历不符合怎么办？</p>\n<ul>\n<li>自考本科</li>\n</ul>\n</li>\n<li>\n<p>招聘部分要求项我不会怎么办？</p>\n<ul>\n<li>大部分符合就行</li>\n</ul>\n</li>\n<li>\n<p>要求有 3 年经验，可是我只有 1~2 年怎么办？</p>\n<ul>\n<li>大部分符合就行，适当包装</li>\n</ul>\n</li>\n<li>\n<p>我是传统 IT 公司，想转行互联网公司怎么办？</p>\n<ul>\n<li>一定熟悉主流的技术栈，vue/react springboot/springcloud/duboo</li>\n<li>尝试修改自己以前的项目，使用新技术栈</li>\n<li>多看主流视频，多实操</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-5-集-bat-大厂社招校招内推常见的面试形式有多少\">第 5 集 BAT 大厂社招、校招、内推常见的面试形式有多少<a class=\"anchor\" href=\"#第-5-集-bat-大厂社招校招内推常见的面试形式有多少\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：讲解阿里、腾讯互联网公司常见的面试形式</strong></p><ul>\n<li>\n<p>社招</p>\n<ul>\n<li>\n<p>电话面试</p>\n<ul>\n<li>特殊时间段、公司大量招聘</li>\n<li>应聘公司的面试者不在同一城市或者跨省，比如阿里</li>\n<li>不一定是第一面、也可能第三、第四面，比如阿里的高 p、腾讯的 T3-2 以上</li>\n</ul>\n</li>\n<li>\n<p>视频+共享桌面</p>\n<ul>\n<li>\n<p>通过电话面试</p>\n</li>\n<li>\n<p>需要上机操作，考查代码能力，(一般都有线答题平台，公司内部研发、外部系统如 leetcode 等)</p>\n</li>\n</ul>\n</li>\n<li>\n<p>技术现场面试</p>\n<ul>\n<li>如果同城一般直接现场面试</li>\n<li>或者远程面试通过</li>\n<li>现场面试一般会连续几轮，持续几小时</li>\n</ul>\n</li>\n<li>\n<p>HR 现场面试</p>\n<ul>\n<li>技术面通过</li>\n<li>多个技术面差不多的竞争者，进一步筛选</li>\n</ul>\n</li>\n<li>\n<p>发放 Offer 或者不通过</p>\n</li>\n</ul>\n</li>\n<li>\n<p>校招</p>\n<ul>\n<li>\n<p>网申</p>\n<ul>\n<li>春招</li>\n<li>秋招</li>\n</ul>\n<p><img src=\"/images/%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98/e19abc75-3813-4d42-95a0-1019ced88e91.jpg\" alt=\"\"></p>\n</li>\n<li>\n<p>流程</p>\n<ul>\n<li>网申(填写个人资料) -> 统一时间在线笔试 -> 多轮技术+HR 面试 -> 发放 offer ->实习期 -> 实习答辩 ->转正或者离职</li>\n</ul>\n</li>\n<li>\n<p>笔试和简历通过后，面试形式和社招一样</p>\n</li>\n</ul>\n</li>\n<li>\n<p>内推</p>\n<ul>\n<li>\n<p>内推的岗位多种，实习和非实习(正式工作)</p>\n</li>\n<li>\n<p>方式：</p>\n<ul>\n<li>找师兄师姐</li>\n<li>个人人脉，比如朋友圈认识大厂的人</li>\n<li>领英、脉脉等平台</li>\n</ul>\n</li>\n<li>\n<p>对比自己投递简历的好处</p>\n<ul>\n<li>简历直接到技术面试官手上，更快捷</li>\n<li>对比在招聘平台上，内推更容易获得面试官认可，推荐的人也不会乱推荐</li>\n<li>可以推荐到指定的部门</li>\n</ul>\n</li>\n<li>\n<p>简历通过后面试形式和社招一样</p>\n</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-6-集-拿到面试通知怎样应对互联网公司的多轮面试\">第 6 集 拿到面试通知，怎样应对互联网公司的多轮面试<a class=\"anchor\" href=\"#第-6-集-拿到面试通知怎样应对互联网公司的多轮面试\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：拿到面试通知，互联网公司都有多轮面试，怎么准备</strong></p><ul>\n<li>\n<p>面试前</p>\n<ul>\n<li>最好去查下公司相关产品业务、如果有 app 或者网站，提前去熟悉</li>\n<li>调查公司的项目，结合技术栈进行加深，也可以看公司其他招聘岗位，推断业务方向</li>\n<li>查询公司盈利能力，未来发展机会，避免公司倒闭或者发不出工资，结合网上评价</li>\n<li>公司交通位置，上下班会不会特别远，面试最好早到 30 分钟，不要迟到</li>\n<li>巩固面试岗位所需要的技术栈，有自己擅长的某一个领域 比如某个中间件或者框架</li>\n<li>大厂会有人才库和面试记录，尽量做足准备再去</li>\n</ul>\n</li>\n<li>\n<p>面试中</p>\n<ul>\n<li>要有礼貌，保持头脑清晰，思维清晰</li>\n<li>要有自信，不能自卑或者没信心</li>\n<li>专业技术一定要准备好，尽量往自己熟悉的方向考虑，连环问</li>\n<li>做过项目一定要熟悉，准备好项目的亮点和难点</li>\n<li>有学习热情，掌握主流技术栈，关注前言技术</li>\n<li>大厂存在交叉面，方便评级和保证公平</li>\n</ul>\n</li>\n<li>\n<p>面试后</p>\n<ul>\n<li>尽量可以自己总结，复盘</li>\n<li>面试多了，问题都类似，一定去补上，下次也可能遇到</li>\n<li>可以问问面试官有没回答不好的点，可以加个联系方式，多点主动联系</li>\n<li>如果有多个 offer，如果不是特别缺钱，优先选择能学到技术多的，未来总会返还</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-7-集-社招校招被技术面试完虐系列之多方位考查点\">第 7 集 社招+校招被技术面试完虐系列之多方位考查点<a class=\"anchor\" href=\"#第-7-集-社招校招被技术面试完虐系列之多方位考查点\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：社招和校招常见考查点</strong></p><ul>\n<li>\n<p>为什么说会被技术官完虐，怎样避免</p>\n</li>\n<li>\n<p>校招+社招考查点</p>\n<ul>\n<li>计算机编程语言基础</li>\n<li>框架(取决你熟悉的，和面试公司用的)</li>\n<li>网络</li>\n<li>算法</li>\n<li>数据库</li>\n<li>设计模式</li>\n<li>高并发、高可用</li>\n<li>分布式</li>\n<li>海量数据处理</li>\n<li>性能优化</li>\n<li>逻辑思维</li>\n<li>监控</li>\n<li>测试</li>\n<li>安全</li>\n<li>产品运营思维\n…</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-8-集-互联网公司常见的-hr-人事面试考查问题上\">第 8 集 互联网公司常见的 HR 人事面试考查问题《上》<a class=\"anchor\" href=\"#第-8-集-互联网公司常见的-hr-人事面试考查问题上\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：HR 面试，社招和校招常见考查点</strong></p><ul>\n<li>\n<p>做下简单的自我介绍？</p>\n<ul>\n<li>尽量介绍和专业相关的，毕业、工作经历等，不能过长，尽量 2 分钟内</li>\n</ul>\n</li>\n<li>\n<p>为什么从上个公司离职？</p>\n<ul>\n<li>不能说不好的，比如公司混乱、勾心斗角、负面情绪</li>\n<li>推荐说公司搬迁比较远，然后刚好个人职业规划对某某领域比较喜欢</li>\n</ul>\n</li>\n<li>\n<p>你对加班的是怎么看的？</p>\n<ul>\n<li>\n<p>业务发展好、公司快速发展，项目紧急等加班非常乐意</p>\n</li>\n<li>\n<p>自己也会合理评估工作，提高个人工作效率</p>\n</li>\n</ul>\n</li>\n<li>\n<p>有没女朋友，家住在哪里?</p>\n<ul>\n<li>考查是否上班太远了，浪费时间，且容易换工作</li>\n</ul>\n</li>\n<li>\n<p>你对自己未来职业规划是怎样的？</p>\n<ul>\n<li>往专业上靠拢，比如几年发展成技术负责人，带团队，多少年称为架构师, 比较喜欢看技术书籍提升能力</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"第-9-集-互联网公司常见的-hr-人事面试考查问题下\">第 9 集 互联网公司常见的 HR 人事面试考查问题《下》<a class=\"anchor\" href=\"#第-9-集-互联网公司常见的-hr-人事面试考查问题下\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>简介：HR 面试，社招和校招常见考查点</strong></p><ul>\n<li>\n<p>你认为自己有什么缺点？</p>\n<ul>\n<li>不能说没有缺点</li>\n<li>避免说影响工作、让人觉得不靠谱</li>\n<li>可以说些表面上看是缺点，从工作的角度看却是优点的缺点：对事情追求比较高，比如代码洁癖爱好者，对自己做的产品比较有要求，但也会适当控制</li>\n</ul>\n</li>\n<li>\n<p>平时有什么爱好或者兴趣？</p>\n<ul>\n<li>不能说抽烟喝酒啥的</li>\n<li>建议是积极向上的活动</li>\n</ul>\n</li>\n<li>\n<p>你期望的薪资是多少?</p>\n<ul>\n<li>薪酬最好写个范围，也看公司具体有哪些福利，比如餐补、交通、住房补助等，是否有 13 薪或者其他福利</li>\n<li>然后问最终也希望公司可以根据我实际能力给工资，对双方都比较好</li>\n</ul>\n</li>\n<li>\n<p>你还有其他问题想问的吗？</p>\n<ul>\n<li>公司是否有员工培训、晋升机制等</li>\n<li>自己面试是否有不足，自己好改进</li>\n<li>什么时候会有面试结果，能不能加个联系方式</li>\n</ul>\n</li>\n</ul></section></section>","metadata":{"headings":[{"depth":2,"slug":"第一章-小滴课堂面试专题介绍简历分析投递","text":"第一章 小滴课堂面试专题介绍+简历分析+投递#"},{"depth":3,"slug":"第-1-集-小滴课堂面试专题课程介绍适合人员学后水平","text":"第 1 集 小滴课堂面试专题课程介绍+适合人员+学后水平#"},{"depth":3,"slug":"第-2-集-小滴课堂面试专题第一季大纲速览你知道多少","text":"第 2 集 小滴课堂面试专题第一季大纲速览，你知道多少#"},{"depth":3,"slug":"第-3-集-互联网公司校社招的招聘要求解读","text":"第 3 集 互联网公司校/社招的招聘要求解读#"},{"depth":3,"slug":"第-4-集-学历部分招聘条件不符合-互联网公司简历投递技巧","text":"第 4 集 学历/部分招聘条件不符合? 互联网公司简历投递技巧#"},{"depth":3,"slug":"第-5-集-bat-大厂社招校招内推常见的面试形式有多少","text":"第 5 集 BAT 大厂社招、校招、内推常见的面试形式有多少#"},{"depth":3,"slug":"第-6-集-拿到面试通知怎样应对互联网公司的多轮面试","text":"第 6 集 拿到面试通知，怎样应对互联网公司的多轮面试#"},{"depth":3,"slug":"第-7-集-社招校招被技术面试完虐系列之多方位考查点","text":"第 7 集 社招+校招被技术面试完虐系列之多方位考查点#"},{"depth":3,"slug":"第-8-集-互联网公司常见的-hr-人事面试考查问题上","text":"第 8 集 互联网公司常见的 HR 人事面试考查问题《上》#"},{"depth":3,"slug":"第-9-集-互联网公司常见的-hr-人事面试考查问题下","text":"第 9 集 互联网公司常见的 HR 人事面试考查问题《下》#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"后端高级工程师面试专题01","published":"2025-11-01T00:00:00.000Z","pinned":false,"description":"第一章 小滴课堂面试专题介绍+简历分析+投递","image":"","tags":["后端高级工程师面试专题"],"category":"面试题","draft":false,"encrypted":true,"password":"SDF001","lang":"zh_CN","minutes":13,"words":2582,"excerpt":"简介：互联网架构系列面试专题课程介绍，课程适合人员和学后水平"},"imagePaths":[]}},"collection":"posts"},{"id":"常用命令/git","data":{"title":"git","published":"2025-11-01T00:00:00.000Z","draft":false,"description":"git相关命令","image":"","tags":["git","github","gitea"],"category":"常用命令","lang":"zh_CN","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Markdown 教程","prevSlug":"示例/markdown-tutorial","nextTitle":"后端高级工程师面试专题01","nextSlug":"面试题/后端高级工程师面试专题/后端高级工程师面试专题01"},"body":"## 免密\n\n公钥和私钥生成到当前目录下，并指定文件名\n\n```shell\nssh-keygen -t ed25519 -C 1026619596@qq.com -f github-actions-deploy-key\n```\n\n## 配置\n\n```shell\ngit config --global user.name \"Your Name\"     # 设置用户名\ngit config --global user.email \"you@example.com\"  # 设置邮箱\ngit config core.quotepath false # 解决git命令行显示中文乱码\n```\n\n## 查看提交历史\n\n```shell\ngit log                                       # 查看提交历史（简洁版）\ngit log --oneline                             # 单行显示提交记录\ngit log --graph --all --oneline               # 图形化查看所有分支历史\n```\n\n## 分支管理\n\n```shell\ngit branch                                    # 列出本地分支\ngit branch <branch-name>                      # 创建新分支\ngit checkout <branch-name>                    # 切换分支\ngit switch <branch-name>                      # （Git 2.23+）切换分支（推荐）\ngit checkout -b <branch-name>                 # 创建并切换到新分支\ngit switch -c <branch-name>                   # 同上（新命令）\ngit merge <branch-name>                       # 合并指定分支到当前分支\ngit branch -d <branch-name>                   # 删除已合并的分支\ngit branch -D <branch-name>                   # 强制删除分支\n```\n\n## 撤销与回退\n\n```shell\ngit restore <file>                            # 撤销工作区修改（丢弃更改）\ngit restore --staged <file>                   # 从暂存区撤回（取消 add）\ngit reset HEAD~1                              # 回退最近一次提交（保留更改在工作区）\ngit reset --hard HEAD~1                       # 彻底回退（丢弃提交和更改！慎用）\ngit revert <commit-hash>                      # 新增一个反向提交来撤销某次更改（安全，用于共享历史）\n```\n\n## 标签\n\n```shell\ngit tag v1.0                                  # 创建轻量标签\ngit tag -a v1.0 -m \"Release version 1.0\"      # 创建带注释的标签\ngit push origin v1.0                          # 推送单个标签\ngit push origin --tags                        # 推送所有标签\n```\n\n## 其他实用命令\n\n```shell\ngit diff                                      # 查看工作区与暂存区的差异\ngit diff --staged                             # 查看暂存区与上次提交的差异\ngit remote -v                                 # 查看远程仓库地址\ngit stash                                     # 临时保存当前工作进度\ngit stash pop                                 # 恢复最近一次 stash 的内容\ngit clean -fd                                 # 删除未跟踪的文件和目录（谨慎！）\ngit help <command>                            # 查看具体命令\n```","filePath":"src/content/posts/常用命令/git.md","digest":"24858a22b6f3ac05","rendered":{"html":"<section><h2 id=\"免密\">免密<a class=\"anchor\" href=\"#免密\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>公钥和私钥生成到当前目录下，并指定文件名</p><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:71ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ssh-keygen</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">ed25519</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-C</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">1026619596@qq.com</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-f</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">github-actions-deploy-key</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"配置\">配置<a class=\"anchor\" href=\"#配置\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:56ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">config</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--global</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">user.name</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Your Name\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">     </span><span style=\"--0:#616972;--1:#99A0A6\"># 设置用户名</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">config</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--global</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">user.email</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"you@example.com\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 设置邮箱</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">config</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">core.quotepath</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">false</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\"># 解决git命令行显示中文乱码</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"查看提交历史\">查看提交历史<a class=\"anchor\" href=\"#查看提交历史\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:59ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">log</span><span style=\"--0:#24292E;--1:#E1E4E8\">                                       </span><span style=\"--0:#616972;--1:#99A0A6\"># 查看提交历史（简洁版）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">log</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--oneline</span><span style=\"--0:#24292E;--1:#E1E4E8\">                             </span><span style=\"--0:#616972;--1:#99A0A6\"># 单行显示提交记录</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">log</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--graph</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--all</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--oneline</span><span style=\"--0:#24292E;--1:#E1E4E8\">               </span><span style=\"--0:#616972;--1:#99A0A6\"># 图形化查看所有分支历史</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"分支管理\">分支管理<a class=\"anchor\" href=\"#分支管理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:67ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">branch</span><span style=\"--0:#24292E;--1:#E1E4E8\">                                    </span><span style=\"--0:#616972;--1:#99A0A6\"># 列出本地分支</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">branch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;branch-name></span><span style=\"--0:#24292E;--1:#E1E4E8\">                      </span><span style=\"--0:#616972;--1:#99A0A6\"># 创建新分支</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">checkout</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;branch-name></span><span style=\"--0:#24292E;--1:#E1E4E8\">                    </span><span style=\"--0:#616972;--1:#99A0A6\"># 切换分支</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">switch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;branch-name></span><span style=\"--0:#24292E;--1:#E1E4E8\">                      </span><span style=\"--0:#616972;--1:#99A0A6\"># （Git 2.23+）切换分支（推荐）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">checkout</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-b</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;branch-name></span><span style=\"--0:#24292E;--1:#E1E4E8\">                 </span><span style=\"--0:#616972;--1:#99A0A6\"># 创建并切换到新分支</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">switch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;branch-name></span><span style=\"--0:#24292E;--1:#E1E4E8\">                   </span><span style=\"--0:#616972;--1:#99A0A6\"># 同上（新命令）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">merge</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;branch-name></span><span style=\"--0:#24292E;--1:#E1E4E8\">                       </span><span style=\"--0:#616972;--1:#99A0A6\"># 合并指定分支到当前分支</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">branch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-d</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;branch-name></span><span style=\"--0:#24292E;--1:#E1E4E8\">                   </span><span style=\"--0:#616972;--1:#99A0A6\"># 删除已合并的分支</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">branch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-D</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;branch-name></span><span style=\"--0:#24292E;--1:#E1E4E8\">                   </span><span style=\"--0:#616972;--1:#99A0A6\"># 强制删除分支</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"撤销与回退\">撤销与回退<a class=\"anchor\" href=\"#撤销与回退\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:74ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">restore</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;file></span><span style=\"--0:#24292E;--1:#E1E4E8\">                            </span><span style=\"--0:#616972;--1:#99A0A6\"># 撤销工作区修改（丢弃更改）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">restore</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--staged</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;file></span><span style=\"--0:#24292E;--1:#E1E4E8\">                   </span><span style=\"--0:#616972;--1:#99A0A6\"># 从暂存区撤回（取消 add）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">reset</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">HEAD~1</span><span style=\"--0:#24292E;--1:#E1E4E8\">                              </span><span style=\"--0:#616972;--1:#99A0A6\"># 回退最近一次提交（保留更改在工作区）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">reset</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--hard</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">HEAD~1</span><span style=\"--0:#24292E;--1:#E1E4E8\">                       </span><span style=\"--0:#616972;--1:#99A0A6\"># 彻底回退（丢弃提交和更改！慎用）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">revert</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;commit-hash></span><span style=\"--0:#24292E;--1:#E1E4E8\">                      </span><span style=\"--0:#616972;--1:#99A0A6\"># 新增一个反向提交来撤销某次更改（安全，用于共享历史）</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"标签\">标签<a class=\"anchor\" href=\"#标签\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:56ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">tag</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">v1.0</span><span style=\"--0:#24292E;--1:#E1E4E8\">                                  </span><span style=\"--0:#616972;--1:#99A0A6\"># 创建轻量标签</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">tag</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-a</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">v1.0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-m</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Release version 1.0\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">      </span><span style=\"--0:#616972;--1:#99A0A6\"># 创建带注释的标签</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">push</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">origin</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">v1.0</span><span style=\"--0:#24292E;--1:#E1E4E8\">                          </span><span style=\"--0:#616972;--1:#99A0A6\"># 推送单个标签</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">push</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">origin</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--tags</span><span style=\"--0:#24292E;--1:#E1E4E8\">                        </span><span style=\"--0:#616972;--1:#99A0A6\"># 推送所有标签</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"其他实用命令\">其他实用命令<a class=\"anchor\" href=\"#其他实用命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:64ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">diff</span><span style=\"--0:#24292E;--1:#E1E4E8\">                                      </span><span style=\"--0:#616972;--1:#99A0A6\"># 查看工作区与暂存区的差异</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">diff</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--staged</span><span style=\"--0:#24292E;--1:#E1E4E8\">                             </span><span style=\"--0:#616972;--1:#99A0A6\"># 查看暂存区与上次提交的差异</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">remote</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-v</span><span style=\"--0:#24292E;--1:#E1E4E8\">                                 </span><span style=\"--0:#616972;--1:#99A0A6\"># 查看远程仓库地址</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">stash</span><span style=\"--0:#24292E;--1:#E1E4E8\">                                     </span><span style=\"--0:#616972;--1:#99A0A6\"># 临时保存当前工作进度</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">stash</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">pop</span><span style=\"--0:#24292E;--1:#E1E4E8\">                                 </span><span style=\"--0:#616972;--1:#99A0A6\"># 恢复最近一次 stash 的内容</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">clean</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-fd</span><span style=\"--0:#24292E;--1:#E1E4E8\">                                 </span><span style=\"--0:#616972;--1:#99A0A6\"># 删除未跟踪的文件和目录（谨慎！）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">git</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">help</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;command></span><span style=\"--0:#24292E;--1:#E1E4E8\">                            </span><span style=\"--0:#616972;--1:#99A0A6\"># 查看具体命令</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>","metadata":{"headings":[{"depth":2,"slug":"免密","text":"免密#"},{"depth":2,"slug":"配置","text":"配置#"},{"depth":2,"slug":"查看提交历史","text":"查看提交历史#"},{"depth":2,"slug":"分支管理","text":"分支管理#"},{"depth":2,"slug":"撤销与回退","text":"撤销与回退#"},{"depth":2,"slug":"标签","text":"标签#"},{"depth":2,"slug":"其他实用命令","text":"其他实用命令#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"git","published":"2025-11-01T00:00:00.000Z","description":"git相关命令","image":"","tags":["git","github","gitea"],"category":"常用命令","draft":false,"encrypted":false,"password":"","lang":"zh_CN","minutes":2,"words":475,"excerpt":"公钥和私钥生成到当前目录下，并指定文件名"},"imagePaths":[]}},"collection":"posts"}],"2025-01-20":[{"id":"示例/markdown-tutorial","data":{"title":"Markdown 教程","published":"2025-01-20T00:00:00.000Z","draft":false,"description":"一个关于如何编写 Markdown 文件的简单示例。","image":"","tags":["示例","Markdown"],"category":"示例","lang":"","pinned":false,"author":"emn178","sourceLink":"https://github.com/emn178/markdown","licenseName":"Unlicensed","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Markdown 扩展功能","prevSlug":"示例/markdown-extended","nextTitle":"git","nextSlug":"常用命令/git"},"body":"# Markdown 教程\n\n一个 Markdown 示例展示了如何编写 Markdown 文件。本文档集成了核心语法和扩展（GFM）。\n\n- [块级元素](#块级元素)\n  - [段落和换行](#段落和换行)\n  - [标题](#标题)\n  - [引用](#引用)\n  - [列表](#列表)\n  - [代码块](#代码块)\n  - [水平线](#水平线)\n  - [表格](#表格)\n- [行内元素](#行内元素)\n  - [链接](#链接)\n  - [目录链接](#目录链接)\n  - [强调](#强调)\n  - [代码](#代码)\n  - [图片](#图片)\n  - [删除线](#删除线)\n- [其他](#其他)\n  - [自动链接](#自动链接)\n  - [反斜杠转义](#反斜杠转义)\n- [行内 HTML](#行内-html)\n\n## 块级元素\n\n### 段落和换行\n\n#### 段落\n\nHTML 标签：`<p>`\n\n一个或多个空行。（空行是只包含 **空格** 或 **制表符** 的行被视为空行。）\n\n代码：\n\n    This will be\n    inline.\n\n    This is second paragraph.\n\n预览：\n\n---\n\nThis will be\ninline.\n\nThis is second paragraph.\n\n---\n\n#### 换行\n\nHTML 标签：`<br />`\n\n行末以**两个或更多空格**结束。\n\n代码：\n\n    This will be not\n    inline.\n\n预览：\n\n---\n\nThis will be not  \ninline.\n\n---\n\n### 标题\n\nMarkdown 支持两种标题样式：Setext 和 atx。\n\n#### Setext\n\nHTML 标签： `<h1>`, `<h2>`\n\n使用 **等号（=）** 作为 `<h1>` 和 **破折号（-）** 作为 `<h2>` 进行\"下划线\"标注，数量不限。\n\n代码：\n\n    This is an H1\n    =============\n    This is an H2\n    -------------\n\n预览：\n\n---\n\n# This is an H1\n\n## This is an H2\n\n---\n\n#### atx\n\nHTML 标签： `<h1>`, `<h2>`, `<h3>`, `<h4>`, `<h5>`, `<h6>`\n\n在行首使用 1-6 个**井号字符（#）**，对应 `<h1>` - `<h6>`。\n\n代码：\n\n    # This is an H1\n    ## This is an H2\n    ###### This is an H6\n\n预览：\n\n---\n\n# This is an H1\n\n## This is an H2\n\n###### This is an H6\n\n---\n\n可选地，你可以\"关闭\" atx 风格的标题。闭合的井号**不需要匹配**打开标题时使用的井号数量。\n\n代码：\n\n    # This is an H1 #\n    ## This is an H2 ##\n    ### This is an H3 ######\n\n预览：\n\n---\n\n# This is an H1\n\n## This is an H2\n\n### This is an H3\n\n---\n\n### 引用\n\nHTML 标签： `<blockquote>`\n\nMarkdown 使用电子邮件样式的 **>** 字符进行引用。如果你对文本进行硬换行并在每行前放置 >，效果最好。\n\n代码：\n\n    > This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,\n    > consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\n    > Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n    >\n    > Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse\n    > id sem consectetuer libero luctus adipiscing.\n\n预览：\n\n---\n\n> This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,\n> consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\n> Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n>\n> Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse\n> id sem consectetuer libero luctus adipiscing.\n\n---\n\nMarkdown 允许你简化操作，只在硬换行段落的第一个行前放置 >。\n\n代码：\n\n    > This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,\n    consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\n    Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n\n    > Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse\n    id sem consectetuer libero luctus adipiscing.\n\n预览：\n\n---\n\n> This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,\n> consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\n> Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n\n> Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse\n> id sem consectetuer libero luctus adipiscing.\n\n---\n\n引用可以嵌套（即引用中的引用）通过添加额外的 > 级别。\n\n代码：\n\n    > This is the first level of quoting.\n    >\n    > > This is nested blockquote.\n    >\n    > Back to the first level.\n\n预览：\n\n---\n\n> This is the first level of quoting.\n>\n> > This is nested blockquote.\n>\n> Back to the first level.\n\n---\n\n引用可以包含其他 Markdown 元素，包括标题、列表和代码块。\n\n代码：\n\n    > ## This is a header.\n    >\n    > 1.   This is the first list item.\n    > 2.   This is the second list item.\n    >\n    > Here's some example code:\n    >\n    >     return shell_exec(\"echo $input | $markdown_script\");\n\n预览：\n\n---\n\n> ## This is a header.\n>\n> 1.  This is the first list item.\n> 2.  This is the second list item.\n>\n> Here's some example code:\n>\n>     return shell_exec(\"echo $input | $markdown_script\");\n\n---\n\n### 列表\n\nMarkdown 支持有序（编号）和无序（项目符号）列表。\n\n#### Unordered\n\nHTML 标签： `<ul>`\n\n无序列表使用 **星号（*）**、**加号（+）** 和 **破折号（-）**。\n\n代码：\n\n    *   Red\n    *   Green\n    *   Blue\n\n预览：\n\n---\n\n- Red\n- Green\n- Blue\n\n---\n\n等价于：\n\n代码：\n\n    +   Red\n    +   Green\n    +   Blue\n\n和：\n\n代码：\n\n    -   Red\n    -   Green\n    -   Blue\n\n#### 有序列表\n\nHTML 标签： `<ol>`\n\n有序列表使用数字后跟句点：\n\n代码：\n\n    1.  Bird\n    2.  McHale\n    3.  Parish\n\n预览：\n\n---\n\n1.  Bird\n2.  McHale\n3.  Parish\n\n---\n\n有可能意外触发有序列表，通过编写如下内容：\n\n代码：\n\n    1986. What a great season.\n\n预览：\n\n---\n\n1986. What a great season.\n\n---\n\n你可以**反斜杠转义 (\\\\)** 句点：\n\n代码：\n\n    1986\\. What a great season.\n\n预览：\n\n---\n\n1986\\. What a great season.\n\n---\n\n#### 缩进\n\n##### 引用\n\n要在列表项中放置引用，引用的 > 分隔符需要缩进：\n\n代码：\n\n    *   A list item with a blockquote:\n\n        > This is a blockquote\n        > inside a list item.\n\n预览：\n\n---\n\n- A list item with a blockquote:\n\n  > This is a blockquote\n  > inside a list item.\n\n---\n\n##### 代码块\n\n要在列表项中放置代码块，代码块需要缩进两次 —— **8 个空格** 或 **两个制表符**：\n\n代码：\n\n    *   A list item with a code block:\n\n            <code goes here>\n\n预览：\n\n---\n\n- A list item with a code block:\n\n      <code goes here>\n\n---\n\n##### 嵌套列表\n\n代码：\n\n    * A\n      * A1\n      * A2\n    * B\n    * C\n\n预览：\n\n---\n\n- A\n  - A1\n  - A2\n- B\n- C\n\n---\n\n### 代码块\n\nHTML 标签： `<pre>`\n\n每行缩进至少 **4 个空格** 或 **1 个制表符**。\n\n代码：\n\n    This is a normal paragraph:\n\n        This is a code block.\n\n预览：\n\n---\n\nThis is a normal paragraph:\n\n    This is a code block.\n\n---\n\n代码块持续到到达非缩进行（或文章末尾）。\n\n在代码块中，**_和号 (&)_** 和 **尖括号（< 和 >）** 会自动转换为 HTML 实体。\n\n代码：\n\n        <div class=\"footer\">\n                        &copy; 2004 Foo Corporationcopy; 2004 Foo Corporation\n        </div>\n\n预览：\n\n---\n\n    <div class=\"footer\">\n                &copy; 2004 Foo Corporationcopy; 2004 Foo Corporation\n    </div>\n\n---\n\n以下章节围栏代码块和语法高亮是扩展，你可以使用其他方式来编写代码块。\n\n#### 围栏代码块\n\n只需将你的代码包装在 ` ``` ` 中（如下所示），你就不需要缩进四个空格。\n\n代码：\n\n    Here's an example:\n\n    ```\n    function test() {\n      console.log(\"notice the blank line before this function?\");\n    }\n    ```\n\n预览：\n\n---\n\nHere's an example:\n\n```\nfunction test() {\n  console.log(\"notice the blank line before this function?\");\n}\n```\n\n---\n\n#### 语法高亮\n\n在你的围栏块中，添加一个可选的语言标识符，我们将通过语法高亮运行它（[支持的语言](https://github.com/github/linguist/blob/master/lib/linguist/languages.yml)）。\n\n代码：\n\n    ```ruby\n    require 'redcarpet'\n    markdown = Redcarpet.new(\"Hello World!\")\n    puts markdown.to_html\n    ```\n\n预览：\n\n---\n\n```ruby\nrequire 'redcarpet'\nmarkdown = Redcarpet.new(\"Hello World!\")\nputs markdown.to_html\n```\n\n---\n\n### 水平线\n\nHTML 标签： `<hr />`\n在行上单独放置**三个或更多破折号（-）、星号（*）或下划线（_）**。你可以在破折号或星号之间使用空格。\n\n代码：\n\n    * * *\n    ***\n    *****\n    - - -\n    ---------------------------------------\n    ___\n\n预览：\n\n---\n\n---\n\n---\n\n---\n\n---\n\n---\n\n---\n\n---\n\n### 表格\n\nHTML 标签： `<table>`\n\n这是一个扩展。\n\n用 **管道符（|）** 分隔列，用 **破折号（-）** 分隔标题，用 **冒号（:）** 进行对齐。\n\n外围的 **管道符（|）** 和对齐是可选的。每个单元格至少有 **3 个分隔符** 用于分隔标题。\n\n代码：\n\n```\n| Left | Center | Right |\n|:-----|:------:|------:|\n|aaa   |bbb     |ccc    |\n|ddd   |eee     |fff    |\n\n A | B\n---|---\n123|456\n\n\nA |B\n--|--\n12|45\n```\n\n预览：\n\n---\n\n| Left | Center | Right |\n| :--- | :----: | ----: |\n| aaa  |  bbb   |   ccc |\n| ddd  |  eee   |   fff |\n\n| A   | B   |\n| --- | --- |\n| 123 | 456 |\n\n| A   | B   |\n| --- | --- |\n| 12  | 45  |\n\n---\n\n## 行内元素\n\n### 链接\n\nHTML 标签： `<a>`\n\nMarkdown 有两种链接语法：行内和引用。\n\n#### Inline\n\n行内链接格式像这样：`[Link Text](URL \"Title\")`。\n\n标题是可选的。\n\n代码：\n\n    This is [an example](http://example.com/ \"Title\") inline link.\n\n    [This link](http://example.net/) has no title attribute.\n\n预览：\n\n---\n\nThis is [an example](http://example.com/ \"Title\") inline link.\n\n[This link](http://example.net/) has no title attribute.\n\n---\n\n如果你引用的是同一服务器上的本地资源，你可以使用相对路径：\n\n代码：\n\n    查看我的 [关于](/about/) 页面了解详情。\n\n预览：\n\n---\n\n查看我的 [关于](/about/) 页面了解详情。\n\n---\n\n#### 引用链接\n\n你可以预定义链接引用。格式像这样：`[id]: URL \"Title\"`\n\n标题也是可选的。当你引用链接时，格式像这样：`[Link Text][id]`\n\n代码：\n\n    [id]: http://example.com/  \"可选标题\"\n    这是一个 [示例][id] 引用样式链接。\n\n预览：\n\n---\n\n[id]: http://example.com/ \"可选标题\"\n\n这是一个 [示例][id] 引用样式链接。\n\n---\n\n也就是说：\n\n- 包含链接标识符的方括号（**不区分大小写**，可选择从左边距缩进最多三个空格）；\n- 后跟一个冒号；\n- 后跟一个或多个空格（或制表符）；\n- 后跟链接的 URL；\n- 链接 URL 可以选择用尖括号包围。\n- 可选择后跟链接的标题属性，用双引号、单引号或括号包围。\n\n以下三个链接定义是等价的：\n\n代码：\n\n    [foo]: http://example.com/  \"可选标题\"\n    [foo]: http://example.com/  可选标题\n    [foo]: http://example.com/  (可选标题)\n    [foo]: <http://example.com/>  \"可选标题\"\n\n使用空的方括号，链接文本本身将用作名称。\n\n代码：\n\n    [Google]: http://google.com/\n    [Google][]\n\n预览：\n\n---\n\n[Google]: http://google.com/\n\n[Google][]\n\n---\n\n### 目录链接\n\nHTML 标签： `<a>`\n\n目录链接用于跳转到文档内的标题。\n\n#### 基本语法\n\n目录链接格式：`[显示文字](#标题ID)`\n\n#### ID如何生成\n\n**英文标题：**\n- 转换为小写\n- 空格替换为连字符 `-`\n- 移除特殊标点符号\n\n代码：\n\n    ## Header One\n    ## This is a Test!\n\n链接：\n\n    [Header One](#header-one)\n    [This is a Test!](#this-is-a-test)\n\n预览：\n\n---\n\n# Header One\n\n# This is a Test!\n\n[Header One](#header-one)\n\n[This is a Test!](#this-is-a-test)\n\n---\n\n**中文标题：**\n- 中文字符保留原样\n- 空格转换为连字符 `-`\n\n代码：\n\n    ## 行内 HTML\n\n链接：\n\n    [行内 HTML](#行内-html)\n\n预览：\n\n---\n\n## 行内 HTML\n\n[行内 HTML](#行内-html)\n\n---\n\n#### 实战技巧\n\n**方法1：直接使用**\n\n代码：\n\n    ## 行内 HTML\n    [行内 HTML](#行内-html)\n\n**方法2：自定义ID（推荐）**\n\n代码：\n\n    ## 行内 HTML {#my-id}\n    [行内 HTML](#my-id)\n\n#### 常见对照表\n\n代码：\n\n```\n| 标题 | 生成的ID | 链接写法 |\n|:-----|:--------:|:---------|\n| `## Hello World` | `#hello-world` | `[Hello World](#hello-world)` |\n| `## 行内 HTML` | `#行内-html` | `[行内 HTML](#行内-html)` |\n| `## Test! Example` | `#test-example` | `[Test! Example](#test-example)` |\n```\n\n预览：\n\n---\n\n| 标题 | 生成的ID | 链接写法 |\n| :--- | :---: | ---: |\n| `## Hello World` | `#hello-world` | [Hello World](#hello-world) |\n| `## 行内 HTML` | `#行内-html` | [行内 HTML](#行内-html) |\n| `## Test! Example` | `#test-example` | [Test! Example](#test-example) |\n\n---\n\n### 强调\n\nHTML 标签： `<em>`, `<strong>`\n\nMarkdown 将 **星号（*）** 和 **下划线（_）** 视为强调的指示符。**一个分隔符** 将是 `<em>`；**双分隔符** 将是 `<strong>`。\n\n代码：\n\n    *单个星号*\n\n    _单个下划线_\n\n    **双星号**\n\n    __双下划线__\n\n预览：\n\n---\n\n_单个星号_\n\n_单个下划线_\n\n**双星号**\n\n**双下划线**\n\n---\n\n但如果你用空格包围 * 或 _，它将被视为字面量星号或下划线。\n\n你可以用反斜杠转义它：\n\n代码：\n\n    \\*这段文本被字面量星号包围\\*\n\n预览：\n\n---\n\n\\*这段文本被字面量星号包围\\*\n\n---\n\n### 代码\n\nHTML 标签： `<code>`\n\n用 **反引号（`）** 包围它。\n\n代码：\n\n    使用 `printf()` 函数。\n\n预览：\n\n---\n\n使用 `printf()` 函数。\n\n---\n\n要在代码范围内包含字面量反引号字符，你可以使用**多个反引号**作为开始和结束分隔符：\n\n代码：\n\n    ``这里有一个字面量反引号（`）。``\n\n预览：\n\n---\n\n``这里有一个字面量反引号（`）。``\n\n---\n\n包围代码范围的反引号分隔符可能包括空格 —— 开头后一个，结尾前一个。这允许你在代码范围的开头或结尾放置字面量反引号字符：\n\n代码：\n\n    代码范围中的单个反引号：`` ` ``\n\n    代码范围中由反引号分隔的字符串：`` `foo` ``\n\n预览：\n\n---\n\n代码范围中的单个反引号：`` ` ``\n\n代码范围中由反引号分隔的字符串：`` `foo` ``\n\n---\n\n### 图片\n\nHTML 标签： `<img />`\n\nMarkdown 使用一种旨在类似于链接语法的图像语法，允许两种样式：行内和引用。\n\n#### 行内图片\n\n行内图片语法看起来像这样：`![Alt text](URL \"Title\")`\n\n标题是可选的。\n\n代码：\n\n    ![替代文本](/path/to/img.jpg)\n\n    ![替代文本](/path/to/img.jpg \"可选标题\")\n\n预览：\n\n---\n\n![替代文本](https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp)\n\n![替代文本](https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp \"可选标题\")\n\n---\n\n也就是说：\n\n- 一个感叹号：!;\n- 后跟一组方括号，包含图像的替代属性文本；\n- 后跟一组括号，包含图像的 URL 或路径，以及用双引号或单引号包围的可选标题属性。\n\n#### 引用图片\n\n引用样式图像语法看起来像这样：`![Alt text][id]`\n\n代码：\n\n    [img id]: https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp  \"可选标题属性\"\n    ![替代文本][img id]\n\n预览：\n\n---\n\n[img id]: https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp \"可选标题属性\"\n\n![替代文本][img id]\n\n---\n\n### 删除线\n\nHTML 标签： `<del>`\n\n这是一个扩展。\n\nGFM 添加了删除线文本的语法。\n\n代码：\n\n```\n~~错误的文本。~~\n```\n\n预览：\n\n---\n\n~~错误的文本。~~\n\n---\n\n## 其他\n\n### 自动链接\n\nMarkdown 支持一种为 URL 和电子邮件地址创建\"自动\"链接的快捷样式：只需用尖括号包围 URL 或电子邮件地址。\n\n代码：\n\n    <http://example.com/>\n\n    <address@example.com>\n\n预览：\n\n---\n\n<http://example.com/>\n\n<address@example.com>\n\n---\n\nGFM 将自动链接标准 URL。\n\n代码：\n\n```\nhttps://github.com/emn178/markdown\n```\n\n预览：\n\n---\n\nhttps://github.com/emn178/markdown\n\n---\n\n### 反斜杠转义\n\nMarkdown 允许你使用反斜杠转义来生成字面量字符，这些字符在 Markdown 的格式化语法中本来具有特殊含义。\n\n代码：\n\n    \\*字面量星号\\*\n\n预览：\n\n---\n\n\\*字面量星号\\*\n\n---\n\nMarkdown 为以下字符提供反斜杠转义：\n\n代码：\n\n    \\   反斜杠\n    `   反引号\n    *   星号\n    _   下划线\n    {}  花括号\n    []  方括号\n    ()  圆括号\n    #   井号\n    +   加号\n    -   减号（连字符）\n    .   点号\n    !   感叹号\n\n## 行内 HTML\n\n对于任何 Markdown 语法未涵盖的标记，你只需使用 HTML 本身。无需在其前缀或分隔它来表示你正在从 Markdown 切换到 HTML；你只需使用标签。\n\n代码：\n\n    This is a regular paragraph.\n\n    <table>\n        <tr>\n            <td>Foo</td>\n        </tr>\n    </table>\n\n    This is another regular paragraph.\n\n预览：\n\n---\n\nThis is a regular paragraph.\n\n<table>\n    <tr>\n        <td>Foo</td>\n    </tr>\n</table>\n\nThis is another regular paragraph.\n\n---\n\n请注意，Markdown 格式化语法**在块级 HTML 标签内不处理**。\n\n与块级 HTML 标签不同，Markdown 语法**在行级标签内处理**。\n\n代码：\n\n    <span>**Work**</span>\n\n    <div>\n        **No Work**\n    </div>\n\n预览：\n\n---\n\n<span>**Work**</span>\n\n<div>\n    **No Work**\n</div>","filePath":"src/content/posts/示例/markdown-tutorial.md","digest":"7984ebf1d978e336","rendered":{"html":"<section><h1 id=\"markdown-教程\">Markdown 教程<a class=\"anchor\" href=\"#markdown-教程\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><p>一个 Markdown 示例展示了如何编写 Markdown 文件。本文档集成了核心语法和扩展（GFM）。</p><ul>\n<li><a href=\"#%E5%9D%97%E7%BA%A7%E5%85%83%E7%B4%A0\">块级元素</a>\n<ul>\n<li><a href=\"#%E6%AE%B5%E8%90%BD%E5%92%8C%E6%8D%A2%E8%A1%8C\">段落和换行</a></li>\n<li><a href=\"#%E6%A0%87%E9%A2%98\">标题</a></li>\n<li><a href=\"#%E5%BC%95%E7%94%A8\">引用</a></li>\n<li><a href=\"#%E5%88%97%E8%A1%A8\">列表</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E5%9D%97\">代码块</a></li>\n<li><a href=\"#%E6%B0%B4%E5%B9%B3%E7%BA%BF\">水平线</a></li>\n<li><a href=\"#%E8%A1%A8%E6%A0%BC\">表格</a></li>\n</ul>\n</li>\n<li><a href=\"#%E8%A1%8C%E5%86%85%E5%85%83%E7%B4%A0\">行内元素</a>\n<ul>\n<li><a href=\"#%E9%93%BE%E6%8E%A5\">链接</a></li>\n<li><a href=\"#%E7%9B%AE%E5%BD%95%E9%93%BE%E6%8E%A5\">目录链接</a></li>\n<li><a href=\"#%E5%BC%BA%E8%B0%83\">强调</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81\">代码</a></li>\n<li><a href=\"#%E5%9B%BE%E7%89%87\">图片</a></li>\n<li><a href=\"#%E5%88%A0%E9%99%A4%E7%BA%BF\">删除线</a></li>\n</ul>\n</li>\n<li><a href=\"#%E5%85%B6%E4%BB%96\">其他</a>\n<ul>\n<li><a href=\"#%E8%87%AA%E5%8A%A8%E9%93%BE%E6%8E%A5\">自动链接</a></li>\n<li><a href=\"#%E5%8F%8D%E6%96%9C%E6%9D%A0%E8%BD%AC%E4%B9%89\">反斜杠转义</a></li>\n</ul>\n</li>\n<li><a href=\"#%E8%A1%8C%E5%86%85-html\">行内 HTML</a></li>\n</ul><section><h2 id=\"块级元素\">块级元素<a class=\"anchor\" href=\"#块级元素\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"段落和换行\">段落和换行<a class=\"anchor\" href=\"#段落和换行\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><section><h4 id=\"段落\">段落<a class=\"anchor\" href=\"#段落\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>HTML 标签：<code>&#x3C;p></code></p><p>一个或多个空行。（空行是只包含 <strong>空格</strong> 或 <strong>制表符</strong> 的行被视为空行。）</p><p>代码：</p><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This will be</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">inline.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is second paragraph.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p>This will be\ninline.</p><p>This is second paragraph.</p><hr></section><section><h4 id=\"换行\">换行<a class=\"anchor\" href=\"#换行\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>HTML 标签：<code>&#x3C;br /></code></p><p>行末以<strong>两个或更多空格</strong>结束。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This will be not</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">inline.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p>This will be not<br>\ninline.</p><hr></section></section><section><h3 id=\"标题\">标题<a class=\"anchor\" href=\"#标题\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>Markdown 支持两种标题样式：Setext 和 atx。</p><section><h4 id=\"setext\">Setext<a class=\"anchor\" href=\"#setext\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>HTML 标签： <code>&#x3C;h1></code>, <code>&#x3C;h2></code></p><p>使用 <strong>等号（=）</strong> 作为 <code>&#x3C;h1></code> 和 <strong>破折号（-）</strong> 作为 <code>&#x3C;h2></code> 进行”下划线”标注，数量不限。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:13ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is an H1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">=============</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is an H2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">-------------</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr></section></section></section></section>\n<section><h1 id=\"this-is-an-h1\">This is an H1<a class=\"anchor\" href=\"#this-is-an-h1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"this-is-an-h2\">This is an H2<a class=\"anchor\" href=\"#this-is-an-h2\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><hr><section><h4 id=\"atx\">atx<a class=\"anchor\" href=\"#atx\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>HTML 标签： <code>&#x3C;h1></code>, <code>&#x3C;h2></code>, <code>&#x3C;h3></code>, <code>&#x3C;h4></code>, <code>&#x3C;h5></code>, <code>&#x3C;h6></code></p><p>在行首使用 1-6 个<strong>井号字符（#）</strong>，对应 <code>&#x3C;h1></code> - <code>&#x3C;h6></code>。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:20ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\"># This is an H1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">## This is an H2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">###### This is an H6</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr></section></section></section>\n<section><h1 id=\"this-is-an-h1-1\">This is an H1<a class=\"anchor\" href=\"#this-is-an-h1-1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"this-is-an-h2-1\">This is an H2<a class=\"anchor\" href=\"#this-is-an-h2-1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h6 id=\"this-is-an-h6\">This is an H6<a class=\"anchor\" href=\"#this-is-an-h6\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h6><hr><p>可选地，你可以”关闭” atx 风格的标题。闭合的井号<strong>不需要匹配</strong>打开标题时使用的井号数量。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:24ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\"># This is an H1 #</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">## This is an H2 ##</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">### This is an H3 ######</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr></section></section></section>\n<section><h1 id=\"this-is-an-h1-2\">This is an H1<a class=\"anchor\" href=\"#this-is-an-h1-2\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"this-is-an-h2-2\">This is an H2<a class=\"anchor\" href=\"#this-is-an-h2-2\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"this-is-an-h3\">This is an H3<a class=\"anchor\" href=\"#this-is-an-h3\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><hr></section><section><h3 id=\"引用\">引用<a class=\"anchor\" href=\"#引用\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML 标签： <code>&#x3C;blockquote></code></p><p>Markdown 使用电子邮件样式的 <strong>></strong> 字符进行引用。如果你对文本进行硬换行并在每行前放置 >，效果最好。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:72ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> id sem consectetuer libero luctus adipiscing.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><blockquote>\n<p>This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,\nconsectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\nVestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.</p>\n<p>Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse\nid sem consectetuer libero luctus adipiscing.</p>\n</blockquote><hr><p>Markdown 允许你简化操作，只在硬换行段落的第一个行前放置 >。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:71ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">id sem consectetuer libero luctus adipiscing.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><blockquote>\n<p>This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,\nconsectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\nVestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.</p>\n</blockquote><blockquote>\n<p>Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse\nid sem consectetuer libero luctus adipiscing.</p>\n</blockquote><hr><p>引用可以嵌套（即引用中的引用）通过添加额外的 > 级别。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:37ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> This is the first level of quoting.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> > This is nested blockquote.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> Back to the first level.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><blockquote>\n<p>This is the first level of quoting.</p>\n<blockquote>\n<p>This is nested blockquote.</p>\n</blockquote>\n<p>Back to the first level.</p>\n</blockquote><hr><p>引用可以包含其他 Markdown 元素，包括标题、列表和代码块。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:58ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> ## This is a header.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> 1.   This is the first list item.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> 2.   This is the second list item.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> Here's some example code:</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">>     return shell_exec(\"echo $input | $markdown_script\");</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><blockquote>\n<h2 id=\"this-is-a-header\">This is a header.<a class=\"anchor\" href=\"#this-is-a-header\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2>\n<ol>\n<li>This is the first list item.</li>\n<li>This is the second list item.</li>\n</ol>\n<p>Here’s some example code:</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:52ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">return shell_exec(\"echo $input | $markdown_script\");</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</blockquote><hr></section><section><h3 id=\"列表\">列表<a class=\"anchor\" href=\"#列表\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>Markdown 支持有序（编号）和无序（项目符号）列表。</p><section><h4 id=\"unordered\">Unordered<a class=\"anchor\" href=\"#unordered\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>HTML 标签： <code>&#x3C;ul></code></p><p>无序列表使用 <strong>星号（*）</strong>、<strong>加号（+）</strong> 和 <strong>破折号（-）</strong>。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:9ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*   Red</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*   Green</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*   Blue</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><ul>\n<li>Red</li>\n<li>Green</li>\n<li>Blue</li>\n</ul><hr><p>等价于：</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:9ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">+   Red</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">+   Green</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">+   Blue</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>和：</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:9ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">-   Red</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">-   Green</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">-   Blue</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h4 id=\"有序列表\">有序列表<a class=\"anchor\" href=\"#有序列表\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>HTML 标签： <code>&#x3C;ol></code></p><p>有序列表使用数字后跟句点：</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:10ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1.  Bird</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">2.  McHale</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">3.  Parish</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><ol>\n<li>Bird</li>\n<li>McHale</li>\n<li>Parish</li>\n</ol><hr><p>有可能意外触发有序列表，通过编写如下内容：</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:26ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1986. What a great season.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><ol start=\"1986\">\n<li>What a great season.</li>\n</ol><hr><p>你可以<strong>反斜杠转义 (\\)</strong> 句点：</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1986\\. What a great season.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p>1986. What a great season.</p><hr></section><section><h4 id=\"缩进\">缩进<a class=\"anchor\" href=\"#缩进\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><section><h5 id=\"引用-1\">引用<a class=\"anchor\" href=\"#引用-1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h5><p>要在列表项中放置引用，引用的 > 分隔符需要缩进：</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*   A list item with a blockquote:</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">> This is a blockquote</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">> inside a list item.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><ul>\n<li>\n<p>A list item with a blockquote:</p>\n<blockquote>\n<p>This is a blockquote\ninside a list item.</p>\n</blockquote>\n</li>\n</ul><hr></section><section><h5 id=\"代码块\">代码块<a class=\"anchor\" href=\"#代码块\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h5><p>要在列表项中放置代码块，代码块需要缩进两次 —— <strong>8 个空格</strong> 或 <strong>两个制表符</strong>：</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*   A list item with a code block:</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;code goes here></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><ul>\n<li>\n<p>A list item with a code block:</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;code goes here></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul><hr></section><section><h5 id=\"嵌套列表\">嵌套列表<a class=\"anchor\" href=\"#嵌套列表\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h5><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:6ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">* A</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">* A1</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">* A2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">* B</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">* C</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><ul>\n<li>A\n<ul>\n<li>A1</li>\n<li>A2</li>\n</ul>\n</li>\n<li>B</li>\n<li>C</li>\n</ul><hr></section></section></section><section><h3 id=\"代码块-1\">代码块<a class=\"anchor\" href=\"#代码块-1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML 标签： <code>&#x3C;pre></code></p><p>每行缩进至少 <strong>4 个空格</strong> 或 <strong>1 个制表符</strong>。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is a normal paragraph:</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">This is a code block.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p>This is a normal paragraph:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is a code block.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr><p>代码块持续到到达非缩进行（或文章末尾）。</p><p>在代码块中，<strong><em>和号 (&#x26;)</em></strong> 和 <strong>尖括号（&#x3C; 和 >）</strong> 会自动转换为 HTML 实体。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:73ch\"><code><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;div class=\"footer\"></span></div></div><div class=\"ec-line\" style=\"--ecIndent:20ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">                    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x26;copy; 2004 Foo Corporationcopy; 2004 Foo Corporation</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;/div></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:65ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;div class=\"footer\"></span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">            </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x26;copy; 2004 Foo Corporationcopy; 2004 Foo Corporation</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;/div></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr><p>以下章节围栏代码块和语法高亮是扩展，你可以使用其他方式来编写代码块。</p><section><h4 id=\"围栏代码块\">围栏代码块<a class=\"anchor\" href=\"#围栏代码块\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>只需将你的代码包装在 <code>```</code> 中（如下所示），你就不需要缩进四个空格。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:61ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">Here's an example:</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">```</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">function test() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">console.log(\"notice the blank line before this function?\");</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">```</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p>Here’s an example:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:61ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">function test() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">console.log(\"notice the blank line before this function?\");</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr></section><section><h4 id=\"语法高亮\">语法高亮<a class=\"anchor\" href=\"#语法高亮\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>在你的围栏块中，添加一个可选的语言标识符，我们将通过语法高亮运行它（<a href=\"https://github.com/github/linguist/blob/master/lib/linguist/languages.yml\">支持的语言</a>）。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:40ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">```ruby</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">require 'redcarpet'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">markdown = Redcarpet.new(\"Hello World!\")</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">puts markdown.to_html</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">```</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"ruby\" class=\"wrap\" style=\"--ecMaxLine:40ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">require</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'redcarpet'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">markdown</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">Redcarpet</span><span style=\"--0:#24292E;--1:#E1E4E8\">.</span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Hello World!\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">puts</span><span style=\"--0:#24292E;--1:#E1E4E8\"> markdown.</span><span style=\"--0:#6F42C1;--1:#B392F0\">to_html</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr></section></section><section><h3 id=\"水平线\">水平线<a class=\"anchor\" href=\"#水平线\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML 标签： <code>&#x3C;hr /></code>\n在行上单独放置<strong>三个或更多破折号（-）、星号（*）或下划线（_）</strong>。你可以在破折号或星号之间使用空格。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">* * *</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">***</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*****</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">- - -</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">---------------------------------------</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">___</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><hr><hr><hr><hr><hr><hr><hr></section><section><h3 id=\"表格\">表格<a class=\"anchor\" href=\"#表格\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML 标签： <code>&#x3C;table></code></p><p>这是一个扩展。</p><p>用 <strong>管道符（|）</strong> 分隔列，用 <strong>破折号（-）</strong> 分隔标题，用 <strong>冒号（:）</strong> 进行对齐。</p><p>外围的 <strong>管道符（|）</strong> 和对齐是可选的。每个单元格至少有 <strong>3 个分隔符</strong> 用于分隔标题。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">| Left | Center | Right |</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">|:-----|:------:|------:|</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">|aaa   |bbb     |ccc    |</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">|ddd   |eee     |fff    |</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:1ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\"> </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">A | B</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">---|---</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">123|456</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">A |B</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">--|--</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">12|45</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"left\">Left</th><th align=\"center\">Center</th><th align=\"right\">Right</th></tr></thead><tbody><tr><td align=\"left\">aaa</td><td align=\"center\">bbb</td><td align=\"right\">ccc</td></tr><tr><td align=\"left\">ddd</td><td align=\"center\">eee</td><td align=\"right\">fff</td></tr></tbody></table>\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>A</th><th>B</th></tr></thead><tbody><tr><td>123</td><td>456</td></tr></tbody></table>\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>A</th><th>B</th></tr></thead><tbody><tr><td>12</td><td>45</td></tr></tbody></table><hr></section></section><section><h2 id=\"行内元素\">行内元素<a class=\"anchor\" href=\"#行内元素\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"链接\">链接<a class=\"anchor\" href=\"#链接\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML 标签： <code>&#x3C;a></code></p><p>Markdown 有两种链接语法：行内和引用。</p><section><h4 id=\"inline\">Inline<a class=\"anchor\" href=\"#inline\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>行内链接格式像这样：<code>[Link Text](URL \"Title\")</code>。</p><p>标题是可选的。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:62ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is [an example](http://example.com/ \"Title\") inline link.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[This link](http://example.net/) has no title attribute.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p>This is <a href=\"http://example.com/\" title=\"Title\">an example</a> inline link.</p><p><a href=\"http://example.net/\">This link</a> has no title attribute.</p><hr><p>如果你引用的是同一服务器上的本地资源，你可以使用相对路径：</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:26ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">查看我的 [关于](/about/) 页面了解详情。</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p>查看我的 <a href=\"/about/\">关于</a> 页面了解详情。</p><hr></section><section><h4 id=\"引用链接\">引用链接<a class=\"anchor\" href=\"#引用链接\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>你可以预定义链接引用。格式像这样：<code>[id]: URL \"Title\"</code></p><p>标题也是可选的。当你引用链接时，格式像这样：<code>[Link Text][id]</code></p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:33ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[id]: http://example.com/  \"可选标题\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">这是一个 [示例][id] 引用样式链接。</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p>这是一个 <a href=\"http://example.com/\" title=\"可选标题\">示例</a> 引用样式链接。</p><hr><p>也就是说：</p><ul>\n<li>包含链接标识符的方括号（<strong>不区分大小写</strong>，可选择从左边距缩进最多三个空格）；</li>\n<li>后跟一个冒号；</li>\n<li>后跟一个或多个空格（或制表符）；</li>\n<li>后跟链接的 URL；</li>\n<li>链接 URL 可以选择用尖括号包围。</li>\n<li>可选择后跟链接的标题属性，用双引号、单引号或括号包围。</li>\n</ul><p>以下三个链接定义是等价的：</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:36ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[foo]: http://example.com/  \"可选标题\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[foo]: http://example.com/  可选标题</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[foo]: http://example.com/  (可选标题)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[foo]: &#x3C;http://example.com/>  \"可选标题\"</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>使用空的方括号，链接文本本身将用作名称。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:28ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[Google]: http://google.com/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[Google][]</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p><a href=\"http://google.com/\">Google</a></p><hr></section></section><section><h3 id=\"目录链接\">目录链接<a class=\"anchor\" href=\"#目录链接\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML 标签： <code>&#x3C;a></code></p><p>目录链接用于跳转到文档内的标题。</p><section><h4 id=\"基本语法\">基本语法<a class=\"anchor\" href=\"#基本语法\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>目录链接格式：<code>[显示文字](#标题ID)</code></p></section><section><h4 id=\"id如何生成\">ID如何生成<a class=\"anchor\" href=\"#id如何生成\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p><strong>英文标题：</strong></p><ul>\n<li>转换为小写</li>\n<li>空格替换为连字符 <code>-</code></li>\n<li>移除特殊标点符号</li>\n</ul><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:18ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">## Header One</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">## This is a Test!</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>链接：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[Header One](#header-one)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[This is a Test!](#this-is-a-test)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr></section></section></section></section>\n<section><h1 id=\"header-one\">Header One<a class=\"anchor\" href=\"#header-one\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1></section>\n<section><h1 id=\"this-is-a-test\">This is a Test!<a class=\"anchor\" href=\"#this-is-a-test\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><p><a href=\"#header-one\">Header One</a></p><p><a href=\"#this-is-a-test\">This is a Test!</a></p><hr><p><strong>中文标题：</strong></p><ul>\n<li>中文字符保留原样</li>\n<li>空格转换为连字符 <code>-</code></li>\n</ul><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:10ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">## 行内 HTML</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>链接：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:19ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[行内 HTML](#行内-html)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><section><h2 id=\"行内-html\">行内 HTML<a class=\"anchor\" href=\"#行内-html\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><a href=\"#%E8%A1%8C%E5%86%85-html\">行内 HTML</a></p><hr><section><h4 id=\"实战技巧\">实战技巧<a class=\"anchor\" href=\"#实战技巧\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p><strong>方法1：直接使用</strong></p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:19ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">## 行内 HTML</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[行内 HTML](#行内-html)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>方法2：自定义ID（推荐）</strong></p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:19ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">## 行内 HTML {#my-id}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[行内 HTML](#my-id)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h4 id=\"常见对照表\">常见对照表<a class=\"anchor\" href=\"#常见对照表\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:75ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">| 标题 | 生成的ID | 链接写法 |</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">|:-----|:--------:|:---------|</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">| `## Hello World` | `#hello-world` | `[Hello World](#hello-world)` |</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">| `## 行内 HTML` | `#行内-html` | `[行内 HTML](#行内-html)` |</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">| `## Test! Example` | `#test-example` | `[Test! Example](#test-example)` |</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"left\">标题</th><th align=\"center\">生成的ID</th><th align=\"right\">链接写法</th></tr></thead><tbody><tr><td align=\"left\"><code>## Hello World</code></td><td align=\"center\"><code>#hello-world</code></td><td align=\"right\"><a href=\"#hello-world\">Hello World</a></td></tr><tr><td align=\"left\"><code>## 行内 HTML</code></td><td align=\"center\"><code>#行内-html</code></td><td align=\"right\"><a href=\"#%E8%A1%8C%E5%86%85-html\">行内 HTML</a></td></tr><tr><td align=\"left\"><code>## Test! Example</code></td><td align=\"center\"><code>#test-example</code></td><td align=\"right\"><a href=\"#test-example\">Test! Example</a></td></tr></tbody></table><hr></section><section><h3 id=\"强调\">强调<a class=\"anchor\" href=\"#强调\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML 标签： <code>&#x3C;em></code>, <code>&#x3C;strong></code></p><p>Markdown 将 <strong>星号（*）</strong> 和 <strong>下划线（_）</strong> 视为强调的指示符。<strong>一个分隔符</strong> 将是 <code>&#x3C;em></code>；<strong>双分隔符</strong> 将是 <code>&#x3C;strong></code>。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:8ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*单个星号*</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">_单个下划线_</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">**双星号**</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">__双下划线__</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p><em>单个星号</em></p><p><em>单个下划线</em></p><p><strong>双星号</strong></p><p><strong>双下划线</strong></p><hr><p>但如果你用空格包围 * 或 _，它将被视为字面量星号或下划线。</p><p>你可以用反斜杠转义它：</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">\\*这段文本被字面量星号包围\\*</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p>*这段文本被字面量星号包围*</p><hr></section><section><h3 id=\"代码\">代码<a class=\"anchor\" href=\"#代码\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML 标签： <code>&#x3C;code></code></p><p>用 <strong>反引号（`）</strong> 包围它。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:17ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">使用 `printf()` 函数。</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p>使用 <code>printf()</code> 函数。</p><hr><p>要在代码范围内包含字面量反引号字符，你可以使用<strong>多个反引号</strong>作为开始和结束分隔符：</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:19ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">``这里有一个字面量反引号（`）。``</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p><code>这里有一个字面量反引号（`）。</code></p><hr><p>包围代码范围的反引号分隔符可能包括空格 —— 开头后一个，结尾前一个。这允许你在代码范围的开头或结尾放置字面量反引号字符：</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">代码范围中的单个反引号：`` ` ``</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">代码范围中由反引号分隔的字符串：`` `foo` ``</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p>代码范围中的单个反引号：<code>`</code></p><p>代码范围中由反引号分隔的字符串：<code>`foo`</code></p><hr></section><section><h3 id=\"图片\">图片<a class=\"anchor\" href=\"#图片\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML 标签： <code>&#x3C;img /></code></p><p>Markdown 使用一种旨在类似于链接语法的图像语法，允许两种样式：行内和引用。</p><section><h4 id=\"行内图片\">行内图片<a class=\"anchor\" href=\"#行内图片\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>行内图片语法看起来像这样：<code>![Alt text](URL \"Title\")</code></p><p>标题是可选的。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:32ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">![替代文本](/path/to/img.jpg)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">![替代文本](/path/to/img.jpg \"可选标题\")</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p><img src=\"https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp\" alt=\"替代文本\"></p><p><img src=\"https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp\" alt=\"替代文本\" title=\"可选标题\"></p><hr><p>也就是说：</p><ul>\n<li>一个感叹号：!;</li>\n<li>后跟一组方括号，包含图像的替代属性文本；</li>\n<li>后跟一组括号，包含图像的 URL 或路径，以及用双引号或单引号包围的可选标题属性。</li>\n</ul></section><section><h4 id=\"引用图片\">引用图片<a class=\"anchor\" href=\"#引用图片\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>引用样式图像语法看起来像这样：<code>![Alt text][id]</code></p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:71ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[img id]: https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp  \"可选标题属性\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">![替代文本][img id]</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p><img src=\"https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp\" alt=\"替代文本\" title=\"可选标题属性\"></p><hr></section></section><section><h3 id=\"删除线\">删除线<a class=\"anchor\" href=\"#删除线\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML 标签： <code>&#x3C;del></code></p><p>这是一个扩展。</p><p>GFM 添加了删除线文本的语法。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:10ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">~~错误的文本。~~</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p><del>错误的文本。</del></p><hr></section></section><section><h2 id=\"其他\">其他<a class=\"anchor\" href=\"#其他\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"自动链接\">自动链接<a class=\"anchor\" href=\"#自动链接\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>Markdown 支持一种为 URL 和电子邮件地址创建”自动”链接的快捷样式：只需用尖括号包围 URL 或电子邮件地址。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;http://example.com/></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;address@example.com></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p><a href=\"http://example.com/\">http://example.com/</a></p><p><a href=\"mailto:address@example.com\">address@example.com</a></p><hr><p>GFM 将自动链接标准 URL。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">https://github.com/emn178/markdown</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p><a href=\"https://github.com/emn178/markdown\">https://github.com/emn178/markdown</a></p><hr></section><section><h3 id=\"反斜杠转义\">反斜杠转义<a class=\"anchor\" href=\"#反斜杠转义\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>Markdown 允许你使用反斜杠转义来生成字面量字符，这些字符在 Markdown 的格式化语法中本来具有特殊含义。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:9ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">\\*字面量星号\\*</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p>*字面量星号*</p><hr><p>Markdown 为以下字符提供反斜杠转义：</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:11ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">\\   反斜杠</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">`   反引号</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*   星号</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">_   下划线</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">{}  花括号</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[]  方括号</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">()  圆括号</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#   井号</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">+   加号</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">-   减号（连字符）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">.   点号</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">!   感叹号</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"行内-html-1\">行内 HTML<a class=\"anchor\" href=\"#行内-html-1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>对于任何 Markdown 语法未涵盖的标记，你只需使用 HTML 本身。无需在其前缀或分隔它来表示你正在从 Markdown 切换到 HTML；你只需使用标签。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is a regular paragraph.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;table></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;tr></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;td>Foo&#x3C;/td></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;/tr></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;/table></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is another regular paragraph.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p>This is a regular paragraph.</p><table>\n    <tbody><tr>\n        <td>Foo</td>\n    </tr>\n</tbody></table><p>This is another regular paragraph.</p><hr><p>请注意，Markdown 格式化语法<strong>在块级 HTML 标签内不处理</strong>。</p><p>与块级 HTML 标签不同，Markdown 语法<strong>在行级标签内处理</strong>。</p><p>代码：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;span>**Work**&#x3C;/span></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;div></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">**No Work**</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;/div></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>预览：</p><hr><p><span><strong>Work</strong></span></p><div>\n    **No Work**\n</div></section></section>","metadata":{"headings":[{"depth":1,"slug":"markdown-教程","text":"Markdown 教程#"},{"depth":2,"slug":"块级元素","text":"块级元素#"},{"depth":3,"slug":"段落和换行","text":"段落和换行#"},{"depth":4,"slug":"段落","text":"段落#"},{"depth":4,"slug":"换行","text":"换行#"},{"depth":3,"slug":"标题","text":"标题#"},{"depth":4,"slug":"setext","text":"Setext#"},{"depth":1,"slug":"this-is-an-h1","text":"This is an H1#"},{"depth":2,"slug":"this-is-an-h2","text":"This is an H2#"},{"depth":4,"slug":"atx","text":"atx#"},{"depth":1,"slug":"this-is-an-h1-1","text":"This is an H1#"},{"depth":2,"slug":"this-is-an-h2-1","text":"This is an H2#"},{"depth":6,"slug":"this-is-an-h6","text":"This is an H6#"},{"depth":1,"slug":"this-is-an-h1-2","text":"This is an H1#"},{"depth":2,"slug":"this-is-an-h2-2","text":"This is an H2#"},{"depth":3,"slug":"this-is-an-h3","text":"This is an H3#"},{"depth":3,"slug":"引用","text":"引用#"},{"depth":2,"slug":"this-is-a-header","text":"This is a header.#"},{"depth":3,"slug":"列表","text":"列表#"},{"depth":4,"slug":"unordered","text":"Unordered#"},{"depth":4,"slug":"有序列表","text":"有序列表#"},{"depth":4,"slug":"缩进","text":"缩进#"},{"depth":5,"slug":"引用-1","text":"引用#"},{"depth":5,"slug":"代码块","text":"代码块#"},{"depth":5,"slug":"嵌套列表","text":"嵌套列表#"},{"depth":3,"slug":"代码块-1","text":"代码块#"},{"depth":4,"slug":"围栏代码块","text":"围栏代码块#"},{"depth":4,"slug":"语法高亮","text":"语法高亮#"},{"depth":3,"slug":"水平线","text":"水平线#"},{"depth":3,"slug":"表格","text":"表格#"},{"depth":2,"slug":"行内元素","text":"行内元素#"},{"depth":3,"slug":"链接","text":"链接#"},{"depth":4,"slug":"inline","text":"Inline#"},{"depth":4,"slug":"引用链接","text":"引用链接#"},{"depth":3,"slug":"目录链接","text":"目录链接#"},{"depth":4,"slug":"基本语法","text":"基本语法#"},{"depth":4,"slug":"id如何生成","text":"ID如何生成#"},{"depth":1,"slug":"header-one","text":"Header One#"},{"depth":1,"slug":"this-is-a-test","text":"This is a Test!#"},{"depth":2,"slug":"行内-html","text":"行内 HTML#"},{"depth":4,"slug":"实战技巧","text":"实战技巧#"},{"depth":4,"slug":"常见对照表","text":"常见对照表#"},{"depth":3,"slug":"强调","text":"强调#"},{"depth":3,"slug":"代码","text":"代码#"},{"depth":3,"slug":"图片","text":"图片#"},{"depth":4,"slug":"行内图片","text":"行内图片#"},{"depth":4,"slug":"引用图片","text":"引用图片#"},{"depth":3,"slug":"删除线","text":"删除线#"},{"depth":2,"slug":"其他","text":"其他#"},{"depth":3,"slug":"自动链接","text":"自动链接#"},{"depth":3,"slug":"反斜杠转义","text":"反斜杠转义#"},{"depth":2,"slug":"行内-html-1","text":"行内 HTML#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Markdown 教程","published":"2025-01-20T00:00:00.000Z","pinned":false,"description":"一个关于如何编写 Markdown 文件的简单示例。","tags":["示例","Markdown"],"category":"示例","licenseName":"Unlicensed","author":"emn178","sourceLink":"https://github.com/emn178/markdown","draft":false,"minutes":15,"words":2983,"excerpt":"一个 Markdown 示例展示了如何编写 Markdown 文件。本文档集成了核心语法和扩展（GFM）。"},"imagePaths":[]}},"collection":"posts"}],"2024-05-01":[{"id":"示例/markdown-extended","data":{"title":"Markdown 扩展功能","published":"2024-05-01T00:00:00.000Z","updated":"2024-11-29T00:00:00.000Z","draft":false,"description":"在 Mizuki 中了解更多 Markdown 功能","image":"","tags":["示例","Markdown","mizuki"],"category":"示例","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Markdown Mermaid","prevSlug":"示例/markdown-mermaid","nextTitle":"Markdown 教程","nextSlug":"示例/markdown-tutorial"},"body":"## GitHub 仓库卡片\n\n你可以添加链接到 GitHub 仓库的动态卡片，在页面加载时，仓库信息将从 GitHub API 中提取。\n\n::github{repo=\"matsuzaka-yuki/Mizuki\"}\n\n使用代码 `::github{repo=\"matsuzaka-yuki/Mizuki\"}` 创建 GitHub 仓库卡片。\n\n```markdown\n::github{repo=\"matsuzaka-yuki/Mizuki\"}\n```\n\n## 警告框\n\n支持以下类型的警告框：`note` `tip` `important` `warning` `caution`\n\n:::note\n突出显示用户应考虑的信息，即使是在浏览时也应如此。\n:::\n\n:::tip\n可选信息，帮助用户更成功。\n:::\n\n:::important\n用户成功所需的 crucial 信息。\n:::\n\n:::warning\n由于潜在风险需要用户立即关注的关键内容。\n:::\n\n:::caution\n操作的负面潜在后果。\n:::\n\n### 基本语法\n\n```markdown\n:::note\n突出显示用户应考虑的信息，即使是在浏览时也应如此。\n:::\n\n:::tip\n可选信息，帮助用户更成功。\n:::\n```\n\n### 自定义标题\n\n警告框的标题可以自定义。\n\n:::note[我的自定义标题]\n这是一个带有自定义标题的注释。\n:::\n\n```markdown\n:::note[我的自定义标题]\n这是一个带有自定义标题的注释。\n:::\n```\n\n### GitHub 语法\n\n> [!TIP]\n> 也支持 [GitHub 语法](https://github.com/orgs/community/discussions/16925)。\n\n```\n> [!NOTE]\n> 也支持 GitHub 语法。\n\n> [!TIP]\n> 也支持 GitHub 语法。\n```\n\n### 隐藏内容\n\n你可以向文本添加隐藏内容。文本也支持 **Markdown** 语法。\n\n内容 :spoiler[被隐藏了 **ayyy**]！\n\n```markdown\n内容 :spoiler[被隐藏了 **ayyy**]！\n```","filePath":"src/content/posts/示例/markdown-extended.md","digest":"5cf28fa38d0e8375","rendered":{"html":"<section><h2 id=\"github-仓库卡片\">GitHub 仓库卡片<a class=\"anchor\" href=\"#github-仓库卡片\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>你可以添加链接到 GitHub 仓库的动态卡片，在页面加载时，仓库信息将从 GitHub API 中提取。</p><a id=\"GC5r55kd-card\" class=\"card-github fetch-waiting no-styling\" href=\"https://github.com/matsuzaka-yuki/Mizuki\" target=\"_blank\" repo=\"matsuzaka-yuki/Mizuki\"><div class=\"gc-titlebar\"><div class=\"gc-titlebar-left\"><div class=\"gc-owner\"><div id=\"GC5r55kd-avatar\" class=\"gc-avatar\"></div><div class=\"gc-user\">matsuzaka-yuki</div></div><div class=\"gc-divider\">/</div><div class=\"gc-repo\">Mizuki</div></div><div class=\"github-logo\"></div></div><div id=\"GC5r55kd-description\" class=\"gc-description\">Waiting for api.github.com...</div><div class=\"gc-infobar\"><div id=\"GC5r55kd-stars\" class=\"gc-stars\">00K</div><div id=\"GC5r55kd-forks\" class=\"gc-forks\">0K</div><div id=\"GC5r55kd-license\" class=\"gc-license\">0K</div><span id=\"GC5r55kd-language\" class=\"gc-language\">Waiting...</span></div><script id=\"GC5r55kd-script\" type=\"text/javascript\" defer>\n      fetch('https://api.github.com/repos/matsuzaka-yuki/Mizuki', { referrerPolicy: \"no-referrer\" }).then(response => response.json()).then(data => {\n        document.getElementById('GC5r55kd-description').innerText = data.description?.replace(/:[a-zA-Z0-9_]+:/g, '') || \"Description not set\";\n        document.getElementById('GC5r55kd-language').innerText = data.language;\n        document.getElementById('GC5r55kd-forks').innerText = Intl.NumberFormat('en-us', { notation: \"compact\", maximumFractionDigits: 1 }).format(data.forks).replaceAll(\" \", '');\n        document.getElementById('GC5r55kd-stars').innerText = Intl.NumberFormat('en-us', { notation: \"compact\", maximumFractionDigits: 1 }).format(data.stargazers_count).replaceAll(\" \", '');\n        const avatarEl = document.getElementById('GC5r55kd-avatar');\n        avatarEl.style.backgroundImage = 'url(' + data.owner.avatar_url + ')';\n        avatarEl.style.backgroundColor = 'transparent';\n        document.getElementById('GC5r55kd-license').innerText = data.license?.spdx_id || \"no-license\";\n        document.getElementById('GC5r55kd-card').classList.remove(\"fetch-waiting\");\n        console.log(\"[GITHUB-CARD] Loaded card for matsuzaka-yuki/Mizuki | GC5r55kd.\")\n      }).catch(err => {\n        const c = document.getElementById('GC5r55kd-card');\n        c?.classList.add(\"fetch-error\");\n        console.warn(\"[GITHUB-CARD] (Error) Loading card for matsuzaka-yuki/Mizuki | GC5r55kd.\")\n      })\n    \x3C/script></a><p>使用代码 <code>::github{repo=\"matsuzaka-yuki/Mizuki\"}</code> 创建 GitHub 仓库卡片。</p><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"markdown\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">::github{repo=\"matsuzaka-yuki/Mizuki\"}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"警告框\">警告框<a class=\"anchor\" href=\"#警告框\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>支持以下类型的警告框：<code>note</code> <code>tip</code> <code>important</code> <code>warning</code> <code>caution</code></p><blockquote class=\"admonition bdm-note\"><span class=\"bdm-title\">NOTE</span><p>突出显示用户应考虑的信息，即使是在浏览时也应如此。</p></blockquote><blockquote class=\"admonition bdm-tip\"><span class=\"bdm-title\">TIP</span><p>可选信息，帮助用户更成功。</p></blockquote><blockquote class=\"admonition bdm-important\"><span class=\"bdm-title\">IMPORTANT</span><p>用户成功所需的 crucial 信息。</p></blockquote><blockquote class=\"admonition bdm-warning\"><span class=\"bdm-title\">WARNING</span><p>由于潜在风险需要用户立即关注的关键内容。</p></blockquote><blockquote class=\"admonition bdm-caution\"><span class=\"bdm-title\">CAUTION</span><p>操作的负面潜在后果。</p></blockquote><section><h3 id=\"基本语法\">基本语法<a class=\"anchor\" href=\"#基本语法\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"markdown\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">:::note</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">突出显示用户应考虑的信息，即使是在浏览时也应如此。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">:::</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">:::tip</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">可选信息，帮助用户更成功。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">:::</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"自定义标题\">自定义标题<a class=\"anchor\" href=\"#自定义标题\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>警告框的标题可以自定义。</p><blockquote class=\"admonition bdm-note\"><span class=\"bdm-title\"><div>我的自定义标题</div></span><p>这是一个带有自定义标题的注释。</p></blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"markdown\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">:::note[</span><span style=\"--0:#032F62;--0td:underline;--1:#DBEDFF;--1td:underline\">我的自定义标题</span><span style=\"--0:#24292E;--1:#E1E4E8\">]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">这是一个带有自定义标题的注释。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">:::</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"github-语法\">GitHub 语法<a class=\"anchor\" href=\"#github-语法\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><blockquote class=\"admonition bdm-tip\"><span class=\"bdm-title\">TIP</span><p>也支持 <a href=\"https://github.com/orgs/community/discussions/16925\">GitHub 语法</a>。</p></blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> [!NOTE]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> 也支持 GitHub 语法。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> [!TIP]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> 也支持 GitHub 语法。</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"隐藏内容\">隐藏内容<a class=\"anchor\" href=\"#隐藏内容\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>你可以向文本添加隐藏内容。文本也支持 <strong>Markdown</strong> 语法。</p><p>内容 <spoiler>被隐藏了 <strong>ayyy</strong></spoiler>！</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"markdown\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">内容 :spoiler[被隐藏了 </span><span style=\"--0:#24292E;--0fw:bold;--1:#E1E4E8;--1fw:bold\">**ayyy**</span><span style=\"--0:#24292E;--1:#E1E4E8\">]！</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section>","metadata":{"headings":[{"depth":2,"slug":"github-仓库卡片","text":"GitHub 仓库卡片#"},{"depth":2,"slug":"警告框","text":"警告框#"},{"depth":3,"slug":"基本语法","text":"基本语法#"},{"depth":3,"slug":"自定义标题","text":"自定义标题#"},{"depth":3,"slug":"github-语法","text":"GitHub 语法#"},{"depth":3,"slug":"隐藏内容","text":"隐藏内容#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Markdown 扩展功能","published":"2024-05-01T00:00:00.000Z","updated":"2024-11-29T00:00:00.000Z","description":"在 Mizuki 中了解更多 Markdown 功能","image":"","tags":["示例","Markdown","mizuki"],"category":"示例","draft":false,"minutes":2,"words":305,"excerpt":"你可以添加链接到 GitHub 仓库的动态卡片，在页面加载时，仓库信息将从 GitHub API 中提取。"},"imagePaths":[]}},"collection":"posts"}],"2023-10-01":[{"id":"示例/markdown-mermaid","data":{"title":"Markdown Mermaid","published":"2023-10-01T00:00:00.000Z","draft":false,"description":"一个带有 Mermaid 的 Markdown 博客文章简单示例。","image":"","tags":["示例","Markdown","Mermaid"],"category":"示例","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Markdown 包含视频","prevSlug":"示例/video","nextTitle":"Markdown 扩展功能","nextSlug":"示例/markdown-extended"},"body":"# Markdown 与 Mermaid 图表完全指南\n\n本文演示了如何在 Markdown 文档中使用 Mermaid 创建各种复杂图表，包括流程图、序列图、甘特图、类图和状态图。\n\n## 流程图示例\n\n流程图非常适合表示过程或算法步骤。\n\n```mermaid\ngraph TD\n    A[开始] --> B{条件检查}\n    B -->|是| C[处理步骤 1]\n    B -->|否| D[处理步骤 2]\n    C --> E[子过程]\n    D --> E\n    subgraph E [子过程详情]\n        E1[子步骤 1] --> E2[子步骤 2]\n        E2 --> E3[子步骤 3]\n    end\n    E --> F{另一个决策}\n    F -->|选项 1| G[结果 1]\n    F -->|选项 2| H[结果 2]\n    F -->|选项 3| I[结果 3]\n    G --> J[结束]\n    H --> J\n    I --> J\n```\n\n## 序列图示例\n\n序列图显示对象之间随时间的交互。\n\n```mermaid\nsequenceDiagram\n    participant 用户\n    participant 网页应用\n    participant 服务器\n    participant 数据库\n\n    用户->>网页应用: 提交登录请求\n    网页应用->>服务器: 发送认证请求\n    服务器->>数据库: 查询用户凭据\n    数据库-->>服务器: 返回用户数据\n    服务器-->>网页应用: 返回认证结果\n\n    alt 认证成功\n        网页应用->>用户: 显示欢迎页面\n        网页应用->>服务器: 请求用户数据\n        服务器->>数据库: 获取用户偏好\n        数据库-->>服务器: 返回偏好\n        服务器-->>网页应用: 返回用户数据\n        网页应用->>用户: 加载个性化界面\n    else 认证失败\n        网页应用->>用户: 显示错误消息\n        网页应用->>用户: 提示重新输入\n    end\n```\n\n## 甘特图示例\n\n甘特图非常适合显示项目进度和时间线。\n\n```mermaid\ngantt\n    title 网站开发项目时间线\n    dateFormat  YYYY-MM-DD\n    axisFormat  %m/%d\n\n    section 设计阶段\n    需求分析      :a1, 2023-10-01, 7d\n    UI 设计                 :a2, after a1, 10d\n    原型创建        :a3, after a2, 5d\n\n    section 开发阶段\n    前端开发      :b1, 2023-10-20, 15d\n    后端开发       :b2, after a2, 18d\n    数据库设计           :b3, after a1, 12d\n\n    section 测试阶段\n    单元测试              :c1, after b1, 8d\n    集成测试       :c2, after b2, 10d\n    用户验收测试   :c3, after c2, 7d\n\n    section 部署\n    生产部署     :d1, after c3, 3d\n    发布                    :里程碑, after d1, 0d\n```\n\n## 类图示例\n\n类图显示系统的静态结构，包括类、属性、方法及其关系。\n\n```mermaid\nclassDiagram\n    class User {\n        +String username\n        +String password\n        +String email\n        +Boolean active\n        +login()\n        +logout()\n        +updateProfile()\n    }\n\n    class Article {\n        +String title\n        +String content\n        +Date publishDate\n        +Boolean published\n        +publish()\n        +edit()\n        +delete()\n    }\n\n    class Comment {\n        +String content\n        +Date commentDate\n        +addComment()\n        +deleteComment()\n    }\n\n    class Category {\n        +String name\n        +String description\n        +addArticle()\n        +removeArticle()\n    }\n\n    User \"1\" -- \"*\" Article : 撰写\n    User \"1\" -- \"*\" Comment : 发表\n    Article \"1\" -- \"*\" Comment : 包含\n    Article \"1\" -- \"*\" Category : 属于\n```\n\n## 状态图示例\n\n状态图显示对象在其生命周期中经历的状态序列。\n\n```mermaid\nstateDiagram-v2\n    [*] --> Draft\n\n    Draft --> UnderReview : 提交\n    UnderReview --> Draft : 拒绝\n    UnderReview --> Approved : 批准\n    Approved --> Published : 发布\n    Published --> Archived : 归档\n    Published --> Draft : 撤回\n\n    state Published {\n        [*] --> Active\n        Active --> Hidden : 临时隐藏\n        Hidden --> Active : 恢复\n        Active --> [*]\n        Hidden --> [*]\n    }\n\n    Archived --> [*]\n```\n\n## 饼图示例\n\n饼图非常适合显示比例和百分比数据。\n\n```mermaid\npie title 网站流量来源分析\n    \"搜索引擎\" : 45.6\n    \"直接访问\" : 30.1\n    \"社交媒体\" : 15.3\n    \"推荐链接\" : 6.4\n    \"其他来源\" : 2.6\n```\n\n## 结论\n\nMermaid 是在 Markdown 文档中创建各种类型图表的强大工具。本文演示了如何使用流程图、序列图、甘特图、类图、状态图和饼图。这些图表可以帮助你更清晰地表达复杂的概念、过程和数据结构。\n\n要使用 Mermaid，只需在代码块中指定 mermaid 语言并使用简洁的文本语法描述图表。Mermaid 会自动将这些描述转换为精美的可视化图表。\n\n在你的下一篇技术博客文章或项目文档中尝试使用 Mermaid 图表——它们会让你的内容更加专业且更易于理解！","filePath":"src/content/posts/示例/markdown-mermaid.md","digest":"d8f22970a3db1e23","rendered":{"html":"<section><h1 id=\"markdown-与-mermaid-图表完全指南\">Markdown 与 Mermaid 图表完全指南<a class=\"anchor\" href=\"#markdown-与-mermaid-图表完全指南\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><p>本文演示了如何在 Markdown 文档中使用 Mermaid 创建各种复杂图表，包括流程图、序列图、甘特图、类图和状态图。</p><section><h2 id=\"流程图示例\">流程图示例<a class=\"anchor\" href=\"#流程图示例\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>流程图非常适合表示过程或算法步骤。</p><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-afgwem\"><div class=\"mermaid\" data-mermaid-code=\"graph TD\n    A[开始] --> B{条件检查}\n    B -->|是| C[处理步骤 1]\n    B -->|否| D[处理步骤 2]\n    C --> E[子过程]\n    D --> E\n    subgraph E [子过程详情]\n        E1[子步骤 1] --> E2[子步骤 2]\n        E2 --> E3[子步骤 3]\n    end\n    E --> F{另一个决策}\n    F -->|选项 1| G[结果 1]\n    F -->|选项 2| H[结果 2]\n    F -->|选项 3| I[结果 3]\n    G --> J[结束]\n    H --> J\n    I --> J\">graph TD\n    A[开始] --> B{条件检查}\n    B -->|是| C[处理步骤 1]\n    B -->|否| D[处理步骤 2]\n    C --> E[子过程]\n    D --> E\n    subgraph E [子过程详情]\n        E1[子步骤 1] --> E2[子步骤 2]\n        E2 --> E3[子步骤 3]\n    end\n    E --> F{另一个决策}\n    F -->|选项 1| G[结果 1]\n    F -->|选项 2| H[结果 2]\n    F -->|选项 3| I[结果 3]\n    G --> J[结束]\n    H --> J\n    I --> J</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section><section><h2 id=\"序列图示例\">序列图示例<a class=\"anchor\" href=\"#序列图示例\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>序列图显示对象之间随时间的交互。</p><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-c86l6u\"><div class=\"mermaid\" data-mermaid-code=\"sequenceDiagram\n    participant 用户\n    participant 网页应用\n    participant 服务器\n    participant 数据库\n\n    用户->>网页应用: 提交登录请求\n    网页应用->>服务器: 发送认证请求\n    服务器->>数据库: 查询用户凭据\n    数据库-->>服务器: 返回用户数据\n    服务器-->>网页应用: 返回认证结果\n\n    alt 认证成功\n        网页应用->>用户: 显示欢迎页面\n        网页应用->>服务器: 请求用户数据\n        服务器->>数据库: 获取用户偏好\n        数据库-->>服务器: 返回偏好\n        服务器-->>网页应用: 返回用户数据\n        网页应用->>用户: 加载个性化界面\n    else 认证失败\n        网页应用->>用户: 显示错误消息\n        网页应用->>用户: 提示重新输入\n    end\">sequenceDiagram\n    participant 用户\n    participant 网页应用\n    participant 服务器\n    participant 数据库\n\n    用户->>网页应用: 提交登录请求\n    网页应用->>服务器: 发送认证请求\n    服务器->>数据库: 查询用户凭据\n    数据库-->>服务器: 返回用户数据\n    服务器-->>网页应用: 返回认证结果\n\n    alt 认证成功\n        网页应用->>用户: 显示欢迎页面\n        网页应用->>服务器: 请求用户数据\n        服务器->>数据库: 获取用户偏好\n        数据库-->>服务器: 返回偏好\n        服务器-->>网页应用: 返回用户数据\n        网页应用->>用户: 加载个性化界面\n    else 认证失败\n        网页应用->>用户: 显示错误消息\n        网页应用->>用户: 提示重新输入\n    end</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section><section><h2 id=\"甘特图示例\">甘特图示例<a class=\"anchor\" href=\"#甘特图示例\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>甘特图非常适合显示项目进度和时间线。</p><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-854rx8\"><div class=\"mermaid\" data-mermaid-code=\"gantt\n    title 网站开发项目时间线\n    dateFormat  YYYY-MM-DD\n    axisFormat  %m/%d\n\n    section 设计阶段\n    需求分析      :a1, 2023-10-01, 7d\n    UI 设计                 :a2, after a1, 10d\n    原型创建        :a3, after a2, 5d\n\n    section 开发阶段\n    前端开发      :b1, 2023-10-20, 15d\n    后端开发       :b2, after a2, 18d\n    数据库设计           :b3, after a1, 12d\n\n    section 测试阶段\n    单元测试              :c1, after b1, 8d\n    集成测试       :c2, after b2, 10d\n    用户验收测试   :c3, after c2, 7d\n\n    section 部署\n    生产部署     :d1, after c3, 3d\n    发布                    :里程碑, after d1, 0d\">gantt\n    title 网站开发项目时间线\n    dateFormat  YYYY-MM-DD\n    axisFormat  %m/%d\n\n    section 设计阶段\n    需求分析      :a1, 2023-10-01, 7d\n    UI 设计                 :a2, after a1, 10d\n    原型创建        :a3, after a2, 5d\n\n    section 开发阶段\n    前端开发      :b1, 2023-10-20, 15d\n    后端开发       :b2, after a2, 18d\n    数据库设计           :b3, after a1, 12d\n\n    section 测试阶段\n    单元测试              :c1, after b1, 8d\n    集成测试       :c2, after b2, 10d\n    用户验收测试   :c3, after c2, 7d\n\n    section 部署\n    生产部署     :d1, after c3, 3d\n    发布                    :里程碑, after d1, 0d</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section><section><h2 id=\"类图示例\">类图示例<a class=\"anchor\" href=\"#类图示例\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>类图显示系统的静态结构，包括类、属性、方法及其关系。</p><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-1engsi\"><div class=\"mermaid\" data-mermaid-code=\"classDiagram\n    class User {\n        +String username\n        +String password\n        +String email\n        +Boolean active\n        +login()\n        +logout()\n        +updateProfile()\n    }\n\n    class Article {\n        +String title\n        +String content\n        +Date publishDate\n        +Boolean published\n        +publish()\n        +edit()\n        +delete()\n    }\n\n    class Comment {\n        +String content\n        +Date commentDate\n        +addComment()\n        +deleteComment()\n    }\n\n    class Category {\n        +String name\n        +String description\n        +addArticle()\n        +removeArticle()\n    }\n\n    User &#x22;1&#x22; -- &#x22;*&#x22; Article : 撰写\n    User &#x22;1&#x22; -- &#x22;*&#x22; Comment : 发表\n    Article &#x22;1&#x22; -- &#x22;*&#x22; Comment : 包含\n    Article &#x22;1&#x22; -- &#x22;*&#x22; Category : 属于\">classDiagram\n    class User {\n        +String username\n        +String password\n        +String email\n        +Boolean active\n        +login()\n        +logout()\n        +updateProfile()\n    }\n\n    class Article {\n        +String title\n        +String content\n        +Date publishDate\n        +Boolean published\n        +publish()\n        +edit()\n        +delete()\n    }\n\n    class Comment {\n        +String content\n        +Date commentDate\n        +addComment()\n        +deleteComment()\n    }\n\n    class Category {\n        +String name\n        +String description\n        +addArticle()\n        +removeArticle()\n    }\n\n    User \"1\" -- \"*\" Article : 撰写\n    User \"1\" -- \"*\" Comment : 发表\n    Article \"1\" -- \"*\" Comment : 包含\n    Article \"1\" -- \"*\" Category : 属于</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section><section><h2 id=\"状态图示例\">状态图示例<a class=\"anchor\" href=\"#状态图示例\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>状态图显示对象在其生命周期中经历的状态序列。</p><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-4j1d4i\"><div class=\"mermaid\" data-mermaid-code=\"stateDiagram-v2\n    [*] --> Draft\n\n    Draft --> UnderReview : 提交\n    UnderReview --> Draft : 拒绝\n    UnderReview --> Approved : 批准\n    Approved --> Published : 发布\n    Published --> Archived : 归档\n    Published --> Draft : 撤回\n\n    state Published {\n        [*] --> Active\n        Active --> Hidden : 临时隐藏\n        Hidden --> Active : 恢复\n        Active --> [*]\n        Hidden --> [*]\n    }\n\n    Archived --> [*]\">stateDiagram-v2\n    [*] --> Draft\n\n    Draft --> UnderReview : 提交\n    UnderReview --> Draft : 拒绝\n    UnderReview --> Approved : 批准\n    Approved --> Published : 发布\n    Published --> Archived : 归档\n    Published --> Draft : 撤回\n\n    state Published {\n        [*] --> Active\n        Active --> Hidden : 临时隐藏\n        Hidden --> Active : 恢复\n        Active --> [*]\n        Hidden --> [*]\n    }\n\n    Archived --> [*]</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section><section><h2 id=\"饼图示例\">饼图示例<a class=\"anchor\" href=\"#饼图示例\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>饼图非常适合显示比例和百分比数据。</p><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-cfp082\"><div class=\"mermaid\" data-mermaid-code=\"pie title 网站流量来源分析\n    &#x22;搜索引擎&#x22; : 45.6\n    &#x22;直接访问&#x22; : 30.1\n    &#x22;社交媒体&#x22; : 15.3\n    &#x22;推荐链接&#x22; : 6.4\n    &#x22;其他来源&#x22; : 2.6\">pie title 网站流量来源分析\n    \"搜索引擎\" : 45.6\n    \"直接访问\" : 30.1\n    \"社交媒体\" : 15.3\n    \"推荐链接\" : 6.4\n    \"其他来源\" : 2.6</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section><section><h2 id=\"结论\">结论<a class=\"anchor\" href=\"#结论\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Mermaid 是在 Markdown 文档中创建各种类型图表的强大工具。本文演示了如何使用流程图、序列图、甘特图、类图、状态图和饼图。这些图表可以帮助你更清晰地表达复杂的概念、过程和数据结构。</p><p>要使用 Mermaid，只需在代码块中指定 mermaid 语言并使用简洁的文本语法描述图表。Mermaid 会自动将这些描述转换为精美的可视化图表。</p><p>在你的下一篇技术博客文章或项目文档中尝试使用 Mermaid 图表——它们会让你的内容更加专业且更易于理解！</p></section></section>","metadata":{"headings":[{"depth":1,"slug":"markdown-与-mermaid-图表完全指南","text":"Markdown 与 Mermaid 图表完全指南#"},{"depth":2,"slug":"流程图示例","text":"流程图示例#"},{"depth":2,"slug":"序列图示例","text":"序列图示例#"},{"depth":2,"slug":"甘特图示例","text":"甘特图示例#"},{"depth":2,"slug":"类图示例","text":"类图示例#"},{"depth":2,"slug":"状态图示例","text":"状态图示例#"},{"depth":2,"slug":"饼图示例","text":"饼图示例#"},{"depth":2,"slug":"结论","text":"结论#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Markdown Mermaid","published":"2023-10-01T00:00:00.000Z","pinned":false,"description":"一个带有 Mermaid 的 Markdown 博客文章简单示例。","tags":["示例","Markdown","Mermaid"],"category":"示例","draft":false,"minutes":5,"words":963,"excerpt":"本文演示了如何在 Markdown 文档中使用 Mermaid 创建各种复杂图表，包括流程图、序列图、甘特图、类图和状态图。"},"imagePaths":[]}},"collection":"posts"}],"2022-08-01":[{"id":"示例/video","data":{"title":"Markdown 包含视频","published":"2022-08-01T00:00:00.000Z","draft":false,"description":"本文章演示如何在博客文章中包含嵌入视频。","image":"","tags":["示例","Markdown","视频"],"category":"示例","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"","prevSlug":"","nextTitle":"Markdown Mermaid","nextSlug":"示例/markdown-mermaid"},"body":"只需从 YouTube 或其他平台复制嵌入代码，然后粘贴到 markdown 文件中。\n\n```yaml\n---\ntitle: 在文章中包含视频\npublished: 2023-10-19\n// ...\n---\n\n<iframe width=\"100%\" height=\"468\" src=\"https://www.youtube.com/embed/5gIf0_xpFPI?si=N1WTorLKL0uwLsU_\" title=\"YouTube 视频播放器\" frameborder=\"0\" allowfullscreen></iframe>\n```\n\n## YouTube\n\n<iframe width=\"100%\" height=\"468\" src=\"https://www.youtube.com/embed/5gIf0_xpFPI?si=N1WTorLKL0uwLsU_\" title=\"YouTube 视频播放器\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen></iframe>\n\n## Bilibili\n\n<iframe width=\"100%\" height=\"468\" src=\"//player.bilibili.com/player.html?bvid=BV1fK4y1s7Qf&p=1&autoplay=0\" scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\" &autoplay=0> </iframe>","filePath":"src/content/posts/示例/video.md","digest":"35333fa6107fb4ed","rendered":{"html":"<p>只需从 YouTube 或其他平台复制嵌入代码，然后粘贴到 markdown 文件中。</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"yaml\" class=\"wrap\" style=\"--ecMaxLine:165ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">title</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">在文章中包含视频</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">published</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">2023-10-19</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">// ...</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;iframe width=\"100%\" height=\"468\" src=\"https://www.youtube.com/embed/5gIf0_xpFPI?si=N1WTorLKL0uwLsU_\" title=\"YouTube 视频播放器\" frameborder=\"0\" allowfullscreen>&#x3C;/iframe></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<section><h2 id=\"youtube\">YouTube<a class=\"anchor\" href=\"#youtube\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><iframe width=\"100%\" height=\"468\" src=\"https://www.youtube.com/embed/5gIf0_xpFPI?si=N1WTorLKL0uwLsU_\" title=\"YouTube 视频播放器\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen></iframe></section>\n<section><h2 id=\"bilibili\">Bilibili<a class=\"anchor\" href=\"#bilibili\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><iframe width=\"100%\" height=\"468\" src=\"//player.bilibili.com/player.html?bvid=BV1fK4y1s7Qf&#x26;p=1&#x26;autoplay=0\" scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\" &#x26;autoplay=\"0\"> </iframe></section>","metadata":{"headings":[{"depth":2,"slug":"youtube","text":"YouTube#"},{"depth":2,"slug":"bilibili","text":"Bilibili#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Markdown 包含视频","published":"2022-08-01T00:00:00.000Z","description":"本文章演示如何在博客文章中包含嵌入视频。","tags":["示例","Markdown","视频"],"category":"示例","draft":false,"minutes":1,"words":78,"excerpt":"只需从 YouTube 或其他平台复制嵌入代码，然后粘贴到 markdown 文件中。"},"imagePaths":[]}},"collection":"posts"}]};
const allPostsData = [{"id":"生活/常用网址","title":"常用网址","published":"2025-11-04T00:00:00.000Z"},{"id":"生活/复盘","title":"复盘","published":"2025-11-04T00:00:00.000Z"},{"id":"项目大课/ai智能化云盘/ai智能化云盘02","title":"AI智能化云盘02","published":"2025-11-20T00:00:00.000Z"},{"id":"读书笔记/运动改造大脑","title":"《运动改造大脑》","published":"2025-11-19T00:00:00.000Z"},{"id":"读书笔记/锻炼","title":"《锻炼》","published":"2025-11-19T00:00:00.000Z"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题17","title":"后端高级工程师面试专题17","published":"2025-11-17T00:00:00.000Z"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题16","title":"后端高级工程师面试专题16","published":"2025-11-16T00:00:00.000Z"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题15","title":"后端高级工程师面试专题15","published":"2025-11-15T00:00:00.000Z"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题14","title":"后端高级工程师面试专题14","published":"2025-11-14T00:00:00.000Z"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题13","title":"后端高级工程师面试专题13","published":"2025-11-13T00:00:00.000Z"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题12","title":"后端高级工程师面试专题12","published":"2025-11-12T00:00:00.000Z"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题11","title":"后端高级工程师面试专题11","published":"2025-11-11T00:00:00.000Z"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题10","title":"后端高级工程师面试专题10","published":"2025-11-10T00:00:00.000Z"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题09","title":"后端高级工程师面试专题09","published":"2025-11-09T00:00:00.000Z"},{"id":"环境部署/github代码自动部署到服务器","title":"github代码自动部署到服务器","published":"2025-11-08T00:00:00.000Z"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题08","title":"后端高级工程师面试专题08","published":"2025-11-08T00:00:00.000Z"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题07","title":"后端高级工程师面试专题07","published":"2025-11-07T00:00:00.000Z"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题06","title":"后端高级工程师面试专题06","published":"2025-11-06T00:00:00.000Z"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题05","title":"后端高级工程师面试专题05","published":"2025-11-05T00:00:00.000Z"},{"id":"项目大课/ai智能化云盘/ai智能化云盘01","title":"AI智能化云盘01","published":"2025-11-05T00:00:00.000Z"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题04","title":"后端高级工程师面试专题04","published":"2025-11-04T00:00:00.000Z"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题03","title":"后端高级工程师面试专题03","published":"2025-11-03T00:00:00.000Z"},{"id":"技术点/sso","title":"sso","published":"2025-11-02T00:00:00.000Z"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题02","title":"后端高级工程师面试专题02","published":"2025-11-02T00:00:00.000Z"},{"id":"面试题/后端高级工程师面试专题/后端高级工程师面试专题01","title":"后端高级工程师面试专题01","published":"2025-11-01T00:00:00.000Z"},{"id":"常用命令/git","title":"git","published":"2025-11-01T00:00:00.000Z"},{"id":"示例/markdown-tutorial","title":"Markdown 教程","published":"2025-01-20T00:00:00.000Z"},{"id":"示例/markdown-extended","title":"Markdown 扩展功能","published":"2024-05-01T00:00:00.000Z"},{"id":"示例/markdown-mermaid","title":"Markdown Mermaid","published":"2023-10-01T00:00:00.000Z"},{"id":"示例/video","title":"Markdown 包含视频","published":"2022-08-01T00:00:00.000Z"}];
const monthNames = ["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"];
const weekDays = ["日","一","二","三","四","五","六"];
const yearSuffix = "年";

  // 客户端动态渲染日历
  function renderCalendar() {
    const now = new Date();
    const currentYear = now.getFullYear();
    const currentMonth = now.getMonth();
    const currentDate = now.getDate();
    
    // 更新 Widget 标题
    const titleElement = document.getElementById('calendar-widget-title');
    if (titleElement) {
      titleElement.textContent = `${currentYear}${yearSuffix}${monthNames[currentMonth]}`;
    }
    
    // 获取月份的第一天是星期几
    const firstDayOfMonth = new Date(currentYear, currentMonth, 1).getDay();
    
    // 获取当月天数
    const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
    
    // 生成日历格子
    const calendarGrid = document.getElementById('calendar-grid');
    if (!calendarGrid) return;
    
    const calendarDays = [];
    
    // 添加空白格子（月初空白）
    for (let i = 0; i < firstDayOfMonth; i++) {
      calendarDays.push({ day: null, hasPost: false, count: 0, dateKey: "" });
    }
    
    // 添加每一天
    for (let day = 1; day <= daysInMonth; day++) {
      const dateKey = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
      const posts = postDateMap[dateKey] || [];
      const count = posts.length;
      calendarDays.push({
        day,
        hasPost: count > 0,
        count,
        dateKey
      });
    }
    
    // 渲染日历格子
    calendarGrid.innerHTML = calendarDays.map(({day, hasPost, count, dateKey}) => {
      const isToday = day === currentDate;
      const classes = [
        "calendar-day aspect-square flex items-center justify-center rounded text-sm relative cursor-pointer"
      ];
      
      if (!day) {
        classes.push("text-neutral-400 dark:text-neutral-600");
      } else if (!hasPost) {
        classes.push("text-neutral-700 dark:text-neutral-300");
      } else {
        classes.push("text-neutral-900 dark:text-neutral-100 font-bold");
      }
      
      if (isToday) {
        classes.push("ring-2 ring-[var(--primary)]");
      }
      
      return `
        <div
          class="${classes.join(' ')}"
          data-date="${dateKey}"
          data-has-post="${hasPost}"
        >
          ${day || ''}
          ${hasPost ? '<span class="absolute bottom-0 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full bg-[var(--primary)]"></span>' : ''}
          ${hasPost && count > 1 ? `<span class="absolute top-0 right-0 text-[10px] text-[var(--primary)] font-bold">${count}</span>` : ''}
        </div>
      `;
    }).join('');
    
    // 获取当月所有文章
    const currentMonthPosts = allPostsData.filter(post => {
      const date = new Date(post.published);
      return date.getFullYear() === currentYear && date.getMonth() === currentMonth;
    });
    
    // 显示当月文章列表
    showMonthlyPosts(currentMonthPosts);
    
    // 添加点击事件监听
    setupClickHandlers(currentMonthPosts);
  }
  
  // 显示当月所有文章
  function showMonthlyPosts(currentMonthPosts) {
    const postsList = document.getElementById('calendar-posts-list');
    const divider = document.getElementById('calendar-posts-divider');
    
    if (postsList) {
      postsList.innerHTML = currentMonthPosts.map(post => `
        <a href="/posts/${post.id}/" class="block text-sm text-neutral-700 dark:text-neutral-300 hover:text-[var(--primary)] dark:hover:text-[var(--primary)] transition-colors truncate px-2 py-1 rounded hover:bg-[var(--btn-plain-bg-hover)]">
          ${post.title}
        </a>
      `).join('');
      
      // 显示/隐藏分割线
      if (divider) {
        divider.style.display = currentMonthPosts.length > 0 ? 'block' : 'none';
      }
    }
  }
  
  // 设置日历格子点击事件
  function setupClickHandlers(currentMonthPosts) {
    const calendarDays = document.querySelectorAll('.calendar-day[data-date]');
    const postsList = document.getElementById('calendar-posts-list');
    const divider = document.getElementById('calendar-posts-divider');
    
    let currentSelectedDay = null;
    
    calendarDays.forEach(dayElement => {
      dayElement.addEventListener('click', () => {
        const dateKey = dayElement.getAttribute('data-date');
        const hasPost = dayElement.getAttribute('data-has-post') === 'true';
        
        if (!hasPost || !dateKey) return;
        
        // 切换选中状态
        if (currentSelectedDay === dayElement) {
          // 取消选中，恢复显示当月所有文章
          dayElement.classList.remove('bg-[var(--primary)]', 'bg-opacity-10');
          currentSelectedDay = null;
          showMonthlyPosts(currentMonthPosts);
          return;
        }
        
        // 移除之前选中的样式
        if (currentSelectedDay) {
          currentSelectedDay.classList.remove('bg-[var(--primary)]', 'bg-opacity-10');
        }
        
        // 添加选中样式
        dayElement.classList.add('bg-[var(--primary)]', 'bg-opacity-10');
        currentSelectedDay = dayElement;
        
        // 获取该日期的文章
        const posts = postDateMap[dateKey] || [];
        
        if (posts.length > 0 && postsList) {
          // 渲染文章列表
          postsList.innerHTML = posts.map(post => `
            <a href="/posts/${post.id}/" class="block text-sm text-neutral-700 dark:text-neutral-300 hover:text-[var(--primary)] dark:hover:text-[var(--primary)] transition-colors truncate px-2 py-1 rounded hover:bg-[var(--btn-plain-bg-hover)]">
              ${post.data.title}
            </a>
          `).join('');
          
          // 显示分割线
          if (divider) {
            divider.style.display = 'block';
          }
        }
      });
    });
  }
  
  // 页面加载时渲染日历
  renderCalendar();
  
  // 每天午夜更新一次日历（可选）
  const now = new Date();
  const tomorrow = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);
  const msUntilMidnight = tomorrow.getTime() - now.getTime();
  
  setTimeout(() => {
    renderCalendar();
    // 之后每24小时更新一次
    setInterval(renderCalendar, 24 * 60 * 60 * 1000);
  }, msUntilMidnight);
})();</script>  </div> <!-- 粘性组件区域 -->  </div> <!-- 响应式样式和JavaScript -->  <script type="module" src="/_astro/RightSideBar.astro_astro_type_script_index_0_lang.DxLCjgCY.js"></script></div> <main id="swup-container" class="transition-swup-fade overflow-hidden w-full col-span-1 row-start-1 row-end-2 col-span-1 row-start-1 row-end-2 lg:col-start-2 lg:col-end-3 lg:col-start-2 lg:col-end-3 transition-main" data-astro-cid-haiuh7kc> <div id="content-wrapper" class="onload-animation transition-leaving" data-astro-cid-haiuh7kc> <!-- the overflow-hidden here prevent long text break the layout--> <!-- make id different from windows.swup global property -->    <script type="module" src="/_astro/_...slug_.astro_astro_type_script_index_0_lang.IiygoCjM.js"></script> <div class="flex w-full rounded-[var(--radius-large)] overflow-hidden relative mb-4"> <div id="post-container" class="card-base z-10 px-6 md:px-9 pt-6 pb-4 relative w-full "> <!-- word count and reading time --> <div class="flex flex-row text-black/30 dark:text-white/30 gap-5 mb-3 transition onload-animation"> <div class="flex flex-row items-center"> <div class="transition h-6 w-6 rounded-md bg-black/5 dark:bg-white/10 text-black/50 dark:text-white/50 flex items-center justify-center mr-2"> <svg width="1em" height="1em" data-icon="material-symbols:notes-rounded">   <symbol id="ai:material-symbols:notes-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M4 18q-.425 0-.712-.288T3 17t.288-.712T4 16h10q.425 0 .713.288T15 17t-.288.713T14 18zm0-5q-.425 0-.712-.288T3 12t.288-.712T4 11h16q.425 0 .713.288T21 12t-.288.713T20 13zm0-5q-.425 0-.712-.288T3 7t.288-.712T4 6h16q.425 0 .713.288T21 7t-.288.713T20 8z"/></symbol><use href="#ai:material-symbols:notes-rounded"></use>  </svg> </div> <div class="text-sm"> 2846  字 </div> </div> <div class="flex flex-row items-center"> <div class="transition h-6 w-6 rounded-md bg-black/5 dark:bg-white/10 text-black/50 dark:text-white/50 flex items-center justify-center mr-2"> <svg width="1em" height="1em" data-icon="material-symbols:schedule-outline-rounded">   <symbol id="ai:material-symbols:schedule-outline-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M13 11.6V8q0-.425-.288-.712T12 7t-.712.288T11 8v3.975q0 .2.075.388t.225.337l3.3 3.3q.275.275.7.275T16 16t.275-.7t-.275-.7zM12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.325 0 5.663-2.337T20 12t-2.337-5.663T12 4T6.337 6.338T4 12t2.338 5.663T12 20"/></symbol><use href="#ai:material-symbols:schedule-outline-rounded"></use>  </svg> </div> <div class="text-sm"> 14  分钟 </div> </div> </div> <!-- title --> <div class="relative onload-animation"> <div data-pagefind-body data-pagefind-weight="10" data-pagefind-meta="title" class="transition w-full block font-bold mb-3
                    text-3xl md:text-[2.25rem]/[2.75rem]
                    text-black/90 dark:text-white/90
                    md:before:w-1 before:h-5 before:rounded-md before:bg-[var(--primary)]
                    before:absolute before:top-[0.75rem] before:left-[-1.125rem]"> 后端高级工程师面试专题14 </div> </div> <!-- metadata --> <div class="onload-animation"> <div class="flex flex-wrap text-neutral-500 dark:text-neutral-400 items-center gap-4 gap-x-4 gap-y-2"> <!-- publish date --> <div class="flex items-center"> <div class="meta-icon"> <svg width="1em" height="1em" class="text-xl" data-icon="material-symbols:calendar-today-outline-rounded">   <symbol id="ai:material-symbols:calendar-today-outline-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M5 22q-.825 0-1.412-.587T3 20V6q0-.825.588-1.412T5 4h1V3q0-.425.288-.712T7 2t.713.288T8 3v1h8V3q0-.425.288-.712T17 2t.713.288T18 3v1h1q.825 0 1.413.588T21 6v14q0 .825-.587 1.413T19 22zm0-2h14V10H5zM5 8h14V6H5zm0 0V6z"/></symbol><use href="#ai:material-symbols:calendar-today-outline-rounded"></use>  </svg> </div> <span class="text-50 text-sm font-medium">2025-11-14</span> </div> <!-- update date -->  <!-- categories --> <div class="flex items-center"> <div class="meta-icon"> <svg width="1em" height="1em" class="text-xl" data-icon="material-symbols:book-2-outline-rounded">   <symbol id="ai:material-symbols:book-2-outline-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M6 15.325q.35-.175.725-.25T7.5 15H8V4h-.5q-.625 0-1.062.438T6 5.5zM10 15h8V4h-8zm-4 .325V4zM7.5 22q-1.45 0-2.475-1.025T4 18.5v-13q0-1.45 1.025-2.475T7.5 2H18q.825 0 1.413.587T20 4v12.525q0 .2-.162.363t-.588.362q-.35.175-.55.5t-.2.75t.2.763t.55.487t.55.413t.2.562v.25q0 .425-.288.725T19 22zm0-2h9.325q-.15-.35-.237-.712T16.5 18.5q0-.4.075-.775t.25-.725H7.5q-.65 0-1.075.438T6 18.5q0 .65.425 1.075T7.5 20"/></symbol><use href="#ai:material-symbols:book-2-outline-rounded"></use>  </svg> </div> <div class="flex flex-row flex-nowrap items-center"> <a href="/archive/?category=%E9%9D%A2%E8%AF%95%E9%A2%98" aria-label="View all posts in the 面试题 category" class="link-lg transition text-50 text-sm font-medium
                            hover:text-[var(--primary)] dark:hover:text-[var(--primary)] whitespace-nowrap"> 面试题 </a> </div> </div> <!-- word count -->  <!-- tags (只有在不显示基本元数据时才显示) --> <div class="items-center flex"> <div class="meta-icon"> <svg width="1em" height="1em" class="text-xl" data-icon="material-symbols:tag-rounded">   <symbol id="ai:material-symbols:tag-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="m9 16l-.825 3.275q-.075.325-.325.525t-.6.2q-.475 0-.775-.375T6.3 18.8L7 16H4.275q-.5 0-.8-.387T3.3 14.75q.075-.35.35-.55t.625-.2H7.5l1-4H5.775q-.5 0-.8-.387T4.8 8.75q.075-.35.35-.55t.625-.2H9l.825-3.275Q9.9 4.4 10.15 4.2t.6-.2q.475 0 .775.375t.175.825L11 8h4l.825-3.275q.075-.325.325-.525t.6-.2q.475 0 .775.375t.175.825L17 8h2.725q.5 0 .8.387t.175.863q-.075.35-.35.55t-.625.2H16.5l-1 4h2.725q.5 0 .8.388t.175.862q-.075.35-.35.55t-.625.2H15l-.825 3.275q-.075.325-.325.525t-.6.2q-.475 0-.775-.375T12.3 18.8L13 16zm.5-2h4l1-4h-4z"/></symbol><use href="#ai:material-symbols:tag-rounded"></use>  </svg> </div> <div class="flex flex-row flex-nowrap items-center">  <div class="hidden mx-1.5 text-[var(--meta-divider)] text-sm">/</div> <a href="/archive/?tag=%E5%90%8E%E7%AB%AF%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98" aria-label="View all posts with the 后端高级工程师面试专题 tag" class="link-lg transition text-50 text-sm font-medium
                                        hover:text-[var(--primary)] dark:hover:text-[var(--primary)] whitespace-nowrap"> 后端高级工程师面试专题 </a>   </div> </div> <!-- 访问量（首页不显示，且umami.enabled为true时显示） -->  </div> <!-- 只有在非首页且启用umami且有slug时才加载脚本 -->  <div class="mt-4 border-[var(--line-divider)] border-dashed border-b-[1px] mb-5"></div> </div> <!-- always show cover as long as it has one -->  <div id="password-protection" class="password-protection" data-astro-cid-732embm3> <div class="password-container" data-astro-cid-732embm3> <div class="lock-icon" data-astro-cid-732embm3> <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-astro-cid-732embm3> <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6z" fill="currentColor" data-astro-cid-732embm3></path> </svg> </div> <h2 data-astro-cid-732embm3>此内容受密码保护</h2> <p data-astro-cid-732embm3>请输入密码以查看受保护的内容</p> <div class="password-input-group" data-astro-cid-732embm3> <input type="password" id="password-input" placeholder="请输入密码" class="password-input" data-astro-cid-732embm3> <button id="unlock-btn" class="unlock-button" data-astro-cid-732embm3>解锁</button> </div> <div id="error-message" class="error-message" style="display: none;" data-astro-cid-732embm3>密码错误，请重试</div> </div> </div> <div id="decrypted-content" class="decrypted-content" style="display: none;" data-astro-cid-732embm3></div>  <script>(function(){const encryptedContent = "U2FsdGVkX19V1GFwWEplDrE2b8YFDgAVqpUihiCo8MTu6+5o9Lpv9CCOfSSTprA4AlQofGH95oLcbWJkpW5ELT+lwP80P4O0bP/HGlqmnSqjaezEYCvgJ7dLMNF75AHT7WcV0WadV/gaIafrxjNsL0nLTjyDJU3yM47V4vnxw7dRUXAbIki7D8MR+80FMkUNiEVhNjpaW9mEJv15pqBy8+SplbmNCUeypxGXt1nCuKaHL/y7HkgdZPBMnpf+2OWbKqe2EtwKtAs+PPv/7XcHPq9svyKlHvm9gcC21r7ZvDL20G6aruQZVYfTIH5ZQXOkPNIZLvdGKWTkrt67v4X7Q4AJ4ymvuCPySl5NOHLMi0b6oMa652O8qbGfGmKui8TtENdXGLWyW7e6+rR6fhzg40nNMHYCMYk563n8uceEjQxcJQiNVQEorjA9BcEgf33YYiIcKHyfnT2wufpn+8SLu1Zt4a35AjjHtPP/p97Mov3biWB1rRJhazM+fVAoyfhoKa8TPlx5/iy87XLvl+pbWQLtEoXRAdjkoqYDM+e0t/fBpCzNnlOOMHR8SIu7IZm3JZxvKp2+DEXnpRMTd8Nn4U3AMdpvRORGitAhwYFuozjCsRPknutE/CVmKHZHIRCZYsvA3M2o6WTAyHHeOY492fuuk7uOPikH38zXgfMlPFq1EA107zCs3kxO+cotI/aTRDs1jzlQlvGW2IPgdoP6iD8qfUWup6ZfgChvO15vP7O5vCvBUWIJAMyFIxxJ9Oqw4fHlZv43OWSqvnMi6Xb+fz9O8OEH9Ta4ILXAlDnRTmBuunQWsfhW4dlIzubVAxnH/bw4t2cfs1T+L6RScZMIpCSiCf7xwmMuEcGukJtsUyBRv47EwLC3ISUk2Il/4EGVN9Fvv3TUMwMYwTK3jWPebZ2/NCFdHu1WyAiSCP7fXkcVWNpebkJ8tY/IdapHjQi9GtxK2GUNUD1l1/swHJFhp5KvyqFPifDCYYhYqdSyPmK5kuISmYQgMe3oPEhKYsqwz0/hBxx6hxjRruqInCiFcNbs87V0o69WQlosZBBHITSDGZr7MpfbU1+38lzcl/z/9ObtbSORoYzStgK2UVhoGnec5Y3eRMWQE8GNh/svzxcKI1m61g/z8cqw537B1bElhDcfNd06uggTUV3vle7ckepp9Oum4cz2+6bb7kcrdYMZ5zXNMevOS0jEB3na98w0wkyY3wU2Yq/hNdTEoEycQSemqNtluGi4Di+b0SyyJ3DNW2N1itEIwCQWHNxaei+M+IgV0pWOtTyye0CKeDec9wsdLoekIlhIO00TaJBD2iOlwj3nkCoqQHkN3pX9VfKlf4z+MywGvJH63RdaUldKzpYQl/KxkDvEeOiPFK8CLOA21HbK+GubTS6HYw+NyMfLMJ9O/22/ughD7Koa7hjratUly5u17M02ugyChMQHeDpMECsr1skkZmZOh28IyEQLN4Q5YDV7IF2aepiZh881auZYNvz6GVPs9JpZnzaEHLONQWu8WBv/TjhUFBPfoAvv46KtPsdEuupcXQo0AcnLF35WC+zLnM5fUIAWKAeu+bX1gwLdpq7Owv0vbNURhonX1MahR7TO35qUlcl+dKMm49INTFZ5cr9VL2N9eKxwen87k3PSNQ3tXJIOvkaTQV48dWf76NOClzgRvqIAebJbXx9RPP+9ToLdBw3XKU0fnoNs0pLTbdyO/D8k/CXrr4oYOxf2UossxqYuqFC5ASm/S8REyo4tC0rg1izrQ47iEJOyFS6Ic9hi+Dj2rFojSmKUjsE+vuRLJC5yNCxKhsO12bmjgWzKfJZqXXUepGr3GybooajfX7DCZXx05XONxdY6tcf4ViI7LifVfQsRjUiVW7T9yzf3mC7R0wzE1cwYLFf0qTitS1fByMyys3VKBL+02Njp4EMCf5Je0JON/wFT5/at12o8i+o2PFQ4zCoCDjwzgccCRpj00fANBw/rHybn8QvSjnhrF3cxt2D8IAmhkUQpSthH5Fh9F2Mc300bVhKbd/MP0fDO2m/j1RT2ZJ0yKcKzLz1ci6vObUgXwCDTv9K1Ojmk4dQRQVibvMsrchGtAIuKXQfXRinMJ0jaSuDiU6VBgb78nRYzKC/PtfOIJpdreL00cbY4hus9/8XviBvpGNlOHNXaS83yAYXfIyshrlt74zf8XEUiNQ8cnGJvF2jvx5bhcIOfKXAnSSyEavRl6bK/+ssQw3pf1MbJgWwPJY+zYNBkQ9R9yMtx9RT5YIRK4GBOKElieiqcrNXg7gKCQP4a2ApAnpxlJ0093C1TEraMywEIpUgNh3HGlPfmtDFPN0C3oXuc/JfxVZb8KBr29VMSbWjEoGVSFEvrtFVLQufFpo/7Ru9vtirs2Bxi3PHfKr9mw94G2s2umh/yxW0cSCgcCEl9XwDic6iUCeBuuqo4dPl2LmwFgw7RpLPWaIaFIixjheFJ5P8EAA36nDG5/9bYaDEnrDYun9x239WjQsMSfKJs8AtYlktczAdMB4+JrVpNPG94fJSUPYY2oIbqJoTCLsJ7iscY5vg0Azbl204LMgZFTKWR19ZHZaMRtg8q8fLOTvw3omx54RudMrbhkkiBnZb6e8e1WxXuqtH90BVgfJRFNGr+d6C72coDGlurNdY8VuNenF73uaxR5hz42T1StJJmQOHNVVSWPF5OuNHpPbdbMcebvHbKG28JILwR14NE2AIO1pTVSPaVLShBojQ5QWMMvqlfFKgVZMwEkHRcudJqIYupsFMX4owBr7S1P/IlZGo1pop9S1a06NylGq/Yzn0/r3A1et9vgAxpPU4ksFuLmm9PbiwJ5R1NMAgRJLiDWqU8i8EMmnZh5BZSTeFDzWPOpBwUeSQDpR5V1N5IpI0cg6DEjl4hPm51SHv1zsu5mY9RAxJIA4jDBBtiuANClUcmoQaxFx+MxvChPWvQI+0CGhzlRJCsGWDk8D/8OwLKbTy/ye3+uadDnvShSjKD2alXLR/1g6owM1aJgwTh6MrnuMDDXIJYA2WwYz2vOM0p++/Va24udV2CjmgHQyBlCfEOuqsPTRbtJ8z8X0Ns5Z7ZrIFQHBalk71AQpDpvSk/Pky2Li28Kik69rcbJts+PyGfoXlJp1dYcV2JsAj5V7B0fWDv/hHBRQk/E3SK/PaXZ4VhvWtzvziSFHsvnIAChyllQcGkmpSYOLRuZcw9k2pNEhMIMT9bYoF/lurxh4Y6jfqkoonq9LGEY/S0kvXZQgz3CUr8vmcyXMYVu1zif9kvB2bn2H1H8KEcV4EJwXT4JMkc+FiYvagDtBssaMiIlVkEDkbH/eodXcylswCl7Ogr/JjO6tZ3mbeawkjwsS2WdiMilTdtonKqQFhFU47UZ5Dx4jQV0f1CsuvccZc/AxYvwpo02/G97ob1CCIJ0+rKvSNqznL0pw/8bXf2H1uMqev/HHJ2RGE6KXqPTaZ8Sm8Wj1sVzB5FFdkO+FiyuYnYYAolGIp9gLPFHknS054IRNRv/EipYq5foDb2k7eF1EZXzT8LFZ0w66F9xJ38TUmHl5GYcOTYLbAwQ8WmiVtfDAWUhBmXpjp+7pNIYZlmAGq1DUTh5Ljo1c0VuOEjBwoOMqYqBXHS4bmfsw4Jt7kAAUej9Vo2JS328inZX4ELuVKbtvpfjk8KX34N15Bf8um69g60yY55EjSPH6DcvFnrEgRPu5xgxwritonwuAe9mJ1mfw/t8syjNFK9+p9CBJDj52ttgnVPrP/V/YHNv8CyWV43QikxqQp2Vt4rGQxn+HPfqh+2KDoq60v+5K+s8nbmC1JXtyVPWCvUHIWqBCTiLnkwFRyk7AUfpRQp9F77znLuzb4CiIrGAUQtxDU/VeHYGhnaQFOqR5EAFjZ59TsNwYi/00B8Xskx7eXYYY7bxBY/HoONLvR/UqoHFdmzJDjDqcRtnl7Y/ZSU0ahcdJp9jMRoCqahqdtRzlNaG1rCctkQ6C2QUX7BB8aMvnyzENE23z+rPLq8dCcelD5xAWDh/dj9sRZ9MlCQuNJbPxryVywzCQKMNSv7u94DQlz29TIlQsrT9O9Le5spJL1Y4dkicEwXSKgy3cUGOYHPriJJ4iUKNOcgDRqtWPsbkCnFMh4Pqpa9WD2c4/LYKlUI4KEoxpOyO4YWFGX3M+LPXrwWcOS1AMrqhLwnx106WbxLfPv+IBOceRQQo6gic+X8YSq3jJKBh2MW9NpBlF53r9kjlJUP6/g9tN4mFq94Nh9Z9UzomIRjPb1Wj3Q9v9HgdRVuFtY5oWI5X6HLFVkmQOcZkZdugkDATJdEYgr47kTDLOpPRMr4+RCPr66slIDzs+qg4EVDpCRGMchO6/+3Juiwz9i+McBkSYE1YrQNi00GHBg1Nf21Dmdv9wGS84J6FcUYIjdCtgNvwq/WJAiC8DEsLk2DeJdZvzolVCWS8ofFuAUgXkqS8va2tnLIvD9uflROFOVGjXq3YJoo69MfzzQDvLH1+Cx7BNKI7IZeImf8c/lS2/uWv9nqV4om7PThZsV4vbEBz/oMofnezwS0gi9M67BuUDxfG66Ybp3xPc635TFs1WVDQ5ev7WvddQ3tyoYlrhVoOAqQ3oqwmY7cwuesRjcm3CIODOeCI3NMoKpXCHDm+Q+7ISVmZmGqJfTtXg3JRjWjE71s++PCct9sD/+mYitNLE2WznLebL1ZNEvXrqtJGhZXtDE/hIDmiORBxHyVf6vIwL7EG64gTTifyOaUSP8KPcPyQyF+dMMQJNgbgjfrKph8tyu1AiIbAee2llsDwyE3PWmzKQSTc1KcutqcmD+VPSMBkMjMVvHJJlC/Z88j4QgJLnHIAS87Gnhd/zoVlGmCF9PvBvV+c5CSNh9/nU7AqNI+aXh9tbyRNx6BsjYofe7ZtGPaGPSpNuBLx8mqxrKCuD9qzH0OavpMT2Zm1SldQaekFl4hR5O4DswvAvYzhMi9VLh2ldd0Q9K9m3EKuz/9VLJOiFdPBoTTjszvVfMpqc5O03AAkDYD8zFJyyct+EMNnpbfoK/UkWI9SoDqk86iEgRLsckfOXQYpDkMc/cIHZZ/haGJl1MmNnwZwbfPZt6cEEyhSzChVBrDlAUQ7gtMID5bUwVaQ0JVEILo7LUSOyTAQu03L9CGCt3QYrXu3u/9+JrCdOGG+HtOm79SLvrtCveL4PU3faZfgHwR7gWFuJGKB0jfBJ7dkGFDH0hmZeQAwo1k1JsQQAtNJBPXEoxBRRdaYLftKx4SSCHwEbUxEaRuAdCK6gX38wCjpkDIxzbFDTqNBHmra92e+mAaNB6rKVI/tDOPuJ1ypqTIPyGP/L3tg3J4kG0Of93fsvPZp31rpbDdEydV/W8ofisBwbyPDF/Dv/OuP/6MDvfEPeT6uReaWMqIvMTTFpDUPExqNoRwp8md1fjt6guGec7KUG4OGESzmSfAr7zO1yHdVla6dsOUa6Hkb4bFKbFzh8dcFzNWnglbqqrhNkyHeR7EdhaXtBxwVKh4/zk+TapS6GKWv8hDQqOu3FVLD+BVjaw6ZKdr78NSezXobhvJ8URvzVl0XsVsQvkaCUrsTDn21EInFYRrhGQ05+IDHqcAQkWvH29uNL4j+mwmUJWG/IIIoRTm7kpCB2+Oej9k8LIX9/dJsSfk3vwnvtKlFAhqtr9CjVqaSSP7Po90oQV6gh56vmWLIHcm+qKVk0nAFlg4MAB384QcL64AUBw+Vv79yrhPtWZ+5KGW4hRQPY7Hos9MLX/jA6sKzMz0n9TMh6paoKW0Hp478qqw8QrjCjGOuq4MnONK2sD9QcRaEb+cLVPYWn/y+T0EY/PkrdNc7rG/MZ+nzeHJcfFik5bFN2XT/TU5GRfpKqZZaUdKeaC7PShSU4MU3TgIhGh7hQ58q8dP+3PzcjToe15jUZqeBCXqIinJTdVnN6e3xZ/r/lR3GJ7DFKuFJJaxi5DOUETuBIhJUASXH2VsU7y+z/xbCtbUDluPmNSgZI32s/1pcRRIU575vvOETeuG4bRAxyxJehzvmyQjpllLwqX3Va6xYk3dSTyoB+GIsbhSM+OU4XMRrm9qKeKomMwONXnyG9gtG5HfpUDuYT5+UqRdlXUUWEewNHwAM+LLLLlaAHqiRt/XDBsWld2PY5f2aZWfw2T+hprzgEzy/c3ik7MTcHCHzXAvZocJ9YBafu8RyuIL6eVGgFpk/3QQCwortFEozxSU7hTr/dSDl3wZpmMKDuewz5+k1yGjjlLLQkQbJarUmNSSIlVZTvB5gE14H+nyrUCK03afoIVr8AcaEMidVXuCunAOfVAuzwRUOxCdcpIvJrnDqhsjX1HodZG0sZbFFo/pCOH1BvNpu+rc1zV0/lOntB/Cyj4nWZHaHEY7lbxE+NeycwaQge5yw1wMHXv4J7HBJuNZSh0alHYoCzrmJ7CdEgn52ovHSIX6ZCdxQpwqmg5mCY1Lf/ioV7oNWZnqMjBju/MDOxPa7lGxV8KJ9XB0DxhTMTjayW7YLok6dLU0I/xt9iLlMXIrRO2qj+2+f8mOkVvEGc8ZavfbZZLd9BefODVyvD87PR79SjihK830KbCbcguEs8btlfY6hxi9t5/D1Ci/RSeVOKiM19jfGb4AD5viKqke6IRNDxDmA60HIGC3+8mmUaLlQc44iiStlnTWjiXckh4xhevM9Ekfsdow3TKLxoeIWRhxG5IyVkPkJ7+M1ejhNgcEMpArHBEhhQe/dU9nRmtQoc38cw1OEoJtljJTdwlARFiKlZ4Pj/KBeKLl+vZbyB0ewXR9ew6dU/WONti3N7Qh5dlVuM3PeWDR5mlBmxl3xKpJp5sD5H9N9a/HgJkmEH5YEQk7ynhTyIcW+rhG9I9VUGnW9j97TeU0cKZgdLfBikV68343H5cutWSCf40QMSZWKeC3dGQJLC+C5riRySe4ppDlvMMVH4HKPfS7pnf0ieA+Ye/asjLKxgMf2oz2lOsrQ8t0Kp2zjMOaFSMyUMCx4miBqRFn0KQbRQ1WEWoDgG378fngOelb6L6j/QPwjKPQEdQ8br+QLbvaNp4l+LZtMYZickRjIZqg8gfm1J7ZVGt0+Znc2qzTTFFvGM/xeviUq6QWr1zxK7pp+V4QgAQgFb9PiBw4DlsnG8lzHYd1JBvWwDGnmb+dEj2EQXcp4YGR3PVJPgbHbIwrUdvLbNMTVir68tXS9rChg2pCcJwwj5GTtHJSVpirjW3gI5NOVwGKjBwj++O3Qws+oTY/BA5frnaHWgIX1qEv9vwTaYXnDRH2PH1lQUBDv6s82Lr5sEpKpKIM4c/9PnVxeoreqp22OgJ7h8OvKq+MQ5475CgIKWa0aC3Rp76VowgTnUkTLk/C2/UaGxhoK0Lc+IV9kyblAXCOr5UtYRq/FvZwUQ6BoA3nWwJBlwZ73UxVAhUKvzl9odc4Y0ieLYEwQs6SJ4gDmxf9+pAQp7mCtqoikc5uD/rExG+tj7rCD8Mzg3jVNlGL5LDT+ebC66zHRzq08ryxkRPPaUGLivaHGxyWqClmmRCxdMK1UMyL2VUmn1tJKui7q51fOBBqLKV/VsQOMDvRiOZrpQ4VSj6nFC3eln3KWL88126YuejqBV0riIpl3M7YAxaXk6GXbcfXc5Yn616T0aIf0q7shRhLWtFygwQRvbxXGZrgGLi2g9DPtZkDnOWuhfxdEtsDbGXb3VboqyTGndfjZB9iCWaKqJ84cH3howfHkVrKRQoDlJAsPHPT0EzatPkVm66KAFFllWbnxzy3bQqZHA6b45zzUHEVYFOlesLa+FhqWvUi/6JeTzompOCKA0uaktWBgyS23sxcSTSpREh0FAajkmdVP5LOy9HqUGRU2twsMhozZfrRZOgvyC7kRQhVYJjl+QdsRuprmaocscBogct/fgNREL6ZFj4eTHwkix3gHtG3OY/GQdyRPjno1NwDCA4FQBJhPeHVTdSQfqAtck/CSFS0RDCG6UcJTAkKEJbHqvnhycNDf8tVxYCl+y6aNRolgiAL61G1w9qwQNoMwg4NQ3aMoGfrj1UbqCLSqK3wp6KCuxDaHKZkZ3x11ZpzqNWwR72HUgLaTPkk5WXLoAj2GTIGzncHdNqu9zkwoAY2qQv1ibHRWmCwNz4eBrRLWFBZl2RPcXQC/UsyYczgAMHKzf+ZLn0dXBtL45sip5KA4WF3aBF3PQYIutu0OQPQf6TzynRlOkzM7b02pbyNH7UHe5tmsjjsFaCqbmE7Hs9azI1ocMqvHFzRPoC29AclT4M06A3uAjUPdBVprAv3q3aOamhLAD9eidvy4yWuiwi0AEce4oMl8nzfewB5i7Nl3pL2ltAsoDkEOZeHvJVVurPUFnRGjsQQz80MW8u8UkJubrwkopSx/ze0euNWR6qdpUb8OMtagVvbMy6CJWbWxxmgB0BCHaHEQvoGaDRbaWaCYhL6Bqwv8bi04rVh5cZ6wiS8MGZ41gBX0PGflDJUZlorQn0giQP90ezfUrsym0WBZYj/kK7ZiB/wwOw6UyIaxhrf1v5HT5jWqtKAZLSxJyvSZS4xtrLkjnK8bl7lu0jDUxy91PEI6GmOgJfhhT5hqZEDRP9jFFgF2r7pELqTC2oV7Q8Yw9yRyTEfs5TuSFbxYU34a4KuG9+7rGqQ8BxPuRBJ/yW/8iCQBTn+b9DXzgI2pXsDwxWLYSCN2N3e3P++k4qSXA/3nrAXHLVDrB5UTYEv99JF2o5gpVCOY9O7nBF9QMiNmdW/asJU3qDCsgsF8tibAtzc4102hHMl6L28hhg1NKrLkOCP2QisTFwAE7M5EvbZD3Fop2Cz5oyH8UlM8IkrC1Ste7RVThyZDvvRLELdcdXKzVyyiF2yCCgzM/s6AHuGdX2kbUZHTu0M02C+CGDfC+6TfDoxuXFQxwoRtwlZhozaoajiFKrug1jefdMuJtEsovs8cu+1Xnp7HAxASPsoODqx/gAvCqafjFACVqUUPw5Qd3CaPKnYonTkPdvIm3R6UxI0VcCAy1PNAjdeSgDWXvKsI/2YNA2gayFPcvIqpLvTDIFLRSTdNWrISD4H2llJuDrLJaA6bZSH0g8oXInY9eYFUdOabE1U6LEZ7FwAeJDfObgY8oOLlhWZ16qjnCT+ZAAIAkKJ4yjARKi1DpE3v4kMhJ+A2GxcKAnIylMw2YWbh0JjnVao/I0nrFTl/xHQ9CT59iPySlSkhAjPVUHTNZ95a3oKYEwf/Ad5nQ/lZswQ9hq/yMOLSYDwJ6lLTs1Fthelvm2K9MJJhXD5fz/wG8XHfU7agp5NFf+GH+/l7dYVctH0DrRxOdGd92SKXm5zdalaNgOTKPcPvjBQ82JZBhYDRFQKQ6aXvaIjohTIkck/50A2Kmydl6eyYg/f4w03sXlTDYcRlHlNXZc9SH+PHWA9Jd6A3awAkcdKv29EQsu6L9mPLx3gjL/csg+04h0y0gIheqU7ACsLxFzfIprIhFIrKkJBgNz9zLrNNJzyei22mC+CWSX+ISMNS0TanbfjVy7Ct3fk8jLaR3Uv8uEJDpowAxPkNAiAXvZFMK6klaZM4OlJkDBvKSwrztXXE0iioEoKc+NdulkiC6Ly1db0o4IcsZx8nroh9CDwWyJweJyICoEAaDDqq+HbhMk6DZo5GTAyyqDf5R8gqoL+taM4DtrzJ7aWonbshyzU9uEEjOJAvGeWeygnRp9EJaUFQbZkvOqsCojkIOkKfq0iOIjh4EAHwQ8JZYoq2ifFBtCx6mY0yXC2+xHIFfUtLgXbCwiW/N9Yqqhhw10bE0PWrPM2bCZ+jiFPAi+k2PMfGCbPBp6aKgY1bRdyiYxyWL20HW9dEmiiCA4ok5tBoD06bp/WaNLvym4nGj3YI7irhQi/PD5K5vdsJ5fx7ZW6jLfvZ5IQqPvZ1zmpwqZxYEXujeWs7lKD9YpB/k51BTatSXSGvYM30mg1Hnh6KtlGZ2+32m1U0Bcuu/NN+ocxqO4nqYe9oTvxPutCBy/bVmkWsthsV4Osg/PslapCIxRUl969g+Uq9g5A1iPaxwRTrBkY4nkaqTYwEBQqr3/VWD2MnhDzu5SbVXzIsmmEQcBNBhdyT4X4164ID1vIf5aK+1a7kxC3YMAFxDhlqor1GY3ql4/x8cRtFLqdltjWiMaxkFZAUeUt5kROgyMtCvvWZnLzl2iSh4AxSg+n/RCZJqgr0PlW+9JzuBfMnnJAdxvi9tuWhNODl9ZdFaYeIaVcMe4fM0RXpw8nVri2ma5sYaflykUE3juTh/XTes2jMUE7C6QQQqW7jA9+OSM6nHV3HcjE1JRr3Ndff2ndIUZrmGY2Vniqm4kDg4swttR6V1Ohb3CRXYs5IYcjZTfwvbdT4CWB9hdyWjJn98cphB8hjIUjplJseAlN8vVx6zJjzL6mWVGzdoD3DQoZtviqOudxuoMNg80uFE+72Lj1Cx7bFqs1tHjDAao/ntJWDxX5FcwehOF4Yvvhr+v45hAonlR+YHWtHS2QAhkhSdGq8f6Zl5LdeI68ur6bSKmrARLGAJFMtVPApOVIGxDMYmLVUVtGbtN9HijbI6X61WLCa5tOI780+u+tk9Y7BNxR9USSAFr9Zz24Y5tuyQJ5pYIcZ/GKkI+7kUpRnWDnwFLONQSQ5EiBQlt86KjXRPzM854SOGMSWs6lfPzigSq770sSFuEP77xhnSjR9UhBNjOzc1lfqJLUUj/2tuQQD/jkBTDAbMWwJJtrt7LUissrAtFjqreWt4YfC4W5ljh19/c26dDNctDZK4g/ExMhgLPuZO9C+kZf4jouoSadsBVKUMzWbZCz/BGLt855mbqjnQogzMQKFhoF1Vk/nGW3KZ/rY2hpBwqlItyIUI3gqrEXuQ97m+jjtInOE/5aBRid9sjZRpqBpKv9LIXSlCryOd2lBUsRRo73ojizI8trqu+e6k2Mfdio/5S8+/r5EVjiyegNLTG1aNEV7h2PGh1JVp0ayajsmcdfm5w0rnSFFPni03S6BBCjSgW8RyUHtUcdpTSce+a/i/uf1RPrcgmr/zIDap2ODIGVQGFqZ2wXDOMOlbGcCGHE/4Z5rwEdIUODaVdW+ekeX8REw26twdxWiREYTBOOS5ca+dFUWvcy3rcIhxGScbK5GzxBfJUNcIFCXxOKxvGp8X9UiNMNlLt1dL+NsuLzGSQiYRwWt8O8FLRQesQj3HnPRB/SjIhqjIWckpH6Aghr+Lb9vT0+Pv94HQ956G81vASP1vfzOqDNAFgWEB+eJeTvjqM/p7CNvlnzEQeXod8/qDm0dUC9sRZ2X2chvImsqgYHegJ+BrnDC82snJCFrkr6iy6E12nSlM0xZiqsjsLFquE4qtO/xTW+JnUo0QqRbFY4/cgxgnyd/FRGaTYta/2mJN1cgX8kx2t/v42Z2/qvhDG2uey32jxV/RHJV/GGr5ge/n7wzK2n13tvuciBE+tESpbhOw0/QWFI3kREhpPI8p1t1Die71A3M+yhsG7QFpbVc5TC9PAl+41pXG94oMObzAn5SRjmeciT1xZXJO6GdBHn9qglNYElgglx8rmafNTITDJPyNs9FwCG2aZ0SDsuCpMB8jeyGGHutBHJ8pKxPz6S3wzoq3kqWCrkXO6o/60fc2HNvbphc9Gb1UCGtL4tTTdIKOh3fdDFY7SqAocVebjyVtmwXRJKD3U7sRNwLbKkMZuzzraxtHxK8SfyE1ucgvK3PuPIZV7s91C4/1QPumhBkPqhKbvipG3wjVEssS7FyU4wS8+rmaf/9+9KbDraeSY7sONhTKfeCly8IOOZZH0CDDhYLQ1tHHLW9wXBFwmLt+gIXE0acrhDXevwWQPxdmpPSRbZL7SojIc4rnl1JjPxms5/5QuD9tpGEDpNb1vDEtnuDuQdBwVplFAPbn6Tq3L4/O+JfFkbsgUKly5lh27VNugD5l/qc2DafzPIG3L5S5lYyDE5aefCWcGWr5zQqyCN1KvGYcssL85bXO2a556xbX71yRvremEMQahY2eszi7K8YW/5gwd9g5Dd0OFL/KwHY3p+QRTjywiJQEf/dzjPJxxG0ufe914S9tVmxc5eE0XdAVnfKeTH1GU1wzdo7tb85Xj8C1IdYOxKcFmnckihH7cLZm5gc9SC9qlimTLiYulzUPcB+iZCHPTOsn3fOpctjRtbwmNI8JhzhkINHJyDJxxT0LVKbPNb3QKIL5Fw5aG540PzlJ9xs7yd/lRUeyWMAhO7ReNNltqxp6iqSqnDpFPzY2OVzglu19M0uWdR/r7IAn7JhnpkNIUrRHJZ29crAElrd+L86D3YCxU+TiOQqZ5ZecVKugwLT7ri5g0PX+Fl+FcabY9AWRDRn+XnEshgalwsdZhPavSex61JRxsiTQNUfbReUsSkgV+hgMifBvxln4pRcXLwCSrrVOR9WKz7XiRxmRoTgDby4AQOFNvFuGYSy6ImopyVMhmUEXbx/XyBdxRVfPlkbygiM1tXI87aL2XyCkhrD/j+vLCKs3phG62g+X0oKI0rN1n1eSV+TE0EiCLPyVQy/q2Y0Ie6U6It8rMpNLywmxwmxC/8gajZRI4/nRPgPOPFdfKbn/TnjhRycHwi99vwy9fsqQDcYSCH8KvkhG4hAK8Y4Qf74f+OZd0LEkfo4qI10iAz0CC139InCaZEhUsg8MCff1vSMX+JKyw0xrb4L8rTcU7QIVj2PXANAmoKgSC9/QYHJr+KKhKN1kJ9h5FStP/phAkbua9/gTsMQyUEITktvvrVPCZQajqd/chTATWxyvE6JcERxkftiVdSveveqNa8lwlZerjzIG3U0ZeOCdNO8B0dm/YxRUnBNNUICTc++LwqBpbMukZTYPd/Xkp/pS2sXbHFaJNJYQln65KN8lJ+8U8AzNka6ojSqdnK8xWKcvDUDo6IcHgL5NuL6GMEokT5foWT6OOZlPZkdDpm+PwdyelpfEjDjZb69kIlUnXSgwUN1fDmENwqpIZPrGuPa8hWQH4st/fK1vLc8fhqkm6ctM0wghpA73f44ORZFScRdjQ+MQCMcgen3UPNykcG4SLXVnghWZSKR2xeNUwUCM6zN1vZ6tV2SPCi/W4DhHB/yERsKsqgCKFKGen6jP4c0KiTuSEnfGJ/1zsQ4BDpC9ezMx6ah2DudR3lZzaJ1loVByczMLBzWEtkZnHYCtY9qWC22I9xhgaYG7RFWdVkpGFzrRea/Bw7ZxaPdHjZPb6+rVgU1Jf3liB6EESFf9Ld/H5qiIf95Qwf3BkFlgWQOLgf/OFdRCTAxQipDnLEcj793S8fbqxD1vL6dplRa+JSJGwGmWaq2VK84lsko6btgiyCPwyGtKE0tL+K52LA19SnORvp6yEadKVBy36hW7+I1jSFg2zZw97SsqxclJ7cqiCyiGvWF4FzZrsvjJJpYu89Gk9Ei9AYGk41jt4wEujye5fpKEmEhIYudiEvkVS6eBz645BEuwV36B7rGgAtmly/5EJHjM9ITWcJFo3g2PR3Pe4XxGl/xRFKUji4w3G2ovPNfWxkZjIoOlAL6RlVbEV74W9J7DfSD7NUY+0zjRSvhMEtshSl9xzcwZsQcWVq66ilIG9aaPvYxLYYc/Uu6JYmhST0S0/thBKOv4NMK5G06OV1+iap7IQySkkWcSfzy169bq5XM2sXUB+ewPn7vSJrG7BOUsZd4+2/5zvDAKh54OI80RvKKKQlIpa9XkoSctxODBevtPR1I2h0cw3Re3N7LBypSTmbqMMQmoMW/7e2l24SQJvSxaYIGR1XVfKmQ8j+YtDcWrKYJYgC3aamzK0AspD4JKyK0fVVUHmTgCU1tt5/fpxohvZ1sVXc9hn/QPy0n9Y9VxCQ9gKRmZ003psAT6lGfUVfh6PaMHDTWwogFK5QsGIA0uTcbdnFL047Sf74XAdMukBA6h07PxOXTWbg1OFRPP6AigbFwYndX7PaSYjHVcVHeqAjlyFcGmfrPeBmMeVQsTQmsDCxK/0WiABnPiPd+sFM1G0+S4DWxud6I6lZpDfm1vU1+UN+BTxRhf7mPnV01ySEovXW/xKa8aNCORt9MUFtFSE35pKAlrQQNmviVQvfzsjB4wVdckjA5HxDsswyzsmjY6cRjg659NmCsOWpEj/5YQU9EvpIiF/KnskgO3GGiZN9DFmZetwpVUlTM9vu6aEMsndQ9Z8AUf5tUEj+fgq49ckJi0spBwFUEH3v/DCQnamBDSg56+Z+L5OZkBXBnRVY4szi4fmeGo33ga9Cy9o7EmYfwFzfArAkg1D6ftq0s7hP9Huzmybm6uCcm3sR5uzoMm2o/5wXDZ4KRz+mTfH7Oy8uK1sLGhBENmjp+jw2ejrW8/1QJX+NTOaIZ4NeoUoy9kMns/n+XPvcj9HST0sN7gesEO6F1A+QmnWzFJv3BY7bK08BEfdm+uM8Fq5kr+AsBawYmPL2pq87xe1jUv4YQSA3acaXM/Qpd+ddBoSyT6W5R7rlTwTLCzSw7YNa9s2MVE9QgMPnYu0KQcE8ZJWsFR1hYgbqKSHkQpvYyhKk/tpF5V2kxf8ZBO5x3+icB6o7LFOsNGCzzOjJrEMIR21EZk2Ymp2z3kVznQ/W+3zmINv2KCQlypwp0IenLdNFq8sVzgYdlpTP9sCMh9JipfFdQ1vnZNUmzeRQJpXdp/xgpq/rgz1c+Sh4yMhNx2ARIryGs/vH+fRHPZbx72N9lEk6Z2vSeBC1Ercl3Q2HC0nrTSYZl8UoIuHCdVNo7KNZsAdiwWyHBIH7nZSP6sKAVaG3+zyYWaDIzJeGE89PHyZCLAgogVbImcJi36gO3hBRuEwiRUt61XqnYFZt4LRdY+V/Jxz/KXGxh+RqlXD2wiGHNhDY90dBkWZFp5cbpGH1uaalB5i/rU3wDwmlUG4LJIS8mZK3vXvhvAs+o/Hzu7v5g0ZOG9buLUoNx0QegbaOPo4+TuD2plZqQawtLwOC5SmV5SOULMRTMMLW5xkVOzohAf5fPQNWT1dzTXsSLDvr4ELHsrKRnilf0+DyqxfoafO1VXfn7C8f706eCs7LmM9AP3WWXJUGAEhaMAJyit51AWJ+BXlc+t1mwlEnsOUcYu2yM0W0w7DHt7Xi6jbyREtpLbUE/thYG1dkum+G2+YoQULM4aMBYUwk8w2D9UHAvpEhssghxv5/+faSVGt3k+ONl7v1YRqxbRTmdNfdbSFxOp07VZdaE6+yiMibv7qAiRefHRDvRtxzx/4Fn0xUC867BjfnVXnkqvKAt6ZSe3wGOzzFkFeEoU3IgvvooxiW4uit1CCNuKo3My9Z+GM5ykj5g8DoCb8YevIhQ93YvLzRF5axGbMZo3Gtjp4yavIWvl1rTGTVqtKs+90WaTqlZdZPEYw7DUkQKVFeM6HAHC8UYQ0S69a62iYB87lDj2smyveh4KJcXpo8DY1U8Yb1IwtzOD0oCfAVHAvjsW/F0v+RePZcZlpl0w4XO1KfCP8PBsdYyb1z2rfUoyueqNdGdrTIt/k9ThyYLTQUIhPQWCwPGe2qxb2nTz5PZ+t0FRZxADu1qAvk64GIEhM5GwkhyAo7UKqMank1Khi1y29yXk0hVZGQabflHeI0WG03CZaQh7KrDboXl7KXHMMKWjU+F3qvdSE/1jkGARRTPMxfjR0bq1qnVMGgX4paQ8df2fKJaMD8IxPmoCkcOVReyxKvYgL/JcgiOO9neuN9XpBA8tK1ZtMP9SHVjIUpQNXb/BzfLmjYXUZrqvh2hOyAToLCzZ1jG5kOzrn2dfi5fIsE2PJxt0KORCMMbbS43iWMeHEELhUtI+DxWLd2K/w7Bk3nktyplFAUcvP2q28zSMOgdpDQ4TY2c04eJ576XDed7ZrAZu3u3wjm4Jhu3qGncRHZeqN8kbxgA08tMZ0vQGY03Pfz3tr+w0TJMMBV6eGmrqPjDQLcdjMyuJ4X7rmUfRaH6Uf5QlSudYWp3qiO2Jv+rxwj9j968SwGFZGg1/X9Na2ssZ8R6ovQi+LBzTSldQCi27WVhR11fWlEMXJ/46OKOkz/LHPuTvOihiqNNGPpOBmPKNFPFIxtQiuQlxpAVvLB9+edKGiaXphgiH9RMA01+f8EKiZrbOmdzBFkTF1XtzZ2xhNbf7lUQKaNL/SzLxELfsXr4ly7U2FqX8v8mhJR8+AgNbgEsTzWkRs51yc0TodmGmCRucMNOAnxNPyPH57hkSB2Gn+cAXs00za4lORg6iUeR88kxuN+5/5hzwt6D/Hdyqt0Mxma728McX+kpa67Q/MSwNc/1gwoi6Pl58RbYIevvNDNfdZ2a0TmlEAeMb0uyIppG/w1zBdl3f99NrvP11tf5MnZuYdBtHH4DP6KpQMNK+0bw4MTjHDt+uGdUI42dSG96Z9NTmNy2d9L1B7VRPavkWKzr5laNcfrQA9RHZqWLXD88t2WpdWtk9i4OuTDY7GClXSU4vUICysokra8ybC8CjYAipBNl1+f/5TglKVjSyrCC+UX/V4oAAHKAkK8j/bzV2lQhRdUxxs5ZVhIzUMMsQdvh9XS205WsheUDZLz5NwPX8srL3CvuVRoaT+6mtn6mZSoZsF9hEoRJXhXdcFeeFialfoljmvxbKqD0X0XfpUeih/xrSsj7KOin2XsNeIPFiffPMLpadf67CKq7unfYVasWp4hW4vEaA0aYAxZtUo81mK0hh2FSzzqD6Fb6ZhrG4Nt3pGN+V7c/YrxpoTIlpV4FFHQWSd7GqGoWHnppsyVl8XnPwnexCSw2L5cERiAuFBk4jKPvKGfnWndHZ7/+rjQZTbCUi10eQq2YHrrUWPdEhXFOEtkU4Irr4agEVPnL7lWhU58iSGbX348D/eGmKAof6+Gtj7vJcLYhvyLhMdr6q8CNcp9tRPqm+vOJeIwi/ozvb8tw0Yd9PO3z+tij1NKsIbSsFmBY50kfaJxhgfnZPAtXszc79YhS1djrqWSxuEPCVv1fBQTjHDzZbZp6vnbjk7C9w8V9yN8jcKQsmeG4EVczPTM4Oi5UOmWe4uqaK93sCfo8Y38M7NtMzQrR/qz+rU+qlF1G3VR3LY1v9j1DlE9tAtsJfvWN0bzwkVmRSwARpkEx2qKA6ox0aFjLY+Q8SoH3mWU9gSfceIkPBRHqPtcmAPVIwP7afZOCzL/fV5huS9r178SdKjl+AVzrAtBIAfJ95x1ptcCGv87B511qhYFK9QqVzHiNLziit8f/5WoNiNY5PYLkN5AqzAxcoR0/gFPpFxicqq12WikKRBGk0wX4AkVXCjPPD5MhYCRK/XI3wlDBcC3vAUjs1zGZ1AGrYeFne3eg+Lnxrw+j5wlETS0E53glwxI1+RkdGHESCVVqC9Fd573pwYeb0VFJPJuqisaNCceH5IZIRPNAjbL70XMoHdT88hVnZ7XmAeqQPBHb7uLNOecfpwrxeRIOg2YsVgghAIRR0p2JcMCigiSsmBLO7Mt";
const passwordHash = "$2b$12$tlbQ3guAXwvLrIeaMXvwk.ttcQYSfQdTG8SnJ00WlyEb2kQc4NG8G";
const i18nUnlocking = "解锁中...";
const i18nIncorrect = "密码错误，请重试";
const i18nDecryptError = "解密失败，请检查密码是否正确";
const i18nUnlock = "解锁";
const i18nCopyFailed = "复制失败:";
const i18nPasswordRequired = "请输入密码";
const i18nDecryptionError = "解密过程中发生错误:";
const i18nPasswordDecryptRetry = "解密失败，请重试";

  // 导入加密库 - 使用本地文件
  async function loadCryptoLibraries() {
    if (typeof CryptoJS === 'undefined') {
      await new Promise((resolve, reject) => {
        const script = document.createElement('script');
        script.src = '/assets/js/crypto-js.min.js';
        script.onload = resolve;
        script.onerror = reject;
        document.head.appendChild(script);
      });
    }
    
    if (typeof bcrypt === 'undefined') {
      await new Promise((resolve, reject) => {
        const script = document.createElement('script');
        script.src = '/assets/js/bcrypt.min.js';
        script.onload = resolve;
        script.onerror = reject;
        document.head.appendChild(script);
      });
    }
  }

  // 加载语法高亮库
  async function loadSyntaxHighlighter() {
    if (typeof hljs === 'undefined') {
      await new Promise((resolve, reject) => {
        const script = document.createElement('script');
        script.src = '/assets/js/highlight.min.js';
        script.onload = resolve;
        script.onerror = reject;
        document.head.appendChild(script);
      });
      await new Promise(resolve => setTimeout(resolve, 100));
    }
  }

  // 为代码块添加样式和功能的函数 - 使用highlight.js进行语法高亮，但使用全局expressive-code样式
  async function enhanceCodeBlocks(container) {
    // 加载语法高亮库
    await loadSyntaxHighlighter();
    
    const codeBlocks = container.querySelectorAll('pre code');
    
    codeBlocks.forEach(codeElement => {
      const preElement = codeElement.parentElement;
      if (!preElement) return;
      
      // 获取语言信息
      const className = codeElement.className || '';
      const langMatch = className.match(/language-(\w+)/);
      const language = langMatch ? langMatch[1] : 'text';
      
      // 获取原始代码文本
      const codeText = codeElement.textContent || '';
      
      // 使用 highlight.js 进行语法高亮
      let highlightedCode = codeText;
      if (typeof hljs !== 'undefined') {
        try {
          if (language && language !== 'text') {
            const result = hljs.highlight(codeText, { language: language });
            highlightedCode = result.value;
          } else {
            const result = hljs.highlightAuto(codeText);
            highlightedCode = result.value;
          }
        } catch (e) {
          console.warn('Syntax highlight failed:', e);
          highlightedCode = codeText;
        }
      }
      
      // 创建expressive-code样式的包装结构
      const wrapper = document.createElement('div');
      wrapper.className = 'expressive-code';
      
      const frame = document.createElement('div');
      frame.className = 'frame';
      
      // 创建新的pre元素
      const newPre = document.createElement('pre');
      newPre.className = 'astro-code';
      newPre.setAttribute('data-language', language);
      newPre.setAttribute('tabindex', '0');
      
      // 创建新的code元素
      const newCode = document.createElement('code');
      newCode.className = `language-${language}`;
      
      // 将高亮后的代码按行分割并添加.line类（模拟expressive-code的行结构）
      const lines = highlightedCode.split('\n');
      lines.forEach((line, index) => {
        const lineSpan = document.createElement('span');
        lineSpan.className = 'line';
        lineSpan.innerHTML = line || ' '; // 空行也要保留
        newCode.appendChild(lineSpan);
        
        // 除了最后一行，都添加换行符
        if (index < lines.length - 1) {
          newCode.appendChild(document.createTextNode('\n'));
        }
      });
      
      newPre.appendChild(newCode);
      
      // 将 pre 从原位置移除并重新包装
      const parent = preElement.parentNode;
      parent.insertBefore(wrapper, preElement);
      parent.removeChild(preElement);
      
      frame.appendChild(newPre);
      
      // 添加复制按钮
      const copyBtn = document.createElement('button');
      copyBtn.className = 'copy-btn';
      copyBtn.setAttribute('aria-label', 'Copy code');
      copyBtn.setAttribute('type', 'button');
      
      const copyBtnIcon = document.createElement('div');
      copyBtnIcon.className = 'copy-btn-icon';
      
      // 复制图标SVG
      const copyIcon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
      copyIcon.setAttribute('viewBox', '0 -960 960 960');
      copyIcon.setAttribute('class', 'copy-btn-icon copy-icon');
      const copyPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      copyPath.setAttribute('d', 'M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-557.26h83v557.26h461.26v83H213.37Z');
      copyIcon.appendChild(copyPath);
      
      // 成功图标SVG
      const successIcon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
      successIcon.setAttribute('viewBox', '0 -960 960 960');
      successIcon.setAttribute('class', 'copy-btn-icon success-icon');
      const successPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      successPath.setAttribute('d', 'm389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z');
      successIcon.appendChild(successPath);
      
      copyBtnIcon.appendChild(copyIcon);
      copyBtnIcon.appendChild(successIcon);
      copyBtn.appendChild(copyBtnIcon);
      
      // 复制功能 - 使用与全局一致的逻辑
      copyBtn.addEventListener('click', async () => {
        try {
          // 获取所有.line元素的文本内容（不包括行号）
          const lineElements = newCode.querySelectorAll('.line');
          const code = Array.from(lineElements)
            .map(el => el.textContent)
            .join('\n');
          
          await navigator.clipboard.writeText(code);
          copyBtn.classList.add('success');
          
          const timeoutId = copyBtn.getAttribute('data-timeout-id');
          if (timeoutId) {
            clearTimeout(parseInt(timeoutId));
          }
          
          const newTimeoutId = setTimeout(() => {
            copyBtn.classList.remove('success');
          }, 1000);
          
          copyBtn.setAttribute('data-timeout-id', newTimeoutId.toString());
        } catch (err) {
          console.error(i18nCopyFailed, err);
        }
      });
      
      frame.appendChild(copyBtn);
      wrapper.appendChild(frame);
    });
  }

  // 为标题添加id和锚点链接的函数
  function addHeadingAnchors(container) {
    const headings = container.querySelectorAll('h1, h2, h3, h4, h5, h6');
    const usedIds = new Set();
    
    headings.forEach(heading => {
      // 生成slug id（模拟rehype-slug功能）
      let slug = heading.textContent
        .toLowerCase()
        .trim()
        .replace(/[^\w\s-]/g, '') // 移除特殊字符
        .replace(/[\s_-]+/g, '-') // 替换空格和下划线为连字符
        .replace(/^-+|-+$/g, ''); // 移除开头和结尾的连字符
      
      // 确保id唯一
      let uniqueSlug = slug;
      let counter = 1;
      while (usedIds.has(uniqueSlug)) {
        uniqueSlug = `${slug}-${counter}`;
        counter++;
      }
      usedIds.add(uniqueSlug);
      
      // 设置id
      heading.id = uniqueSlug;
      
      // 添加锚点链接（模拟rehype-autolink-headings功能）
      const anchor = document.createElement('span');
      anchor.className = 'anchor-icon';
      anchor.setAttribute('data-pagefind-ignore', 'true');
      anchor.textContent = '#';
      
      const anchorWrapper = document.createElement('a');
      anchorWrapper.className = 'anchor';
      anchorWrapper.href = `#${uniqueSlug}`;
      anchorWrapper.appendChild(anchor);
      
      // 将锚点添加到标题末尾
      heading.appendChild(anchorWrapper);
    });
  }

  async function renderMarkdownContent(markdownText) {
    // 加载marked库用于markdown渲染 - 使用本地文件
    if (typeof marked === 'undefined') {
      await new Promise((resolve, reject) => {
        const script = document.createElement('script');
        script.src = '/assets/js/marked.min.js';
        script.onload = resolve;
        script.onerror = reject;
        document.head.appendChild(script);
      });
    }
    
    // 配置marked的基本选项
    marked.setOptions({
      breaks: true,
      gfm: true
    });
    
    const contentDiv = document.getElementById('decrypted-content');
    const htmlContent = marked.parse(markdownText);
    
    // 创建与正常文章完全相同的结构
    const markdownWrapper = document.createElement('div');
    markdownWrapper.className = 'prose dark:prose-invert prose-base !max-w-none custom-md mb-6 markdown-content onload-animation';
    markdownWrapper.setAttribute('data-pagefind-body', '');
    markdownWrapper.innerHTML = htmlContent;
    
    // 为标题添加id和锚点链接（模拟rehype-slug和rehype-autolink-headings插件功能）
    addHeadingAnchors(markdownWrapper);
    
    // 为代码块添加样式和功能（异步，使用与全局一致的样式）
    await enhanceCodeBlocks(markdownWrapper);
    
    // 清空容器并添加新内容
    contentDiv.innerHTML = '';
    contentDiv.appendChild(markdownWrapper);
    
    // 重置contentDiv的样式，让它作为普通容器
    contentDiv.className = '';
    contentDiv.style.cssText = '';
    
    // 触发TOC更新
    const tocElement = document.querySelector('table-of-contents');
    if (tocElement && typeof tocElement.regenerateTOC === 'function') {
      // 等待DOM更新后重新生成TOC
      setTimeout(() => {
        tocElement.regenerateTOC();
        tocElement.init();
      }, 100);
    }
    
    // 触发移动端TOC更新
    if (typeof window.mobileTOCInit === 'function') {
      setTimeout(() => {
        window.mobileTOCInit();
      }, 150);
    }
    
    // 触发动画结束事件，让TOC知道动画完成
    const animationEndEvent = new Event('animationend');
    markdownWrapper.dispatchEvent(animationEndEvent);
  }

  async function initPasswordProtection() {
    await loadCryptoLibraries();
    
    const passwordInput = document.getElementById('password-input');
    const unlockBtn = document.getElementById('unlock-btn');
    const errorMessage = document.getElementById('error-message');
    const protectionDiv = document.getElementById('password-protection');
    const contentDiv = document.getElementById('decrypted-content');

    async function attemptUnlock() {
      const inputPassword = passwordInput.value.trim();
      
      if (!inputPassword) {
        showError(i18nPasswordRequired);
        return;
      }

      unlockBtn.disabled = true;
      unlockBtn.textContent = i18nUnlocking;
      errorMessage.style.display = 'none';

      try {
        // 验证密码
        const isPasswordCorrect = bcrypt.compareSync(inputPassword, passwordHash);
        
        if (!isPasswordCorrect) {
          showError(i18nIncorrect);
          return;
        }

        // 使用密码哈希的前32个字符作为解密密钥（与服务端加密逻辑一致）
        const encryptionKey = passwordHash.substring(0, 32);
        
        // 解密内容
        const decryptedBytes = CryptoJS.AES.decrypt(encryptedContent, encryptionKey);
        const decryptedContent = decryptedBytes.toString(CryptoJS.enc.Utf8);
        
        if (!decryptedContent) {
          showError(i18nDecryptError);
          return;
        }

        // 渲染markdown内容
        await renderMarkdownContent(decryptedContent);
        protectionDiv.style.display = 'none';
        contentDiv.style.display = 'block';
        
        // 保存解锁状态到sessionStorage（可选）
        sessionStorage.setItem('page-unlocked-' + window.location.pathname, 'true');
        
      } catch (error) {
        console.error(i18n(I18nKey.decryptionError), error);
        showError(i18n(I18nKey.passwordDecryptRetry));
      } finally {
        unlockBtn.disabled = false;
        unlockBtn.textContent = i18nUnlock;
      }
    }

    function showError(message) {
      errorMessage.textContent = message;
      errorMessage.style.display = 'block';
      passwordInput.focus();
    }

    // 事件监听
    unlockBtn.addEventListener('click', attemptUnlock);
    passwordInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        attemptUnlock();
      }
    });

    // 检查是否已经解锁过（可选功能）
    if (sessionStorage.getItem('page-unlocked-' + window.location.pathname) === 'true') {
      passwordInput.value = 'auto-unlock';
      // 这里可以添加自动解锁逻辑，但需要存储密码，不太安全
    }

    // 聚焦到密码输入框
    passwordInput.focus();
  }

  // 页面加载完成后初始化
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initPasswordProtection);
  } else {
    initPasswordProtection();
  }
})();</script> </div> </div>    <div id="last-modified" data-last-modified="2025-11-14T00:00:00" data-prefix="距离上次编辑: " data-year="年" data-month="月" data-day="天" data-hour="小时" data-minute="分" data-second="秒" style="display: none;"></div> <div class="card-base p-6 mb-4"> <script>
                    function runtime() {
                        const lastModifiedElement = document.getElementById('last-modified');
                        const startDate = new Date(lastModifiedElement.dataset.lastModified);
                        const currentDate = new Date();
                        const diff = currentDate - startDate;

                        const seconds = Math.floor(diff / 1000);
                        const days = Math.floor(seconds / 86400);
                        const hours = Math.floor((seconds % 86400) / 3600);
                        const minutes = Math.floor((seconds % 3600) / 60);
                        const secs = seconds % 60;

                        const years = Math.floor(days / 365);
                        const months = Math.floor((days % 365) / 30);
                        const remainingDays = days % 30;

                        const prefix = lastModifiedElement.dataset.prefix;
                        const yearKey = lastModifiedElement.dataset.year;
                        const monthKey = lastModifiedElement.dataset.month;
                        const dayKey = lastModifiedElement.dataset.day;
                        const hourKey = lastModifiedElement.dataset.hour;
                        const minuteKey = lastModifiedElement.dataset.minute;
                        const secondKey = lastModifiedElement.dataset.second;

                        let runtimeString = prefix + ' ';
                        
                        if (years > 0) {
                            runtimeString += `${years} ${yearKey} `;
                        }
                        if (months > 0) {
                            runtimeString += `${months} ${monthKey} `;
                        }
                        if (remainingDays > 0) {
                            runtimeString += `${remainingDays} ${dayKey} `;
                        }
                        runtimeString += `${hours} ${hourKey} `;
                        if (minutes < 10) {
                            runtimeString += `0${minutes} ${minuteKey} `;
                        } else {
                            runtimeString += `${minutes} ${minuteKey} `;
                        }
                        if (secs < 10) {
                            runtimeString += `0${secs} ${secondKey}`;
                        } else {
                            runtimeString += `${secs} ${secondKey}`;
                        }

                        document.getElementById("modifiedtime").innerHTML = runtimeString;
                    }
                    setInterval(runtime, 1000);
                </script> <div class="flex items-center gap-3"> <div class="flex items-center justify-center h-12 w-12 rounded-lg bg-[var(--enter-btn-bg)]"> <svg width="1em" height="1em" class="text-3xl text-[var(--primary)]" data-icon="material-symbols:history-rounded">   <symbol id="ai:material-symbols:history-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M12 21q-3.15 0-5.575-1.912T3.275 14.2q-.1-.375.15-.687t.675-.363q.4-.05.725.15t.45.6q.6 2.25 2.475 3.675T12 19q2.925 0 4.963-2.037T19 12t-2.037-4.962T12 5q-1.725 0-3.225.8T6.25 8H8q.425 0 .713.288T9 9t-.288.713T8 10H4q-.425 0-.712-.288T3 9V5q0-.425.288-.712T4 4t.713.288T5 5v1.35q1.275-1.6 3.113-2.475T12 3q1.875 0 3.513.713t2.85 1.924t1.925 2.85T21 12t-.712 3.513t-1.925 2.85t-2.85 1.925T12 21m1-9.4l2.5 2.5q.275.275.275.7t-.275.7t-.7.275t-.7-.275l-2.8-2.8q-.15-.15-.225-.337T11 11.975V8q0-.425.288-.712T12 7t.713.288T13 8z"/></symbol><use href="#ai:material-symbols:history-rounded"></use>  </svg> </div> <div class="flex flex-col gap-1"> <div id="modifiedtime" class="text-[1.0rem] leading-tight text-black/75 dark:text-white/75"></div> <p class="text-[0.8rem] leading-tight text-black/75 dark:text-white/75"> 部分信息可能已经过时 </p> </div> </div> </div> <div class="flex flex-col md:flex-row justify-between mb-4 gap-4 overflow-hidden w-full"> <a href="/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题15/" class="w-full font-bold overflow-hidden active:scale-95"> <div class="btn-card rounded-2xl w-full h-[3.75rem] max-w-full px-4 flex items-center !justify-start gap-4"> <svg width="1em" height="1em" class="text-[2rem] text-[var(--primary)]" data-icon="material-symbols:chevron-left-rounded">   <symbol id="ai:material-symbols:chevron-left-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="m10.8 12l3.9 3.9q.275.275.275.7t-.275.7t-.7.275t-.7-.275l-4.6-4.6q-.15-.15-.212-.325T8.425 12t.063-.375t.212-.325l4.6-4.6q.275-.275.7-.275t.7.275t.275.7t-.275.7z"/></symbol><use href="#ai:material-symbols:chevron-left-rounded"></use>  </svg> <div class="overflow-hidden transition overflow-ellipsis whitespace-nowrap max-w-[calc(100%_-_3rem)] text-black/75 dark:text-white/75"> 后端高级工程师面试专题15 </div> </div> </a> <a href="/posts/面试题/后端高级工程师面试专题/后端高级工程师面试专题13/" class="w-full font-bold overflow-hidden active:scale-95"> <div class="btn-card rounded-2xl w-full h-[3.75rem] max-w-full px-4 flex items-center !justify-end gap-4"> <div class="overflow-hidden transition overflow-ellipsis whitespace-nowrap max-w-[calc(100%_-_3rem)] text-black/75 dark:text-white/75"> 后端高级工程师面试专题13 </div> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[2rem] text-[var(--primary)]" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg> </div> </a> </div>  <div class="footer col-span-2 onload-animation hidden lg:block" data-astro-cid-haiuh7kc> <!--<div class="border-t border-[var(&#45;&#45;primary)] mx-16 border-dashed py-8 max-w-[var(&#45;&#45;page-width)] flex flex-col items-center justify-center px-6">--><div class="transition border-t border-black/10 dark:border-white/15 my-10 border-dashed mx-32"></div> <!--<div class="transition bg-[oklch(92%_0.01_var(&#45;&#45;hue))] dark:bg-black rounded-2xl py-8 mt-4 mb-8 flex flex-col items-center justify-center px-6">--> <div class="transition border-dashed border-[oklch(85%_0.01_var(--hue))] dark:border-white/15 rounded-2xl mb-12 flex flex-col items-center justify-center px-6"> <div class="transition text-50 text-sm text-center"> 
&copy; <span id="copyright-year">2025</span> 黄雷. All Rights Reserved.
<!--<a class="transition link text-[var(--primary)] font-medium" href={url('rss/')} onclick={`event.preventDefault(); navigateToPage('${url('rss/')}')`}>RSS</a> /
		<a class="transition link text-[var(--primary)] font-medium" href={url('atom/')} onclick={`event.preventDefault(); navigateToPage('${url('atom/')}')`}>Atom</a> /
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href={url('sitemap-index.xml')}>Sitemap</a><br>--> <a class="transition link text-[var(--primary)] font-medium" href="https://beian.miit.gov.cn">鄂ICP备2024076193号</a><br>
Powered by
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://astro.build">Astro</a> &
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/matsuzaka-yuki/mizuki">Mizuki</a>&nbsp; Version <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/matsuzaka-yuki/mizuki">7.5</a><br> </div> </div> </div> </div> </main> <div class="footer col-span-2 onload-animation block lg:hidden" data-astro-cid-haiuh7kc> <!--<div class="border-t border-[var(&#45;&#45;primary)] mx-16 border-dashed py-8 max-w-[var(&#45;&#45;page-width)] flex flex-col items-center justify-center px-6">--><div class="transition border-t border-black/10 dark:border-white/15 my-10 border-dashed mx-32"></div> <!--<div class="transition bg-[oklch(92%_0.01_var(&#45;&#45;hue))] dark:bg-black rounded-2xl py-8 mt-4 mb-8 flex flex-col items-center justify-center px-6">--> <div class="transition border-dashed border-[oklch(85%_0.01_var(--hue))] dark:border-white/15 rounded-2xl mb-12 flex flex-col items-center justify-center px-6"> <div class="transition text-50 text-sm text-center"> 
&copy; <span id="copyright-year">2025</span> 黄雷. All Rights Reserved.
<!--<a class="transition link text-[var(--primary)] font-medium" href={url('rss/')} onclick={`event.preventDefault(); navigateToPage('${url('rss/')}')`}>RSS</a> /
		<a class="transition link text-[var(--primary)] font-medium" href={url('atom/')} onclick={`event.preventDefault(); navigateToPage('${url('atom/')}')`}>Atom</a> /
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href={url('sitemap-index.xml')}>Sitemap</a><br>--> <a class="transition link text-[var(--primary)] font-medium" href="https://beian.miit.gov.cn">鄂ICP备2024076193号</a><br>
Powered by
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://astro.build">Astro</a> &
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/matsuzaka-yuki/mizuki">Mizuki</a>&nbsp; Version <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/matsuzaka-yuki/mizuki">7.5</a><br> </div> </div> </div> </div> <!-- There can't be a filter on parent element, or it will break `fixed` --><div class="back-to-top-wrapper block" data-astro-cid-eymb5ayk> <div id="back-to-top-btn" class="back-to-top-btn hide flex items-center rounded-2xl overflow-hidden transition" onclick="backToTop()" data-astro-cid-eymb5ayk> <button aria-label="Back to Top" class="btn-card h-[3.75rem] w-[3.75rem]" data-astro-cid-eymb5ayk> <svg width="1em" height="1em" class="mx-auto" data-astro-cid-eymb5ayk="true" data-icon="material-symbols:keyboard-arrow-up-rounded">   <symbol id="ai:material-symbols:keyboard-arrow-up-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="m12 10.8l-3.9 3.9q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7l4.6-4.6q.3-.3.7-.3t.7.3l4.6 4.6q.275.275.275.7t-.275.7t-.7.275t-.7-.275z"/></symbol><use href="#ai:material-symbols:keyboard-arrow-up-rounded"></use>  </svg> </button> </div> </div>  <script>
    function backToTop() {
        // 直接使用原生滚动，避免OverlayScrollbars冲突
        window.scroll({top: 0, behavior: 'smooth'});
    }
</script> </div> </div>  <div class="absolute w-full z-0 hidden 2xl:block" data-astro-cid-haiuh7kc> <div class="relative max-w-[var(--page-width)] mx-auto" data-astro-cid-haiuh7kc> <!-- TOC component --> <div id="toc-wrapper" class="hidden lg:block transition absolute top-0 w-[var(--toc-width)] items-center -right-[var(--toc-width)] toc-hide" data-astro-cid-haiuh7kc> <div id="toc-inner-wrapper" class="fixed top-14 w-[var(--toc-width)] h-[calc(100vh_-_20rem)] overflow-y-scroll overflow-x-hidden hide-scrollbar" data-astro-cid-haiuh7kc> <div id="toc" class="w-full h-full transition-swup-fade " data-astro-cid-haiuh7kc> <table-of-contents id="toc" data-astro-cid-7ckeuxew="true" class="group"> <!-- TOC内容将由JavaScript动态生成 --> </table-of-contents> <script type="module" src="/_astro/TOC.astro_astro_type_script_index_0_lang.h7KfX3Q5.js"></script>  </div> </div> </div> <!-- #toc needs to exist for Swup to work normally -->  </div> </div>  <!-- Music Player - 仅在启用时加载 --> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><astro-island uid="ZKMxOm" component-url="/_astro/MusicPlayer.DN22-lMn.js" component-export="default" renderer-url="/_astro/client.svelte.-v9OL0KP.js" props="{&quot;data-astro-cid-sckkx6r4&quot;:[0,true]}" ssr client="load" opts="{&quot;name&quot;:&quot;MusicPlayer&quot;,&quot;value&quot;:true}" await-children><!--[--><!--[--><!--[!--><!--]--> <div class="music-player fixed bottom-4 right-4 z-50 transition-all duration-300 ease-in-out hidden-mode"><div class="orb-player w-12 h-12 bg-[var(--primary)] rounded-full shadow-lg cursor-pointer transition-all duration-500 ease-in-out flex items-center justify-center hover:scale-110 active:scale-95" role="button" tabindex="0" aria-label="显示音乐播放器"><!--[!--><!--[!--><!--[!--><!--]--><!--]--><!--]--></div> <div class="mini-player card-base bg-[var(--float-panel-bg)] shadow-xl rounded-2xl p-3 transition-all duration-500 ease-in-out opacity-0 scale-95 pointer-events-none"><div class="flex items-center gap-3"><div class="cover-container relative w-12 h-12 rounded-full overflow-hidden cursor-pointer" role="button" tabindex="0" aria-label="播放"><img src="/favicon/favicon.ico" alt="封面" class="w-full h-full object-cover transition-transform duration-300"/> <div class="absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity"><!--[!--><!--[!--><!--[!--><!--]--><!--]--><!--]--></div></div> <div class="flex-1 min-w-0 cursor-pointer" role="button" tabindex="0" aria-label="展开音乐播放器"><div class="text-sm font-medium text-90 truncate">Sample Song</div> <div class="text-xs text-50 truncate">Sample Artist</div></div> <div class="flex items-center gap-1"><button class="btn-plain w-8 h-8 rounded-lg flex items-center justify-center" title="隐藏播放器"><!--[!--><!--]--><!----></button> <button class="btn-plain w-8 h-8 rounded-lg flex items-center justify-center"><!--[!--><!--]--><!----></button></div></div></div> <div class="expanded-player card-base bg-[var(--float-panel-bg)] shadow-xl rounded-2xl p-4 transition-all duration-500 ease-in-out opacity-0 scale-95 pointer-events-none"><div class="flex items-center gap-4 mb-4"><div class="cover-container relative w-16 h-16 rounded-full overflow-hidden flex-shrink-0"><img src="/favicon/favicon.ico" alt="封面" class="w-full h-full object-cover transition-transform duration-300"/></div> <div class="flex-1 min-w-0"><div class="song-title text-lg font-bold text-90 truncate mb-1">Sample Song</div> <div class="song-artist text-sm text-50 truncate">Sample Artist</div> <div class="text-xs text-30 mt-1">0:00 / 0:00</div></div> <div class="flex items-center gap-1"><button class="btn-plain w-8 h-8 rounded-lg flex items-center justify-center" title="隐藏播放器"><!--[!--><!--]--><!----></button> <button class="btn-plain w-8 h-8 rounded-lg flex items-center justify-center"><!--[!--><!--]--><!----></button></div></div> <div class="progress-section mb-4"><div class="progress-bar flex-1 h-2 bg-[var(--btn-regular-bg)] rounded-full cursor-pointer" role="slider" tabindex="0" aria-label="播放进度" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="h-full bg-[var(--primary)] rounded-full transition-all duration-100" style="width: 0%"></div></div></div> <div class="controls flex items-center justify-center gap-2 mb-4"><button class="w-10 h-10 rounded-lg btn-plain" disabled><!--[!--><!--]--><!----></button> <button class="btn-plain w-10 h-10 rounded-lg" disabled><!--[!--><!--]--><!----></button> <button class="btn-regular w-12 h-12 rounded-full"><!--[!--><!--[!--><!--[!--><!--]--><!--]--><!--]--></button> <button class="btn-plain w-10 h-10 rounded-lg" disabled><!--[!--><!--]--><!----></button> <button class="w-10 h-10 rounded-lg btn-plain"><!--[!--><!--[!--><!--[!--><!--]--><!--]--><!--]--></button></div> <div class="bottom-controls flex items-center gap-2"><button class="btn-plain w-8 h-8 rounded-lg"><!--[!--><!--[!--><!--[!--><!--]--><!--]--><!--]--></button> <div class="flex-1 h-2 bg-[var(--btn-regular-bg)] rounded-full cursor-pointer" role="slider" tabindex="0" aria-label="音量控制" aria-valuemin="0" aria-valuemax="100" aria-valuenow="70"><div class="h-full bg-[var(--primary)] rounded-full transition-all duration-100" style="width: 70%"></div></div> <button class="btn-plain w-8 h-8 rounded-lg"><!--[!--><!--]--><!----></button></div></div> <!--[!--><!--]--></div> <style>
.orb-player {
	position: relative;
	backdrop-filter: blur(10px);
	-webkit-backdrop-filter: blur(10px);
}
.orb-player::before {
	content: '';
	position: absolute;
	inset: -2px;
	background: linear-gradient(45deg, var(--primary), transparent, var(--primary));
	border-radius: 50%;
	z-index: -1;
	opacity: 0;
	transition: opacity 0.3s ease;
}
.orb-player:hover::before {
	opacity: 0.3;
	animation: rotate 2s linear infinite;
}
.orb-player .animate-pulse {
	animation: musicWave 1.5s ease-in-out infinite;
}
@keyframes rotate {
	from { transform: rotate(0deg); }
	to { transform: rotate(360deg); }
}
@keyframes musicWave {
	0%, 100% { transform: scaleY(0.5); }
	50% { transform: scaleY(1); }
}
.music-player.hidden-mode {
	width: 48px;
	height: 48px;
}
.music-player {
    max-width: 320px;
    -webkit-user-select: none;
       -moz-user-select: none;
            user-select: none;
}
.mini-player {
    width: 280px;
    position: absolute;
    bottom: 0;
    right: 0;
    /*left: 0;*/
}
.expanded-player {
    width: 320px;
    position: absolute;
    bottom: 0;
    right: 0;
}
.animate-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}
@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}
.progress-section div:hover,
.bottom-controls > div:hover {
    transform: scaleY(1.2);
    transition: transform 0.2s ease;
}
@media (max-width: 768px) {
    .music-player {
        max-width: 280px;
        /*left: 8px !important;*/
        bottom: 8px !important;
        right: 8px !important;
    }
    .music-player.expanded {
        width: calc(100vw - 16px);
        max-width: none;
        /*left: 8px !important;*/
        right: 8px !important;
    }
    .playlist-panel {
        width: calc(100vw - 16px) !important;
        /*left: 8px !important;*/
        right: 8px !important;
        max-width: none;
    }
    .controls {
        gap: 8px;
    }
    .controls button {
        width: 36px;
        height: 36px;
    }
    .controls button:nth-child(3) {
        width: 44px;
        height: 44px;
    }
}
@media (max-width: 480px) {
    .music-player {
        max-width: 260px;
    }
    .song-title {
        font-size: 14px;
    }
    .song-artist {
        font-size: 12px;
    }
    .controls {
        gap: 6px;
        margin-bottom: 12px;
    }
    .controls button {
        width: 32px;
        height: 32px;
    }
    .controls button:nth-child(3) {
        width: 40px;
        height: 40px;
    }
    .playlist-item {
        padding: 8px 12px;
    }
    .playlist-item .w-10 {
        width: 32px;
        height: 32px;
    }
}
@keyframes slide-up {
    from {
        transform: translateY(100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}
.animate-slide-up {
    animation: slide-up 0.3s ease-out;
}
@media (hover: none) and (pointer: coarse) {
    .music-player button,
    .playlist-item {
        min-height: 44px;
    }
    .progress-section > div,
    .bottom-controls > div:nth-child(2) {
        height: 12px;
    }
}
/* 自定义旋转动画，停止时保持当前位置 */
@keyframes spin-continuous {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}
.cover-container img {
    animation: spin-continuous 3s linear infinite;
    animation-play-state: paused;
}
.cover-container img.spinning {
    animation-play-state: running;
}
/* 让主题色按钮更有视觉反馈 */
button.bg-\[var\(--primary\)\] {
    box-shadow: 0 0 0 2px var(--primary);
    border: none;
}
</style><!--]--><!--]--><!--astro:end--></astro-island> <!-- Pio 看板娘组件 - 仅在启用时加载 -->  <!-- increase the page height during page transition to prevent the scrolling animation from jumping --> <div id="page-height-extend" class="hidden h-[300vh]" data-astro-cid-sckkx6r4 style="--bannerOffset: 15vh;--banner-height-home: 65vh;--banner-height: 35vh;--configHue: 240;--page-width: 90rem;"></div>  <script type="module" src="/_astro/Layout.astro_astro_type_script_index_0_lang.SkltkRAO.js"></script> <!-- 代码块折叠功能 --> <script type="module" src="/_astro/Layout.astro_astro_type_script_index_1_lang._R4ib5TO.js"></script> <!-- 主题切换综合性能优化器（包含代码块优化、重型元素优化、性能诊断） --> <script type="module" src="/_astro/Layout.astro_astro_type_script_index_2_lang.BMyF9r-v.js"></script> <script type="module" src="/_astro/Layout.astro_astro_type_script_index_3_lang.BuVRa6Ft.js"></script></body></html> 